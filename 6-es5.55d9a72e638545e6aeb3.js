function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var s=0;s<t.length;s++){var r=t[s];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _createClass(e,t,s){return t&&_defineProperties(e.prototype,t),s&&_defineProperties(e,s),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{"4shC":function(e,t,s){"use strict";s.r(t);var r=s("ofXK"),a=s("tyNb"),i=s("fXoL"),o=s("Jho9"),n=s("bTqV"),c=s("NFeN"),l=s("STbY"),u=s("7EHt"),h=s("/t3+");function d(e,t){1&e&&(i.Vb(0,"mat-icon",16),i.Cc(1,"star"),i.Ub())}function p(e,t){1&e&&(i.Vb(0,"mat-icon",16),i.Cc(1,"star"),i.Ub())}function m(e,t){if(1&e){var s=i.Wb();i.Vb(0,"button",17),i.dc("click",(function(e){return i.vc(s),i.hc().fireWorker("mason")})),i.Cc(1,"Fire Mason"),i.Ub()}if(2&e){var r=i.hc();i.mc("disabled",r.playerResources.stoneWorkers.length<1)}}function y(e,t){if(1&e){var s=i.Wb();i.Vb(0,"button",17),i.dc("click",(function(e){return i.vc(s),i.hc().fireWorker("trader")})),i.Cc(1,"Fire Trader"),i.Ub()}if(2&e){var r=i.hc();i.mc("disabled",r.playerResources.tradeWorkers.length<1)}}function b(e,t){1&e&&(i.Vb(0,"mat-icon",16),i.Cc(1,"star"),i.Ub())}function g(e,t){if(1&e){var s=i.Wb();i.Vb(0,"span"),i.Vb(1,"h2",5),i.Cc(2,"Hire Guards"),i.Ub(),i.Vb(3,"mat-accordion"),i.Vb(4,"mat-expansion-panel",6),i.Vb(5,"mat-expansion-panel-header",6),i.Vb(6,"mat-panel-title"),i.Vb(7,"span",7),i.Vb(8,"h4",8),i.Cc(9,"Hire and train guards"),i.Ub(),i.Bc(10,b,2,0,"mat-icon",9),i.Ub(),i.Ub(),i.Ub(),i.Vb(11,"button",10),i.dc("click",(function(e){i.vc(s);var t=i.hc();return t.displayUpgradeMenu("guard",t.guardCost)})),i.Cc(12),i.Ub(),i.Vb(13,"button",10),i.dc("click",(function(e){i.vc(s);var t=i.hc();return t.displayUpgradeMenu("guardWep",t.guardWeaponCost)})),i.Cc(14),i.Ub(),i.Vb(15,"button",10),i.dc("click",(function(e){i.vc(s);var t=i.hc();return t.displayUpgradeMenu("guardArmor",t.guardArmorCost)})),i.Cc(16),i.Ub(),i.Vb(17,"button",10),i.dc("click",(function(e){i.vc(s);var t=i.hc();return t.displayUpgradeMenu("guardSpeed",t.guardSpeedCost)})),i.Cc(18),i.Ub(),i.Ub(),i.Ub(),i.Ub()}if(2&e){var r=i.hc();i.Cb(10),i.mc("ngIf",r.guardsUpAval),i.Cb(1),i.mc("disabled",r.playerResources.money<r.guardCost),i.Cb(1),i.Ec("Hire Guard: $",r.guardCost,""),i.Cb(1),i.mc("disabled",r.playerResources.money<r.guardWeaponCost||99===r.playerResources.guardWeaponLvl),i.Cb(1),i.Ec("Upgrade Weapon: $",r.guardWeaponCost,""),i.Cb(1),i.mc("disabled",r.playerResources.money<r.guardArmorCost||99===r.playerResources.guardArmorLvl),i.Cb(1),i.Ec("Upgrade Armor: $",r.guardArmorCost,""),i.Cb(1),i.mc("disabled",r.playerResources.money<r.guardSpeedCost||99===r.playerResources.guardSpeedLvl),i.Cb(1),i.Ec("Upgrade Speed: $",r.guardSpeedCost,"")}}function v(e,t){1&e&&(i.Vb(0,"p",24),i.Cc(1,"Hired \ud83d\udc4d"),i.Ub())}function C(e,t){1&e&&(i.Vb(0,"p",24),i.Cc(1,"Upgraded \ud83d\udc4d"),i.Ub())}var k=function(e){return{"info-dm":e}};function f(e,t){if(1&e){var s=i.Wb();i.Vb(0,"div",18),i.dc("click",(function(e){return i.vc(s),i.hc().closeUpgradedMenu()})),i.Vb(1,"div",19),i.Vb(2,"mat-toolbar",20),i.Vb(3,"div",21),i.Vb(4,"p",22),i.Cc(5,"Tap Anywhere To Continue"),i.Ub(),i.Ub(),i.Ub(),i.Bc(6,v,2,0,"p",23),i.Bc(7,C,2,0,"p",23),i.Ub(),i.Ub()}if(2&e){var r=i.hc();i.Cb(1),i.mc("ngClass",i.pc(3,k,!0===r.optionsSelected.darkMode)),i.Cb(5),i.mc("ngIf","mason"===r.currentUpgradeStat||"trader"===r.currentUpgradeStat||"guard"===r.currentUpgradeStat),i.Cb(1),i.mc("ngIf","mason"!==r.currentUpgradeStat&&"trader"!==r.currentUpgradeStat&&"guard"!==r.currentUpgradeStat)}}function R(e,t){if(1&e){var s=i.Wb();i.Vb(0,"div",18),i.dc("click",(function(e){return i.vc(s),i.hc().closeHousingLimitModal()})),i.Vb(1,"div",19),i.Vb(2,"mat-toolbar",20),i.Vb(3,"div",21),i.Vb(4,"p",22),i.Cc(5,"Tap Anywhere To Continue"),i.Ub(),i.Ub(),i.Ub(),i.Vb(6,"p",25),i.Cc(7,"Not enough space for them to live.. Upgrade your Housing."),i.Ub(),i.Ub(),i.Ub()}if(2&e){var r=i.hc();i.Cb(1),i.mc("ngClass",i.pc(1,k,!0===r.optionsSelected.darkMode))}}function w(e,t){if(1&e){var s=i.Wb();i.Vb(0,"div",26),i.Vb(1,"div",19),i.Vb(2,"mat-toolbar"),i.Vb(3,"div",21),i.Vb(4,"p",22),i.Cc(5,"Are You Sure?"),i.Ub(),i.Ub(),i.Ub(),i.Vb(6,"span"),i.Vb(7,"p",25),i.Cc(8,"Once they are fired, the deal is final."),i.Ub(),i.Vb(9,"button",27),i.dc("click",(function(e){return i.vc(s),i.hc().deleteWorker()})),i.Cc(10,"Fire Them"),i.Ub(),i.Vb(11,"button",27),i.dc("click",(function(e){return i.vc(s),i.hc().cancelFireWorker()})),i.Cc(12,"Nevermind"),i.Ub(),i.Ub(),i.Ub(),i.Ub()}if(2&e){var r=i.hc();i.Cb(1),i.mc("ngClass",i.pc(1,k,!0===r.optionsSelected.darkMode))}}function T(e,t){if(1&e&&(i.Vb(0,"p",30),i.Cc(1),i.Ub()),2&e){var s=i.hc(2);i.Cb(1),i.Ec("Upgrade Cost: $",s.currentUpgradeCost,"")}}function S(e,t){if(1&e&&(i.Vb(0,"p",30),i.Cc(1),i.Ub()),2&e){var s=i.hc(2);i.Cb(1),i.Ec("Worker Cost: $",s.currentUpgradeCost,"")}}function U(e,t){if(1&e&&(i.Vb(0,"p",30),i.Cc(1),i.Ub()),2&e){var s=i.hc(2);i.Cb(1),i.Ec("Guard Cost: $",s.currentUpgradeCost,"")}}function W(e,t){if(1&e&&(i.Vb(0,"p",30),i.Cc(1),i.Vb(2,"span",31),i.Cc(3),i.Ub(),i.Ub()),2&e){var s=i.hc(2);i.Cb(1),i.Ec("Level: ",s.currentUpgradeLvl," => "),i.Cb(2),i.Dc(s.currentUpgradeLvl+1)}}function x(e,t){if(1&e&&(i.Vb(0,"p",30),i.Cc(1),i.Vb(2,"span",31),i.Cc(3),i.Ub(),i.Ub()),2&e){var s=i.hc(2);i.Cb(1),i.Ec("Count: ",s.currentUpgradeLvl," => "),i.Cb(2),i.Dc(s.currentUpgradeLvl+1)}}function M(e,t){if(1&e&&(i.Vb(0,"span"),i.Vb(1,"p",30),i.Cc(2),i.Vb(3,"span",31),i.Cc(4),i.Ub(),i.Ub(),i.Ub()),2&e){var s=i.hc(2);i.Cb(2),i.Ec("Chisel Damage: ",s.chiselDmg," => "),i.Cb(2),i.Dc(s.nextChiselDmg)}}function L(e,t){if(1&e&&(i.Vb(0,"span"),i.Vb(1,"p",30),i.Cc(2),i.Vb(3,"span",31),i.Cc(4),i.Ub(),i.Ub(),i.Vb(5,"p",30),i.Cc(6),i.Vb(7,"span",31),i.Cc(8),i.Ub(),i.Ub(),i.Ub()),2&e){var s=i.hc(2);i.Cb(2),i.Fc("Sell at Once: ",s.playerLowBrickSell,"-",s.playerMaxBrickSell," => "),i.Cb(2),i.Fc("",s.playerLowBrickSell,"-",s.playerMaxBrickSell+1,""),i.Cb(2),i.Fc("Selling Rate: $",s.playerBarterLowRate+s.workerBarterRate,"-$",s.playerBarterMaxRate+s.workerBarterRate," => "),i.Cb(2),i.Fc("$",s.playerBarterLowRate+s.workerBarterRate+1,"-$",s.playerBarterMaxRate+s.workerBarterRate+1,"")}}function q(e,t){if(1&e&&(i.Vb(0,"span"),i.Vb(1,"p",30),i.Cc(2),i.Vb(3,"span",31),i.Cc(4),i.Ub(),i.Cc(5," Workers"),i.Ub(),i.Ub()),2&e){var s=i.hc(2);i.Cb(2),i.Ec("Housing Space: ",s.playerResourcesTemp.housingLimit," => "),i.Cb(2),i.Dc(s.playerResourcesTemp.housingLimit+8)}}function V(e,t){if(1&e&&(i.Vb(0,"span"),i.Vb(1,"p",30),i.Cc(2),i.Vb(3,"span",31),i.Cc(4),i.Ub(),i.Cc(5," Pallets"),i.Ub(),i.Ub()),2&e){var s=i.hc(2);i.Cb(2),i.Ec("Storage: ",s.playerResourcesTemp.stockpile," => "),i.Cb(2),i.Dc(s.playerResourcesTemp.stockpile+10)}}function P(e,t){if(1&e&&(i.Vb(0,"span"),i.Vb(1,"p",30),i.Cc(2),i.Ub(),i.Vb(3,"p",30),i.Cc(4),i.Ub(),i.Vb(5,"p",30),i.Cc(6),i.Ub(),i.Ub()),2&e){var s=i.hc(2);i.Cb(2),i.Fc("Workload: ",s.masonLowWorkload,"-",s.masonMaxWorkload," Strikes"),i.Cb(2),i.Ec("Chisel Damage: ",s.chiselDmg,""),i.Cb(2),i.Ec("Move Speed: ",s.masonMovementSpeed," steps/sec")}}function I(e,t){if(1&e&&(i.Vb(0,"span"),i.Vb(1,"p",30),i.Cc(2),i.Ub(),i.Vb(3,"p",30),i.Cc(4),i.Ub(),i.Vb(5,"p",30),i.Cc(6),i.Ub(),i.Ub()),2&e){var s=i.hc(2);i.Cb(2),i.Fc("Sell at Once: ",s.playerLowBrickSell,"-",s.playerMaxBrickSell,""),i.Cb(2),i.Fc("Selling Rate: $",s.playerBarterLowRate+s.workerBarterRate,"-$",s.playerBarterMaxRate+s.workerBarterRate,""),i.Cb(2),i.Ec("Move Speed: ",s.traderMovementSpeed," steps/sec")}}function B(e,t){if(1&e&&(i.Vb(0,"span"),i.Vb(1,"p",30),i.Cc(2),i.Vb(3,"span",31),i.Cc(4),i.Ub(),i.Cc(5," Strikes"),i.Ub(),i.Vb(6,"p",30),i.Cc(7),i.Vb(8,"span",31),i.Cc(9),i.Ub(),i.Cc(10," hits/sec"),i.Ub(),i.Vb(11,"p",30),i.Cc(12),i.Vb(13,"span",31),i.Cc(14),i.Ub(),i.Cc(15," steps/sec"),i.Ub(),i.Ub()),2&e){var s=i.hc(2);i.Cb(2),i.Fc("Workload: ",s.masonLowWorkload,"-",s.masonMaxWorkload," => "),i.Cb(2),i.Fc("",s.masonLowWorkload+1,"-",s.masonMaxWorkload+1,""),i.Cb(3),i.Ec("Chisel Speed: ",s.masonChiselSpeed," => "),i.Cb(2),i.Dc(s.masonUpChiselSpeed),i.Cb(3),i.Ec("Move Speed: ",s.masonMovementSpeed," => "),i.Cb(2),i.Dc(s.masonUpMovementSpeed)}}function A(e,t){if(1&e&&(i.Vb(0,"span"),i.Vb(1,"p",30),i.Cc(2),i.Vb(3,"span",31),i.Cc(4),i.Ub(),i.Ub(),i.Vb(5,"p",30),i.Cc(6),i.Vb(7,"span",31),i.Cc(8),i.Ub(),i.Cc(9," steps/sec"),i.Ub(),i.Ub()),2&e){var s=i.hc(2);i.Cb(2),i.Fc("Selling Rate: $",s.playerBarterLowRate+s.workerBarterRate,"-$",s.playerBarterMaxRate+s.workerBarterRate," => "),i.Cb(2),i.Fc("$",s.playerBarterLowRate+s.workerBarterRate+1,"-$",s.playerBarterMaxRate+s.workerBarterRate+1,""),i.Cb(2),i.Ec("Move Speed: ",s.traderMovementSpeed," => "),i.Cb(2),i.Dc(s.traderUpMovementSpeed)}}function O(e,t){if(1&e&&(i.Vb(0,"span"),i.Vb(1,"p",30),i.Cc(2),i.Ub(),i.Vb(3,"p",30),i.Cc(4),i.Ub(),i.Vb(5,"p",30),i.Cc(6),i.Ub(),i.Ub()),2&e){var s=i.hc(2);i.Cb(2),i.Ec("Weapon Damage: ",s.playerResourcesTemp.guardWeaponLvl+1," Health"),i.Cb(2),i.Ec("Armor Rating: ",s.playerResourcesTemp.guardArmorLvl+1,""),i.Cb(2),i.Ec("Hit Chance: ",s.playerResourcesTemp.guardSpeedLvl+1,"%")}}function G(e,t){if(1&e&&(i.Vb(0,"span"),i.Vb(1,"p",30),i.Cc(2),i.Vb(3,"span",31),i.Cc(4),i.Ub(),i.Cc(5," Health"),i.Ub(),i.Ub()),2&e){var s=i.hc(2);i.Cb(2),i.Ec("Weapon Damage: ",s.playerResourcesTemp.guardWeaponLvl+1," => "),i.Cb(2),i.Dc(s.playerResourcesTemp.guardWeaponLvl+2)}}function D(e,t){if(1&e&&(i.Vb(0,"span"),i.Vb(1,"p",30),i.Cc(2),i.Vb(3,"span",31),i.Cc(4),i.Ub(),i.Ub(),i.Ub()),2&e){var s=i.hc(2);i.Cb(2),i.Ec("Armor Rating: ",s.playerResourcesTemp.guardArmorLvl+1," => "),i.Cb(2),i.Dc(s.playerResourcesTemp.guardArmorLvl+2)}}function _(e,t){if(1&e&&(i.Vb(0,"span"),i.Vb(1,"p",30),i.Cc(2),i.Vb(3,"span",31),i.Cc(4),i.Ub(),i.Cc(5,"%"),i.Ub(),i.Ub()),2&e){var s=i.hc(2);i.Cb(2),i.Ec("Hit Chance: ",s.playerResourcesTemp.guardSpeedLvl+1,"% => "),i.Cb(2),i.Dc(s.playerResourcesTemp.guardSpeedLvl+2)}}function E(e,t){1&e&&(i.Vb(0,"span"),i.Cc(1,"Upgrade"),i.Ub())}function H(e,t){1&e&&(i.Vb(0,"span"),i.Cc(1,"Hire"),i.Ub())}function F(e,t){if(1&e){var s=i.Wb();i.Vb(0,"div",18),i.dc("click",(function(e){return i.vc(s),i.hc().closeUpgradeMenu()})),i.Vb(1,"div",19),i.Vb(2,"mat-toolbar"),i.Vb(3,"div",21),i.Vb(4,"p",22),i.Cc(5,"Tap Anywhere To Continue"),i.Ub(),i.Ub(),i.Ub(),i.Bc(6,T,2,1,"p",28),i.Bc(7,S,2,1,"p",28),i.Bc(8,U,2,1,"p",28),i.Vb(9,"p",25),i.Cc(10),i.Ub(),i.Bc(11,W,4,2,"p",28),i.Bc(12,x,4,2,"p",28),i.Bc(13,M,5,2,"span",13),i.Bc(14,L,9,8,"span",13),i.Bc(15,q,6,2,"span",13),i.Bc(16,V,6,2,"span",13),i.Bc(17,P,7,4,"span",13),i.Bc(18,I,7,5,"span",13),i.Bc(19,B,16,8,"span",13),i.Bc(20,A,10,6,"span",13),i.Bc(21,O,7,3,"span",13),i.Bc(22,G,6,2,"span",13),i.Bc(23,D,5,2,"span",13),i.Bc(24,_,6,2,"span",13),i.Vb(25,"button",29),i.dc("click",(function(e){return i.vc(s),i.hc().upgradeStat()})),i.Bc(26,E,2,0,"span",13),i.Bc(27,H,2,0,"span",13),i.Ub(),i.Ub(),i.Ub()}if(2&e){var r=i.hc();i.Cb(1),i.mc("ngClass",i.pc(21,k,!0===r.optionsSelected.darkMode)),i.Cb(5),i.mc("ngIf","mason"!==r.currentUpgradeStat&&"trader"!==r.currentUpgradeStat&&"guard"!==r.currentUpgradeStat),i.Cb(1),i.mc("ngIf","mason"===r.currentUpgradeStat||"trader"===r.currentUpgradeStat),i.Cb(1),i.mc("ngIf","guard"===r.currentUpgradeStat),i.Cb(2),i.Dc(r.currentUpgradeDesc),i.Cb(1),i.mc("ngIf","mason"!==r.currentUpgradeStat&&"trader"!==r.currentUpgradeStat&&"guard"!==r.currentUpgradeStat),i.Cb(1),i.mc("ngIf","mason"===r.currentUpgradeStat||"trader"===r.currentUpgradeStat||"guard"===r.currentUpgradeStat),i.Cb(1),i.mc("ngIf","chisel"===r.currentUpgradeStat),i.Cb(1),i.mc("ngIf","barter"===r.currentUpgradeStat),i.Cb(1),i.mc("ngIf","housing"===r.currentUpgradeStat),i.Cb(1),i.mc("ngIf","stockpile"===r.currentUpgradeStat),i.Cb(1),i.mc("ngIf","mason"===r.currentUpgradeStat),i.Cb(1),i.mc("ngIf","trader"===r.currentUpgradeStat),i.Cb(1),i.mc("ngIf","upMason"===r.currentUpgradeStat),i.Cb(1),i.mc("ngIf","upTrader"===r.currentUpgradeStat),i.Cb(1),i.mc("ngIf","guard"===r.currentUpgradeStat),i.Cb(1),i.mc("ngIf","guardWep"===r.currentUpgradeStat),i.Cb(1),i.mc("ngIf","guardArmor"===r.currentUpgradeStat),i.Cb(1),i.mc("ngIf","guardSpeed"===r.currentUpgradeStat),i.Cb(2),i.mc("ngIf","guard"!==r.currentUpgradeStat&&"trader"!==r.currentUpgradeStat&&"mason"!==r.currentUpgradeStat),i.Cb(1),i.mc("ngIf","guard"===r.currentUpgradeStat||"trader"===r.currentUpgradeStat||"mason"===r.currentUpgradeStat)}}var z,$=((z=function(){function e(){_classCallCheck(this,e),this.playerResourcesTemp={chiselLvl:0,money:0,bricks:0,clicks:0,barterLvl:0,tradeWorkers:[],tradeWorkersCount:0,tradeWorkersLvl:0,stoneWorkers:[],stoneCuttersCount:0,stoneWorkerLvl:0,guards:[],guardCount:0,guardWeaponLvl:0,guardArmorLvl:0,guardSpeedLvl:0,dayCounter:0,daysPast:0,version:.5,totalBricks:0,totalMoney:0,newPlayer:!0,quests:{questLvl:0,questDesc:"",questReward:0,completed:!1,quest:{complete:!1,chiselLvl:0,barterLvl:0,masons:0,masonLvl:0,traders:0,traderLvl:0}},sky:{sun:{x:0,y:0},moon:{x:0,y:0}},housingLimit:0,housingLvl:0,totalWorkers:0,stockpile:0,stockpileLvl:0,screenWidth:0,screenChange:!1,gameLevel:1,currentChapter:"",newPlayerVault:!0,banditWave:0,bandits:[],banditWaveCounter:0,banditSpawnCount:0,isBanditWaveStarted:!1,moneyTaken:0,credit:3,banditsStopped:0,totalGuards:0,tutorialGuards:0},this.pageHeight=0,this.isHousingFull=!1,this.statUpgraded=!1,this.stoneWorkerReturn=new i.o,this.tradeWorkerReturn=new i.o,this.guardReturn=new i.o,this.playerResourcesReturn=new i.o,this.chiselLvlCost=10,this.barterLvlCost=10,this.stoneWorkerCost=30,this.tradeWorkerCost=30,this.guardCost=100,this.trainStoneWorkerCost=25,this.trainTradeWorkerCost=25,this.stockpileCost=50,this.housingCost=50,this.guardWeaponCost=200,this.guardArmorCost=200,this.guardSpeedCost=200,this.displayFireWorker=!1,this.economyUpAval=!1,this.workersUpAval=!1,this.guardsUpAval=!1,this.upgradeMenuShow=!1,this.currentUpgradeCost=0,this.currentUpgradeDesc="",this.currentUpgradeStat="",this.currentUpgradeLvl=0,this.chiselDmg=0,this.nextChiselDmg=0,this.playerBarterMaxRate=0,this.playerBarterLowRate=0,this.workerBarterRate=0,this.masonChiselSpeed=0,this.masonUpChiselSpeed=0,this.playerMaxBrickSell=0,this.playerLowBrickSell=0,this.masonMaxWorkload=0,this.masonLowWorkload=0,this.masonMovementSpeed=0,this.masonUpMovementSpeed=0,this.traderMovementSpeed=0,this.traderUpMovementSpeed=0,this.optionsSelected={darkMode:!1,soundsOn:!0},this.stoneWallImagePath="assets/images/stoneWall.png",this.upgradeSound=new Audio,this.upgradeSoundPath="assets/sounds/upgrade.wav"}return _createClass(e,[{key:"ngOnInit",value:function(){if(this.playerResourcesTemp.newPlayer&&document.getElementById("Close-Upgrades-Btn")&&(document.getElementById("Close-Upgrades-Btn").style.border="3px solid #8ADC41"),this.upgradeSound.src=this.upgradeSoundPath,this.upgradeSound.load(),localStorage.length>0&&localStorage.getItem("mason_options")){var e=JSON.parse(localStorage.getItem("mason_options"));this.optionsSelected={darkMode:e.darkMode,soundsOn:e.soundsOn};var t=document.getElementsByTagName("body");this.optionsSelected.darkMode?t[0].classList.add("darkMode"):t[0].classList.remove("darkMode")}else{var s=JSON.stringify(this.optionsSelected);localStorage.setItem("mason_options",s)}this.calcHeightOfPage();for(var r=0;r<this.playerResourcesTemp.chiselLvl;r++){var a=Math.trunc(this.chiselLvlCost/4)+Math.trunc(this.chiselLvlCost/3);this.chiselLvlCost+=a}for(var i=0;i<this.playerResourcesTemp.barterLvl;i++){var o=Math.trunc(this.barterLvlCost/2)+Math.trunc(this.barterLvlCost/3);this.barterLvlCost+=o}for(var n=0;n<this.playerResourcesTemp.stoneWorkerLvl;n++){var c=Math.trunc(this.trainStoneWorkerCost/10);this.trainStoneWorkerCost+=c;var l=Math.trunc(this.stoneWorkerCost/7);this.stoneWorkerCost+=l}for(var u=0;u<this.playerResourcesTemp.tradeWorkersLvl;u++){var h=Math.trunc(this.trainTradeWorkerCost/10);this.trainTradeWorkerCost+=h;var d=Math.trunc(this.tradeWorkerCost/7);this.tradeWorkerCost+=d}for(var p=0;p<this.playerResourcesTemp.stoneWorkers.length;p++){var m=Math.trunc(this.trainStoneWorkerCost/10);this.trainStoneWorkerCost+=m}for(var y=0;y<this.playerResourcesTemp.tradeWorkers.length;y++){var b=Math.trunc(this.trainTradeWorkerCost/10);this.trainTradeWorkerCost+=b}for(var g=0;g<this.playerResourcesTemp.stockpileLvl;g++){var v=Math.trunc(this.stockpileCost/4);this.stockpileCost+=v}for(var C=0;C<this.playerResourcesTemp.housingLvl;C++){var k=Math.trunc(this.housingCost/4);this.housingCost+=k}for(var f=0;f<this.playerResourcesTemp.guardWeaponLvl;f++){this.guardCost+=10;var R=Math.trunc(this.guardWeaponCost/10);this.guardWeaponCost+=R}for(var w=0;w<this.playerResourcesTemp.guardArmorLvl;w++){this.guardCost+=10;var T=Math.trunc(this.guardArmorCost/10);this.guardArmorCost+=T}for(var S=0;S<this.playerResourcesTemp.guardSpeedLvl;S++){this.guardCost+=10;var U=Math.trunc(this.guardSpeedCost/10);this.guardSpeedCost+=U}this.economyUpCheck(),this.workerUpCheck(),this.guardUpCheck()}},{key:"ngOnDestroy",value:function(){this.upgradeSound=new Audio,clearInterval(this.displayUpgradeInterval)}},{key:"hireStoneWorker",value:function(){if(this.playerResourcesTemp.totalWorkers<this.playerResourcesTemp.housingLimit){this.playerResourcesTemp.money-=this.stoneWorkerCost,this.playerResourcesTemp.stoneCuttersCount++;var e=Math.trunc(this.trainStoneWorkerCost/10);this.trainStoneWorkerCost+=e,this.playerResourcesTemp.totalWorkers++,this.playerResourcesReturn.emit(this.playerResourcesTemp),this.stoneWorkerReturn.emit(!0),this.economyUpCheck(),this.workerUpCheck(),this.guardUpCheck()}else this.isHousingFull=!0}},{key:"hireTradeWorker",value:function(){if(this.playerResourcesTemp.totalWorkers<this.playerResourcesTemp.housingLimit){this.playerResourcesTemp.money-=this.tradeWorkerCost,this.playerResourcesTemp.tradeWorkersCount++;var e=Math.trunc(this.trainTradeWorkerCost/10);this.trainTradeWorkerCost+=e,this.playerResourcesTemp.totalWorkers++,this.playerResourcesReturn.emit(this.playerResourcesTemp),this.tradeWorkerReturn.emit(!0),this.economyUpCheck(),this.workerUpCheck(),this.guardUpCheck()}else this.isHousingFull=!0}},{key:"hireGuard",value:function(){this.playerResourcesTemp.totalWorkers<this.playerResourcesTemp.housingLimit?(this.playerResourcesTemp.money-=this.guardCost,this.playerResourcesReturn.emit(this.playerResourcesTemp),this.guardReturn.emit(!0),this.economyUpCheck(),this.workerUpCheck(),this.guardUpCheck()):this.isHousingFull=!0}},{key:"upgradeChisel",value:function(){this.playerResourcesTemp.money-=this.chiselLvlCost,this.playerResourcesTemp.chiselLvl++,this.playerResourcesReturn.emit(this.playerResourcesTemp);var e=Math.trunc(this.chiselLvlCost/4)+Math.trunc(this.chiselLvlCost/3);this.chiselLvlCost+=e,this.economyUpCheck(),this.workerUpCheck(),this.guardUpCheck()}},{key:"trainMason",value:function(){this.playerResourcesTemp.money-=this.trainStoneWorkerCost,this.playerResourcesTemp.stoneWorkerLvl++,this.playerResourcesReturn.emit(this.playerResourcesTemp);var e=Math.trunc(this.trainStoneWorkerCost/10);this.trainStoneWorkerCost+=e;var t=Math.trunc(this.stoneWorkerCost/7);this.stoneWorkerCost+=t,this.economyUpCheck(),this.workerUpCheck(),this.guardUpCheck()}},{key:"trainTrader",value:function(){this.playerResourcesTemp.money-=this.trainTradeWorkerCost,this.playerResourcesTemp.tradeWorkersLvl++,this.playerResourcesReturn.emit(this.playerResourcesTemp);var e=Math.trunc(this.trainTradeWorkerCost/10);this.trainTradeWorkerCost+=e;var t=Math.trunc(this.tradeWorkerCost/7);this.tradeWorkerCost+=t,this.economyUpCheck(),this.workerUpCheck(),this.guardUpCheck()}},{key:"upgradeBarter",value:function(){this.playerResourcesTemp.money-=this.barterLvlCost,this.playerResourcesTemp.barterLvl++,this.playerResourcesReturn.emit(this.playerResourcesTemp);var e=Math.trunc(this.barterLvlCost/2)+Math.trunc(this.barterLvlCost/3);this.barterLvlCost+=e,this.economyUpCheck(),this.workerUpCheck(),this.guardUpCheck()}},{key:"upgradeStockpile",value:function(){this.playerResourcesTemp.money-=this.stockpileCost,this.playerResourcesTemp.stockpile+=10,this.playerResourcesTemp.stockpileLvl++,this.playerResourcesReturn.emit(this.playerResourcesTemp);var e=Math.trunc(this.stockpileCost/4);this.stockpileCost+=e,this.economyUpCheck(),this.workerUpCheck(),this.guardUpCheck()}},{key:"upgradeHousing",value:function(){this.playerResourcesTemp.money-=this.housingCost,this.playerResourcesTemp.housingLimit+=8,this.playerResourcesTemp.housingLvl++,this.playerResourcesReturn.emit(this.playerResourcesTemp);var e=Math.trunc(this.housingCost/4);this.housingCost+=e,this.economyUpCheck(),this.workerUpCheck(),this.guardUpCheck()}},{key:"upgradeGuardWeapon",value:function(){this.playerResourcesTemp.money-=this.guardWeaponCost,this.playerResourcesTemp.guardWeaponLvl++,this.guardCost+=10;var e=Math.trunc(this.guardWeaponCost/10);this.guardWeaponCost+=e,this.playerResourcesReturn.emit(this.playerResourcesTemp),this.economyUpCheck(),this.workerUpCheck(),this.guardUpCheck()}},{key:"upgradeGuardArmor",value:function(){this.playerResourcesTemp.money-=this.guardArmorCost,this.playerResourcesTemp.guardArmorLvl++,this.guardCost+=10;var e=Math.trunc(this.guardArmorCost/10);this.guardArmorCost+=e,this.playerResourcesReturn.emit(this.playerResourcesTemp),this.economyUpCheck(),this.workerUpCheck(),this.guardUpCheck()}},{key:"upgradeGuardSpeed",value:function(){this.playerResourcesTemp.money-=this.guardSpeedCost,this.playerResourcesTemp.guardSpeedLvl++,this.guardCost+=10;var e=Math.trunc(this.guardSpeedCost/10);this.guardSpeedCost+=e,this.playerResourcesReturn.emit(this.playerResourcesTemp),this.economyUpCheck(),this.workerUpCheck(),this.guardUpCheck()}},{key:"calcHeightOfPage",value:function(){var e=.62*window.innerHeight,t=.0733*window.innerWidth;this.pageHeight=e+t}},{key:"onResize",value:function(e){this.calcHeightOfPage()}},{key:"closeHousingLimitModal",value:function(){this.isHousingFull=!1}},{key:"fireWorker",value:function(e){this.displayFireWorker=!0,this.workerFired=e}},{key:"deleteWorker",value:function(){"mason"===this.workerFired?(this.playerResourcesTemp.stoneWorkers.splice(this.playerResourcesTemp.stoneWorkers.length-1,1),this.playerResourcesTemp.stoneCuttersCount--,this.playerResourcesReturn.emit(this.playerResourcesTemp)):"trader"===this.workerFired&&(this.playerResourcesTemp.tradeWorkers.splice(this.playerResourcesTemp.tradeWorkers.length-1,1),this.playerResourcesTemp.tradeWorkersCount--,this.playerResourcesReturn.emit(this.playerResourcesTemp)),this.cancelFireWorker()}},{key:"cancelFireWorker",value:function(){this.displayFireWorker=!1}},{key:"economyUpCheck",value:function(){this.economyUpAval=this.playerResourcesTemp.money>=this.chiselLvlCost||this.playerResourcesTemp.money>=this.barterLvlCost||this.playerResourcesTemp.money>=this.stockpileCost||this.playerResourcesTemp.money>=this.housingCost}},{key:"workerUpCheck",value:function(){this.workersUpAval=this.playerResourcesTemp.money>=this.stoneWorkerCost||this.playerResourcesTemp.money>=this.tradeWorkerCost||this.playerResourcesTemp.money>=this.trainStoneWorkerCost||this.playerResourcesTemp.money>=this.trainTradeWorkerCost}},{key:"guardUpCheck",value:function(){this.guardsUpAval=this.playerResourcesTemp.money>=this.guardCost||this.playerResourcesTemp.money>=this.guardWeaponCost||this.playerResourcesTemp.money>=this.guardArmorCost||this.playerResourcesTemp.money>=this.guardSpeedCost}},{key:"displayUpgradeMenu",value:function(e,t){this.upgradeMenuShow=!0,this.currentUpgradeStat=e,this.currentUpgradeCost=t,this.displayUpgradeDesc()}},{key:"displayUpgradeDesc",value:function(){"chisel"===this.currentUpgradeStat?(this.currentUpgradeDesc="Upgrading your Chisel will help you and your Masons shape the rocks into bricks faster.",this.currentUpgradeLvl=this.playerResourcesTemp.chiselLvl,this.calcPlayerChiselDmg()):"barter"===this.currentUpgradeStat?(this.currentUpgradeDesc="Upgrading the Bartering skill will help you and your Traders sell more bricks at a better price.",this.currentUpgradeLvl=this.playerResourcesTemp.barterLvl,this.calcPlayerBarterRate(),this.calcWorkerBarterRate(),this.calcBarterSellCount()):"housing"===this.currentUpgradeStat?(this.currentUpgradeDesc="Upgrading your Housing will increase the number of rooms availiable for your workers to live and sleep.",this.currentUpgradeLvl=this.playerResourcesTemp.housingLvl):"stockpile"===this.currentUpgradeStat?(this.currentUpgradeDesc="Upgrading your Stockpile will increase the number of bricks you can store at once.",this.currentUpgradeLvl=this.playerResourcesTemp.stockpileLvl):"mason"===this.currentUpgradeStat?(this.currentUpgradeDesc="Masons will help shape the bricks for you. They will expect $2 a day as starting pay.",this.currentUpgradeLvl=this.playerResourcesTemp.stoneCuttersCount,this.calcMasonWorkload(),this.calcPlayerChiselDmg(),this.calcMasonMovementSpeed()):"trader"===this.currentUpgradeStat?(this.currentUpgradeDesc="Traders will sell the bricks for you. They will expect $2 a day as starting pay.",this.currentUpgradeLvl=this.playerResourcesTemp.tradeWorkersCount,this.calcPlayerBarterRate(),this.calcWorkerBarterRate(),this.calcBarterSellCount(),this.calcTraderMovementSpeed()):"upMason"===this.currentUpgradeStat?(this.currentUpgradeDesc="Training Masons will increase their movement speed and will work harder. They will expect $2 more a day.",this.currentUpgradeLvl=this.playerResourcesTemp.stoneWorkerLvl,this.calcUpMasonSpeed(),this.calcMasonChiselSpeed(),this.calcUpMasonChiselSpeed(),this.calcMasonWorkload(),this.calcMasonMovementSpeed()):"upTrader"===this.currentUpgradeStat?(this.currentUpgradeDesc="Training Traders will increase their movement speed and increase how much you can sell each brick for. They will expect $2 more a day.",this.currentUpgradeLvl=this.playerResourcesTemp.tradeWorkersLvl,this.calcPlayerBarterRate(),this.calcWorkerBarterRate(),this.calcBarterSellCount(),this.calcTraderMovementSpeed(),this.calcUpTraderSpeed()):"guard"===this.currentUpgradeStat?(this.currentUpgradeDesc="Guards will protect your money from any bandit trying to take it. Guards will expect a fix rate of $20 a day regardless of skills.",this.currentUpgradeLvl=this.playerResourcesTemp.guardCount):"guardWep"===this.currentUpgradeStat?(this.currentUpgradeDesc="Upgrading the weapon of the guards will increase the damage they can do.",this.currentUpgradeLvl=this.playerResourcesTemp.guardWeaponLvl):"guardArmor"===this.currentUpgradeStat?(this.currentUpgradeDesc="Upgrading the armor of your guards will increase the number of hits they can take in battle.",this.currentUpgradeLvl=this.playerResourcesTemp.guardArmorLvl):"guardSpeed"===this.currentUpgradeStat&&(this.currentUpgradeDesc="Upgrading the guards speed will increase their attack rate.",this.currentUpgradeLvl=this.playerResourcesTemp.guardSpeedLvl)}},{key:"upgradeStat",value:function(){"chisel"===this.currentUpgradeStat?this.upgradeChisel():"barter"===this.currentUpgradeStat?this.upgradeBarter():"housing"===this.currentUpgradeStat?this.upgradeHousing():"stockpile"===this.currentUpgradeStat?this.upgradeStockpile():"mason"===this.currentUpgradeStat?(this.playerResourcesTemp.housingLimit>this.playerResourcesTemp.totalWorkers&&(this.statUpgraded=!0),this.hireStoneWorker()):"trader"===this.currentUpgradeStat?(this.playerResourcesTemp.housingLimit>this.playerResourcesTemp.totalWorkers&&(this.statUpgraded=!0),this.hireTradeWorker()):"upMason"===this.currentUpgradeStat?this.trainMason():"upTrader"===this.currentUpgradeStat?this.trainTrader():"guard"===this.currentUpgradeStat?(this.playerResourcesTemp.housingLimit>this.playerResourcesTemp.totalWorkers&&(this.statUpgraded=!0),this.hireGuard()):"guardWep"===this.currentUpgradeStat?this.upgradeGuardWeapon():"guardArmor"===this.currentUpgradeStat?this.upgradeGuardArmor():"guardSpeed"===this.currentUpgradeStat&&this.upgradeGuardSpeed(),"mason"!==this.currentUpgradeStat&&"trader"!==this.currentUpgradeStat&&"guard"!==this.currentUpgradeStat&&(this.statUpgraded=!0)}},{key:"closeUpgradedMenu",value:function(){this.optionsSelected.soundsOn&&this.upgradeSound.play(),this.statUpgraded=!1,this.currentUpgradeStat=""}},{key:"closeUpgradeMenu",value:function(){this.upgradeMenuShow=!1,this.currentUpgradeCost=0,this.currentUpgradeDesc="",this.resetStats()}},{key:"resetStats",value:function(){this.chiselDmg=0,this.nextChiselDmg=0,this.playerBarterLowRate=0,this.playerBarterMaxRate=0,this.workerBarterRate=0,this.masonMaxWorkload=0,this.masonLowWorkload=0,this.masonMovementSpeed=0,this.playerMaxBrickSell=0,this.playerLowBrickSell=0,this.traderMovementSpeed=0,this.masonUpMovementSpeed=0,this.masonChiselSpeed=0,this.masonUpChiselSpeed=0,this.traderUpMovementSpeed=0}},{key:"calcPlayerChiselDmg",value:function(){this.chiselDmg+=1;for(var e=0;e<this.playerResourcesTemp.chiselLvl;e++)this.chiselDmg+=.6;this.chiselDmg=+this.chiselDmg.toFixed(2),this.nextChiselDmg=+(this.chiselDmg+.6).toFixed(2)}},{key:"calcPlayerBarterRate",value:function(){this.playerBarterLowRate=this.playerResourcesTemp.barterLvl+1,this.playerBarterMaxRate=this.playerBarterLowRate+2}},{key:"calcWorkerBarterRate",value:function(){this.workerBarterRate=this.playerResourcesTemp.tradeWorkersLvl}},{key:"calcMasonWorkload",value:function(){this.masonLowWorkload=3+this.playerResourcesTemp.stoneWorkerLvl,this.masonMaxWorkload=7+this.playerResourcesTemp.stoneWorkerLvl}},{key:"calcMasonMovementSpeed",value:function(){for(var e=0,t=0;t<this.playerResourcesTemp.stoneWorkerLvl;t++)e+=.05*this.playerResources.screenWidth;this.masonMovementSpeed=+((.5*this.playerResources.screenWidth+e)/100).toFixed(2)}},{key:"calcBarterSellCount",value:function(){this.playerMaxBrickSell=1+this.playerResourcesTemp.barterLvl,this.playerLowBrickSell=1}},{key:"calcTraderMovementSpeed",value:function(){for(var e=0,t=0;t<this.playerResourcesTemp.tradeWorkersLvl;t++)e+=.05*this.playerResources.screenWidth;this.traderMovementSpeed=+((.5*this.playerResources.screenWidth+e)/100).toFixed(2)}},{key:"calcUpMasonSpeed",value:function(){for(var e=0,t=0;t<this.playerResourcesTemp.stoneWorkerLvl+1;t++)e+=.05*this.playerResources.screenWidth;this.masonUpMovementSpeed=+((.5*this.playerResources.screenWidth+e)/100).toFixed(2)}},{key:"calcMasonChiselSpeed",value:function(){var e=1e3-10*this.playerResourcesTemp.stoneWorkerLvl;e<=30&&(e=30),this.masonChiselSpeed=+(1e3/e).toFixed(2)}},{key:"calcUpMasonChiselSpeed",value:function(){var e=1e3-10*(this.playerResourcesTemp.stoneWorkerLvl+1);e<=30&&(e=30),this.masonUpChiselSpeed=+(1e3/e).toFixed(2)}},{key:"calcUpTraderSpeed",value:function(){for(var e=0,t=0;t<this.playerResourcesTemp.tradeWorkersLvl+1;t++)e+=.05*this.playerResources.screenWidth;this.traderUpMovementSpeed=+((.5*this.playerResources.screenWidth+e)/100).toFixed(2)}},{key:"playerResources",get:function(){return this.playerResourcesTemp},set:function(e){this.playerResourcesTemp=e}}]),e}()).\u0275fac=function(e){return new(e||z)},z.\u0275cmp=i.Jb({type:z,selectors:[["app-upgrade-menu"]],inputs:{playerResources:"playerResources"},outputs:{stoneWorkerReturn:"stoneWorkerReturn",tradeWorkerReturn:"tradeWorkerReturn",guardReturn:"guardReturn",playerResourcesReturn:"playerResourcesReturn"},decls:53,vars:32,consts:[[1,"upgrade-wrapper",3,"resize"],[1,"display-money"],[1,"upgrade-wall-border"],[1,"upgrade-opt-title-contents"],["id","scrollbar",1,"upgrade-list"],[1,"upgrade-titles"],[1,"expansion-panel-color"],[1,"panel-titles"],[1,"upgrade-btn"],["class","upgrade-available",4,"ngIf"],["mat-raised-button","",1,"control-button","upgrade-btn",3,"disabled","click"],[1,"worker-titles"],["mat-raised-button","","class","control-button fire-btn",3,"disabled","click",4,"ngIf"],[4,"ngIf"],["class","modal",3,"click",4,"ngIf"],["class","modal",4,"ngIf"],[1,"upgrade-available"],["mat-raised-button","",1,"control-button","fire-btn",3,"disabled","click"],[1,"modal",3,"click"],[1,"info-wrapper",3,"ngClass"],["color","primary"],["id","menu-width"],[1,"info-header"],["class","info-text upgraded-text",4,"ngIf"],[1,"info-text","upgraded-text"],[1,"info-text","info-text-area"],[1,"modal"],["mat-raised-button","",1,"control-button",3,"click"],["class","info-text",4,"ngIf"],["mat-raised-button","",1,"control-button","info-text-area",3,"click"],[1,"info-text"],[1,"upgrade-green"]],template:function(e,t){1&e&&(i.Vb(0,"div",0),i.dc("resize",(function(e){return t.onResize(e)}),!1,i.uc),i.Vb(1,"p",1),i.Cc(2),i.Ub(),i.Vb(3,"div",2),i.Vb(4,"div",3),i.Vb(5,"div",4),i.Vb(6,"h2",5),i.Cc(7,"Economy Upgrades"),i.Ub(),i.Vb(8,"mat-accordion"),i.Vb(9,"mat-expansion-panel",6),i.Vb(10,"mat-expansion-panel-header",6),i.Vb(11,"mat-panel-title"),i.Vb(12,"span",7),i.Vb(13,"h4",8),i.Cc(14,"Raise base skill levels"),i.Ub(),i.Bc(15,d,2,0,"mat-icon",9),i.Ub(),i.Ub(),i.Ub(),i.Vb(16,"button",10),i.dc("click",(function(e){return t.displayUpgradeMenu("chisel",t.chiselLvlCost)})),i.Cc(17),i.Ub(),i.Vb(18,"button",10),i.dc("click",(function(e){return t.displayUpgradeMenu("barter",t.barterLvlCost)})),i.Cc(19),i.Ub(),i.Vb(20,"button",10),i.dc("click",(function(e){return t.displayUpgradeMenu("stockpile",t.stockpileCost)})),i.Cc(21),i.Ub(),i.Vb(22,"button",10),i.dc("click",(function(e){return t.displayUpgradeMenu("housing",t.housingCost)})),i.Cc(23),i.Ub(),i.Ub(),i.Ub(),i.Vb(24,"h2",5),i.Cc(25,"Hire Workers"),i.Ub(),i.Vb(26,"mat-accordion"),i.Vb(27,"mat-expansion-panel",6),i.Vb(28,"mat-expansion-panel-header",6),i.Vb(29,"mat-panel-title"),i.Vb(30,"span",7),i.Vb(31,"h4",8),i.Cc(32,"Hire and train workers"),i.Ub(),i.Bc(33,p,2,0,"mat-icon",9),i.Ub(),i.Ub(),i.Ub(),i.Vb(34,"h3",11),i.Cc(35,"Masons"),i.Ub(),i.Vb(36,"button",10),i.dc("click",(function(e){return t.displayUpgradeMenu("mason",t.stoneWorkerCost)})),i.Cc(37),i.Ub(),i.Vb(38,"button",10),i.dc("click",(function(e){return t.displayUpgradeMenu("upMason",t.trainStoneWorkerCost)})),i.Cc(39),i.Ub(),i.Bc(40,m,2,1,"button",12),i.Vb(41,"h3",11),i.Cc(42,"Traders"),i.Ub(),i.Vb(43,"button",10),i.dc("click",(function(e){return t.displayUpgradeMenu("trader",t.tradeWorkerCost)})),i.Cc(44),i.Ub(),i.Vb(45,"button",10),i.dc("click",(function(e){return t.displayUpgradeMenu("upTrader",t.trainTradeWorkerCost)})),i.Cc(46),i.Ub(),i.Bc(47,y,2,1,"button",12),i.Ub(),i.Ub(),i.Bc(48,g,19,9,"span",13),i.Ub(),i.Ub(),i.Ub(),i.Bc(49,f,8,5,"div",14),i.Bc(50,R,8,3,"div",14),i.Bc(51,w,13,3,"div",15),i.Bc(52,F,28,23,"div",14),i.Ub()),2&e&&(i.Cb(2),i.Gc("Money: $",t.playerResourcesTemp.money," | Housing: ",t.playerResourcesTemp.totalWorkers,"/",t.playerResourcesTemp.housingLimit,""),i.Cb(1),i.Ac("border-image-source","url("+t.stoneWallImagePath+")",i.Ib),i.Cb(2),i.Ac("height",t.pageHeight,"px"),i.Cb(10),i.mc("ngIf",t.economyUpAval),i.Cb(1),i.mc("disabled",t.playerResources.money<t.chiselLvlCost),i.Cb(1),i.Ec("Upgrade Chisel: $",t.chiselLvlCost,""),i.Cb(1),i.mc("disabled",t.playerResources.money<t.barterLvlCost),i.Cb(1),i.Ec("Upgrade Bartering: $",t.barterLvlCost,""),i.Cb(1),i.mc("disabled",t.playerResources.money<t.stockpileCost),i.Cb(1),i.Ec("Upgrade Stockpile: $",t.stockpileCost,""),i.Cb(1),i.mc("disabled",t.playerResources.money<t.housingCost),i.Cb(1),i.Ec("Upgrade Housing: $",t.housingCost,""),i.Cb(10),i.mc("ngIf",t.workersUpAval),i.Cb(3),i.mc("disabled",t.playerResources.money<t.stoneWorkerCost),i.Cb(1),i.Ec("Hire Mason: $",t.stoneWorkerCost,""),i.Cb(1),i.mc("disabled",0===t.playerResources.stoneWorkers.length||t.playerResources.money<t.trainStoneWorkerCost),i.Cb(1),i.Ec("Train Masons: $",t.trainStoneWorkerCost,""),i.Cb(1),i.mc("ngIf",t.playerResourcesTemp.gameLevel>=2),i.Cb(3),i.mc("disabled",t.playerResources.money<t.tradeWorkerCost),i.Cb(1),i.Ec("Hire Trader: $",t.tradeWorkerCost,""),i.Cb(1),i.mc("disabled",0===t.playerResources.tradeWorkers.length||t.playerResources.money<t.trainTradeWorkerCost),i.Cb(1),i.Ec("Train Trader: $",t.trainTradeWorkerCost,""),i.Cb(1),i.mc("ngIf",t.playerResourcesTemp.gameLevel>=2),i.Cb(1),i.mc("ngIf",t.playerResourcesTemp.gameLevel>=2),i.Cb(1),i.mc("ngIf",t.statUpgraded),i.Cb(1),i.mc("ngIf",t.isHousingFull),i.Cb(1),i.mc("ngIf",t.displayFireWorker),i.Cb(1),i.mc("ngIf",t.upgradeMenuShow))},directives:[u.a,u.c,u.d,u.e,r.k,n.a,c.a,r.i,h.a],styles:[".upgrade-wrapper[_ngcontent-%COMP%]{width:100%;height:100%;min-width:100%;min-height:100%;overflow:hidden;position:fixed;top:calc(2.6% + 5.43rem);background-color:#228b22}.upgrade-list[_ngcontent-%COMP%]{width:100%;overflow:auto;height:24em}.upgrade-btn[_ngcontent-%COMP%]{display:inline-block!important}.display-money[_ngcontent-%COMP%]{font-weight:700;text-align:center;margin-bottom:.3em;font-size:calc(100% + .1rem)}.info-dm[_ngcontent-%COMP%]{background-color:#606060}.upgrade-titles[_ngcontent-%COMP%], .worker-titles[_ngcontent-%COMP%]{text-align:center;padding:0;margin:.4em 0 .2em;display:inline-block;width:76%}.upgrade-available[_ngcontent-%COMP%]{font-size:21px;width:19px;height:21px;color:gold;vertical-align:text-bottom}.worker-titles[_ngcontent-%COMP%]{width:100%!important;text-indent:0!important}.fire-btn[_ngcontent-%COMP%]{width:99.4%!important;display:inline-block!important;background-color:#f44336!important}.upgrade-wall-border[_ngcontent-%COMP%]{border-image-repeat:repeat;border-image-width:auto;width:100%;border-bottom:1.1rem solid transparent!important;border-image-slice:15;background-color:#228b22;height:calc(100% - 10rem);margin:0 auto}.upgrade-opt-title-contents[_ngcontent-%COMP%]{padding:1.5rem}.upgrade-green[_ngcontent-%COMP%]{color:#8adc41}.upgraded-text[_ngcontent-%COMP%]{font-size:1.2rem;font-weight:700}.mat-toolbar[_ngcontent-%COMP%]{background-color:silver}@media only screen and (min-width:320px){.upgrade-titles[_ngcontent-%COMP%], .worker-titles[_ngcontent-%COMP%]{width:100%}.upgrade-opt-title-contents[_ngcontent-%COMP%]{padding:.98rem}.upgrade-wall-border[_ngcontent-%COMP%]{height:calc(100% - 9.8rem)}}@media only screen and (min-width:360px){.upgrade-titles[_ngcontent-%COMP%], .worker-titles[_ngcontent-%COMP%]{width:100%}.upgrade-opt-title-contents[_ngcontent-%COMP%]{padding:1.2rem}.upgrade-wall-border[_ngcontent-%COMP%]{height:calc(100% - 9.9rem)}}@media only screen and (min-width:375px){.upgrade-titles[_ngcontent-%COMP%], .worker-titles[_ngcontent-%COMP%]{width:100%}.upgrade-opt-title-contents[_ngcontent-%COMP%]{padding:1.2rem}.upgrade-wall-border[_ngcontent-%COMP%]{height:calc(100% - 10rem)}}@media only screen and (min-width:411px){.upgrade-titles[_ngcontent-%COMP%], .worker-titles[_ngcontent-%COMP%]{width:100%}.upgrade-opt-title-contents[_ngcontent-%COMP%]{padding:1.2rem}.upgrade-wall-border[_ngcontent-%COMP%]{height:calc(100% - 10.1rem)}}@media only screen and (min-width:414px){.upgrade-titles[_ngcontent-%COMP%], .worker-titles[_ngcontent-%COMP%]{width:100%}.upgrade-opt-title-contents[_ngcontent-%COMP%]{padding:1.2rem}.upgrade-wall-border[_ngcontent-%COMP%]{height:calc(100% - 10rem)}}@media only screen and (min-width:768px){.upgrade-titles[_ngcontent-%COMP%], .worker-titles[_ngcontent-%COMP%]{width:100%}.upgrade-opt-title-contents[_ngcontent-%COMP%]{padding:1.2rem}.upgrade-wall-border[_ngcontent-%COMP%]{height:calc(100% - 10.3rem)}}@media only screen and (min-width:1024px)and (min-height:1366px){.upgrade-wall-border[_ngcontent-%COMP%]{height:calc(100% - 11rem)}.upgrade-wrapper[_ngcontent-%COMP%]{top:calc(2.6% + 5.06rem)}}"]}),z),N=["canvas"];function j(e,t){1&e&&(i.Vb(0,"p",6),i.Cc(1,"Worker's Payday In 10 Seconds"),i.Ub())}function Q(e,t){if(1&e&&(i.Vb(0,"p",7),i.Cc(1),i.Ub()),2&e){var s=i.hc();i.Cb(1),i.Ec("Worker's Payday -$",s.workerPayday,"")}}function J(e,t){1&e&&(i.Vb(0,"p",8),i.Cc(1,"Your Rating Took A Hit..."),i.Ub())}var Y,X=((Y=function(){function e(t){_classCallCheck(this,e),this.ngZone=t,this.playerResourcesTemp={chiselLvl:0,money:0,bricks:0,clicks:0,barterLvl:0,tradeWorkers:[],tradeWorkersCount:0,tradeWorkersLvl:0,stoneWorkers:[],stoneCuttersCount:0,stoneWorkerLvl:0,guards:[],guardCount:0,guardWeaponLvl:0,guardArmorLvl:0,guardSpeedLvl:0,dayCounter:0,daysPast:0,version:.5,totalClicks:0,totalBricks:0,totalMoney:0,newPlayer:!0,quests:{questLvl:0,questDesc:"",questReward:0,completed:!1,quest:{complete:!1,chiselLvl:0,barterLvl:0,masons:0,masonLvl:0,traders:0,traderLvl:0}},sky:{sun:{x:0,y:0},moon:{x:0,y:0}},housingLimit:0,housingLvl:0,totalWorkers:0,stockpile:0,stockpileLvl:0,screenWidth:0,screenChange:!1,gameLevel:1,currentChapter:"",newPlayerVault:!0,banditWave:0,bandits:[],banditWaveCounter:0,banditSpawnCount:0,isBanditWaveStarted:!1,moneyTaken:0,credit:3,banditsStopped:0,totalGuards:0,tutorialGuards:0},this.playerResourcesReturn=new i.o,this.stone1=new Image,this.stone2=new Image,this.stone3=new Image,this.stone4=new Image,this.rockHit=new Image,this.stoneWorkerImg=new Image,this.tradeWorkerImg=new Image,this.grassMorningImg=new Image,this.grassAfternoonImg=new Image,this.grassEveningImg=new Image,this.sunImg=new Image,this.moonImg=new Image,this.stoneHP=Math.floor(10*Math.random())+10,this.addStoneSoundPath="assets/sounds/add_stone.wav",this.addStoneSound=new Audio,this.sellSoundPath="assets/sounds/sell.wav",this.sellSound=new Audio,this.currentStone={image:this.stone1,hitpoints:this.stoneHP},this.hits=0,this.stoneWorkerFreq=Math.floor(5*Math.random())+1,this.tradeWorkerFreq=Math.floor(5*Math.random())+1,this.workPayCounter=0,this.isWorking=!0,this.totalWorkers=0,this.chiselDmg=0,this.bartering=0,this.stoneWorkerSpeed=0,this.tradeWorkerSpeed=0,this.chiselClicked=!1,this.workerPayday=0,this.displayPayday=!1,this.displayCreditHit=!1,this.optionsSelected={darkMode:!1,soundsOn:!0},this.stars=[],this.starLight=0}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this;if(this.addStoneSound.src=this.addStoneSoundPath,this.addStoneSound.load(),this.sellSound.src=this.sellSoundPath,this.sellSound.load(),localStorage.length>0&&localStorage.getItem("mason_options")){var t=JSON.parse(localStorage.getItem("mason_options"));this.optionsSelected={darkMode:t.darkMode,soundsOn:t.soundsOn};var s=document.getElementsByTagName("body");this.optionsSelected.darkMode?s[0].classList.add("darkMode"):s[0].classList.remove("darkMode")}else{document.getElementsByTagName("body")[0].classList.add("darkMode");var r=JSON.stringify(this.optionsSelected);localStorage.setItem("mason_options",r)}this.stone1.src="./assets/images/rock1.png",this.stone2.src="./assets/images/rock2.png",this.stone3.src="./assets/images/rock3.png",this.stone4.src="./assets/images/rock4.png",this.rockHit.src="./assets/images/rockChiseled.png",this.stoneWorkerImg.src="./assets/images/stoneWorker.png",this.tradeWorkerImg.src="./assets/images/tradeWorker.png",this.grassEveningImg.src="./assets/images/grass1.png",this.grassMorningImg.src="./assets/images/grass2.png",this.grassAfternoonImg.src="./assets/images/grass2.png",this.sunImg.src="./assets/images/sunImage.png",this.moonImg.src="./assets/images/moonImage.png",this.ctx=this.canvas.nativeElement.getContext("2d"),this.ctx.canvas.width=1*window.innerWidth,this.ctx.canvas.height=.5*window.innerHeight,this.objectSizeHeight=.01*this.ctx.canvas.height,this.objectSize=this.objectSizeHeight,this.starCount=Math.abs(this.ctx.canvas.width/15),this.getStars(),this.stone1.onload=function(){e.getStoneWorkerWorkTime(),e.getTradeWorkerWorkTime(),e.getWorkerPayment(),e.resetStone(),0===e.playerResourcesTemp.sky.sun.x&&0===e.playerResourcesTemp.sky.sun.y&&(e.playerResourcesTemp.sky.sun.x=.49*e.ctx.canvas.width,e.playerResourcesTemp.sky.sun.y=.74*e.ctx.canvas.height),0===e.playerResourcesTemp.sky.moon.x&&0===e.playerResourcesTemp.sky.moon.y&&(e.playerResourcesTemp.sky.moon.x=.49*e.ctx.canvas.width,e.playerResourcesTemp.sky.moon.y=.74*e.ctx.canvas.height),e.playerResourcesReturn.emit(e.playerResourcesTemp),e.playerResourcesTemp.stoneWorkers.length>0&&e.playerResourcesTemp.stoneWorkers.forEach((function(t){t.startPos=Math.floor(2*Math.random()),t.workLoad=Math.floor(5*Math.random())+3+e.playerResourcesTemp.stoneWorkerLvl,t.image=e.stoneWorkerImg,0===t.startPos?(t.x=-25*e.ctx.canvas.width/100,t.y=80*e.ctx.canvas.height/100,t.direction=0):1===t.startPos&&(t.x=125*e.ctx.canvas.width/100,t.y=80*e.ctx.canvas.height/100,t.direction=1)})),e.playerResourcesTemp.tradeWorkers.length>0&&e.playerResourcesTemp.tradeWorkers.forEach((function(t){t.startPos=Math.floor(2*Math.random()),t.image=e.tradeWorkerImg,0===t.startPos?(t.x=-25*e.ctx.canvas.width/100,t.y=50*e.ctx.canvas.height/100,t.direction=0):1===t.startPos&&(t.x=125*e.ctx.canvas.width/100,t.y=50*e.ctx.canvas.height/100,t.direction=1)})),e.chiselClicked=!1,e.getAllWorkers(e.playerResourcesTemp.stoneWorkers,e.playerResourcesTemp.tradeWorkers);for(var t=0;t<e.playerResourcesTemp.chiselLvl;t++)e.chiselDmg+=.6;for(var s=0;s<e.playerResourcesTemp.stoneWorkerLvl;s++)e.stoneWorkerSpeed+=.05*e.ctx.canvas.width;for(var r=0;r<e.playerResourcesTemp.tradeWorkersLvl;r++)e.tradeWorkerSpeed+=.05*e.ctx.canvas.width;for(var a=0;a<e.playerResourcesTemp.barterLvl;a++)e.bartering+=1;e.workPayCounter=e.playerResourcesTemp.dayCounter,e.totalWorkers=e.playerResourcesTemp.totalWorkers}}},{key:"ngOnDestroy",value:function(){this.sellSound=new Audio,this.addStoneSound=new Audio,this.isWorking=!1,clearInterval(this.gameInterval),clearInterval(this.workPayInterval),clearInterval(this.tradeWorksWorkInterval),clearInterval(this.stoneCutterWorkInterval),cancelAnimationFrame(this.requestGameAnimatId)}},{key:"drawBackground",value:function(){this.playerResourcesTemp.dayCounter<=40?this.playerResourcesTemp.dayCounter<=33?this.ctx.fillStyle="#0000FF":this.playerResourcesTemp.dayCounter>=34&&this.playerResourcesTemp.dayCounter<=36?this.ctx.fillStyle="#0000F3":this.playerResourcesTemp.dayCounter>=37&&this.playerResourcesTemp.dayCounter<=39?this.ctx.fillStyle="#0000E6":this.playerResourcesTemp.dayCounter>=40&&(this.ctx.fillStyle="#0000DA"):this.playerResourcesTemp.dayCounter>=41&&this.playerResourcesTemp.dayCounter<79?this.playerResourcesTemp.dayCounter<=70?this.ctx.fillStyle="#0000CD":this.playerResourcesTemp.dayCounter>=71&&this.playerResourcesTemp.dayCounter<=73?this.ctx.fillStyle="#0000BD":this.playerResourcesTemp.dayCounter>=74&&this.playerResourcesTemp.dayCounter<=76?this.ctx.fillStyle="#0000AC":this.playerResourcesTemp.dayCounter>=77&&(this.ctx.fillStyle="#00009C"):this.playerResourcesTemp.dayCounter>=79&&(this.playerResourcesTemp.dayCounter<=115?this.ctx.fillStyle="#00008B":this.playerResourcesTemp.dayCounter>=116&&this.playerResourcesTemp.dayCounter<=117?this.ctx.fillStyle="#0000A8":this.playerResourcesTemp.dayCounter>=118&&this.playerResourcesTemp.dayCounter<=119?this.ctx.fillStyle="#0000C5":this.playerResourcesTemp.dayCounter>=120&&(this.ctx.fillStyle="#0000E2")),this.ctx.fillRect(0,this.ctx.canvas.height/2*-1,this.ctx.canvas.width,this.ctx.canvas.height),this.playerResourcesTemp.dayCounter>=79&&this.playerResourcesTemp.dayCounter<=117?this.drawStars(this.stars):this.getStars(),this.ctx.drawImage(this.sunImg,this.playerResourcesTemp.sky.sun.x-.18*this.ctx.canvas.height,this.playerResourcesTemp.sky.sun.y+-.055*this.ctx.canvas.width,40*this.objectSize,40*this.objectSize),this.ctx.drawImage(this.moonImg,this.playerResourcesTemp.sky.moon.x-.15*this.ctx.canvas.height,this.playerResourcesTemp.sky.moon.y+-.055*this.ctx.canvas.width,35*this.objectSize,35*this.objectSize),this.drawSky(),this.playerResourcesTemp.dayCounter<=40?this.playerResourcesTemp.dayCounter<=36?this.ctx.fillStyle="#228B22":this.playerResourcesTemp.dayCounter>=37&&this.playerResourcesTemp.dayCounter<=38?this.ctx.fillStyle="#1A881A":this.playerResourcesTemp.dayCounter>=39&&this.playerResourcesTemp.dayCounter<=40&&(this.ctx.fillStyle="#118611"):this.playerResourcesTemp.dayCounter>=41&&this.playerResourcesTemp.dayCounter<79?this.playerResourcesTemp.dayCounter<=74?this.ctx.fillStyle="#008000":this.playerResourcesTemp.dayCounter>=75&&this.playerResourcesTemp.dayCounter<=76?this.ctx.fillStyle="#007900":this.playerResourcesTemp.dayCounter>=77&&this.playerResourcesTemp.dayCounter<=78&&(this.ctx.fillStyle="#007200"):this.playerResourcesTemp.dayCounter>=79&&(this.playerResourcesTemp.dayCounter<=116?this.ctx.fillStyle="#006400":this.playerResourcesTemp.dayCounter>=117&&this.playerResourcesTemp.dayCounter<=118?this.ctx.fillStyle="#096E09":this.playerResourcesTemp.dayCounter>=119&&this.playerResourcesTemp.dayCounter<=120&&(this.ctx.fillStyle="#117811")),this.ctx.fillRect(0,this.ctx.canvas.height/2,this.ctx.canvas.width,this.ctx.canvas.height),this.drawGrass(),this.ctx.drawImage(this.currentStone.image,.49*this.ctx.canvas.width-.129*this.ctx.canvas.height,.65*this.ctx.canvas.height,30*this.objectSize,30*this.objectSize),this.chiselClicked&&this.playerChiseled()}},{key:"drawGrass",value:function(){if(this.playerResourcesTemp.dayCounter<=37){var e=this.ctx.createPattern(this.grassMorningImg,"repeat");this.ctx.fillStyle=e,this.ctx.fillRect(0,this.ctx.canvas.height/2,this.ctx.canvas.width,this.ctx.canvas.height)}else if(this.playerResourcesTemp.dayCounter>=38&&this.playerResourcesTemp.dayCounter<77){var t=this.ctx.createPattern(this.grassAfternoonImg,"repeat");this.ctx.fillStyle=t,this.ctx.fillRect(0,this.ctx.canvas.height/2,this.ctx.canvas.width,this.ctx.canvas.height)}else if(this.playerResourcesTemp.dayCounter>=77&&this.playerResourcesTemp.dayCounter<119){var s=this.ctx.createPattern(this.grassEveningImg,"repeat");this.ctx.fillStyle=s,this.ctx.fillRect(0,this.ctx.canvas.height/2,this.ctx.canvas.width,this.ctx.canvas.height)}else if(this.playerResourcesTemp.dayCounter>=119&&this.playerResourcesTemp.dayCounter<=120){var r=this.ctx.createPattern(this.grassMorningImg,"repeat");this.ctx.fillStyle=r,this.ctx.fillRect(0,this.ctx.canvas.height/2,this.ctx.canvas.width,this.ctx.canvas.height)}}},{key:"playerChiseled",value:function(){var e=.1*Math.floor(3*Math.random()+4),t=.1*Math.floor(3*Math.random()+6);this.ctx.drawImage(this.rockHit,this.ctx.canvas.width*e+-.1*this.ctx.canvas.height,this.ctx.canvas.height*t+-.055*this.ctx.canvas.height,25*this.objectSize,25*this.objectSize)}},{key:"chiselStone",value:function(e){var t=this;if(e+=this.chiselDmg,this.playerResourcesTemp.bricks<this.playerResourcesTemp.stockpile){if(this.chiselClicked=!0,e>=Math.trunc(this.currentStone.hitpoints/4)&&0===this.hits&&this.ctx&&(this.currentStone.image=this.stone2,this.hits++,e>Math.trunc(this.currentStone.hitpoints/3)+Math.trunc(this.currentStone.hitpoints/3)&&this.hits++),e>Math.trunc(this.currentStone.hitpoints/3)&&1===this.hits&&this.ctx&&(this.currentStone.image=this.stone3,e>Math.trunc(this.currentStone.hitpoints/2)+Math.trunc(this.currentStone.hitpoints/4)&&this.hits++),e>Math.trunc(this.currentStone.hitpoints/2)&&2===this.hits&&this.ctx&&(this.currentStone.image=this.stone4,e>=Math.trunc(this.currentStone.hitpoints)&&this.hits++),e>=Math.trunc(this.currentStone.hitpoints)&&3===this.hits){this.playerResourcesTemp.bricks+=1,this.playerResourcesTemp.totalBricks+=1,this.optionsSelected.soundsOn&&!this.isGuardMoneyView&&this.addStoneSound.play(),document.getElementById("bricks").style.color="#8ADC41";var s=setInterval((function(){document.getElementById("bricks")?(document.getElementById("bricks").style.color="#fff",clearInterval(s)):clearInterval(s)}),350);this.resetStone()}var r=setInterval((function(){t.chiselClicked=!1,clearInterval(r)}),100)}}},{key:"sellStone",value:function(){var e=this,t=Math.floor(Math.random()*(this.bartering+1))+1;if(t>=this.playerResourcesTemp.bricks&&(t=this.playerResourcesTemp.bricks),this.playerResourcesTemp.bricks>0){this.playerResourcesTemp.bricks<=t&&(this.playerResourcesTemp.bricks=t);var s=(Math.floor(Math.random()*(this.bartering+3+this.playerResources.tradeWorkersLvl))+(1+this.bartering+this.playerResources.tradeWorkersLvl))*t;this.playerResourcesTemp.money+=s,this.playerResourcesTemp.totalMoney+=s,this.playerResourcesTemp.bricks-=t,this.playerResourcesReturn.emit(this.playerResourcesTemp),this.optionsSelected.soundsOn&&!this.isGuardMoneyView&&this.sellSound.play(),document.getElementById("money").style.color="#8ADC41";var r=setInterval((function(){document.getElementById("money")?(document.getElementById("money").style.color=e.playerResourcesTemp.money>=0?"#fff":"red",clearInterval(r)):clearInterval(r)}),350)}else this.playerResourcesTemp.bricks<0&&(this.playerResourcesTemp.bricks=0,this.playerResourcesReturn.emit(this.playerResourcesTemp))}},{key:"resetStone",value:function(){this.playerResourcesTemp.clicks=0,this.playerResourcesReturn.emit(this.playerResourcesTemp),this.stoneHP=Math.floor(10*Math.random())+10,this.currentStone.image=this.stone1,this.currentStone.hitpoints=this.stoneHP,this.hits=0}},{key:"getStoneWorkerWorkTime",value:function(){var e=this;this.stoneCutterWorkInterval=setInterval((function(){!1===e.playerResourcesTemp.newPlayer&&(e.stoneWorkerFreq=Math.floor(5*Math.random())+1)}),2500)}},{key:"drawWorker",value:function(e){this.ctx.drawImage(e.image,e.x,e.y,15*this.objectSize,15*this.objectSize)}},{key:"getAllWorkers",value:function(e,t){var s=this;this.ngZone.runOutsideAngular((function(){return s.gameTicks(e,t)})),this.gameInterval=setInterval((function(){s.gameTicks(e,t)}),1e3/33)}},{key:"gameTicks",value:function(e,t){var s=this;this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.drawBackground(),t.forEach((function(e){(s.tradeWorkerFreq===e.frequency&&s.playerResourcesTemp.bricks>0||!0===e.startedWork)&&(0===e.startPos&&(0===e.direction&&e.x<.48*s.ctx.canvas.width-.129*s.ctx.canvas.height?(e.x+=(.5*s.ctx.canvas.width+s.tradeWorkerSpeed)/100,e.startedWork=!0,e.x>.48*s.ctx.canvas.width-.129*s.ctx.canvas.height&&(e.direction=1)):1===e.direction&&(e.x>=-25*s.ctx.canvas.width/100?e.x-=(.5*s.ctx.canvas.width+s.tradeWorkerSpeed)/100:(e.startedWork=!1,e.startPos=0,e.direction=0,s.sellStone(),s.playerResourcesReturn.emit(s.playerResourcesTemp)))),1===e.startPos&&(1===e.direction&&e.x>=.5*s.ctx.canvas.width?(e.x-=(.5*s.ctx.canvas.width+s.tradeWorkerSpeed)/100,e.startedWork=!0,e.x<.5*s.ctx.canvas.width&&(e.direction=0)):0===e.direction&&(e.x<=125*s.ctx.canvas.width/100?e.x+=(.5*s.ctx.canvas.width+s.tradeWorkerSpeed)/100:(e.startedWork=!1,e.startPos=1,e.direction=1,s.sellStone())))),s.drawWorker(e)})),e.forEach((function(e){if(s.stoneWorkerFreq===e.frequency||!0===e.startedWork){if(0===e.startPos)if(0===e.direction&&e.x<.48*s.ctx.canvas.width-.129*s.ctx.canvas.height){if(e.x+=(.5*s.ctx.canvas.width+s.stoneWorkerSpeed)/100,e.startedWork=!0,e.x>.48*s.ctx.canvas.width-.129*s.ctx.canvas.height){for(var t=0;t<s.playerResourcesTemp.chiselLvl;t++)s.playerResourcesTemp.clicks+=.6;var r=1e3-10*s.playerResourcesTemp.stoneWorkerLvl;r<=30&&(r=30);var a=setInterval((function(){s.isWorking&&!0===e.startedWork?(e.workLoad--,s.playerResourcesTemp.clicks+=1,s.chiselStone(s.playerResourcesTemp.clicks),e.workLoad<=0&&(e.direction=1,clearInterval(a)),s.playerResourcesReturn.emit(s.playerResourcesTemp)):clearInterval(a)}),r)}}else 1===e.direction&&(e.x>=-25*s.ctx.canvas.width/100?e.x-=(.5*s.ctx.canvas.width+s.stoneWorkerSpeed)/100:(e.startedWork=!1,e.startPos=0,e.direction=0,e.workLoad=Math.floor(5*Math.random())+3+s.playerResourcesTemp.stoneWorkerLvl));if(1===e.startPos)if(1===e.direction&&e.x>=.5*s.ctx.canvas.width){if(e.x-=(.5*s.ctx.canvas.width+s.stoneWorkerSpeed)/100,e.startedWork=!0,e.x<.5*s.ctx.canvas.width){for(var i=0;i<s.playerResourcesTemp.chiselLvl;i++)s.playerResourcesTemp.clicks+=.6;var o=1e3-10*s.playerResourcesTemp.stoneWorkerLvl;o<=30&&(o=30);var n=setInterval((function(){s.isWorking&&!0===e.startedWork?(e.workLoad--,s.playerResourcesTemp.clicks+=1,s.chiselStone(s.playerResourcesTemp.clicks),e.workLoad<=0&&(e.direction=0,clearInterval(n)),s.playerResourcesReturn.emit(s.playerResourcesTemp)):clearInterval(n)}),o)}}else 0===e.direction&&(e.x<=125*s.ctx.canvas.width/100?e.x+=(.5*s.ctx.canvas.width+s.stoneWorkerSpeed)/100:(e.startedWork=!1,e.startPos=1,e.direction=1,e.workLoad=Math.floor(5*Math.random())+3+s.playerResourcesTemp.stoneWorkerLvl))}s.drawWorker(e)})),this.requestGameAnimatId=requestAnimationFrame((function(){return s.gameTicks}))}},{key:"getTradeWorkerWorkTime",value:function(){var e=this;this.tradeWorksWorkInterval=setInterval((function(){!1===e.playerResourcesTemp.newPlayer&&(e.tradeWorkerFreq=Math.floor(5*Math.random())+1)}),2500)}},{key:"getWorkerPayment",value:function(){var e=this,t=!1;this.workPayInterval=setInterval((function(){if(!1===e.playerResourcesTemp.newPlayer&&(e.workPayCounter++,e.playerResourcesTemp.dayCounter=e.workPayCounter,e.playerResourcesReturn.emit(e.playerResourcesTemp),e.workPayCounter>=120)){var s=e.playerResourcesTemp.stoneWorkers.length*(2*e.playerResourcesTemp.stoneWorkerLvl+2),r=e.playerResourcesTemp.tradeWorkers.length*(2*e.playerResourcesTemp.tradeWorkersLvl+2),a=20*e.playerResourcesTemp.totalGuards;if(e.workerPayday=s+r+a,e.playerResourcesTemp.money-=s+r+a,e.playerResourcesTemp.daysPast++,e.workPayCounter=0,e.playerResourcesTemp.dayCounter=0,e.playerResourcesTemp.totalWorkers>0){document.getElementById("money").style.color="#F7461F";var i=setInterval((function(){document.getElementById("money")?(document.getElementById("money").style.color=e.playerResourcesTemp.money>=0?"#fff":"red",clearInterval(i)):clearInterval(i)}),1500)}if(e.playerResourcesTemp.money<0&&(t=!0,e.playerResourcesTemp.credit--),e.playerResourcesReturn.emit(e.playerResourcesTemp),e.playerResourcesTemp.stoneWorkers.length>0||e.playerResourcesTemp.tradeWorkers.length>0){e.displayPayday=!0;var o=setInterval((function(){if(e.displayPayday=!1,t){e.displayCreditHit=!0;var s=setInterval((function(){e.displayCreditHit=!1,clearInterval(s)}),5e3)}clearInterval(o)}),5e3)}}}),1e3)}},{key:"drawSky",value:function(){this.playerResourcesTemp.dayCounter<=50&&this.playerResourcesTemp.dayCounter>0?(this.playerResourcesTemp.sky.sun.y+=-58e-5*this.ctx.canvas.height+-16e-5*this.ctx.canvas.height,this.playerResourcesTemp.sky.sun.x=.49*this.ctx.canvas.width,this.playerResourcesTemp.sky.moon.x=.49*this.ctx.canvas.width,this.playerResourcesTemp.sky.moon.y=.74*this.ctx.canvas.height):this.playerResourcesTemp.dayCounter>=51&&this.playerResourcesTemp.dayCounter<79?(this.playerResourcesTemp.sky.sun.x=.49*this.ctx.canvas.width,this.playerResourcesTemp.sky.sun.y=.74*this.ctx.canvas.height,this.playerResourcesTemp.sky.moon.x=.49*this.ctx.canvas.width,this.playerResourcesTemp.sky.moon.y=.74*this.ctx.canvas.height):this.playerResourcesTemp.dayCounter>=79&&(this.playerResourcesTemp.sky.moon.y+=-58e-5*this.ctx.canvas.height+-16e-5*this.ctx.canvas.height,this.playerResourcesTemp.sky.moon.x=.49*this.ctx.canvas.width,this.playerResourcesTemp.sky.sun.x=.49*this.ctx.canvas.width,this.playerResourcesTemp.sky.sun.y=.74*this.ctx.canvas.height)}},{key:"drawStars",value:function(e){for(var t=this,s=setInterval((function(){t.playerResourcesTemp.dayCounter>=78&&t.playerResourcesTemp.dayCounter<=79?(t.starLight+=.1,t.starLight>=1&&(t.starLight=1)):t.playerResourcesTemp.dayCounter<=115&&(t.starLight=1),t.playerResourcesTemp.dayCounter>=116&&t.playerResourcesTemp.dayCounter<=117&&(t.starLight-=.1,t.starLight<=0&&(t.starLight=0)),clearInterval(s)}),100),r=0;r<e.length;r++)this.ctx.beginPath(),this.ctx.arc(e[r].x,e[r].y,e[r].radius,0,2*Math.PI,!1),this.ctx.fillStyle="rgba(255, 255, 255, "+this.starLight+")",this.ctx.fill(),this.ctx.lineWidth=2,this.ctx.strokeStyle="rgba(255, 255, 255, "+this.starLight+")",this.ctx.stroke()}},{key:"getStars",value:function(){this.stars=[];for(var e=0;e<this.starCount;e++){var t={x:0,y:0,radius:0};t.x=Math.floor(Math.random()*this.ctx.canvas.width)+1,t.y=Math.floor(Math.random()*(this.ctx.canvas.height/2))+1,t.radius=.1*this.objectSize,this.stars.push(t)}}},{key:"onResize",value:function(e){this.newResizePositions(),this.objectSizeHeight=.01*this.ctx.canvas.height,this.objectSize=this.objectSizeHeight,this.starCount=Math.abs(this.ctx.canvas.width/15),this.getStars(),this.stoneWorkerSpeed=0,this.tradeWorkerSpeed=0;for(var t=0;t<this.playerResourcesTemp.stoneWorkerLvl;t++)this.stoneWorkerSpeed+=.05*this.ctx.canvas.width;for(var s=0;s<this.playerResourcesTemp.tradeWorkersLvl;s++)this.tradeWorkerSpeed+=.05*this.ctx.canvas.width}},{key:"newResizePositions",value:function(){var e=this;this.playerResourcesTemp.stoneWorkers.forEach((function(t){t.x=t.x/e.ctx.canvas.width,t.y=t.y/e.ctx.canvas.height})),this.playerResourcesTemp.tradeWorkers.forEach((function(t){t.x=t.x/e.ctx.canvas.width,t.y=t.y/e.ctx.canvas.height})),this.playerResourcesTemp.sky.sun.x=this.playerResourcesTemp.sky.sun.x/this.ctx.canvas.width,this.playerResourcesTemp.sky.sun.y=this.playerResourcesTemp.sky.sun.y/this.ctx.canvas.height,this.playerResourcesTemp.sky.moon.x=this.playerResourcesTemp.sky.moon.x/this.ctx.canvas.width,this.playerResourcesTemp.sky.moon.y=this.playerResourcesTemp.sky.moon.y/this.ctx.canvas.height,this.ctx.canvas.width=1*window.innerWidth,this.ctx.canvas.height=.5*window.innerHeight,this.playerResourcesTemp.stoneWorkers.forEach((function(t){t.x=t.x*e.ctx.canvas.width,t.y=t.y*e.ctx.canvas.height})),this.playerResourcesTemp.tradeWorkers.forEach((function(t){t.x=t.x*e.ctx.canvas.width,t.y=t.y*e.ctx.canvas.height})),this.playerResourcesTemp.sky.sun.x=this.playerResourcesTemp.sky.sun.x*this.ctx.canvas.width,this.playerResourcesTemp.sky.sun.y=this.playerResourcesTemp.sky.sun.y*this.ctx.canvas.height,this.playerResourcesTemp.sky.moon.x=this.playerResourcesTemp.sky.moon.x*this.ctx.canvas.width,this.playerResourcesTemp.sky.moon.y=this.playerResourcesTemp.sky.moon.y*this.ctx.canvas.height}},{key:"playerResources",get:function(){return this.playerResourcesTemp},set:function(e){this.playerResourcesTemp=e,this.chiselStone(this.playerResourcesTemp.clicks)}}]),e}()).\u0275fac=function(e){return new(e||Y)(i.Pb(i.A))},Y.\u0275cmp=i.Jb({type:Y,selectors:[["app-stone-cutter-view"]],viewQuery:function(e,t){var s;1&e&&i.zc(N,!0),2&e&&i.rc(s=i.ec())&&(t.canvas=s.first)},inputs:{playerResources:"playerResources",isGuardMoneyView:"isGuardMoneyView"},outputs:{playerResourcesReturn:"playerResourcesReturn"},decls:6,vars:3,consts:[[1,"stone-view-wrapper",3,"resize"],["class","workers-payday-warning",4,"ngIf"],["class","workers-payday",4,"ngIf"],["class","credit-hit",4,"ngIf"],["id","canvas"],["canvas",""],[1,"workers-payday-warning"],[1,"workers-payday"],[1,"credit-hit"]],template:function(e,t){1&e&&(i.Vb(0,"div",0),i.dc("resize",(function(e){return t.onResize(e)}),!1,i.uc),i.Bc(1,j,2,0,"p",1),i.Bc(2,Q,2,1,"p",2),i.Bc(3,J,2,0,"p",3),i.Qb(4,"canvas",4,5),i.Ub()),2&e&&(i.Cb(1),i.mc("ngIf",t.totalWorkers>0&&t.workPayCounter>=110&&t.workPayCounter<=114),i.Cb(1),i.mc("ngIf",t.displayPayday),i.Cb(1),i.mc("ngIf",t.displayCreditHit))},directives:[r.k],styles:["#canvas[_ngcontent-%COMP%]{display:block;margin:0 auto}.credit-hit[_ngcontent-%COMP%]{position:absolute;top:calc(20% + 1.4em);text-align:center;width:100%;color:red;font-weight:bolder}.workers-payday-warning[_ngcontent-%COMP%]{background-color:#606060}"]}),Y),Z=["canvasGuardMoney"];function K(e,t){1&e&&(i.Vb(0,"p",4),i.Cc(1,"Worker's Payday In 10 Seconds"),i.Ub())}var ee,te=((ee=function(){function e(t){_classCallCheck(this,e),this.ngZone=t,this.playerResourcesTemp={chiselLvl:0,money:0,bricks:0,clicks:0,barterLvl:0,tradeWorkers:[],tradeWorkersCount:0,tradeWorkersLvl:0,stoneWorkers:[],stoneCuttersCount:0,stoneWorkerLvl:0,guards:[],guardCount:0,guardWeaponLvl:0,guardArmorLvl:0,guardSpeedLvl:0,dayCounter:0,daysPast:0,version:.5,totalClicks:0,totalBricks:0,totalMoney:0,newPlayer:!0,quests:{questLvl:0,questDesc:"",questReward:0,completed:!1,quest:{complete:!1,chiselLvl:0,barterLvl:0,masons:0,masonLvl:0,traders:0,traderLvl:0}},sky:{sun:{x:0,y:0},moon:{x:0,y:0}},housingLimit:0,housingLvl:0,totalWorkers:0,stockpile:0,stockpileLvl:0,screenWidth:0,screenChange:!1,gameLevel:1,currentChapter:"",newPlayerVault:!0,banditWave:0,bandits:[],banditWaveCounter:0,banditSpawnCount:0,isBanditWaveStarted:!1,moneyTaken:0,credit:3,banditsStopped:0,totalGuards:0,tutorialGuards:0},this.playerResourcesReturn=new i.o,this.stars=[],this.starLight=0,this.vaultImg=new Image,this.guardImg=new Image,this.banditImg=new Image,this.combatHit=new Image,this.grassMorningImg=new Image,this.grassAfternoonImg=new Image,this.grassEveningImg=new Image,this.combatSound1Path="assets/sounds/sword_clang1.wav",this.combatSound1=new Audio,this.combatSound2Path="assets/sounds/sword_clang2.wav",this.combatSound2=new Audio,this.banditsArrivePath="assets/sounds/sword _drawn.wav",this.banditsArrive=new Audio,this.optionsSelected={darkMode:!1,soundsOn:!0}}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this;if(localStorage.length>0&&localStorage.getItem("mason_options")){var t=JSON.parse(localStorage.getItem("mason_options"));this.optionsSelected={darkMode:t.darkMode,soundsOn:t.soundsOn};var s=document.getElementsByTagName("body");this.optionsSelected.darkMode?s[0].classList.add("darkMode"):s[0].classList.remove("darkMode")}else{document.getElementsByTagName("body")[0].classList.add("darkMode");var r=JSON.stringify(this.optionsSelected);localStorage.setItem("mason_options",r)}this.combatSound1.src=this.combatSound1Path,this.combatSound1.load(),this.combatSound2.src=this.combatSound2Path,this.combatSound2.load(),this.banditsArrive.src=this.banditsArrivePath,this.banditsArrive.load(),this.ctx=this.canvas.nativeElement.getContext("2d"),this.ctx.canvas.width=1*window.innerWidth,this.ctx.canvas.height=.5*window.innerHeight,this.objectSizeHeight=.01*this.ctx.canvas.height,this.objectSize=this.objectSizeHeight,this.starCount=Math.abs(this.ctx.canvas.width/15),this.getStars(),this.vaultImg.src="./assets/images/vault.png",this.guardImg.src="./assets/images/guard.png",this.banditImg.src="./assets/images/bandit.png",this.combatHit.src="./assets/images/rockChiseled.png",this.grassEveningImg.src="./assets/images/grass1.png",this.grassMorningImg.src="./assets/images/grass2.png",this.grassAfternoonImg.src="./assets/images/grass2.png",this.vaultImg.onload=function(){e.startBanditWaves(),e.playerResourcesTemp.isBanditWaveStarted&&(e.optionsSelected.soundsOn&&e.banditsArrive.play(),e.spawnBandits()),e.playerResourcesTemp.guards.forEach((function(t){t.image=e.guardImg})),e.playerResourcesTemp.bandits.forEach((function(t){t.image=e.banditImg})),e.getAllCharacters(e.playerResourcesTemp.guards,e.playerResourcesTemp.bandits)}}},{key:"ngOnDestroy",value:function(){this.combatSound1=new Audio,this.combatSound2=new Audio,clearInterval(this.gameInterval),clearInterval(this.banditSpawnInterval),clearInterval(this.banditWaveInterval),cancelAnimationFrame(this.requestGameAnimatId)}},{key:"drawBackground",value:function(){this.playerResourcesTemp.dayCounter<=40?this.playerResourcesTemp.dayCounter<=33?this.ctx.fillStyle="#0000FF":this.playerResourcesTemp.dayCounter>=34&&this.playerResourcesTemp.dayCounter<=36?this.ctx.fillStyle="#0000F3":this.playerResourcesTemp.dayCounter>=37&&this.playerResourcesTemp.dayCounter<=39?this.ctx.fillStyle="#0000E6":this.playerResourcesTemp.dayCounter>=40&&(this.ctx.fillStyle="#0000DA"):this.playerResourcesTemp.dayCounter>=41&&this.playerResourcesTemp.dayCounter<79?this.playerResourcesTemp.dayCounter<=70?this.ctx.fillStyle="#0000CD":this.playerResourcesTemp.dayCounter>=71&&this.playerResourcesTemp.dayCounter<=73?this.ctx.fillStyle="#0000BD":this.playerResourcesTemp.dayCounter>=74&&this.playerResourcesTemp.dayCounter<=76?this.ctx.fillStyle="#0000AC":this.playerResourcesTemp.dayCounter>=77&&(this.ctx.fillStyle="#00009C"):this.playerResourcesTemp.dayCounter>=79&&(this.playerResourcesTemp.dayCounter<=115?this.ctx.fillStyle="#00008B":this.playerResourcesTemp.dayCounter>=116&&this.playerResourcesTemp.dayCounter<=117?this.ctx.fillStyle="#0000A8":this.playerResourcesTemp.dayCounter>=118&&this.playerResourcesTemp.dayCounter<=119?this.ctx.fillStyle="#0000C5":this.playerResourcesTemp.dayCounter>=120&&(this.ctx.fillStyle="#0000E2")),this.ctx.fillRect(0,this.ctx.canvas.height/6*-1,this.ctx.canvas.width,this.ctx.canvas.height),this.playerResourcesTemp.dayCounter>=79&&this.playerResourcesTemp.dayCounter<=117?this.drawStars(this.stars):this.getStars(),this.playerResourcesTemp.dayCounter<=40?this.playerResourcesTemp.dayCounter<=33?this.ctx.fillStyle="#228B22":this.playerResourcesTemp.dayCounter>=34&&this.playerResourcesTemp.dayCounter<=36?this.ctx.fillStyle="#1A881A":this.playerResourcesTemp.dayCounter>=37&&this.playerResourcesTemp.dayCounter<=39?this.ctx.fillStyle="#118611":this.playerResourcesTemp.dayCounter>=40&&(this.ctx.fillStyle="#098309"):this.playerResourcesTemp.dayCounter>=41&&this.playerResourcesTemp.dayCounter<79?this.playerResourcesTemp.dayCounter<=70?this.ctx.fillStyle="#008000":this.playerResourcesTemp.dayCounter>=71&&this.playerResourcesTemp.dayCounter<=73?this.ctx.fillStyle="#007900":this.playerResourcesTemp.dayCounter>=74&&this.playerResourcesTemp.dayCounter<=76?this.ctx.fillStyle="#007200":this.playerResourcesTemp.dayCounter>=77&&(this.ctx.fillStyle="#006B00"):this.playerResourcesTemp.dayCounter>=79&&(this.playerResourcesTemp.dayCounter<=115?this.ctx.fillStyle="#006400":this.playerResourcesTemp.dayCounter>=116&&this.playerResourcesTemp.dayCounter<=117?this.ctx.fillStyle="#096E09":this.playerResourcesTemp.dayCounter>=118&&this.playerResourcesTemp.dayCounter<=119?this.ctx.fillStyle="#117811":this.playerResourcesTemp.dayCounter>=120&&(this.ctx.fillStyle="#1A811A")),this.ctx.fillRect(0,this.ctx.canvas.height/6,this.ctx.canvas.width,this.ctx.canvas.height),this.drawGrass(),this.ctx.drawImage(this.vaultImg,.49*this.ctx.canvas.width-.129*this.ctx.canvas.height,.65*this.ctx.canvas.height,30*this.objectSize,30*this.objectSize)}},{key:"drawGrass",value:function(){if(this.playerResourcesTemp.dayCounter<=37){var e=this.ctx.createPattern(this.grassMorningImg,"repeat");this.ctx.fillStyle=e,this.ctx.fillRect(0,this.ctx.canvas.height/6,this.ctx.canvas.width,this.ctx.canvas.height)}else if(this.playerResourcesTemp.dayCounter>=38&&this.playerResourcesTemp.dayCounter<77){var t=this.ctx.createPattern(this.grassAfternoonImg,"repeat");this.ctx.fillStyle=t,this.ctx.fillRect(0,this.ctx.canvas.height/6,this.ctx.canvas.width,this.ctx.canvas.height)}else if(this.playerResourcesTemp.dayCounter>=77&&this.playerResourcesTemp.dayCounter<119){var s=this.ctx.createPattern(this.grassEveningImg,"repeat");this.ctx.fillStyle=s,this.ctx.fillRect(0,this.ctx.canvas.height/6,this.ctx.canvas.width,this.ctx.canvas.height)}else if(this.playerResourcesTemp.dayCounter>=119&&this.playerResourcesTemp.dayCounter<=120){var r=this.ctx.createPattern(this.grassMorningImg,"repeat");this.ctx.fillStyle=r,this.ctx.fillRect(0,this.ctx.canvas.height/6,this.ctx.canvas.width,this.ctx.canvas.height)}}},{key:"gameTicks",value:function(e,t){var s=this;this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.drawBackground(),t.forEach((function(e,t){!1===e.inCombat&&0===e.startPos&&0===e.animatePos&&0===e.direction&&e.x<.2*s.ctx.canvas.width&&(e.x+=.3*s.ctx.canvas.width/100),!1===e.inCombat&&0===e.startPos&&0===e.animatePos&&0===e.direction&&e.x>=.19*s.ctx.canvas.width&&e.animatePos++,!1===e.inCombat&&0===e.startPos&&0===e.animatePos&&1===e.direction&&e.x<.03*s.ctx.canvas.width&&(e.x+=.3*s.ctx.canvas.width/100),!1===e.inCombat&&0===e.startPos&&0===e.animatePos&&1===e.direction&&e.x>=.02*s.ctx.canvas.width&&e.animatePos++,!1===e.inCombat&&0===e.startPos&&1===e.animatePos&&(e.y<1*s.ctx.canvas.height&&(e.y+=.3*s.ctx.canvas.height/100),e.y>=1*s.ctx.canvas.height&&(e.finished=!0)),!1===e.inCombat&&1===e.startPos&&0===e.animatePos&&0===e.direction&&e.x>.67*s.ctx.canvas.width&&(e.x-=.3*s.ctx.canvas.width/100),!1===e.inCombat&&1===e.startPos&&0===e.animatePos&&0===e.direction&&e.x<=.67*s.ctx.canvas.width&&e.animatePos++,!1===e.inCombat&&1===e.startPos&&0===e.animatePos&&1===e.direction&&e.x>.84*s.ctx.canvas.width&&(e.x-=.3*s.ctx.canvas.width/100),!1===e.inCombat&&1===e.startPos&&0===e.animatePos&&1===e.direction&&e.x<=.84*s.ctx.canvas.width&&e.animatePos++,!1===e.inCombat&&1===e.startPos&&1===e.animatePos&&(e.y<1*s.ctx.canvas.height&&(e.y+=.3*s.ctx.canvas.height/100),e.y>=1*s.ctx.canvas.height&&(e.finished=!0)),s.drawCharacters(e)})),t.forEach((function(e,r){if(!0===e.finished)if(e.hp>0){0===e.level?(s.playerResourcesTemp.money-=50,s.playerResourcesTemp.moneyTaken+=50):1===e.level?(s.playerResourcesTemp.money-=100,s.playerResourcesTemp.moneyTaken+=100):(s.playerResourcesTemp.money-=100*e.level,s.playerResourcesTemp.moneyTaken+=100*e.level),document.getElementById("money").style.color="#F7461F";var a=setInterval((function(){document.getElementById("money")?(document.getElementById("money").style.color=s.playerResourcesTemp.money>=0?"#fff":"red",clearInterval(a)):clearInterval(a)}),1500);t.splice(r,1),s.playerResourcesReturn.emit(s.playerResourcesTemp)}else e.hp<=0&&!0===e.finished&&t.splice(r,1)})),e.forEach((function(e,r){0===e.startPos&&0===e.animatePos&&(e.target||t.forEach((function(t){!1===t.inCombat&&!1===t.isTarget&&t.y+.3*s.ctx.canvas.height>=e.y&&t.x+.3*s.ctx.canvas.width>=e.x&&t.x-.3*s.ctx.canvas.width<=e.x&&(e.target=t)})),e.target&&(e.hasTarget=!0,e.target.isTarget=!0,e.target.y<e.y-.08*s.ctx.canvas.height&&(e.y-=.4*s.ctx.canvas.height/100),e.target.y>e.y+.08*s.ctx.canvas.height&&(e.y+=.4*s.ctx.canvas.height/100),e.target.x>e.x+.05*s.ctx.canvas.height?e.x+=.4*s.ctx.canvas.height/100:e.target.x<e.x-.05*s.ctx.canvas.height&&(e.x-=.4*s.ctx.canvas.height/100),e.y>s.ctx.canvas.height&&(s.playerResourcesTemp.guardCount++,e.isAlive=!1,s.playerResourcesReturn.emit(s.playerResourcesTemp)),e.y-e.target.y<=.08*s.ctx.canvas.height&&e.target.y-e.y<=.08*s.ctx.canvas.height&&e.x-e.target.x<=.08*s.ctx.canvas.width&&e.target.x-e.x<=.08*s.ctx.canvas.width&&(e.target.inCombat=!0)),e.target&&!0===e.target.inCombat&&(s.guardAttack(e),s.banditAttack(e))),0===e.startPos&&1===e.animatePos&&(e.y<s.ctx.canvas.height&&(e.y+=.4*s.ctx.canvas.height/100),e.y>=1*s.ctx.canvas.height&&(s.playerResourcesTemp.guardCount++,e.isAlive=!1,s.playerResourcesReturn.emit(s.playerResourcesTemp))),s.drawCharacters(e)})),e.forEach((function(t,r){!1===t.isAlive&&(e.splice(r,1),s.playerResourcesReturn.emit(s.playerResourcesTemp))})),this.requestGameAnimatId=requestAnimationFrame((function(){return s.gameTicks}))}},{key:"getAllCharacters",value:function(e,t){var s=this;this.ngZone.runOutsideAngular((function(){return s.gameTicks(e,t)})),this.gameInterval=setInterval((function(){s.gameTicks(e,t)}),1e3/33)}},{key:"getStars",value:function(){this.stars=[];for(var e=0;e<this.starCount;e++){var t={x:0,y:0,radius:0};t.x=Math.floor(Math.random()*this.ctx.canvas.width)+1,t.y=Math.floor(Math.random()*(this.ctx.canvas.height/2))+1,t.radius=.1*this.objectSize,this.stars.push(t)}}},{key:"drawStars",value:function(e){for(var t=this,s=setInterval((function(){t.playerResourcesTemp.dayCounter>=78&&t.playerResourcesTemp.dayCounter<=79?(t.starLight+=.1,t.starLight>=1&&(t.starLight=1)):t.playerResourcesTemp.dayCounter<=115&&(t.starLight=1),t.playerResourcesTemp.dayCounter>=116&&t.playerResourcesTemp.dayCounter<=117&&(t.starLight-=.1,t.starLight<=0&&(t.starLight=0)),clearInterval(s)}),100),r=0;r<e.length;r++)this.ctx.beginPath(),this.ctx.arc(e[r].x,e[r].y,e[r].radius,0,2*Math.PI,!1),this.ctx.fillStyle="rgba(255, 255, 255, "+this.starLight+")",this.ctx.fill(),this.ctx.lineWidth=1,this.ctx.strokeStyle="rgba(255, 255, 255, "+this.starLight+")",this.ctx.stroke()}},{key:"playerTap",value:function(e){if(e.clientY>=.4*this.ctx.canvas.height&&e.clientX>.087*this.ctx.canvas.width&&e.clientX<this.ctx.canvas.width+.025*this.ctx.canvas.width)if(e.clientX>.44*this.ctx.canvas.width-.129*this.ctx.canvas.height&&e.clientX<.57*this.ctx.canvas.width-.129*this.ctx.canvas.height*-1&&e.clientY>.82*this.ctx.canvas.height+-.055*this.ctx.canvas.width);else{var t={id:Math.floor(9999*Math.random())+"-"+Math.floor(9999*Math.random())+"-"+Math.floor(9999*Math.random()),image:this.guardImg,speed:this.playerResourcesTemp.guardSpeedLvl,hp:9+this.playerResourcesTemp.guardArmorLvl,x:e.clientX-.07*this.ctx.canvas.height,y:e.clientY-.24*this.ctx.canvas.height,startPos:0,animatePos:0,attack:this.playerResourcesTemp.guardWeaponLvl,defense:this.playerResourcesTemp.guardArmorLvl,hasTarget:!1,target:null,isAlive:!0,isTutorialGuard:!1};this.playerResourcesTemp.tutorialGuards>0&&(t.isTutorialGuard=!0,this.playerResourcesTemp.tutorialGuards--),this.playerResourcesTemp.guardCount>0&&(this.playerResourcesTemp.guards.push(t),this.playerResourcesTemp.guardCount--,this.playerResourcesReturn.emit(this.playerResourcesTemp))}}},{key:"drawCharacters",value:function(e){this.ctx.drawImage(e.image,e.x,e.y,15*this.objectSize,15*this.objectSize)}},{key:"spawnBandits",value:function(){var e=this,t=0,s=0,r=0,a=0,i=0,o=0,n=0;this.banditSpawnInterval=setInterval((function(){e.playerResourcesTemp.banditWave<=2&&(t=Math.floor(2*Math.random()),s=0,r=10,a=2,i=0,o=0,n=0),e.playerResourcesTemp.banditWave>2&&e.playerResourcesTemp.banditWave<=5&&(t=Math.floor(2*Math.random()),s=Math.floor(2*Math.random())+1,r=10+Math.floor(2*Math.random())+1,a=5,i=Math.floor(2*Math.random())+1,o=i,n=i),e.playerResourcesTemp.banditWave>5&&e.playerResourcesTemp.banditWave<=8&&(t=Math.floor(2*Math.random()),s=Math.floor(3*Math.random())+2,r=10+Math.floor(3*Math.random())+2,a=11,i=Math.floor(3*Math.random())+2,o=i,n=i),e.playerResourcesTemp.banditWave>8&&e.playerResourcesTemp.banditWave<=11&&(t=Math.floor(2*Math.random()),s=Math.floor(5*Math.random())+4,r=10+Math.floor(5*Math.random())+4,a=23,i=Math.floor(5*Math.random())+4,o=i,n=i),e.playerResourcesTemp.banditWave>11&&e.playerResourcesTemp.banditWave<=14&&(t=Math.floor(2*Math.random()),s=Math.floor(9*Math.random())+8,r=10+Math.floor(9*Math.random())+8,a=47,i=Math.floor(16*Math.random())+15,o=i,n=i),e.playerResourcesTemp.banditWave>14&&e.playerResourcesTemp.banditWave<=17&&(t=Math.floor(2*Math.random()),s=Math.floor(15*Math.random())+16,r=10+Math.floor(15*Math.random())+16,a=50,i=Math.floor(11*Math.random())+30,o=i,n=i),e.playerResourcesTemp.banditWave>17&&e.playerResourcesTemp.banditWave<=20&&(t=Math.floor(2*Math.random()),s=Math.floor(21*Math.random())+30,r=10+Math.floor(11*Math.random())+30,a=60,i=Math.floor(11*Math.random())+40,o=i,n=i),e.playerResourcesTemp.banditWave>20&&e.playerResourcesTemp.banditWave<=23&&(t=Math.floor(2*Math.random()),s=Math.floor(11*Math.random())+50,r=10+Math.floor(11*Math.random())+40,a=70,i=Math.floor(11*Math.random())+50,o=i,n=i),e.playerResourcesTemp.banditWave>23&&e.playerResourcesTemp.banditWave<=26&&(t=Math.floor(2*Math.random()),s=Math.floor(11*Math.random())+60,r=10+Math.floor(11*Math.random())+50,a=80,i=Math.floor(11*Math.random())+60,o=i,n=i),e.playerResourcesTemp.banditWave>26&&e.playerResourcesTemp.banditWave<=29&&(t=Math.floor(2*Math.random()),s=Math.floor(11*Math.random())+70,r=10+Math.floor(11*Math.random())+60,a=90,i=Math.floor(11*Math.random())+70,o=i,n=i),e.playerResourcesTemp.banditWave>29&&(t=Math.floor(2*Math.random()),s=Math.floor(20*Math.random())+80,r=10+Math.floor(11*Math.random())+70,a=100,i=Math.floor(11*Math.random())+80,o=i,n=i),e.addBandit(t,s,r,i,o,n),e.playerResourcesTemp.banditSpawnCount++,e.playerResourcesTemp.banditSpawnCount>=a&&(e.playerResourcesTemp.banditWave++,e.playerResourcesTemp.isBanditWaveStarted=!1,e.playerResourcesTemp.banditSpawnCount=0,e.playerResourcesTemp.banditWaveCounter=0,clearInterval(e.banditSpawnInterval)),e.playerResourcesReturn.emit(e.playerResourcesTemp)}),2e3)}},{key:"addBandit",value:function(e,t,s,r,a,i){var o=this,n=0,c=0;0===e?(n=-15*this.ctx.canvas.width/100,c=17*this.ctx.canvas.height/100):1===e&&(n=115*this.ctx.canvas.width/100,c=17*this.ctx.canvas.height/100);var l={id:Math.floor(9999*Math.random())+"-"+Math.floor(9999*Math.random())+"-"+Math.floor(9999*Math.random()),image:this.banditImg,speed:t,hp:s,x:n,y:c,direction:Math.floor(2*Math.random()),startPos:e,animatePos:0,finished:!1,level:r,attack:a,defense:i,inCombat:!1,isTarget:!1},u=setTimeout((function(){o.playerResourcesTemp.bandits.push(l),o.playerResourcesReturn.emit(o.playerResourcesTemp),u&&clearTimeout(u)}),1e3)}},{key:"combatEffects",value:function(e,t){var s=.22*Math.floor(3*Math.random()+4),r=.12*Math.floor(3*Math.random()+6);this.ctx.drawImage(this.combatHit,e+s+-.1*e,t+r+-.055*t,20*this.objectSize,20*this.objectSize)}},{key:"guardAttack",value:function(e){if(e&&e.target){var t=this.playerResourcesTemp.guards.find((function(t){return t.id===e.id}));if(t){var s=this.playerResourcesTemp.bandits.find((function(e){return e.id===t.target.id}));if(s){if(1===Math.floor(Math.random()*(100-t.speed)+1)){this.combatEffects(t.x,t.y),this.optionsSelected.soundsOn&&this.isGuardMoneyView&&this.combatSound1.play();var r=1+this.playerResourcesTemp.guardWeaponLvl-s.defense;r<=0&&(r=1),s.hp-=r,s.hp<=0&&(s.finished=!0,s.inCombat=!1,t.target=null,e.animatePos++,this.playerResourcesTemp.banditsStopped++),this.playerResourcesReturn.emit(this.playerResourcesTemp)}}else t.target={}}}}},{key:"banditAttack",value:function(e){if(e&&e.target){var t=this.playerResourcesTemp.guards.find((function(t){return t.id===e.id}));if(t){var s=this.playerResourcesTemp.bandits.find((function(e){return e.id===t.target.id}));if(1===Math.floor(Math.random()*(100-t.target.speed)+1)){this.combatEffects(s.x,s.y),this.optionsSelected.soundsOn&&this.isGuardMoneyView&&this.combatSound2.play();var r=1+s.attack-t.defense;r<=0&&(r=1),t.hp-=r,!t.isTutorialGuard&&t.hp<=0?(t.isAlive=!1,s.inCombat=!1,s.isTarget=!1,this.playerResourcesTemp.totalGuards--,this.playerResourcesTemp.totalWorkers--):t.isTutorialGuard&&t.hp<=0&&(t.isAlive=!1,s.inCombat=!1,s.isTarget=!1,this.playerResourcesTemp.tutorialGuards--,this.playerResourcesTemp.totalGuards--,this.playerResourcesTemp.totalWorkers--),this.playerResourcesReturn.emit(this.playerResourcesTemp)}}}}},{key:"startBanditWaves",value:function(){var e=this;this.banditWaveInterval=setInterval((function(){!1===e.playerResourcesTemp.newPlayerVault&&(e.playerResourcesTemp.banditWaveCounter++,e.playerResourcesTemp.banditWaveCounter>=180&&(e.playerResourcesTemp.isBanditWaveStarted=!0,180===e.playerResourcesTemp.banditWaveCounter&&(e.optionsSelected.soundsOn&&e.banditsArrive.play(),e.spawnBandits())),e.playerResourcesReturn.emit(e.playerResourcesTemp))}),1e3)}},{key:"onResize",value:function(e){this.newResizePositions(),this.objectSizeHeight=.01*this.ctx.canvas.height,this.objectSize=this.objectSizeHeight,this.starCount=Math.abs(this.ctx.canvas.width/15),this.getStars()}},{key:"newResizePositions",value:function(){var e=this;this.playerResourcesTemp.guards.forEach((function(t){t.x=t.x/e.ctx.canvas.width,t.y=t.y/e.ctx.canvas.height})),this.playerResourcesTemp.bandits.forEach((function(t){t.x=t.x/e.ctx.canvas.width,t.y=t.y/e.ctx.canvas.height})),this.ctx.canvas.width=1*window.innerWidth,this.ctx.canvas.height=.5*window.innerHeight,this.playerResourcesTemp.guards.forEach((function(t){t.x=t.x*e.ctx.canvas.width,t.y=t.y*e.ctx.canvas.height})),this.playerResourcesTemp.bandits.forEach((function(t){t.x=t.x*e.ctx.canvas.width,t.y=t.y*e.ctx.canvas.height}))}},{key:"playerResources",set:function(e){this.playerResourcesTemp=e}}]),e}()).\u0275fac=function(e){return new(e||ee)(i.Pb(i.A))},ee.\u0275cmp=i.Jb({type:ee,selectors:[["app-guard-money-view"]],viewQuery:function(e,t){var s;1&e&&i.zc(Z,!0),2&e&&i.rc(s=i.ec())&&(t.canvas=s.first)},inputs:{playerResources:"playerResources",isGuardMoneyView:"isGuardMoneyView"},outputs:{playerResourcesReturn:"playerResourcesReturn"},decls:4,vars:1,consts:[[1,"stone-view-wrapper",3,"resize"],["class","workers-payday-warning payday-border",4,"ngIf"],["id","canvasGuardMoney",3,"click"],["canvasGuardMoney",""],[1,"workers-payday-warning","payday-border"]],template:function(e,t){1&e&&(i.Vb(0,"div",0),i.dc("resize",(function(e){return t.onResize(e)}),!1,i.uc),i.Bc(1,K,2,0,"p",1),i.Vb(2,"canvas",2,3),i.dc("click",(function(e){return t.playerTap(e)})),i.Ub(),i.Ub()),2&e&&(i.Cb(1),i.mc("ngIf",t.playerResourcesTemp.totalWorkers>0&&t.playerResourcesTemp.dayCounter>=110&&t.playerResourcesTemp.dayCounter<=114))},directives:[r.k],styles:["#canvasGuardMoney[_ngcontent-%COMP%]{display:block;margin:0 auto}"]}),ee);function se(e,t){if(1&e&&(i.Vb(0,"div",15),i.Vb(1,"h4",14),i.Cc(2,"Owe Guards"),i.Ub(),i.Vb(3,"p",7),i.Cc(4),i.Ub(),i.Ub()),2&e){var s=i.hc();i.Cb(4),i.Ec("-$",s.totalGuardCost," a day")}}function re(e,t){if(1&e&&(i.Vb(0,"span"),i.Vb(1,"mat-accordion"),i.Vb(2,"mat-expansion-panel",10),i.Vb(3,"mat-expansion-panel-header",11),i.Vb(4,"mat-panel-title"),i.Vb(5,"span",12),i.Vb(6,"h3"),i.Cc(7,"Guards"),i.Ub(),i.Ub(),i.Ub(),i.Ub(),i.Vb(8,"div",13),i.Vb(9,"h4",14),i.Cc(10,"Hired Guard"),i.Ub(),i.Vb(11,"p",7),i.Cc(12),i.Ub(),i.Ub(),i.Vb(13,"div",15),i.Vb(14,"h4",14),i.Cc(15,"Weapon Level"),i.Ub(),i.Vb(16,"p",7),i.Cc(17),i.Ub(),i.Ub(),i.Vb(18,"div",13),i.Vb(19,"h4",14),i.Cc(20,"Armor Level"),i.Ub(),i.Vb(21,"p",7),i.Cc(22),i.Ub(),i.Ub(),i.Vb(23,"div",15),i.Vb(24,"h4",14),i.Cc(25,"Speed Level"),i.Ub(),i.Vb(26,"p",7),i.Cc(27),i.Ub(),i.Ub(),i.Ub(),i.Ub(),i.Ub()),2&e){var s=i.hc();i.Cb(12),i.Dc(s.playerResourcesTemp.totalGuards),i.Cb(5),i.Dc(s.playerResourcesTemp.guardWeaponLvl),i.Cb(5),i.Dc(s.playerResourcesTemp.guardArmorLvl),i.Cb(5),i.Dc(s.playerResourcesTemp.guardSpeedLvl)}}function ae(e,t){if(1&e&&(i.Vb(0,"span"),i.Vb(1,"div",13),i.Vb(2,"h4",14),i.Cc(3,"Bandit Waves"),i.Ub(),i.Vb(4,"p",7),i.Cc(5),i.Ub(),i.Ub(),i.Vb(6,"div",15),i.Vb(7,"h4",14),i.Cc(8,"Money Stolen"),i.Ub(),i.Vb(9,"p",7),i.Cc(10),i.Ub(),i.Ub(),i.Vb(11,"div",13),i.Vb(12,"h4",14),i.Cc(13,"Bandits fended"),i.Ub(),i.Vb(14,"p",7),i.Cc(15),i.Ub(),i.Ub(),i.Ub()),2&e){var s=i.hc();i.Cb(5),i.Dc(s.playerResourcesTemp.banditWave),i.Cb(5),i.Ec("$",s.playerResourcesTemp.moneyTaken,""),i.Cb(5),i.Dc(s.playerResourcesTemp.banditsStopped)}}var ie,oe=function(e){return{"right-column":e}},ne=((ie=function(){function e(){_classCallCheck(this,e),this.playerResourcesTemp={chiselLvl:0,money:0,bricks:0,clicks:0,barterLvl:0,tradeWorkers:[],tradeWorkersCount:0,tradeWorkersLvl:0,stoneWorkers:[],stoneCuttersCount:0,stoneWorkerLvl:0,guards:[],guardCount:0,guardWeaponLvl:0,guardArmorLvl:0,guardSpeedLvl:0,dayCounter:0,daysPast:0,version:.5,totalClicks:0,totalBricks:0,totalMoney:0,newPlayer:!0,quests:{questLvl:0,questDesc:"",questReward:0,completed:!1,quest:{complete:!1,chiselLvl:0,barterLvl:0,masons:0,masonLvl:0,traders:0,traderLvl:0}},sky:{sun:{x:0,y:0},moon:{x:0,y:0}},housingLimit:0,housingLvl:0,totalWorkers:0,stockpile:0,stockpileLvl:0,screenWidth:0,screenChange:!1,gameLevel:1,currentChapter:"",newPlayerVault:!0,banditWave:0,bandits:[],banditWaveCounter:0,banditSpawnCount:0,isBanditWaveStarted:!1,moneyTaken:0,credit:3,banditsStopped:0,totalGuards:0,tutorialGuards:0},this.workersProfits=0,this.workersPayCheck=0,this.pageHeight=0,this.timeOfDay="Morning",this.baseCostPerBrick=1,this.creditScore="Great",this.displayAfterPayday="",this.totalMasonCost=0,this.totalTraderCost=0,this.totalGuardCost=0,this.stoneWallImagePath="assets/images/stoneWall.png",this.optionsSelected={darkMode:!1,soundsOn:!0}}return _createClass(e,[{key:"ngOnInit",value:function(){if(this.playerResourcesTemp.newPlayer&&document.getElementById("Close-Stats-Btn")&&(document.getElementById("Close-Stats-Btn").style.border="3px solid #8ADC41"),localStorage.length>0&&localStorage.getItem("mason_options")){var e=JSON.parse(localStorage.getItem("mason_options"));this.optionsSelected={darkMode:e.darkMode,soundsOn:e.soundsOn}}this.calcWorkerProfits(),this.calcHeightOfPage(),this.calcTimeOfDay(),this.calcCreditScore(),this.calcMoneyAfterPayday(),this.baseCostPerBrick+=this.playerResourcesTemp.barterLvl+this.playerResourcesTemp.tradeWorkersLvl}},{key:"calcWorkerProfits",value:function(){var e,t,s=4+this.playerResourcesTemp.stoneWorkerLvl;this.totalMasonCost=this.playerResourcesTemp.stoneWorkers.length*(2*this.playerResourcesTemp.stoneWorkerLvl+2),this.totalTraderCost=this.playerResourcesTemp.tradeWorkers.length*(2*this.playerResourcesTemp.tradeWorkersLvl+2),this.totalGuardCost=20*this.playerResourcesTemp.totalGuards,this.workersPayCheck=this.totalMasonCost+this.totalTraderCost+this.totalGuardCost;var r=Math.floor(Math.random()*(this.playerResourcesTemp.barterLvl+3+this.playerResourcesTemp.tradeWorkersLvl))+1+this.playerResourcesTemp.barterLvl+this.playerResourcesTemp.tradeWorkersLvl;e=9.6*(s+.6*this.playerResourcesTemp.stoneWorkerLvl*this.playerResourcesTemp.stoneWorkers.length)/14.5,t=Math.ceil(e*r)*this.playerResourcesTemp.tradeWorkers.length+this.playerResourcesTemp.tradeWorkersLvl,this.workersProfits=t-this.workersPayCheck}},{key:"calcHeightOfPage",value:function(){var e=.62*window.innerHeight,t=.0733*window.innerWidth;this.pageHeight=e+t}},{key:"onResize",value:function(e){this.calcHeightOfPage()}},{key:"calcTimeOfDay",value:function(){this.playerResourcesTemp.dayCounter<=40?this.timeOfDay="Morning":this.playerResourcesTemp.dayCounter>=41&&this.playerResourcesTemp.dayCounter<79?this.timeOfDay="Afternoon":this.playerResourcesTemp.dayCounter>=79&&(this.timeOfDay="Evening")}},{key:"calcCreditScore",value:function(){3===this.playerResourcesTemp.credit?this.creditScore="Great \ud83e\udd47":2===this.playerResourcesTemp.credit?this.creditScore="Good \ud83d\udc4d":1===this.playerResourcesTemp.credit&&(this.creditScore="Terrible \ud83d\ude12")}},{key:"calcMoneyAfterPayday",value:function(){var e=this.playerResourcesTemp.money-this.workersPayCheck;e>0?this.displayAfterPayday="$"+Math.abs(e):e<0&&(this.displayAfterPayday="-$"+Math.abs(e))}},{key:"playerResources",get:function(){return this.playerResourcesTemp},set:function(e){this.playerResourcesTemp=e}}]),e}()).\u0275fac=function(e){return new(e||ie)},ie.\u0275cmp=i.Jb({type:ie,selectors:[["app-stats-view"]],inputs:{playerResources:"playerResources"},decls:160,vars:43,consts:[[1,"stats-wrapper",3,"resize"],[1,"display-money"],[1,"stat-wall-border"],[1,"stat-opt-title-contents"],["id","scrollbar",1,"stat-lvls"],[1,"quest-wrapper"],[1,"lvl-amount","quest-title"],[1,"lvl-amount"],[1,"border-wall"],[1,"row"],[1,"expansion-panel-color","margin-top"],[1,"expansion-panel-color"],[1,"panel-titles"],[1,"column"],[1,"lvl-title"],[1,"column","right-column"],["class","column right-column",4,"ngIf"],[1,"column",3,"ngClass"],[4,"ngIf"]],template:function(e,t){1&e&&(i.Vb(0,"div",0),i.dc("resize",(function(e){return t.onResize(e)}),!1,i.uc),i.Vb(1,"p",1),i.Cc(2),i.Ub(),i.Vb(3,"div",2),i.Vb(4,"div",3),i.Vb(5,"div",4),i.Vb(6,"div",5),i.Vb(7,"p",6),i.Cc(8,"Current Quest"),i.Ub(),i.Vb(9,"p",7),i.Cc(10),i.Ub(),i.Vb(11,"p",7),i.Cc(12),i.Ub(),i.Qb(13,"div",8),i.Ub(),i.Vb(14,"div",9),i.Vb(15,"mat-accordion"),i.Vb(16,"mat-expansion-panel",10),i.Vb(17,"mat-expansion-panel-header",11),i.Vb(18,"mat-panel-title"),i.Vb(19,"span",12),i.Vb(20,"h3"),i.Cc(21,"Economy Levels"),i.Ub(),i.Ub(),i.Ub(),i.Ub(),i.Vb(22,"div",13),i.Vb(23,"h4",14),i.Cc(24,"Chisel Level"),i.Ub(),i.Vb(25,"p",7),i.Cc(26),i.Ub(),i.Ub(),i.Vb(27,"div",15),i.Vb(28,"h4",14),i.Cc(29,"Barter Level"),i.Ub(),i.Vb(30,"p",7),i.Cc(31),i.Ub(),i.Ub(),i.Vb(32,"div",13),i.Vb(33,"h4",14),i.Cc(34,"Housing Level"),i.Ub(),i.Vb(35,"p",7),i.Cc(36),i.Ub(),i.Ub(),i.Vb(37,"div",15),i.Vb(38,"h4",14),i.Cc(39,"Stockpile Level"),i.Ub(),i.Vb(40,"p",7),i.Cc(41),i.Ub(),i.Ub(),i.Vb(42,"div",13),i.Vb(43,"h4",14),i.Cc(44,"Rating"),i.Ub(),i.Vb(45,"p",7),i.Cc(46),i.Ub(),i.Ub(),i.Ub(),i.Ub(),i.Vb(47,"mat-accordion"),i.Vb(48,"mat-expansion-panel",10),i.Vb(49,"mat-expansion-panel-header",11),i.Vb(50,"mat-panel-title"),i.Vb(51,"span",12),i.Vb(52,"h3"),i.Cc(53,"Worker Payments"),i.Ub(),i.Ub(),i.Ub(),i.Ub(),i.Vb(54,"div",13),i.Vb(55,"h4",14),i.Cc(56,"$ Per Brick"),i.Ub(),i.Vb(57,"p",7),i.Cc(58),i.Ub(),i.Ub(),i.Vb(59,"div",15),i.Vb(60,"h4",14),i.Cc(61,"Owe Masons"),i.Ub(),i.Vb(62,"p",7),i.Cc(63),i.Ub(),i.Ub(),i.Vb(64,"div",13),i.Vb(65,"h4",14),i.Cc(66,"Owe Traders"),i.Ub(),i.Vb(67,"p",7),i.Cc(68),i.Ub(),i.Ub(),i.Bc(69,se,5,1,"div",16),i.Vb(70,"div",17),i.Vb(71,"h4",14),i.Cc(72,"Owe Workers"),i.Ub(),i.Vb(73,"p",7),i.Cc(74),i.Ub(),i.Ub(),i.Vb(75,"div",17),i.Vb(76,"h4",14),i.Cc(77,"Est. Profits"),i.Ub(),i.Vb(78,"p",7),i.Cc(79),i.Ub(),i.Ub(),i.Ub(),i.Ub(),i.Vb(80,"mat-accordion"),i.Vb(81,"mat-expansion-panel",10),i.Vb(82,"mat-expansion-panel-header",11),i.Vb(83,"mat-panel-title"),i.Vb(84,"span",12),i.Vb(85,"h3"),i.Cc(86,"Mason Workers"),i.Ub(),i.Ub(),i.Ub(),i.Ub(),i.Vb(87,"div",13),i.Vb(88,"h4",14),i.Cc(89,"Hired Mason"),i.Ub(),i.Vb(90,"p",7),i.Cc(91),i.Ub(),i.Ub(),i.Vb(92,"div",15),i.Vb(93,"h4",14),i.Cc(94,"Masons Level"),i.Ub(),i.Vb(95,"p",7),i.Cc(96),i.Ub(),i.Ub(),i.Ub(),i.Ub(),i.Vb(97,"mat-accordion"),i.Vb(98,"mat-expansion-panel",10),i.Vb(99,"mat-expansion-panel-header",11),i.Vb(100,"mat-panel-title"),i.Vb(101,"span",12),i.Vb(102,"h3"),i.Cc(103,"Trade Workers"),i.Ub(),i.Ub(),i.Ub(),i.Ub(),i.Vb(104,"div",13),i.Vb(105,"h4",14),i.Cc(106,"Hired Trader"),i.Ub(),i.Vb(107,"p",7),i.Cc(108),i.Ub(),i.Ub(),i.Vb(109,"div",15),i.Vb(110,"h4",14),i.Cc(111,"Traders Level"),i.Ub(),i.Vb(112,"p",7),i.Cc(113),i.Ub(),i.Ub(),i.Ub(),i.Ub(),i.Bc(114,re,28,4,"span",18),i.Vb(115,"mat-accordion"),i.Vb(116,"mat-expansion-panel",10),i.Vb(117,"mat-expansion-panel-header",11),i.Vb(118,"mat-panel-title"),i.Vb(119,"span",12),i.Vb(120,"h3"),i.Cc(121,"Mason Time"),i.Ub(),i.Ub(),i.Ub(),i.Ub(),i.Vb(122,"div",13),i.Vb(123,"h4",14),i.Cc(124,"Time Of Day"),i.Ub(),i.Vb(125,"p",7),i.Cc(126),i.Ub(),i.Ub(),i.Vb(127,"div",15),i.Vb(128,"h4",14),i.Cc(129,"Days Past"),i.Ub(),i.Vb(130,"p",7),i.Cc(131),i.Ub(),i.Ub(),i.Ub(),i.Ub(),i.Vb(132,"mat-accordion"),i.Vb(133,"mat-expansion-panel",10),i.Vb(134,"mat-expansion-panel-header",11),i.Vb(135,"mat-panel-title"),i.Vb(136,"span",12),i.Vb(137,"h3"),i.Cc(138,"Good To Know"),i.Ub(),i.Ub(),i.Ub(),i.Ub(),i.Vb(139,"div",13),i.Vb(140,"h4",14),i.Cc(141,"Total Taps"),i.Ub(),i.Vb(142,"p",7),i.Cc(143),i.Ub(),i.Ub(),i.Vb(144,"div",15),i.Vb(145,"h4",14),i.Cc(146,"Total Bricks"),i.Ub(),i.Vb(147,"p",7),i.Cc(148),i.Ub(),i.Ub(),i.Vb(149,"div",13),i.Vb(150,"h4",14),i.Cc(151,"Total Workers"),i.Ub(),i.Vb(152,"p",7),i.Cc(153),i.Ub(),i.Ub(),i.Vb(154,"div",15),i.Vb(155,"h4",14),i.Cc(156,"Total Money"),i.Ub(),i.Vb(157,"p",7),i.Cc(158),i.Ub(),i.Ub(),i.Bc(159,ae,16,3,"span",18),i.Ub(),i.Ub(),i.Ub(),i.Ub(),i.Ub(),i.Ub(),i.Ub()),2&e&&(i.Cb(2),i.Gc("Money: $",t.playerResourcesTemp.money," | Housing: ",t.playerResourcesTemp.totalWorkers,"/",t.playerResourcesTemp.housingLimit,""),i.Cb(1),i.Ac("border-image-source","url("+t.stoneWallImagePath+")",i.Ib),i.Cb(2),i.Ac("height",t.pageHeight,"px"),i.Cb(1),i.Ac("border-image-source","url("+t.stoneWallImagePath+")",i.Ib),i.Cb(4),i.Dc(t.playerResourcesTemp.quests.questDesc),i.Cb(2),i.Ec("Reward: $",t.playerResourcesTemp.quests.questReward,""),i.Cb(1),i.Ac("border-image-source","url("+t.stoneWallImagePath+")",i.Ib),i.Cb(13),i.Dc(t.playerResourcesTemp.chiselLvl),i.Cb(5),i.Dc(t.playerResourcesTemp.barterLvl),i.Cb(5),i.Dc(t.playerResourcesTemp.housingLvl),i.Cb(5),i.Dc(t.playerResourcesTemp.stockpileLvl),i.Cb(5),i.Dc(t.creditScore),i.Cb(12),i.Fc("+$",t.baseCostPerBrick," - $",t.playerResourcesTemp.barterLvl+3+t.playerResourcesTemp.tradeWorkersLvl,""),i.Cb(5),i.Ec("-$",t.totalMasonCost," a day"),i.Cb(5),i.Ec("-$",t.totalTraderCost," a day"),i.Cb(1),i.mc("ngIf",t.playerResourcesTemp.gameLevel>=2),i.Cb(1),i.mc("ngClass",i.pc(39,oe,t.playerResourcesTemp.gameLevel<2)),i.Cb(4),i.Ec("-$",t.workersPayCheck," a day"),i.Cb(1),i.mc("ngClass",i.pc(41,oe,t.playerResourcesTemp.gameLevel>=2)),i.Cb(4),i.Ec("+$",t.workersProfits,""),i.Cb(12),i.Dc(t.playerResourcesTemp.stoneCuttersCount),i.Cb(5),i.Dc(t.playerResourcesTemp.stoneWorkerLvl),i.Cb(12),i.Dc(t.playerResourcesTemp.tradeWorkersCount),i.Cb(5),i.Dc(t.playerResourcesTemp.tradeWorkersLvl),i.Cb(1),i.mc("ngIf",t.playerResourcesTemp.gameLevel>=2),i.Cb(12),i.Dc(t.timeOfDay),i.Cb(5),i.Dc(t.playerResourcesTemp.daysPast),i.Cb(12),i.Dc(t.playerResourcesTemp.totalClicks),i.Cb(5),i.Dc(t.playerResourcesTemp.totalBricks),i.Cb(5),i.Dc(t.playerResourcesTemp.totalWorkers),i.Cb(5),i.Ec("$",t.playerResourcesTemp.totalMoney,""),i.Cb(1),i.mc("ngIf",t.playerResourcesTemp.gameLevel>=2))},directives:[u.a,u.c,u.d,u.e,r.k,r.i],styles:['.column[_ngcontent-%COMP%]{width:46%;padding:3px;display:inline-block;margin-left:calc(4% - .7em);border-right:1px solid}.right-column[_ngcontent-%COMP%]{border:none}.row[_ngcontent-%COMP%]:after{content:"";display:table;clear:both}.stats-wrapper[_ngcontent-%COMP%]{width:100%;height:100%;min-width:100%;min-height:100%;overflow:hidden;position:fixed;top:calc(2.6% + 5.46rem);background-color:#228b22}.stat-lvls[_ngcontent-%COMP%]{width:100%;overflow:auto;height:24em}.lvl-amount[_ngcontent-%COMP%]{text-align:center;font-size:calc(100% + .1rem)}.margin-top[_ngcontent-%COMP%]{margin-top:1rem!important;margin-bottom:.5rem!important}.lvl-title[_ngcontent-%COMP%]{text-align:center;padding:0;margin:calc(1% + .4em) 0 0}.display-money[_ngcontent-%COMP%], .quest-title[_ngcontent-%COMP%]{font-weight:700}.display-money[_ngcontent-%COMP%]{text-align:center;font-size:calc(100% + .1rem)}.quest-wrapper[_ngcontent-%COMP%]{margin-top:1.5%}.border-wall[_ngcontent-%COMP%]{border-image-repeat:repeat;width:calc(100% - .05rem);border-bottom:1.1rem solid transparent!important;border-image-slice:36;margin:0 auto .5rem}.stat-wall-border[_ngcontent-%COMP%]{border-image-repeat:repeat;border-image-width:auto;width:100%;border-bottom:1.1rem solid transparent!important;border-image-slice:15;background-color:#228b22;height:calc(100% - 10rem);margin:0 auto}.stat-opt-title-contents[_ngcontent-%COMP%]{padding:1.5rem 1.1rem}.mat-expansion-panel-body[_ngcontent-%COMP%]{padding:0!important}@media only screen and (min-width:320px){.stat-wall-border[_ngcontent-%COMP%]{height:calc(100% - 10.5rem)}}@media only screen and (min-width:360px){.stat-wall-border[_ngcontent-%COMP%]{height:calc(100% - 10.6rem)}}@media only screen and (min-width:375px){.stat-wall-border[_ngcontent-%COMP%]{height:calc(100% - 10.7rem)}.stats-wrapper[_ngcontent-%COMP%]{top:calc(2.6% + 5.46rem)}}@media only screen and (min-width:411px){.stat-wall-border[_ngcontent-%COMP%]{height:calc(100% - 10.8rem)}}@media only screen and (min-width:414px){.stat-wall-border[_ngcontent-%COMP%]{height:calc(100% - 10.8rem)}}@media only screen and (min-width:768px){.stat-wall-border[_ngcontent-%COMP%]{height:calc(100% - 11.3rem)}.stats-wrapper[_ngcontent-%COMP%]{top:calc(2.6% + 5.6rem)}}@media only screen and (min-width:1024px)and (min-height:1366px){.stat-wall-border[_ngcontent-%COMP%]{height:calc(100% - 11.6rem)}.stats-wrapper[_ngcontent-%COMP%]{top:calc(2.6% + 5rem)}}']}),ie);function ce(e,t){if(1&e){var s=i.Wb();i.Vb(0,"button",13),i.dc("click",(function(e){return i.vc(s),i.hc().ShowVault()})),i.Cc(1,"Vault"),i.Ub()}}function le(e,t){if(1&e&&(i.Vb(0,"p",20),i.Cc(1,"Quest Completed!"),i.Ub()),2&e){var s=i.hc(2);i.Ac("width",s.gameStageWidth,"px")("right",s.gameStageWidth/18,"px")}}function ue(e,t){if(1&e){var s=i.Wb();i.Vb(0,"span",14),i.Vb(1,"div",15),i.Vb(2,"p",16),i.Cc(3),i.Ub(),i.Bc(4,le,2,4,"p",17),i.Vb(5,"button",18),i.dc("click",(function(e){return i.vc(s),i.hc().displayUpgrades()})),i.Cc(6,"Close"),i.Ub(),i.Ub(),i.Vb(7,"app-upgrade-menu",19),i.dc("stoneWorkerReturn",(function(e){return i.vc(s),i.hc().stoneWorkerReturn(e)}))("tradeWorkerReturn",(function(e){return i.vc(s),i.hc().tradeWorkerReturn(e)}))("guardReturn",(function(e){return i.vc(s),i.hc().guardReturn(e)}))("playerResourcesReturn",(function(e){return i.vc(s),i.hc().playerResourcesReturn(e)})),i.Ub(),i.Ub()}if(2&e){var r=i.hc();i.Cb(3),i.Dc(r.playerResources.currentChapter),i.Cb(1),i.mc("ngIf",r.quests.completed),i.Cb(3),i.mc("playerResources",r.playerResources)}}function he(e,t){if(1&e&&(i.Vb(0,"p",20),i.Cc(1,"Quest Completed!"),i.Ub()),2&e){var s=i.hc(2);i.Ac("width",s.gameStageWidth,"px")("right",s.gameStageWidth/18,"px")}}var de=function(e,t){return{display:e,hide:t}};function pe(e,t){if(1&e&&(i.Vb(0,"p",39),i.Cc(1,"New Quest Availiable! Select The Stats Button \ud83d\udc4c"),i.Ub()),2&e){var s=i.hc(2);i.Ac("width",s.gameStageWidth,"px")("right",s.gameStageWidth/18,"px"),i.mc("ngClass",i.qc(5,de,!s.isGuardMoneyView,s.isGuardMoneyView))}}function me(e,t){if(1&e&&(i.Vb(0,"p",20),i.Cc(1,"Bandits Are Attacking Your Vault!"),i.Ub()),2&e){var s=i.hc(2);i.Ac("width",s.gameStageWidth,"px")("right",s.gameStageWidth/18,"px")}}function ye(e,t){if(1&e){var s=i.Wb();i.Vb(0,"span"),i.Vb(1,"app-guard-money-view",31),i.dc("playerResourcesReturn",(function(e){return i.vc(s),i.hc(2).playerResourcesReturn(e)})),i.Ub(),i.Ub()}if(2&e){var r=i.hc(2);i.Cb(1),i.mc("ngClass",i.qc(3,de,r.isGuardMoneyView,!r.isGuardMoneyView))("playerResources",r.playerResources)("isGuardMoneyView",r.isGuardMoneyView)}}function be(e,t){if(1&e){var s=i.Wb();i.Vb(0,"button",40),i.dc("click",(function(e){return i.vc(s),i.hc(2).chisleStone()})),i.Cc(1,"Chisel"),i.Ub()}if(2&e){var r=i.hc(2);i.mc("disabled",r.disableChisel)}}function ge(e,t){if(1&e){var s=i.Wb();i.Vb(0,"button",41),i.dc("click",(function(e){return i.vc(s),i.hc(2).sellStone()})),i.Cc(1,"Sell"),i.Ub()}if(2&e){var r=i.hc(2);i.mc("disabled",r.disableSell)}}function ve(e,t){if(1&e){var s=i.Wb();i.Vb(0,"span",21),i.Vb(1,"div",22),i.Vb(2,"span",23),i.Cc(3),i.Ub(),i.Vb(4,"span",24),i.Cc(5),i.Qb(6,"img",25),i.Ub(),i.Vb(7,"span",26),i.Cc(8),i.Qb(9,"img",27),i.Ub(),i.Vb(10,"span",28),i.Qb(11,"img",29),i.Ub(),i.Ub(),i.Bc(12,he,2,4,"p",17),i.Bc(13,pe,2,8,"p",30),i.Bc(14,me,2,4,"p",17),i.Vb(15,"span"),i.Vb(16,"app-stone-cutter-view",31),i.dc("playerResourcesReturn",(function(e){return i.vc(s),i.hc().playerResourcesReturn(e)})),i.Ub(),i.Ub(),i.Bc(17,ye,2,6,"span",32),i.Vb(18,"div",33),i.Vb(19,"div",34),i.Bc(20,be,2,1,"button",35),i.Bc(21,ge,2,1,"button",36),i.Vb(22,"button",37),i.dc("click",(function(e){return i.vc(s),i.hc().displayUpgrades()})),i.Cc(23,"Upgrade"),i.Ub(),i.Vb(24,"button",38),i.dc("click",(function(e){return i.vc(s),i.hc().displayStats()})),i.Cc(25,"Stats"),i.Ub(),i.Ub(),i.Ub(),i.Ub()}if(2&e){var r=i.hc();i.Cb(3),i.Ec("$",r.money,""),i.Cb(1),i.mc("ngClass",i.qc(23,de,!r.isGuardMoneyView,r.isGuardMoneyView)),i.Cb(1),i.Fc("",r.playerResources.bricks,"/",r.playerResources.stockpile," "),i.Cb(1),i.nc("src",r.stoneIconPath,i.wc),i.Cb(1),i.mc("ngClass",i.qc(26,de,r.isGuardMoneyView,!r.isGuardMoneyView)),i.Cb(1),i.Dc(r.playerResources.guardCount),i.Cb(1),i.nc("src",r.guardIconPath,i.wc),i.Cb(1),i.mc("ngClass",i.qc(29,de,r.playerResources.isBanditWaveStarted,!r.playerResources.isBanditWaveStarted)),i.Cb(1),i.nc("src",r.banditIconPath,i.wc),i.Cb(1),i.mc("ngIf",r.quests.completed),i.Cb(1),i.mc("ngIf",r.isQuestAvailiable&&11!==r.quests.questLvl),i.Cb(1),i.mc("ngIf",r.playerResources.banditWaveCounter>175&&r.playerResources.banditWaveCounter<=180),i.Cb(2),i.mc("ngClass",i.qc(32,de,!r.isGuardMoneyView,r.isGuardMoneyView))("playerResources",r.playerResources)("isGuardMoneyView",r.isGuardMoneyView),i.Cb(1),i.mc("ngIf",r.playerResources.gameLevel>=2),i.Cb(2),i.Ac("width",r.gameStageWidth,"px"),i.Cb(1),i.mc("ngIf",!r.isGuardMoneyView),i.Cb(1),i.mc("ngIf",!r.isGuardMoneyView),i.Cb(1),i.mc("disabled",r.disableUpgrade),i.Cb(2),i.mc("disabled",r.disableStats)}}function Ce(e,t){if(1&e){var s=i.Wb();i.Vb(0,"span",42),i.Vb(1,"div",43),i.Vb(2,"p",16),i.Cc(3),i.Ub(),i.Vb(4,"button",44),i.dc("click",(function(e){return i.vc(s),i.hc().displayStats()})),i.Cc(5,"Close"),i.Ub(),i.Ub(),i.Qb(6,"app-stats-view",45),i.Ub()}if(2&e){var r=i.hc();i.Cb(3),i.Dc(r.playerResources.currentChapter),i.Cb(3),i.mc("playerResources",r.playerResources)}}var ke=function(e){return{"info-dm":e}};function fe(e,t){if(1&e){var s=i.Wb();i.Vb(0,"div",46),i.Vb(1,"div",47),i.Vb(2,"mat-toolbar",48),i.Vb(3,"div",49),i.Vb(4,"p",50),i.Cc(5,"New Update!"),i.Ub(),i.Ub(),i.Ub(),i.Vb(6,"span"),i.Vb(7,"p",51),i.Cc(8,"There appears to be a new update to Mason! Would you like to update now?"),i.Ub(),i.Vb(9,"button",52),i.dc("click",(function(e){return i.vc(s),i.hc().getNewUpdatesFromServer()})),i.Cc(10,"Aye \ud83c\udf89"),i.Ub(),i.Vb(11,"button",52),i.dc("click",(function(e){return i.vc(s),i.hc().getUpdateLater()})),i.Cc(12,"Next Time"),i.Ub(),i.Ub(),i.Ub(),i.Ub()}if(2&e){var r=i.hc();i.Cb(1),i.mc("ngClass",i.pc(1,ke,!0===r.optionsSelected.darkMode))}}function Re(e,t){1&e&&(i.Vb(0,"p",50),i.Cc(1,"Tap Anywhere To Continue"),i.Ub())}function we(e,t){1&e&&(i.Vb(0,"p",50),i.Cc(1,"Welcome!"),i.Ub())}function Te(e,t){if(1&e){var s=i.Wb();i.Vb(0,"span"),i.Vb(1,"p",51),i.Cc(2,"Welcome To Mason!"),i.Ub(),i.Vb(3,"p",51),i.Cc(4,"You appear to be new to this land. Would you like a few tips to help get your kingdom started?"),i.Ub(),i.Vb(5,"button",52),i.dc("click",(function(e){return i.vc(s),i.hc(2).beginTutorial()})),i.Cc(6,"Aye"),i.Ub(),i.Vb(7,"button",52),i.dc("click",(function(e){return i.vc(s),i.hc(2).tutorialDone()})),i.Cc(8,"I know what I'm doing \ud83d\udc4d"),i.Ub(),i.Ub()}}function Se(e,t){1&e&&(i.Vb(0,"p",51),i.Cc(1,"The first thing you want to do is to start generating income. You shall do this by crafting and selling bricks."),i.Ub())}function Ue(e,t){1&e&&(i.Vb(0,"p",51),i.Cc(1,"Tap the 'Chisel' button to start shaping your bricks. Keep tapping the button until the brick is made."),i.Ub())}function We(e,t){1&e&&(i.Vb(0,"p",51),i.Cc(1,"When You have one or more bricks, You can sell them. Tap the 'Sell' button to exchange your bricks for money."),i.Ub())}function xe(e,t){1&e&&(i.Vb(0,"p",51),i.Cc(1,"When you have some money on hand, you can upgrade your tools or hire some workers to help you make and sell bricks. To see the upgrades availiable, Select the 'Upgrade' button."),i.Ub())}function Me(e,t){1&e&&(i.Vb(0,"p",51),i.Cc(1,"Complete quests for a bonus stipend. You can check your current quest by tapping the 'Stats' button."),i.Ub())}function Le(e,t){1&e&&(i.Vb(0,"p",51),i.Cc(1,"When new areas are unlocked, you can go to them by tapping on the 'Areas' button at the top right of the screen. When you do, select a destination."),i.Ub())}function qe(e,t){1&e&&(i.Vb(0,"p",51),i.Cc(1,"That should get you started \ud83d\ude47\u200d\u2640\ufe0f As your kingdom grows, so will the challenges that lie ahead. Good luck!"),i.Ub())}function Ve(e,t){if(1&e){var s=i.Wb();i.Vb(0,"div",53),i.dc("click",(function(e){return i.vc(s),i.hc().closeNewPlayerPrompt()})),i.Vb(1,"div",47),i.Vb(2,"mat-toolbar",48),i.Vb(3,"div",49),i.Bc(4,Re,2,0,"p",54),i.Bc(5,we,2,0,"p",54),i.Ub(),i.Ub(),i.Bc(6,Te,9,0,"span",32),i.Bc(7,Se,2,0,"p",55),i.Bc(8,Ue,2,0,"p",55),i.Bc(9,We,2,0,"p",55),i.Bc(10,xe,2,0,"p",55),i.Bc(11,Me,2,0,"p",55),i.Bc(12,Le,2,0,"p",55),i.Bc(13,qe,2,0,"p",55),i.Ub(),i.Ub()}if(2&e){var r=i.hc();i.Cb(1),i.mc("ngClass",i.pc(11,ke,!0===r.optionsSelected.darkMode)),i.Cb(3),i.mc("ngIf",r.tutorialStep<8),i.Cb(1),i.mc("ngIf",8===r.tutorialStep),i.Cb(1),i.mc("ngIf",8===r.tutorialStep),i.Cb(1),i.mc("ngIf",7===r.tutorialStep),i.Cb(1),i.mc("ngIf",6===r.tutorialStep),i.Cb(1),i.mc("ngIf",5===r.tutorialStep),i.Cb(1),i.mc("ngIf",4===r.tutorialStep),i.Cb(1),i.mc("ngIf",3===r.tutorialStep),i.Cb(1),i.mc("ngIf",2===r.tutorialStep),i.Cb(1),i.mc("ngIf",1===r.tutorialStep)}}function Pe(e,t){1&e&&(i.Vb(0,"p",50),i.Cc(1,"Tap Anywhere To Continue"),i.Ub())}function Ie(e,t){1&e&&(i.Vb(0,"p",50),i.Cc(1,"Congratulations!"),i.Ub())}function Be(e,t){if(1&e){var s=i.Wb();i.Vb(0,"span"),i.Vb(1,"p",51),i.Cc(2,"You have proven that you can run a successful kingdom \ud83d\udc4d"),i.Ub(),i.Vb(3,"p",51),i.Cc(4,"More money comes more problems I'm afraid... Would you like to know what's over the horizon?"),i.Ub(),i.Vb(5,"button",56),i.dc("click",(function(e){return i.vc(s),i.hc(2).beginVaultTutorial()})),i.Cc(6,"Aye"),i.Ub(),i.Vb(7,"button",56),i.dc("click",(function(e){return i.vc(s),i.hc(2).vaultTutorialDone()})),i.Cc(8,"I know what I'm doing"),i.Ub(),i.Ub()}if(2&e){var r=i.hc(2);i.Cb(5),i.mc("disabled",r.newLevelCounter<=2),i.Cb(2),i.mc("disabled",r.newLevelCounter<=2)}}function Ae(e,t){1&e&&(i.Vb(0,"p",51),i.Cc(1,"Bandits have been spotted coming this way! They seem to be headed to our vault."),i.Ub())}function Oe(e,t){1&e&&(i.Vb(0,"p",51),i.Cc(1,"You will have to hire some help to defend your wealth. When you tap on the 'Upgrades' button, you can now hire and train guards."),i.Ub())}function Ge(e,t){1&e&&(i.Vb(0,"p",51),i.Cc(1,"Fortunately, You have three guards on hand. They should be able to stop them."),i.Ub())}function De(e,t){1&e&&(i.Vb(0,"p",51),i.Cc(1,"Bear this in mind, if the bandits take too much of your money and you can't pay for your workers, you may have to fire some. Don't let your treasury dip below $0."),i.Ub())}function _e(e,t){1&e&&(i.Vb(0,"p",51),i.Cc(1,"Now let's go to your vault. Tap on the Areas button at the top right of the screen and select the 'Vault'."),i.Ub())}function Ee(e,t){if(1&e){var s=i.Wb();i.Vb(0,"div",53),i.dc("click",(function(e){return i.vc(s),i.hc().closeNewPlayerVaultPrompt()})),i.Vb(1,"div",47),i.Vb(2,"mat-toolbar",48),i.Vb(3,"div",49),i.Bc(4,Pe,2,0,"p",54),i.Bc(5,Ie,2,0,"p",54),i.Ub(),i.Ub(),i.Bc(6,Be,9,2,"span",32),i.Bc(7,Ae,2,0,"p",55),i.Bc(8,Oe,2,0,"p",55),i.Bc(9,Ge,2,0,"p",55),i.Bc(10,De,2,0,"p",55),i.Bc(11,_e,2,0,"p",55),i.Ub(),i.Ub()}if(2&e){var r=i.hc();i.Cb(1),i.mc("ngClass",i.pc(9,ke,!0===r.optionsSelected.darkMode)),i.Cb(3),i.mc("ngIf",r.vaultTutorialStep<6),i.Cb(1),i.mc("ngIf",6===r.vaultTutorialStep),i.Cb(1),i.mc("ngIf",6===r.vaultTutorialStep),i.Cb(1),i.mc("ngIf",5===r.vaultTutorialStep),i.Cb(1),i.mc("ngIf",4===r.vaultTutorialStep),i.Cb(1),i.mc("ngIf",3===r.vaultTutorialStep),i.Cb(1),i.mc("ngIf",2===r.vaultTutorialStep),i.Cb(1),i.mc("ngIf",1===r.vaultTutorialStep)}}function He(e,t){1&e&&(i.Vb(0,"p",50),i.Cc(1,"Tap Anywhere To Continue"),i.Ub())}function Fe(e,t){1&e&&(i.Vb(0,"span"),i.Vb(1,"p",51),i.Cc(2,"You have arrived!"),i.Ub(),i.Vb(3,"p",51),i.Cc(4,"Here is your vault. This is where all your money is stored. Now let's put your guards to good use."),i.Ub(),i.Ub())}function ze(e,t){1&e&&(i.Vb(0,"p",51),i.Cc(1,"To defend your vault, tap on the bandits coming your way to place a guard. Guards will also wait for a target if they don't see one."),i.Ub())}function $e(e,t){1&e&&(i.Vb(0,"p",51),i.Cc(1,"When a guard has defeated a bandit, the guard will return back and then ready to be used again. If a guard is defeated, they are gone for good."),i.Ub())}function Ne(e,t){1&e&&(i.Vb(0,"p",51),i.Cc(1,"Admittedly, your guards don't look as equiped as the bandits coming this way.. Use them wisely!"),i.Ub())}function je(e,t){1&e&&(i.Vb(0,"p",51),i.Cc(1,"When this battle is over, I would recommend upgrading your guards and perhaps hire more of them."),i.Ub())}function Qe(e,t){1&e&&(i.Vb(0,"p",51),i.Cc(1,"The bandits will be here any second! Get ready to tap on the bandits when you see them!"),i.Ub())}function Je(e,t){if(1&e){var s=i.Wb();i.Vb(0,"div",53),i.dc("click",(function(e){return i.vc(s),i.hc().closeNewPlayerVaultSecPrompt()})),i.Vb(1,"div",47),i.Vb(2,"mat-toolbar",48),i.Vb(3,"div",49),i.Bc(4,He,2,0,"p",54),i.Ub(),i.Ub(),i.Bc(5,Fe,5,0,"span",32),i.Bc(6,ze,2,0,"p",55),i.Bc(7,$e,2,0,"p",55),i.Bc(8,Ne,2,0,"p",55),i.Bc(9,je,2,0,"p",55),i.Bc(10,Qe,2,0,"p",55),i.Ub(),i.Ub()}if(2&e){var r=i.hc();i.Cb(1),i.mc("ngClass",i.pc(8,ke,!0===r.optionsSelected.darkMode)),i.Cb(3),i.mc("ngIf",r.vaultSecTutorialStep<=6),i.Cb(1),i.mc("ngIf",6===r.vaultSecTutorialStep),i.Cb(1),i.mc("ngIf",5===r.vaultSecTutorialStep),i.Cb(1),i.mc("ngIf",4===r.vaultSecTutorialStep),i.Cb(1),i.mc("ngIf",3===r.vaultSecTutorialStep),i.Cb(1),i.mc("ngIf",2===r.vaultSecTutorialStep),i.Cb(1),i.mc("ngIf",1===r.vaultSecTutorialStep)}}function Ye(e,t){if(1&e){var s=i.Wb();i.Vb(0,"div",46),i.Vb(1,"div",47),i.Vb(2,"mat-toolbar",48),i.Vb(3,"div",49),i.Vb(4,"p",50),i.Cc(5,"It's All Over..."),i.Ub(),i.Ub(),i.Ub(),i.Vb(6,"span"),i.Vb(7,"p",51),i.Cc(8,"I'm sorry but your kingdom has been ransacked..."),i.Ub(),i.Vb(9,"p",51),i.Cc(10,"Would you like to start a new kingdom?"),i.Ub(),i.Vb(11,"button",56),i.dc("click",(function(e){return i.vc(s),i.hc().restartGame()})),i.Cc(12,"Aye..."),i.Ub(),i.Ub(),i.Ub(),i.Ub()}if(2&e){var r=i.hc();i.Cb(1),i.mc("ngClass",i.pc(2,ke,!0===r.optionsSelected.darkMode)),i.Cb(10),i.mc("disabled",r.endGameCounter<=2)}}var Xe,Ze,Ke=[{path:"",component:(Xe=function(){function e(t,s){_classCallCheck(this,e),this.swUpdate=t,this.ref=s,this.tradeWorkerGroup=[],this.stoneWorkerGroup=[],this.guardGroup=[],this.banditGroup=[],this.clicks=0,this.bricks=0,this.money=0,this.chiselLvl=0,this.barterLvl=0,this.stoneWorkerLvl=0,this.tradeWorkerLvl=0,this.guardWeaponLvl=0,this.guardArmorLvl=0,this.guardSpeedLvl=0,this.dayCounter=0,this.daysPast=0,this.version=.5,this.totalClicks=0,this.totalBricks=0,this.totalMoney=0,this.newPlayer=!0,this.newPlayerVault=!0,this.tutorialStep=8,this.vaultTutorialStep=6,this.vaultSecTutorialStep=6,this.tutorialStart=!1,this.isQuestAvailiable=!1,this.gameLevel=1,this.banditWave=0,this.chiselThrottled=!1,this.tutorialThrottled=!1,this.vaultTutorialThrottled=!1,this.tradeWorkersCount=0,this.stoneCuttersCount=0,this.guardCount=0,this.totalGuards=0,this.tutorialGuards=0,this.endGameCounter=0,this.newLevelCounter=0,this.stoneIconPath="assets/images/rock4.png",this.guardIconPath="assets/images/guard.png",this.banditIconPath="assets/images/bandit.png",this.chiselSoundPath="assets/sounds/chisel.wav",this.sellSoundPath="assets/sounds/sell.wav",this.chiselSound=new Audio,this.sellSound=new Audio,this.isGuardMoneyView=!1,this.quests={questLvl:0,questDesc:"",questReward:0,completed:!1,quest:{complete:!1,chiselLvl:0,barterLvl:0,masons:0,masonLvl:0,traders:0,traderLvl:0}},this.sky={sun:{x:0,y:0},moon:{x:0,y:0}},this.housingLimit=8,this.housingLvl=0,this.totalWorkers=0,this.stockpileLvl=0,this.stockpile=10,this.screenWidth=0,this.gameStageWidth=0,this.screenChange=!1,this.currentChapter="Humble Beginnings",this.banditWaveCounter=0,this.banditSpawnCount=0,this.isBanditWaveStarted=!1,this.moneyTaken=0,this.credit=3,this.banditsStopped=0,this.playerResources={chiselLvl:this.chiselLvl,money:this.money,bricks:this.bricks,clicks:this.clicks,barterLvl:this.barterLvl,tradeWorkers:this.tradeWorkerGroup,tradeWorkersCount:this.tradeWorkersCount,tradeWorkersLvl:this.tradeWorkerLvl,stoneWorkers:this.stoneWorkerGroup,stoneCuttersCount:this.stoneCuttersCount,stoneWorkerLvl:this.stoneWorkerLvl,guards:this.guardGroup,guardCount:this.guardCount,guardWeaponLvl:this.guardWeaponLvl,guardArmorLvl:this.guardArmorLvl,guardSpeedLvl:this.guardSpeedLvl,dayCounter:this.dayCounter,daysPast:this.daysPast,version:this.version,totalClicks:this.totalClicks,totalBricks:this.totalBricks,totalMoney:this.totalMoney,newPlayer:this.newPlayer,quests:this.quests,sky:this.sky,housingLimit:this.housingLimit,housingLvl:this.housingLvl,totalWorkers:this.totalWorkers,stockpile:this.stockpile,stockpileLvl:this.stockpileLvl,screenWidth:this.screenWidth,screenChange:this.screenChange,gameLevel:this.gameLevel,currentChapter:this.currentChapter,newPlayerVault:this.newPlayerVault,banditWave:this.banditWave,bandits:this.banditGroup,banditWaveCounter:this.banditWaveCounter,banditSpawnCount:this.banditSpawnCount,isBanditWaveStarted:this.isBanditWaveStarted,moneyTaken:this.moneyTaken,credit:this.credit,banditsStopped:this.banditsStopped,totalGuards:this.totalGuards,tutorialGuards:this.tutorialGuards},this.gameUpdateWarning=!1,this.isUpgradeDisplayed=!1,this.isStatsDisplayed=!1,this.gameOver=!1,this.disableChisel=!1,this.disableSell=!1,this.disableUpgrade=!1,this.disableStats=!1,this.disableAreas=!1,this.tradeWorkerObj={speed:0,frequency:Math.floor(5*Math.random())+1,x:0,y:0},this.optionsSelected={darkMode:!1,soundsOn:!0}}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this;if(this.swUpdate.isEnabled&&(this.updateWatch=this.swUpdate.available.subscribe((function(){e.gameUpdateWarning=!0}))),this.chiselSound.src=this.chiselSoundPath,this.chiselSound.load(),this.sellSound.src=this.sellSoundPath,this.chiselSound.load(),localStorage.length>0&&localStorage.getItem("mason_options")){var t=JSON.parse(localStorage.getItem("mason_options"));this.optionsSelected={darkMode:t.darkMode,soundsOn:t.soundsOn};var s=document.getElementsByTagName("body");this.optionsSelected.darkMode?s[0].classList.add("darkMode"):s[0].classList.remove("darkMode")}else{document.getElementsByTagName("body")[0].classList.add("darkMode");var r=JSON.stringify(this.optionsSelected);localStorage.setItem("mason_options",r)}if(localStorage.length>0&&localStorage.getItem("mason_data")){var a=JSON.parse(localStorage.getItem("mason_data"));this.playerResources={chiselLvl:a.chiselLvl?a.chiselLvl:0,money:a.money?a.money:0,bricks:a.bricks?a.bricks:0,clicks:a.clicks?a.clicks:0,barterLvl:a.barterLvl?a.barterLvl:0,tradeWorkers:a.tradeWorkers?a.tradeWorkers:[],tradeWorkersCount:a.tradeWorkersCount?a.tradeWorkersCount:0,tradeWorkersLvl:a.tradeWorkersLvl?a.tradeWorkersLvl:0,stoneWorkers:a.stoneWorkers?a.stoneWorkers:[],stoneCuttersCount:a.stoneCuttersCount?a.stoneCuttersCount:0,stoneWorkerLvl:a.stoneWorkerLvl?a.stoneWorkerLvl:0,guards:a.guards?a.guards:[],guardCount:a.guardCount?a.guardCount:0,guardWeaponLvl:a.guardWeaponLvl?a.guardWeaponLvl:0,guardArmorLvl:a.guardArmorLvl?a.guardArmorLvl:0,guardSpeedLvl:a.guardSpeedLvl?a.guardSpeedLvl:0,dayCounter:a.dayCounter?a.dayCounter:0,daysPast:a.daysPast?a.daysPast:0,version:a.version,totalClicks:a.totalClicks?a.totalClicks:0,totalBricks:a.totalBricks?a.totalBricks:0,totalMoney:a.totalMoney?a.totalMoney:0,newPlayer:void 0===a.newPlayer||!0===a.newPlayer,quests:void 0===a.quests?this.quests:a.quests,sky:void 0===a.sky?this.sky:a.sky,housingLimit:void 0===a.housingLimit?this.housingLimit:a.housingLimit,housingLvl:void 0===a.housingLvl?this.housingLvl:a.housingLvl,totalWorkers:void 0===a.totalWorkers?this.totalWorkers:a.totalWorkers,stockpile:void 0===a.stockpile?this.stockpile:a.stockpile,stockpileLvl:void 0===a.stockpileLvl?this.stockpileLvl:a.stockpileLvl,screenWidth:void 0===a.screenWidth?this.screenWidth:a.screenWidth,screenChange:void 0===a.screenChange?this.screenChange:a.screenChange,gameLevel:void 0===a.gameLevel?this.gameLevel:a.gameLevel,currentChapter:void 0===a.currentChapter?this.currentChapter:a.currentChapter,newPlayerVault:void 0===a.newPlayerVault||!0===a.newPlayerVault,banditWave:void 0===a.banditWave?this.banditWave:a.banditWave,bandits:a.bandits?a.bandits:[],banditWaveCounter:a.banditWaveCounter?a.banditWaveCounter:0,banditSpawnCount:a.banditSpawnCount?a.banditSpawnCount:0,isBanditWaveStarted:!!a.isBanditWaveStarted&&a.isBanditWaveStarted,moneyTaken:a.moneyTaken?a.moneyTaken:0,credit:a.credit?a.credit:3,banditsStopped:a.banditsStopped?a.banditsStopped:0,totalGuards:a.totalGuards?a.totalGuards:0,tutorialGuards:a.tutorialGuards?a.tutorialGuards:0},this.chiselLvl=a.chiselLvl?a.chiselLvl:0,this.money=a.money?a.money:0,this.bricks=a.bricks?a.bricks:0,this.clicks=a.clicks?a.clicks:0,this.barterLvl=a.barterLvl?a.barterLvl:0,this.tradeWorkerGroup=a.tradeWorkers?a.tradeWorkers:[],this.tradeWorkersCount=a.tradeWorkersCount?a.tradeWorkersCount:0,this.tradeWorkerLvl=a.tradeWorkersLvl?a.tradeWorkersLvl:0,this.stoneWorkerGroup=a.stoneWorkers?a.stoneWorkers:[],this.stoneCuttersCount=a.stoneCuttersCount?a.stoneCuttersCount:0,this.stoneWorkerLvl=a.stoneWorkerLvl?a.stoneWorkerLvl:0,this.guardGroup=a.guards?a.guards:[],this.guardCount=a.guardCount?a.guardCount:0,this.guardWeaponLvl=a.guardWeaponLvl?a.guardWeaponLvl:0,this.guardArmorLvl=a.guardArmorLvl?a.guardArmorLvl:0,this.guardSpeedLvl=a.guardSpeedLvl?a.guardSpeedLvl:0,this.dayCounter=a.dayCounter?a.dayCounter:0,this.daysPast=a.daysPast?a.daysPast:0,this.version=a.version,this.totalClicks=a.totalClicks?a.totalClicks:0,this.totalBricks=a.totalBricks?a.totalBricks:0,this.totalMoney=a.totalMoney?a.totalMoney:0,this.newPlayer=void 0===a.newPlayer||!0===a.newPlayer,this.quests=void 0===a.quests?this.quests:a.quests,this.sky=void 0===a.sky?this.sky:a.sky,this.housingLimit=void 0===a.housingLimit?this.housingLimit:a.housingLimit,this.housingLvl=void 0===a.housingLvl?this.housingLvl:a.housingLvl,this.totalWorkers=void 0===a.totalWorkers?this.totalWorkers:a.totalWorkers,this.stockpile=void 0===a.stockpile?this.stockpile:a.stockpile,this.stockpileLvl=void 0===a.stockpileLvl?this.stockpileLvl:a.stockpileLvl,this.screenWidth=void 0===a.screenWidth?this.screenWidth:a.screenWidth,this.screenChange=void 0===a.screenChange?this.screenChange:a.screenChange,this.gameLevel=void 0===a.gameLevel?this.gameLevel:a.gameLevel,this.currentChapter=void 0===a.currentChapter?this.currentChapter:a.currentChapter,this.newPlayerVault=void 0===a.newPlayerVault?this.newPlayerVault:a.newPlayerVault,this.banditWave=void 0===a.banditWave?this.banditWave:a.banditWave,this.banditGroup=a.bandits?a.bandits:[],this.banditWaveCounter=a.banditWaveCounter?a.banditWaveCounter:0,this.banditSpawnCount=a.banditSpawnCount?a.banditSpawnCount:0,this.isBanditWaveStarted=!!a.isBanditWaveStarted&&a.isBanditWaveStarted,this.moneyTaken=a.moneyTaken?a.moneyTaken:0,this.credit=a.credit?a.credit:0,this.banditsStopped=a.banditsStopped?a.banditsStopped:0,this.totalGuards=a.totalGuards?a.totalGuards:0,this.tutorialGuards=a.tutorialGuards?a.tutorialGuards:0}this.getScreenWidth()}},{key:"chisleStone",value:function(){var e=this;this.chiselThrottled||(this.playerResources.bricks<this.playerResources.stockpile&&(this.optionsSelected.soundsOn&&this.chiselSound.play(),this.chiselThrottled=!0,this.isQuestAvailiable=!1,this.clicks+=1,this.totalClicks+=1,this.playerResources={chiselLvl:this.chiselLvl,money:this.money,bricks:this.bricks,clicks:this.clicks,barterLvl:this.barterLvl,tradeWorkers:this.tradeWorkerGroup,tradeWorkersCount:this.tradeWorkersCount,tradeWorkersLvl:this.tradeWorkerLvl,stoneWorkers:this.stoneWorkerGroup,stoneCuttersCount:this.stoneCuttersCount,stoneWorkerLvl:this.stoneWorkerLvl,guards:this.guardGroup,guardCount:this.guardCount,guardWeaponLvl:this.guardWeaponLvl,guardArmorLvl:this.guardArmorLvl,guardSpeedLvl:this.guardSpeedLvl,dayCounter:this.dayCounter,daysPast:this.daysPast,version:this.version,totalClicks:this.totalClicks,totalBricks:this.totalBricks,totalMoney:this.totalMoney,newPlayer:this.newPlayer,quests:this.quests,sky:this.sky,housingLimit:this.housingLimit,housingLvl:this.housingLvl,totalWorkers:this.totalWorkers,stockpile:this.stockpile,stockpileLvl:this.stockpileLvl,screenWidth:this.screenWidth,screenChange:this.screenChange,gameLevel:this.gameLevel,currentChapter:this.currentChapter,newPlayerVault:this.newPlayerVault,banditWave:this.banditWave,bandits:this.banditGroup,banditWaveCounter:this.banditWaveCounter,banditSpawnCount:this.banditSpawnCount,isBanditWaveStarted:this.isBanditWaveStarted,moneyTaken:this.moneyTaken,credit:this.credit,banditsStopped:this.banditsStopped,totalGuards:this.totalGuards,tutorialGuards:this.tutorialGuards},this.ref.markForCheck(),setTimeout((function(){e.chiselThrottled=!1}),100)),5===this.tutorialStep&&this.playerResources.bricks>0&&(this.tutorialStart=!1))}},{key:"sellStone",value:function(){var e=this,t=Math.floor(Math.random()*(this.barterLvl+1))+1;if(t>=this.bricks&&(t=this.bricks),this.bricks>0){var s=(Math.floor(Math.random()*(this.barterLvl+3+this.playerResources.tradeWorkersLvl))+(1+this.barterLvl+this.playerResources.tradeWorkersLvl))*t;this.money+=s,this.totalMoney+=s,this.bricks-=t,this.totalClicks+=1,this.optionsSelected.soundsOn&&this.sellSound.play(),document.getElementById("money").style.color="#8ADC41";var r=setInterval((function(){document.getElementById("money")?(document.getElementById("money").style.color=e.playerResources.money>=0?"#fff":"#F7461F",clearInterval(r)):clearInterval(r)}),350)}else this.bricks<=0&&(this.bricks=0);this.playerResources.totalClicks=this.totalClicks,this.playerResources.totalMoney=this.totalMoney,this.playerResources.money=this.money,this.playerResources.bricks=this.bricks,this.ref.markForCheck(),5===this.tutorialStep&&(this.tutorialStart=!1,this.tutorialStep--)}},{key:"playerResourcesReturn",value:function(e){var t=this;if(this.playerResources=e,this.clicks=e.clicks,this.money=e.money,this.totalMoney=e.totalMoney,this.bricks=e.bricks,this.chiselLvl=e.chiselLvl,this.tradeWorkerLvl=e.tradeWorkersLvl,this.tradeWorkersCount=e.tradeWorkersCount,this.stoneWorkerLvl=e.stoneWorkerLvl,this.stoneCuttersCount=e.stoneCuttersCount,this.barterLvl=e.barterLvl,this.dayCounter=e.dayCounter,this.daysPast=e.daysPast,this.totalBricks=e.totalBricks,this.newPlayer=e.newPlayer,this.sky=e.sky,this.housingLimit=e.housingLimit,this.housingLvl=e.housingLvl,this.totalWorkers=e.totalWorkers,this.stockpile=e.stockpile,this.stockpileLvl=e.stockpileLvl,this.screenWidth=e.screenWidth,this.screenChange=e.screenChange,this.gameLevel=e.gameLevel,this.currentChapter=e.currentChapter,this.newPlayerVault=e.newPlayerVault,this.banditWave=e.banditWave,this.guardWeaponLvl=e.guardWeaponLvl,this.guardArmorLvl=e.guardArmorLvl,this.guardSpeedLvl=e.guardSpeedLvl,this.guardCount=e.guardCount,this.banditWaveCounter=e.banditWaveCounter,this.banditSpawnCount=e.banditSpawnCount,this.isBanditWaveStarted=e.isBanditWaveStarted,this.moneyTaken=e.moneyTaken,this.credit=e.credit,this.banditsStopped=e.banditsStopped,this.totalGuards=e.totalGuards,this.tutorialGuards=e.tutorialGuards,this.setQuests(),0===this.playerResources.credit){this.gameOver=!0;var s=setInterval((function(){t.endGameCounter++,t.endGameCounter>=2&&(t.endGameCounter=0,clearInterval(s))}),1e3)}this.ref.markForCheck()}},{key:"stoneWorkerReturn",value:function(e){if(e){var t={image:new Image,speed:0,frequency:Math.floor(5*Math.random())+1,workLoad:Math.floor(5*Math.random())+3,x:0,y:0,startPos:0,direction:0,startedWork:!0};this.stoneWorkerGroup.push(t),this.playerResources.stoneWorkers=this.stoneWorkerGroup,this.ref.markForCheck()}}},{key:"tradeWorkerReturn",value:function(e){if(e){var t={image:new Image,speed:0,frequency:Math.floor(5*Math.random())+1,x:0,y:0,startPos:0,direction:0,startedWork:!0};this.tradeWorkerGroup.push(t),this.playerResources.tradeWorkers=this.tradeWorkerGroup,this.ref.markForCheck()}}},{key:"guardReturn",value:function(e){e&&(this.guardCount++,this.totalGuards++,this.totalWorkers++,this.playerResources.guardCount=this.guardCount,this.playerResources.totalGuards=this.totalGuards,this.playerResources.totalWorkers=this.totalWorkers,this.ref.markForCheck())}},{key:"displayUpgrades",value:function(){this.isUpgradeDisplayed?(this.isUpgradeDisplayed=!1,this.newPlayer&&(this.tutorialStart=!1,this.tutorialStep=3)):(this.saveGame(),this.isUpgradeDisplayed=!0,this.playerResources.clicks=0,this.clicks=0)}},{key:"displayStats",value:function(){this.isStatsDisplayed?(this.isStatsDisplayed=!1,this.newPlayer&&(this.tutorialStart=!1,this.tutorialStep=2)):(this.saveGame(),this.isStatsDisplayed=!0,this.playerResources.clicks=0,this.clicks=0)}},{key:"getNewUpdatesFromServer",value:function(){this.gameUpdateWarning=!1,window.location.reload()}},{key:"getUpdateLater",value:function(){this.updateWatch&&(this.updateWatch.unsubscribe(),this.gameUpdateWarning=!1)}},{key:"saveGame",value:function(){var e=JSON.stringify(this.playerResources);localStorage.setItem("mason_data",e)}},{key:"saveGameAndQuit",value:function(){var e=JSON.stringify(this.playerResources);localStorage.setItem("mason_data",e),history.back()}},{key:"closeNewPlayerPrompt",value:function(){var e=this;this.tutorialThrottled||(this.tutorialThrottled=!0,6===this.tutorialStep&&(this.tutorialStart=!0,document.getElementById("Chisel-Btn").style.border="3px solid #8ADC41",this.disableChisel=!1,this.disableSell=!0,this.disableUpgrade=!0,this.disableStats=!0,this.disableAreas=!0),5===this.tutorialStep&&(setTimeout((function(){e.tutorialStart=!0}),1500),document.getElementById("Chisel-Btn").style.border="none",document.getElementById("Sell-Btn").style.border="3px solid #8ADC41",this.disableChisel=!0,this.disableSell=!1,this.disableUpgrade=!0,this.disableStats=!0,this.disableAreas=!0),4===this.tutorialStep&&(setTimeout((function(){e.tutorialStart=!0}),1500),document.getElementById("Chisel-Btn").style.border="none",document.getElementById("Sell-Btn").style.border="none",document.getElementById("Upgrade-Btn").style.border="3px solid #8ADC41",this.disableChisel=!0,this.disableSell=!0,this.disableUpgrade=!1,this.disableStats=!0,this.disableAreas=!0),3===this.tutorialStep&&(setTimeout((function(){e.tutorialStart=!0}),1500),document.getElementById("Chisel-Btn").style.border="none",document.getElementById("Sell-Btn").style.border="none",document.getElementById("Upgrade-Btn").style.border="none",document.getElementById("Stats-Btn").style.border="3px solid #8ADC41",this.disableChisel=!0,this.disableSell=!0,this.disableUpgrade=!0,this.disableStats=!1,this.disableAreas=!0),2===this.tutorialStep&&(setTimeout((function(){e.tutorialStart=!0}),1500),document.getElementById("Chisel-Btn").style.border="none",document.getElementById("Sell-Btn").style.border="none",document.getElementById("Upgrade-Btn").style.border="none",document.getElementById("Stats-Btn").style.border="none",document.getElementById("Area-Btn").style.border="3px solid #8ADC41",this.disableChisel=!0,this.disableSell=!0,this.disableUpgrade=!0,this.disableStats=!0,this.disableAreas=!1),1===this.tutorialStep&&(this.disableChisel=!1,this.disableSell=!1,this.disableUpgrade=!1,this.disableStats=!1,this.disableAreas=!1,document.getElementById("Area-Btn").style.border="none",this.tutorialDone(),this.saveGame()),this.tutorialStep>=6&&this.tutorialStep--,setTimeout((function(){e.tutorialThrottled=!1}),2e3))}},{key:"closeNewPlayerVaultPrompt",value:function(){var e=this;this.vaultTutorialThrottled||(this.vaultTutorialThrottled=!0,this.vaultTutorialStep<6&&this.vaultTutorialStep--,0===this.vaultTutorialStep&&(document.getElementById("Area-Btn").style.border="3px solid #8ADC41",this.disableChisel=!0,this.disableSell=!0,this.disableUpgrade=!0,this.disableStats=!0,this.disableAreas=!1),setTimeout((function(){e.vaultTutorialThrottled=!1}),2e3))}},{key:"closeNewPlayerVaultSecPrompt",value:function(){var e=this;this.vaultTutorialThrottled||(this.vaultTutorialThrottled=!0,this.vaultSecTutorialStep--,0===this.vaultSecTutorialStep&&this.vaultTutorialDone(),setTimeout((function(){e.vaultTutorialThrottled=!1}),2e3))}},{key:"beginTutorial",value:function(){this.tutorialStep=8}},{key:"tutorialDone",value:function(){this.newPlayer=!1,this.tutorialStep=8,this.playerResources.newPlayer=!1,this.tutorialStart=!1,this.isQuestAvailiable=!0,this.ref.markForCheck(),this.newQuestMessage(),this.saveGame()}},{key:"vaultTutorialDone",value:function(){this.newPlayerVault=!1,this.playerResources.newPlayerVault=!1,this.playerResources.banditWaveCounter=177,this.newLevelCounter=0,this.ref.markForCheck(),this.saveGame()}},{key:"beginVaultTutorial",value:function(){this.vaultTutorialStep--}},{key:"getScreenWidth",value:function(){0===this.playerResources.screenWidth&&(this.playerResources.screenWidth=window.innerWidth),this.playerResources.screenWidth===window.innerWidth?this.playerResources.screenChange=!1:this.playerResources.screenWidth!==window.innerWidth&&(this.playerResources.screenChange=!0,this.playerResources.screenWidth=window.innerWidth),this.gameStageWidth=.9*window.innerWidth}},{key:"onResize",value:function(e){this.getScreenWidth()}},{key:"ShowQuarry",value:function(){this.isGuardMoneyView=!1,this.playerResources.newPlayer&&(this.tutorialStep--,this.tutorialStart=!1)}},{key:"ShowVault",value:function(){this.isGuardMoneyView=!0,this.playerResources.newPlayerVault&&(document.getElementById("Area-Btn").style.border="none",this.disableChisel=!1,this.disableSell=!1,this.disableUpgrade=!1,this.disableStats=!1,this.disableAreas=!1)}},{key:"restartGame",value:function(){localStorage.removeItem("mason_data"),window.location.reload()}},{key:"newQuestMessage",value:function(){var e=this,t=setInterval((function(){e.isQuestAvailiable=!1,t&&clearInterval(t)}),4500)}},{key:"questCompleted",value:function(){var e=this;this.quests.completed=!0,this.quests.quest.complete=!0;var t=setInterval((function(){e.quests.completed=!1,e.isQuestAvailiable=!0,e.ref.markForCheck(),e.newQuestMessage(),t&&clearInterval(t)}),3500)}},{key:"setQuests",value:function(){var e=this;if(0!==this.quests.questLvl||this.quests.completed)if(1!==this.quests.questLvl||this.quests.completed)if(2!==this.quests.questLvl||this.quests.completed)if(3!==this.quests.questLvl||this.quests.completed)if(4!==this.quests.questLvl||this.quests.completed)if(5!==this.quests.questLvl||this.quests.completed)if(6!==this.quests.questLvl||this.quests.completed)if(7!==this.quests.questLvl||this.quests.completed)if(8!==this.quests.questLvl||this.quests.completed)if(9!==this.quests.questLvl||this.quests.completed)if(10!==this.quests.questLvl||this.quests.completed)if(11!==this.quests.questLvl||this.quests.completed)12!==this.quests.questLvl||this.quests.completed?13!==this.quests.questLvl||this.quests.completed?14!==this.quests.questLvl||this.quests.completed?15!==this.quests.questLvl||this.quests.completed?16!==this.quests.questLvl||this.quests.completed?17!==this.quests.questLvl||this.quests.completed?18!==this.quests.questLvl||this.quests.completed?19!==this.quests.questLvl||this.quests.completed?20!==this.quests.questLvl||this.quests.completed||(this.quests.questDesc="That is all there is for now. Get ready for the next challenge \ud83d\ude47\u200d\u2640\ufe0f",this.currentChapter="Rise To Power",this.playerResources.currentChapter=this.currentChapter,this.playerResources.gameLevel=3,this.quests.quest.complete=!1,this.quests.questReward=1e5):(this.quests.questDesc="Beat 30 waves of bandits",this.quests.quest.complete=!1,this.quests.questReward=2100,this.playerResources.banditWave>30&&!this.quests.quest.complete&&(this.playerResources.totalMoney+=this.quests.questReward,this.playerResources.money+=this.quests.questReward,this.quests.questLvl++,this.questCompleted())):(this.quests.questDesc="Beat 27 waves of bandits",this.quests.quest.complete=!1,this.quests.questReward=1900,this.playerResources.banditWave>27&&!this.quests.quest.complete&&(this.playerResources.totalMoney+=this.quests.questReward,this.playerResources.money+=this.quests.questReward,this.quests.questLvl++,this.questCompleted())):(this.quests.questDesc="Beat 24 waves of bandits",this.quests.quest.complete=!1,this.quests.questReward=1700,this.playerResources.banditWave>24&&!this.quests.quest.complete&&(this.playerResources.totalMoney+=this.quests.questReward,this.playerResources.money+=this.quests.questReward,this.quests.questLvl++,this.questCompleted())):(this.quests.questDesc="Beat 21 waves of bandits",this.quests.quest.complete=!1,this.quests.questReward=1500,this.playerResources.banditWave>21&&!this.quests.quest.complete&&(this.playerResources.totalMoney+=this.quests.questReward,this.playerResources.money+=this.quests.questReward,this.quests.questLvl++,this.questCompleted())):(this.quests.questDesc="Beat 18 waves of bandits",this.quests.quest.complete=!1,this.quests.questReward=1300,this.playerResources.banditWave>18&&!this.quests.quest.complete&&(this.playerResources.totalMoney+=this.quests.questReward,this.playerResources.money+=this.quests.questReward,this.quests.questLvl++,this.questCompleted())):(this.quests.questDesc="Beat 15 waves of bandits",this.quests.quest.complete=!1,this.quests.questReward=1100,this.playerResources.banditWave>15&&!this.quests.quest.complete&&(this.playerResources.totalMoney+=this.quests.questReward,this.playerResources.money+=this.quests.questReward,this.quests.questLvl++,this.questCompleted())):(this.quests.questDesc="Beat 12 waves of bandits",this.quests.quest.complete=!1,this.quests.questReward=900,this.playerResources.banditWave>12&&!this.quests.quest.complete&&(this.playerResources.totalMoney+=this.quests.questReward,this.playerResources.money+=this.quests.questReward,this.quests.questLvl++,this.questCompleted())):(this.quests.questDesc="Beat 5 waves of bandits",this.quests.quest.complete=!1,this.quests.questReward=700,this.playerResources.banditWave>5&&!this.quests.quest.complete&&(this.playerResources.totalMoney+=this.quests.questReward,this.playerResources.money+=this.quests.questReward,this.quests.questLvl++,this.questCompleted()));else{if(this.quests.questDesc="Beat 2 waves of bandits",this.currentChapter="Rise To Fame",this.playerResources.currentChapter=this.currentChapter,this.playerResources.gameLevel=2,this.quests.quest.complete=!1,this.quests.questReward=500,this.playerResources.newPlayerVault&&this.newPlayerVault){this.tutorialGuards=3,this.guardCount=3,this.totalGuards=3,this.playerResources.tutorialGuards=this.tutorialGuards,this.playerResources.guardCount=this.guardCount,this.playerResources.totalGuards=this.totalGuards,this.playerResources.totalWorkers=this.playerResources.stoneCuttersCount+this.playerResources.tradeWorkersCount+this.playerResources.guardCount;var t=setInterval((function(){e.newLevelCounter++,e.newLevelCounter>=2&&clearInterval(t)}),300)}this.playerResources.banditWave>2&&!this.quests.quest.complete&&(this.playerResources.totalMoney+=this.quests.questReward,this.playerResources.money+=this.quests.questReward,this.quests.questLvl++,this.questCompleted())}else this.quests.questDesc="Get over $2,000 Total Money",this.quests.quest.complete=!1,this.quests.questReward=40,this.playerResources.totalMoney>=2e3&&!this.quests.quest.complete&&(this.playerResources.totalMoney+=this.quests.questReward,this.playerResources.money+=this.quests.questReward,this.quests.questLvl++,this.questCompleted());else this.quests.questDesc="Hire A Total of 3 Traders",this.quests.quest.traders=3,this.quests.questReward=30,this.quests.quest.complete=!1,this.playerResources.tradeWorkersCount>=this.quests.quest.traders&&!this.quests.quest.complete&&(this.playerResources.totalMoney+=this.quests.questReward,this.playerResources.money+=this.quests.questReward,this.quests.questLvl++,this.questCompleted());else this.quests.questDesc="Hire A Total Of 5 Masons",this.quests.quest.masons=5,this.quests.questReward=35,this.quests.quest.complete=!1,this.playerResources.stoneCuttersCount>=this.quests.quest.masons&&!this.quests.quest.complete&&(this.playerResources.totalMoney+=this.quests.questReward,this.playerResources.money+=this.quests.questReward,this.quests.questLvl++,this.questCompleted());else this.quests.questDesc="Upgrade The Housing to Level 1",this.quests.quest.complete=!1,this.quests.questReward=20,this.playerResources.housingLvl>=1&&!this.quests.quest.complete&&(this.playerResources.totalMoney+=this.quests.questReward,this.playerResources.money+=this.quests.questReward,this.quests.questLvl++,this.questCompleted());else this.quests.questDesc="Get Your Chisel Skill Up To Level 7",this.quests.quest.chiselLvl=7,this.quests.questReward=25,this.quests.quest.complete=!1,this.playerResources.chiselLvl>=this.quests.quest.chiselLvl&&!this.quests.quest.complete&&(this.playerResources.totalMoney+=this.quests.questReward,this.playerResources.money+=this.quests.questReward,this.quests.questLvl++,this.questCompleted());else this.quests.questDesc="Get Your Barter Skill Up To Level 5",this.quests.quest.barterLvl=5,this.quests.questReward=35,this.quests.quest.complete=!1,this.playerResources.barterLvl>=this.quests.quest.barterLvl&&!this.quests.quest.complete&&(this.playerResources.totalMoney+=this.quests.questReward,this.playerResources.money+=this.quests.questReward,this.quests.questLvl++,this.questCompleted());else this.quests.questDesc="Upgrade The Stockpile to Level 1",this.quests.quest.complete=!1,this.quests.questReward=15,this.playerResources.stockpileLvl>=1&&!this.quests.quest.complete&&(this.playerResources.totalMoney+=this.quests.questReward,this.playerResources.money+=this.quests.questReward,this.quests.questLvl++,this.questCompleted());else this.quests.questDesc="Hire A Trader",this.quests.quest.traders=1,this.quests.questReward=10,this.quests.quest.complete=!1,this.playerResources.tradeWorkersCount>=this.quests.quest.traders&&!this.quests.quest.complete&&(this.playerResources.totalMoney+=this.quests.questReward,this.playerResources.money+=this.quests.questReward,this.quests.questLvl++,this.questCompleted());else this.quests.questDesc="Hire A Mason",this.quests.quest.masons=1,this.quests.questReward=10,this.quests.quest.complete=!1,this.playerResources.stoneCuttersCount>=this.quests.quest.masons&&!this.quests.quest.complete&&(this.playerResources.totalMoney+=this.quests.questReward,this.playerResources.money+=this.quests.questReward,this.quests.questLvl++,this.questCompleted());else this.quests.questDesc="Get Your Chisel Skill Up To Level 3",this.quests.quest.chiselLvl=3,this.quests.questReward=10,this.quests.quest.complete=!1,this.playerResources.chiselLvl>=this.quests.quest.chiselLvl&&!this.quests.quest.complete&&(this.playerResources.totalMoney+=this.quests.questReward,this.playerResources.money+=this.quests.questReward,this.quests.questLvl++,this.questCompleted());else this.quests.questDesc="Get Your Barter Skill Up To Level 3",this.quests.quest.barterLvl=3,this.quests.questReward=20,this.playerResources.barterLvl>=this.quests.quest.barterLvl&&!this.quests.quest.complete&&(this.playerResources.totalMoney+=this.quests.questReward,this.playerResources.money+=this.quests.questReward,this.quests.questLvl++,this.questCompleted());this.playerResources.quests=this.quests}}]),e}(),Xe.\u0275fac=function(e){return new(e||Xe)(i.Pb(o.b),i.Pb(i.h))},Xe.\u0275cmp=i.Jb({type:Xe,selectors:[["app-mason-game"]],decls:21,vars:11,consts:[[1,"game-content",3,"resize"],["mat-raised-button","",1,"noSelect","app-exit",3,"click"],[1,"logo"],["id","Area-Btn","mat-raised-button","",1,"area-btn",3,"disabled","matMenuTriggerFor"],["menu","matMenu"],["id","Quarry-Btn","mat-menu-item","",3,"click"],["mat-menu-item","",3,"click",4,"ngIf"],[1,"game-wrapper"],["class","upgrade-space",4,"ngIf"],["class","game-space",4,"ngIf"],["class","stat-space",4,"ngIf"],["class","modal",4,"ngIf"],["class","modal",3,"click",4,"ngIf"],["mat-menu-item","",3,"click"],[1,"upgrade-space"],[1,"options-title-contents"],[1,"chapter-text"],["class","quest-completed",3,"width","right",4,"ngIf"],["id","Close-Upgrades-Btn","mat-raised-button","",1,"close-upgrades",3,"click"],[3,"playerResources","stoneWorkerReturn","tradeWorkerReturn","guardReturn","playerResourcesReturn"],[1,"quest-completed"],[1,"game-space"],[1,"toolbar"],["id","money",1,"money-count"],["id","bricks",1,"brick-count",3,"ngClass"],["alt","bricks",1,"brick-icon",3,"src"],[1,"guard-count",3,"ngClass"],["alt","guard",1,"guard-icon",3,"src"],[1,"bandit-count",3,"ngClass"],["alt","bandit",1,"guard-icon",3,"src"],["class","quest-completed",3,"ngClass","width","right",4,"ngIf"],[3,"ngClass","playerResources","isGuardMoneyView","playerResourcesReturn"],[4,"ngIf"],[1,"controls-background"],[1,"controls-wrapper"],["id","Chisel-Btn","mat-raised-button","","class","control-button",3,"disabled","click",4,"ngIf"],["id","Sell-Btn","mat-raised-button","","class","control-button",3,"disabled","click",4,"ngIf"],["id","Upgrade-Btn","mat-raised-button","",1,"control-button",3,"disabled","click"],["id","Stats-Btn","mat-raised-button","",1,"control-button",3,"disabled","click"],[1,"quest-completed",3,"ngClass"],["id","Chisel-Btn","mat-raised-button","",1,"control-button",3,"disabled","click"],["id","Sell-Btn","mat-raised-button","",1,"control-button",3,"disabled","click"],[1,"stat-space"],[1,"stats-title-contents"],["id","Close-Stats-Btn","mat-raised-button","","color","primary",1,"close-stats",3,"click"],[3,"playerResources"],[1,"modal"],[1,"info-wrapper",3,"ngClass"],["color","primary"],["id","menu-width"],[1,"info-header"],[1,"info-text","info-text-area"],["mat-raised-button","","color","primary",1,"control-button",3,"click"],[1,"modal",3,"click"],["class","info-header",4,"ngIf"],["class","info-text info-text-area",4,"ngIf"],["mat-raised-button","","color","primary",1,"control-button",3,"disabled","click"]],template:function(e,t){if(1&e&&(i.Vb(0,"div",0),i.dc("resize",(function(e){return t.onResize(e)}),!1,i.uc),i.Vb(1,"button",1),i.dc("click",(function(e){return t.saveGameAndQuit()})),i.Vb(2,"mat-icon",2),i.Cc(3,"exit_to_app"),i.Ub(),i.Cc(4," Exit"),i.Ub(),i.Vb(5,"button",3),i.Cc(6,"Areas"),i.Ub(),i.Vb(7,"mat-menu",null,4),i.Vb(9,"button",5),i.dc("click",(function(e){return t.ShowQuarry()})),i.Cc(10,"Quarry"),i.Ub(),i.Bc(11,ce,2,0,"button",6),i.Ub(),i.Vb(12,"div",7),i.Bc(13,ue,8,3,"span",8),i.Bc(14,ve,26,35,"span",9),i.Bc(15,Ce,7,2,"span",10),i.Bc(16,fe,13,3,"div",11),i.Bc(17,Ve,14,13,"div",12),i.Bc(18,Ee,12,11,"div",12),i.Bc(19,Je,11,10,"div",12),i.Bc(20,Ye,13,4,"div",11),i.Ub(),i.Ub()),2&e){var s=i.sc(8);i.Cb(5),i.mc("disabled",t.disableAreas)("matMenuTriggerFor",s),i.Cb(6),i.mc("ngIf",t.playerResources.gameLevel>=2),i.Cb(2),i.mc("ngIf",t.isUpgradeDisplayed),i.Cb(1),i.mc("ngIf",!t.isUpgradeDisplayed&&!t.isStatsDisplayed),i.Cb(1),i.mc("ngIf",t.isStatsDisplayed),i.Cb(1),i.mc("ngIf",t.gameUpdateWarning),i.Cb(1),i.mc("ngIf",t.newPlayer&&!t.tutorialStart&&t.tutorialStep>0),i.Cb(1),i.mc("ngIf",t.playerResources.newPlayerVault&&11===t.quests.questLvl&&t.vaultTutorialStep>0),i.Cb(1),i.mc("ngIf",t.playerResources.newPlayerVault&&t.isGuardMoneyView),i.Cb(1),i.mc("ngIf",t.gameOver)}},directives:[n.a,c.a,l.c,l.d,l.a,r.k,$,r.i,X,te,ne,h.a],styles:[".brick-icon[_ngcontent-%COMP%], .guard-icon[_ngcontent-%COMP%]{width:1.1rem}.brick-count[_ngcontent-%COMP%], .guard-count[_ngcontent-%COMP%]{float:right;padding-right:calc(10% + .5rem)}.bandit-count[_ngcontent-%COMP%], .brick-count[_ngcontent-%COMP%], .guard-count[_ngcontent-%COMP%]{font-size:calc(100% + .1rem)}.bandit-count[_ngcontent-%COMP%]{position:absolute;left:48%;opacity:.77;color:#fff}.money-count[_ngcontent-%COMP%]{float:left;padding-left:calc(10% + .5rem);font-size:calc(100% + .1rem)}.close-upgrades[_ngcontent-%COMP%]{margin-bottom:calc(1% + .4em);background-color:grey;color:#fff;float:right;margin-right:.55rem;margin-top:.4rem;width:calc(24% + 2.7rem)}.chapter-text[_ngcontent-%COMP%]{display:inline-block;font-weight:700;padding-left:15px;font-size:calc(100% + .1rem)}.close-stats[_ngcontent-%COMP%]{margin-bottom:calc(1% + .4em);background-color:grey;color:#fff;float:right;margin-right:.55rem;margin-top:.4rem;width:calc(24% + 2.7rem)}.logo[_ngcontent-%COMP%]{font-size:20px;width:19px;height:21px}.save-text[_ngcontent-%COMP%]{position:absolute;top:14%;left:112%}.info-wrapper[_ngcontent-%COMP%]{height:calc(46% + .1em);top:calc(21% - .1em);background-color:#606060}.options-title-contents[_ngcontent-%COMP%], .stats-title-contents[_ngcontent-%COMP%]{background-color:#228b22}.quest-completed[_ngcontent-%COMP%]{position:absolute;top:calc(16% + 1.4em);right:calc(2em + 2.4%);text-align:center;width:90%;background-color:grey;color:#fff;border-radius:5px;z-index:10;padding:.2rem .1rem;font-size:calc(100% + .1rem)}.noSelect[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-align:center;align-items:center;-webkit-box-pack:center;justify-content:center}.display[_ngcontent-%COMP%]{display:inline}.hide[_ngcontent-%COMP%]{display:none}.area-btn[_ngcontent-%COMP%]{left:calc(76% - 3.3rem)}.app-exit[_ngcontent-%COMP%], .area-btn[_ngcontent-%COMP%]{font-weight:700;cursor:pointer;position:fixed;top:calc(1% + .133rem);color:#fff;background-color:grey;width:calc(24% + 2.7rem)}.app-exit[_ngcontent-%COMP%]{margin-left:.55rem}.controls-wrapper[_ngcontent-%COMP%]{margin:0 auto}.controls-background[_ngcontent-%COMP%]{width:100%;position:fixed;left:0;background-color:silver!important;height:100%}.toolbar[_ngcontent-%COMP%]{color:#fff;background-color:#8b4513;width:100%;border-radius:1px;position:absolute;font-size:calc(2em - 50%);padding-bottom:.1rem;padding-top:.1rem}"],changeDetection:0}),Xe)}],et=((Ze=function e(){_classCallCheck(this,e)}).\u0275mod=i.Nb({type:Ze}),Ze.\u0275inj=i.Mb({factory:function(e){return new(e||Ze)},imports:[[a.d.forChild(Ke)],a.d]}),Ze);s.d(t,"MasonGameModule",(function(){return st}));var tt,st=((tt=function e(){_classCallCheck(this,e)}).\u0275mod=i.Nb({type:tt}),tt.\u0275inj=i.Mb({factory:function(e){return new(e||tt)},imports:[[et,r.c,n.b,h.b,c.b,l.b,u.b]]}),tt)}}]);