(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{"4shC":function(e,t,s){"use strict";s.r(t);var r=s("ofXK"),a=s("tyNb"),i=s("fXoL"),o=s("Jho9"),n=s("NFeN"),c=s("bTqV"),l=s("STbY"),h=s("/t3+");function u(e,t){if(1&e){const e=i.Vb();i.Ub(0,"button",10),i.cc("click",(function(t){return i.tc(e),i.gc().fireWorker("mason")})),i.Ac(1,"Fire Mason"),i.Tb()}if(2&e){const e=i.gc();i.lc("disabled",e.playerResources.stoneWorkers.length<1)}}function d(e,t){if(1&e){const e=i.Vb();i.Ub(0,"button",10),i.cc("click",(function(t){return i.tc(e),i.gc().fireWorker("trader")})),i.Ac(1,"Fire Trader"),i.Tb()}if(2&e){const e=i.gc();i.lc("disabled",e.playerResources.tradeWorkers.length<1)}}function p(e,t){if(1&e){const e=i.Vb();i.Ub(0,"span"),i.Ub(1,"h2",3),i.Ac(2,"Hire Guards"),i.Tb(),i.Ub(3,"button",4),i.cc("click",(function(t){return i.tc(e),i.gc().hireGuard()})),i.Ac(4),i.Tb(),i.Ub(5,"button",5),i.cc("click",(function(t){return i.tc(e),i.gc().helpMe(8)})),i.Ac(6,"?"),i.Tb(),i.Ub(7,"button",4),i.cc("click",(function(t){return i.tc(e),i.gc().upgradeGuardWeapon()})),i.Ac(8),i.Tb(),i.Ub(9,"button",5),i.cc("click",(function(t){return i.tc(e),i.gc().helpMe(9)})),i.Ac(10,"?"),i.Tb(),i.Ub(11,"button",4),i.cc("click",(function(t){return i.tc(e),i.gc().upgradeGuardArmor()})),i.Ac(12),i.Tb(),i.Ub(13,"button",5),i.cc("click",(function(t){return i.tc(e),i.gc().helpMe(10)})),i.Ac(14,"?"),i.Tb(),i.Ub(15,"button",4),i.cc("click",(function(t){return i.tc(e),i.gc().upgradeGuardSpeed()})),i.Ac(16),i.Tb(),i.Ub(17,"button",5),i.cc("click",(function(t){return i.tc(e),i.gc().helpMe(11)})),i.Ac(18,"?"),i.Tb(),i.Tb()}if(2&e){const e=i.gc();i.Cb(3),i.lc("disabled",e.playerResources.money<e.guardCost),i.Cb(1),i.Cc("Hire Guard: $",e.guardCost,""),i.Cb(3),i.lc("disabled",e.playerResources.money<e.guardWeaponCost),i.Cb(1),i.Cc("Upgrade Weapon: $",e.guardWeaponCost,""),i.Cb(3),i.lc("disabled",e.playerResources.money<e.guardArmorCost),i.Cb(1),i.Cc("Upgrade Armor: $",e.guardArmorCost,""),i.Cb(3),i.lc("disabled",e.playerResources.money<e.guardSpeedCost),i.Cb(1),i.Cc("Upgrade Speed: $",e.guardSpeedCost,"")}}function y(e,t){1&e&&(i.Ub(0,"p",17),i.Ac(1,"Your chisel determines how fast you can shape a rock into a brick."),i.Tb())}function m(e,t){1&e&&(i.Ub(0,"p",17),i.Ac(1,"Masons will help you shape rocks into bricks but will expect $2 a day as starting pay. Your Chiseling skill will give them the same bonus."),i.Tb())}function b(e,t){1&e&&(i.Ub(0,"p",17),i.Ac(1,"Training masons will increase their movement speed and will work longer and harder but they'll expect $2 more a day."),i.Tb())}function g(e,t){1&e&&(i.Ub(0,"p",17),i.Ac(1,"Traders will sell your bricks for you but will expect $2 a day as starting pay. Your Bartering skill will give them the same bonus."),i.Tb())}function v(e,t){1&e&&(i.Ub(0,"p",17),i.Ac(1,"Training traders will increase their movement speed and increase how much you can sell each brick for but they'll expect $2 more a day."),i.Tb())}function k(e,t){1&e&&(i.Ub(0,"p",17),i.Ac(1,"Upgrading your Bartering skill will increase the amount bricks you can sell and the profit you can make per brick."),i.Tb())}function T(e,t){1&e&&(i.Ub(0,"p",17),i.Ac(1,"Upgrading your Housing will increase the number of rooms availiable for your workers to live and sleep. The rooms availiable will increase by 8."),i.Tb())}function C(e,t){1&e&&(i.Ub(0,"p",17),i.Ac(1,"Upgrading your Stockpile will increase the number of bricks you can store at once. The space availiable in the stockpile will increase by 10."),i.Tb())}function R(e,t){1&e&&(i.Ub(0,"p",17),i.Ac(1,"Guards will protect your money from any bandit trying to take it. Guards will expect a fix rate of $20 a day regardless of skills."),i.Tb())}function f(e,t){1&e&&(i.Ub(0,"p",17),i.Ac(1,"Upgrading the weapon of the guards will increase the damage they can do."),i.Tb())}function w(e,t){1&e&&(i.Ub(0,"p",17),i.Ac(1,"Upgrading the armor of your guards will increase the number of hits they can take in battle."),i.Tb())}function q(e,t){1&e&&(i.Ub(0,"p",17),i.Ac(1,"Upgrading the guards speed will increase their attack rate."),i.Tb())}const W=function(e){return{"info-dm":e}};function S(e,t){if(1&e){const e=i.Vb();i.Ub(0,"div",11),i.cc("click",(function(t){return i.tc(e),i.gc().closeHelp()})),i.Ub(1,"div",12),i.Ub(2,"mat-toolbar",13),i.Ub(3,"div",14),i.Ub(4,"p",15),i.Ac(5,"Tap Anywhere To Continue"),i.Tb(),i.Tb(),i.Tb(),i.zc(6,y,2,0,"p",16),i.zc(7,m,2,0,"p",16),i.zc(8,b,2,0,"p",16),i.zc(9,g,2,0,"p",16),i.zc(10,v,2,0,"p",16),i.zc(11,k,2,0,"p",16),i.zc(12,T,2,0,"p",16),i.zc(13,C,2,0,"p",16),i.zc(14,R,2,0,"p",16),i.zc(15,f,2,0,"p",16),i.zc(16,w,2,0,"p",16),i.zc(17,q,2,0,"p",16),i.Tb(),i.Tb()}if(2&e){const e=i.gc();i.Cb(1),i.lc("ngClass",i.oc(13,W,!0===e.optionsSelected.darkMode)),i.Cb(5),i.lc("ngIf",0===e.helpValue),i.Cb(1),i.lc("ngIf",1===e.helpValue),i.Cb(1),i.lc("ngIf",2===e.helpValue),i.Cb(1),i.lc("ngIf",3===e.helpValue),i.Cb(1),i.lc("ngIf",4===e.helpValue),i.Cb(1),i.lc("ngIf",5===e.helpValue),i.Cb(1),i.lc("ngIf",6===e.helpValue),i.Cb(1),i.lc("ngIf",7===e.helpValue),i.Cb(1),i.lc("ngIf",8===e.helpValue),i.Cb(1),i.lc("ngIf",9===e.helpValue),i.Cb(1),i.lc("ngIf",10===e.helpValue),i.Cb(1),i.lc("ngIf",11===e.helpValue)}}function L(e,t){if(1&e){const e=i.Vb();i.Ub(0,"div",11),i.cc("click",(function(t){return i.tc(e),i.gc().closeHousingLimitModal()})),i.Ub(1,"div",12),i.Ub(2,"mat-toolbar",13),i.Ub(3,"div",14),i.Ub(4,"p",15),i.Ac(5,"Tap Anywhere To Continue"),i.Tb(),i.Tb(),i.Tb(),i.Ub(6,"p",17),i.Ac(7,"Not enough space for them to live."),i.Tb(),i.Tb(),i.Tb()}if(2&e){const e=i.gc();i.Cb(1),i.lc("ngClass",i.oc(1,W,!0===e.optionsSelected.darkMode))}}function M(e,t){if(1&e){const e=i.Vb();i.Ub(0,"div",18),i.Ub(1,"div",12),i.Ub(2,"mat-toolbar",13),i.Ub(3,"div",14),i.Ub(4,"p",15),i.Ac(5,"Are You Sure?"),i.Tb(),i.Tb(),i.Tb(),i.Ub(6,"span"),i.Ub(7,"p",17),i.Ac(8,"Once they are fired, the deal is final."),i.Tb(),i.Ub(9,"button",19),i.cc("click",(function(t){return i.tc(e),i.gc().deleteWorker()})),i.Ac(10,"Fire Them"),i.Tb(),i.Ub(11,"button",19),i.cc("click",(function(t){return i.tc(e),i.gc().cancelFireWorker()})),i.Ac(12,"Nevermind"),i.Tb(),i.Tb(),i.Tb(),i.Tb()}if(2&e){const e=i.gc();i.Cb(1),i.lc("ngClass",i.oc(1,W,!0===e.optionsSelected.darkMode))}}let x=(()=>{class e{constructor(){this.playerResourcesTemp={chiselLvl:0,money:0,bricks:0,clicks:0,barterLvl:0,tradeWorkers:[],tradeWorkersCount:0,tradeWorkersLvl:0,stoneWorkers:[],stoneCuttersCount:0,stoneWorkerLvl:0,guards:[],guardCount:0,guardWeaponLvl:0,guardArmorLvl:0,guardSpeedLvl:0,dayCounter:0,daysPast:0,version:.5,totalBricks:0,totalMoney:0,newPlayer:!0,quests:{questLvl:0,questDesc:"",questReward:0,completed:!1,quest:{complete:!1,chiselLvl:0,barterLvl:0,masons:0,masonLvl:0,traders:0,traderLvl:0}},sky:{sun:{x:0,y:0},moon:{x:0,y:0}},housingLimit:0,housingLvl:0,totalWorkers:0,stockpile:0,stockpileLvl:0,screenWidth:0,screenChange:!1,gameLevel:1,currentChapter:"",newPlayerVault:!0,banditWave:0,bandits:[],banditWaveCounter:0,banditSpawnCount:0,isBanditWaveStarted:!1,moneyTaken:0,credit:3,banditsStopped:0,totalGuards:0,tutorialGuards:0},this.pageHeight=0,this.isHousingFull=!1,this.stoneWorkerReturn=new i.o,this.tradeWorkerReturn=new i.o,this.guardReturn=new i.o,this.playerResourcesReturn=new i.o,this.chiselLvlCost=10,this.barterLvlCost=10,this.stoneWorkerCost=30,this.tradeWorkerCost=30,this.guardCost=500,this.trainStoneWorkerCost=25,this.trainTradeWorkerCost=25,this.stockpileCost=50,this.housingCost=80,this.helpValue=-1,this.helpWindowOpen=!1,this.guardWeaponCost=1500,this.guardArmorCost=1500,this.guardSpeedCost=1500,this.displayFireWorker=!1,this.optionsSelected={darkMode:!0,soundsOn:!0}}get playerResources(){return this.playerResourcesTemp}set playerResources(e){this.playerResourcesTemp=e}ngOnInit(){if(localStorage.length>0&&localStorage.getItem("mason_options")){const e=JSON.parse(localStorage.getItem("mason_options"));this.optionsSelected={darkMode:e.darkMode,soundsOn:e.soundsOn};const t=document.getElementsByTagName("body");this.optionsSelected.darkMode?t[0].classList.add("darkMode"):t[0].classList.remove("darkMode")}else{const e=JSON.stringify(this.optionsSelected);localStorage.setItem("mason_options",e)}this.calcHeightOfPage();for(let e=0;e<this.playerResourcesTemp.chiselLvl;e++){const e=Math.trunc(this.chiselLvlCost/4)+Math.trunc(this.chiselLvlCost/3);this.chiselLvlCost+=e}for(let e=0;e<this.playerResourcesTemp.barterLvl;e++){const e=Math.trunc(this.barterLvlCost/2)+Math.trunc(this.barterLvlCost/3);this.barterLvlCost+=e}for(let e=0;e<this.playerResourcesTemp.stoneWorkerLvl;e++){const e=Math.trunc(this.trainStoneWorkerCost/10);this.trainStoneWorkerCost+=e;const t=Math.trunc(this.stoneWorkerCost/7);this.stoneWorkerCost+=t}for(let e=0;e<this.playerResourcesTemp.tradeWorkersLvl;e++){const e=Math.trunc(this.trainTradeWorkerCost/10);this.trainTradeWorkerCost+=e;const t=Math.trunc(this.tradeWorkerCost/7);this.tradeWorkerCost+=t}for(let e=0;e<this.playerResourcesTemp.stoneWorkers.length;e++){const e=Math.trunc(this.trainStoneWorkerCost/10);this.trainStoneWorkerCost+=e}for(let e=0;e<this.playerResourcesTemp.tradeWorkers.length;e++){const e=Math.trunc(this.trainTradeWorkerCost/10);this.trainTradeWorkerCost+=e}for(let e=0;e<this.playerResourcesTemp.stockpileLvl;e++){const e=Math.trunc(this.stockpileCost/2)+Math.trunc(this.stockpileCost/2);this.stockpileCost+=e}for(let e=0;e<this.playerResourcesTemp.housingLvl;e++){const e=Math.trunc(this.housingCost/4);this.housingCost+=e}}helpMe(e){this.helpValue=e,this.helpWindowOpen=!0}closeHelp(){this.helpWindowOpen=!1,this.helpValue=-1}hireStoneWorker(){if(this.playerResourcesTemp.totalWorkers<this.playerResourcesTemp.housingLimit){this.playerResourcesTemp.money-=this.stoneWorkerCost,this.playerResourcesTemp.stoneCuttersCount++;const e=Math.trunc(this.trainStoneWorkerCost/10);this.trainStoneWorkerCost+=e,this.playerResourcesTemp.totalWorkers++,this.playerResourcesReturn.emit(this.playerResourcesTemp),this.stoneWorkerReturn.emit(!0)}else this.isHousingFull=!0}hireTradeWorker(){if(this.playerResourcesTemp.totalWorkers<this.playerResourcesTemp.housingLimit){this.playerResourcesTemp.money-=this.tradeWorkerCost,this.playerResourcesTemp.tradeWorkersCount++;const e=Math.trunc(this.trainTradeWorkerCost/10);this.trainTradeWorkerCost+=e,this.playerResourcesTemp.totalWorkers++,this.playerResourcesReturn.emit(this.playerResourcesTemp),this.tradeWorkerReturn.emit(!0)}else this.isHousingFull=!0}hireGuard(){this.playerResourcesTemp.totalWorkers<this.playerResourcesTemp.housingLimit?(this.playerResourcesTemp.money-=this.guardCost,this.playerResourcesReturn.emit(this.playerResourcesTemp),this.guardReturn.emit(!0)):this.isHousingFull=!0}upgradeChisel(){this.playerResourcesTemp.money-=this.chiselLvlCost,this.playerResourcesTemp.chiselLvl++,this.playerResourcesReturn.emit(this.playerResourcesTemp);const e=Math.trunc(this.chiselLvlCost/4)+Math.trunc(this.chiselLvlCost/3);this.chiselLvlCost+=e}trainMason(){this.playerResourcesTemp.money-=this.trainStoneWorkerCost,this.playerResourcesTemp.stoneWorkerLvl++,this.playerResourcesReturn.emit(this.playerResourcesTemp);const e=Math.trunc(this.trainStoneWorkerCost/10);this.trainStoneWorkerCost+=e;const t=Math.trunc(this.stoneWorkerCost/7);this.stoneWorkerCost+=t}trainTrader(){this.playerResourcesTemp.money-=this.trainTradeWorkerCost,this.playerResourcesTemp.tradeWorkersLvl++,this.playerResourcesReturn.emit(this.playerResourcesTemp);const e=Math.trunc(this.trainTradeWorkerCost/10);this.trainTradeWorkerCost+=e;const t=Math.trunc(this.tradeWorkerCost/7);this.tradeWorkerCost+=t}upgradeBarter(){this.playerResourcesTemp.money-=this.barterLvlCost,this.playerResourcesTemp.barterLvl++,this.playerResourcesReturn.emit(this.playerResourcesTemp);const e=Math.trunc(this.barterLvlCost/2)+Math.trunc(this.barterLvlCost/3);this.barterLvlCost+=e}upgradeStockpile(){this.playerResourcesTemp.money-=this.stockpileCost,this.playerResourcesTemp.stockpile+=10,this.playerResourcesTemp.stockpileLvl++,this.playerResourcesReturn.emit(this.playerResourcesTemp);const e=Math.trunc(this.stockpileCost/2)+Math.trunc(this.stockpileCost/2);this.stockpileCost+=e}upgradeHousing(){this.playerResourcesTemp.money-=this.housingCost,this.playerResourcesTemp.housingLimit+=8,this.playerResourcesTemp.housingLvl++,this.playerResourcesReturn.emit(this.playerResourcesTemp);const e=Math.trunc(this.housingCost/2);this.housingCost+=e}upgradeGuardWeapon(){this.playerResourcesTemp.money-=this.guardWeaponCost,this.playerResourcesTemp.guardWeaponLvl++,this.playerResourcesReturn.emit(this.playerResourcesTemp)}upgradeGuardArmor(){this.playerResourcesTemp.money-=this.guardArmorCost,this.playerResourcesTemp.guardArmorLvl++,this.playerResourcesReturn.emit(this.playerResourcesTemp)}upgradeGuardSpeed(){this.playerResourcesTemp.money-=this.guardSpeedCost,this.playerResourcesTemp.guardSpeedLvl++,this.playerResourcesReturn.emit(this.playerResourcesTemp)}calcHeightOfPage(){const e=window.innerHeight;this.pageHeight=e-.39*e}closeHousingLimitModal(){this.isHousingFull=!1}fireWorker(e){this.displayFireWorker=!0,this.workerFired=e}deleteWorker(){"mason"===this.workerFired?(this.playerResourcesTemp.stoneWorkers.splice(this.playerResourcesTemp.stoneWorkers.length-1,1),this.playerResourcesTemp.stoneCuttersCount--,this.playerResourcesReturn.emit(this.playerResourcesTemp)):"trader"===this.workerFired&&(this.playerResourcesTemp.tradeWorkers.splice(this.playerResourcesTemp.tradeWorkers.length-1,1),this.playerResourcesTemp.tradeWorkersCount--,this.playerResourcesReturn.emit(this.playerResourcesTemp)),this.cancelFireWorker()}cancelFireWorker(){this.displayFireWorker=!1}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=i.Ib({type:e,selectors:[["app-upgrade-menu"]],inputs:{playerResources:"playerResources"},outputs:{stoneWorkerReturn:"stoneWorkerReturn",tradeWorkerReturn:"tradeWorkerReturn",guardReturn:"guardReturn",playerResourcesReturn:"playerResourcesReturn"},decls:50,vars:27,consts:[[1,"upgrade-wrapper"],[1,"display-money"],["id","scrollbar",1,"upgrade-list"],[1,"upgrade-titles"],["mat-raised-button","","color","primary",1,"control-button","upgrade-btn",3,"disabled","click"],["mat-raised-button","","color","primary",1,"help",3,"click"],["mat-raised-button","","color","warn","class","control-button fire-btn",3,"disabled","click",4,"ngIf"],[4,"ngIf"],["class","modal",3,"click",4,"ngIf"],["class","modal",4,"ngIf"],["mat-raised-button","","color","warn",1,"control-button","fire-btn",3,"disabled","click"],[1,"modal",3,"click"],[1,"info-wrapper",3,"ngClass"],["color","primary"],["id","menu-width"],[1,"info-text"],["class","info-text info-text-area",4,"ngIf"],[1,"info-text","info-text-area"],[1,"modal"],["mat-raised-button","","color","primary",1,"control-button",3,"click"]],template:function(e,t){1&e&&(i.Ub(0,"div",0),i.Ub(1,"p",1),i.Ac(2),i.Tb(),i.Ub(3,"div",2),i.Ub(4,"h2",3),i.Ac(5,"Player's Skills"),i.Tb(),i.Ub(6,"button",4),i.cc("click",(function(e){return t.upgradeChisel()})),i.Ac(7),i.Tb(),i.Ub(8,"button",5),i.cc("click",(function(e){return t.helpMe(0)})),i.Ac(9,"?"),i.Tb(),i.Ub(10,"button",4),i.cc("click",(function(e){return t.upgradeBarter()})),i.Ac(11),i.Tb(),i.Ub(12,"button",5),i.cc("click",(function(e){return t.helpMe(5)})),i.Ac(13,"?"),i.Tb(),i.Ub(14,"button",4),i.cc("click",(function(e){return t.upgradeStockpile()})),i.Ac(15),i.Tb(),i.Ub(16,"button",5),i.cc("click",(function(e){return t.helpMe(7)})),i.Ac(17,"?"),i.Tb(),i.Ub(18,"button",4),i.cc("click",(function(e){return t.upgradeHousing()})),i.Ac(19),i.Tb(),i.Ub(20,"button",5),i.cc("click",(function(e){return t.helpMe(6)})),i.Ac(21,"?"),i.Tb(),i.Ub(22,"h2",3),i.Ac(23,"Hire Workers"),i.Tb(),i.Ub(24,"h3",3),i.Ac(25,"Masons"),i.Tb(),i.Ub(26,"button",4),i.cc("click",(function(e){return t.hireStoneWorker()})),i.Ac(27),i.Tb(),i.Ub(28,"button",5),i.cc("click",(function(e){return t.helpMe(1)})),i.Ac(29,"?"),i.Tb(),i.Ub(30,"button",4),i.cc("click",(function(e){return t.trainMason()})),i.Ac(31),i.Tb(),i.Ub(32,"button",5),i.cc("click",(function(e){return t.helpMe(2)})),i.Ac(33,"?"),i.Tb(),i.zc(34,u,2,1,"button",6),i.Ub(35,"h3",3),i.Ac(36,"Traders"),i.Tb(),i.Ub(37,"button",4),i.cc("click",(function(e){return t.hireTradeWorker()})),i.Ac(38),i.Tb(),i.Ub(39,"button",5),i.cc("click",(function(e){return t.helpMe(3)})),i.Ac(40,"?"),i.Tb(),i.Ub(41,"button",4),i.cc("click",(function(e){return t.trainTrader()})),i.Ac(42),i.Tb(),i.Ub(43,"button",5),i.cc("click",(function(e){return t.helpMe(4)})),i.Ac(44,"?"),i.Tb(),i.zc(45,d,2,1,"button",6),i.zc(46,p,19,8,"span",7),i.Tb(),i.zc(47,S,18,15,"div",8),i.zc(48,L,8,3,"div",8),i.zc(49,M,13,3,"div",9),i.Tb()),2&e&&(i.Cb(2),i.Ec("Money: $",t.playerResourcesTemp.money," | Housing: ",t.playerResourcesTemp.totalWorkers,"/",t.playerResourcesTemp.housingLimit,""),i.Cb(1),i.yc("height",t.pageHeight,"px"),i.Cb(3),i.lc("disabled",t.playerResources.money<t.chiselLvlCost),i.Cb(1),i.Cc("Upgrade Chisel: $",t.chiselLvlCost,""),i.Cb(3),i.lc("disabled",t.playerResources.money<t.barterLvlCost),i.Cb(1),i.Cc("Upgrade Bartering: $",t.barterLvlCost,""),i.Cb(3),i.lc("disabled",t.playerResources.money<t.stockpileCost),i.Cb(1),i.Cc("Upgrade Stockpile: $",t.stockpileCost,""),i.Cb(3),i.lc("disabled",t.playerResources.money<t.housingCost),i.Cb(1),i.Cc("Upgrade Housing: $",t.housingCost,""),i.Cb(7),i.lc("disabled",t.playerResources.money<t.stoneWorkerCost),i.Cb(1),i.Cc("Hire Mason: $",t.stoneWorkerCost,""),i.Cb(3),i.lc("disabled",0===t.playerResources.stoneWorkers.length||t.playerResources.money<t.trainStoneWorkerCost),i.Cb(1),i.Cc("Train Masons: $",t.trainStoneWorkerCost,""),i.Cb(3),i.lc("ngIf",t.playerResourcesTemp.gameLevel>=2),i.Cb(3),i.lc("disabled",t.playerResources.money<t.tradeWorkerCost),i.Cb(1),i.Cc("Hire Trader: $",t.tradeWorkerCost,""),i.Cb(3),i.lc("disabled",0===t.playerResources.tradeWorkers.length||t.playerResources.money<t.trainTradeWorkerCost),i.Cb(1),i.Cc("Train Trader: $",t.trainTradeWorkerCost,""),i.Cb(3),i.lc("ngIf",t.playerResourcesTemp.gameLevel>=2),i.Cb(1),i.lc("ngIf",t.playerResourcesTemp.gameLevel>=2),i.Cb(1),i.lc("ngIf",t.helpWindowOpen),i.Cb(1),i.lc("ngIf",t.isHousingFull),i.Cb(1),i.lc("ngIf",t.displayFireWorker))},directives:[c.a,r.k,r.i,h.a],styles:[".upgrade-list[_ngcontent-%COMP%]{width:100%;overflow:auto;height:24em}.upgrade-btn[_ngcontent-%COMP%]{width:75%!important;display:inline-block!important}.help[_ngcontent-%COMP%]{width:23%;margin-left:1.2%;display:inline-block}.display-money[_ngcontent-%COMP%]{font-weight:700;text-align:center}.info-dm[_ngcontent-%COMP%]{background-color:#606060}.upgrade-titles[_ngcontent-%COMP%]{text-align:center;padding:0;margin:.4em 0 0}.fire-btn[_ngcontent-%COMP%]{width:99.4%!important;display:inline-block!important}"]}),e})();const U=["canvas"];function A(e,t){if(1&e&&(i.Ub(0,"p",5),i.Ac(1),i.Tb()),2&e){const e=i.gc();i.Cb(1),i.Cc("Worker's Payday -$",e.workerPayday,"")}}function P(e,t){1&e&&(i.Ub(0,"p",6),i.Ac(1,"Your Credit Score Took A Hit..."),i.Tb())}let I=(()=>{class e{constructor(e){this.ngZone=e,this.playerResourcesTemp={chiselLvl:0,money:0,bricks:0,clicks:0,barterLvl:0,tradeWorkers:[],tradeWorkersCount:0,tradeWorkersLvl:0,stoneWorkers:[],stoneCuttersCount:0,stoneWorkerLvl:0,guards:[],guardCount:0,guardWeaponLvl:0,guardArmorLvl:0,guardSpeedLvl:0,dayCounter:0,daysPast:0,version:.5,totalClicks:0,totalBricks:0,totalMoney:0,newPlayer:!0,quests:{questLvl:0,questDesc:"",questReward:0,completed:!1,quest:{complete:!1,chiselLvl:0,barterLvl:0,masons:0,masonLvl:0,traders:0,traderLvl:0}},sky:{sun:{x:0,y:0},moon:{x:0,y:0}},housingLimit:0,housingLvl:0,totalWorkers:0,stockpile:0,stockpileLvl:0,screenWidth:0,screenChange:!1,gameLevel:1,currentChapter:"",newPlayerVault:!0,banditWave:0,bandits:[],banditWaveCounter:0,banditSpawnCount:0,isBanditWaveStarted:!1,moneyTaken:0,credit:3,banditsStopped:0,totalGuards:0,tutorialGuards:0},this.playerResourcesReturn=new i.o,this.stone1=new Image,this.stone2=new Image,this.stone3=new Image,this.stone4=new Image,this.rockHit=new Image,this.stoneWorkerImg=new Image,this.tradeWorkerImg=new Image,this.sunImg=new Image,this.moonImg=new Image,this.stoneHP=Math.floor(10*Math.random())+10,this.addStoneSoundPath="assets/sounds/add_stone.wav",this.addStoneSound=new Audio,this.sellSoundPath="assets/sounds/sell.wav",this.sellSound=new Audio,this.currentStone={image:this.stone1,hitpoints:this.stoneHP},this.hits=0,this.stoneWorkerFreq=Math.floor(5*Math.random())+1,this.tradeWorkerFreq=Math.floor(5*Math.random())+1,this.workPayCounter=0,this.isWorking=!0,this.chiselDmg=0,this.bartering=0,this.stoneWorkerSpeed=0,this.tradeWorkerSpeed=0,this.chiselClicked=!1,this.workerPayday=0,this.displayPayday=!1,this.displayCreditHit=!1,this.optionsSelected={darkMode:!0,soundsOn:!0},this.stars=[],this.starLight=0}get playerResources(){return this.playerResourcesTemp}set playerResources(e){this.playerResourcesTemp=e,this.chiselStone(this.playerResourcesTemp.clicks)}ngOnInit(){if(this.addStoneSound.src=this.addStoneSoundPath,this.addStoneSound.load(),this.sellSound.src=this.sellSoundPath,this.sellSound.load(),localStorage.length>0&&localStorage.getItem("mason_options")){const e=JSON.parse(localStorage.getItem("mason_options"));this.optionsSelected={darkMode:e.darkMode,soundsOn:e.soundsOn};const t=document.getElementsByTagName("body");this.optionsSelected.darkMode?t[0].classList.add("darkMode"):t[0].classList.remove("darkMode")}else{document.getElementsByTagName("body")[0].classList.add("darkMode");const e=JSON.stringify(this.optionsSelected);localStorage.setItem("mason_options",e)}this.stone1.src="./assets/images/rock1.png",this.stone2.src="./assets/images/rock2.png",this.stone3.src="./assets/images/rock3.png",this.stone4.src="./assets/images/rock4.png",this.rockHit.src="./assets/images/rockChiseled.png",this.stoneWorkerImg.src="./assets/images/stoneWorker.png",this.tradeWorkerImg.src="./assets/images/tradeWorker.png",this.sunImg.src="./assets/images/SunImg.png",this.moonImg.src="./assets/images/MoonImg.png",this.ctx=this.canvas.nativeElement.getContext("2d"),this.ctx.canvas.width=.9*window.innerWidth,this.ctx.canvas.height=.5*window.innerHeight,this.objectSizeWidth=.01*this.ctx.canvas.width,this.objectSizeHeight=.01*this.ctx.canvas.height,this.objectSize=this.objectSizeWidth+this.objectSizeHeight,this.starCount=Math.abs(this.ctx.canvas.width/15),this.getStars(),this.stone1.onload=()=>{this.getStoneWorkerWorkTime(),this.getTradeWorkerWorkTime(),this.getWorkerPayment(),this.resetStone(),0===this.playerResourcesTemp.sky.sun.x&&0===this.playerResourcesTemp.sky.sun.y&&(this.playerResourcesTemp.sky.sun.x=.5*this.ctx.canvas.width,this.playerResourcesTemp.sky.sun.y=.74*this.ctx.canvas.height),0===this.playerResourcesTemp.sky.moon.x&&0===this.playerResourcesTemp.sky.moon.y&&(this.playerResourcesTemp.sky.moon.x=.5*this.ctx.canvas.width,this.playerResourcesTemp.sky.moon.y=.74*this.ctx.canvas.height),(this.playerResourcesTemp.sky.sun.x>.5*this.ctx.canvas.width||this.playerResourcesTemp.sky.sun.x<.5*this.ctx.canvas.width)&&(this.playerResourcesTemp.sky.sun.x=.5*this.ctx.canvas.width),!1===this.playerResourcesTemp.screenChange&&(this.playerResources.screenWidth=window.innerWidth),this.playerResourcesTemp.sky.sun.y<.74*this.ctx.canvas.height&&this.playerResourcesTemp.screenChange?(this.playerResourcesTemp.sky.sun.y=this.playerResourcesTemp.sky.sun.y/.74,this.playerResourcesTemp.screenChange=!1):this.playerResourcesTemp.sky.sun.y>.74*this.ctx.canvas.height&&this.playerResourcesTemp.screenChange&&(this.playerResourcesTemp.sky.sun.y=.74*this.playerResourcesTemp.sky.sun.y,this.playerResourcesTemp.screenChange=!1),this.playerResourcesTemp.sky.moon.y<.74*this.ctx.canvas.height&&this.playerResourcesTemp.screenChange?(this.playerResourcesTemp.sky.moon.y=this.playerResourcesTemp.sky.moon.y/.74,this.playerResourcesTemp.screenChange=!1):this.playerResourcesTemp.sky.moon.y>.74*this.ctx.canvas.height&&this.playerResourcesTemp.screenChange&&(this.playerResourcesTemp.sky.moon.y=.74*this.playerResourcesTemp.sky.moon.y,this.playerResourcesTemp.screenChange=!1),this.playerResourcesReturn.emit(this.playerResourcesTemp),this.playerResourcesTemp.stoneWorkers.length>0&&this.playerResourcesTemp.stoneWorkers.forEach(e=>{e.startPos=Math.floor(2*Math.random()),e.workLoad=Math.floor(5*Math.random())+3+this.playerResourcesTemp.stoneWorkerLvl,e.image=this.stoneWorkerImg,0===e.startPos?(e.x=this.ctx.canvas.width/(-.7*this.objectSize),e.y=.76*this.ctx.canvas.height,e.direction=0):1===e.startPos&&(e.x=1.3*this.ctx.canvas.width,e.y=.76*this.ctx.canvas.height,e.direction=1)}),this.playerResourcesTemp.tradeWorkers.length>0&&this.playerResourcesTemp.tradeWorkers.forEach(e=>{e.startPos=Math.floor(2*Math.random()),e.image=this.tradeWorkerImg,0===e.startPos?(e.x=this.ctx.canvas.width/(-.7*this.objectSize),e.y=.5*this.ctx.canvas.height,e.direction=0):1===e.startPos&&(e.x=1.3*this.ctx.canvas.width,e.y=.5*this.ctx.canvas.height,e.direction=1)}),this.chiselClicked=!1,this.getAllWorkers(this.playerResourcesTemp.stoneWorkers,this.playerResourcesTemp.tradeWorkers);for(let e=0;e<this.playerResourcesTemp.chiselLvl;e++)this.chiselDmg+=.6;for(let e=0;e<this.playerResourcesTemp.stoneWorkerLvl;e++)this.stoneWorkerSpeed+=3e-4*this.ctx.canvas.width;for(let e=0;e<this.playerResourcesTemp.tradeWorkersLvl;e++)this.tradeWorkerSpeed+=3e-4*this.ctx.canvas.width;for(let e=0;e<this.playerResourcesTemp.barterLvl;e++)this.bartering+=1;this.workPayCounter=this.playerResourcesTemp.dayCounter}}ngOnDestroy(){this.sellSound=new Audio,this.addStoneSound=new Audio,this.isWorking=!1,clearInterval(this.gameInterval),clearInterval(this.workPayInterval),clearInterval(this.tradeWorksWorkInterval),clearInterval(this.stoneCutterWorkInterval),cancelAnimationFrame(this.requestGameAnimatId)}drawBackground(){this.playerResourcesTemp.dayCounter<=40?this.playerResourcesTemp.dayCounter<=33?this.ctx.fillStyle="#0000FF":this.playerResourcesTemp.dayCounter>=34&&this.playerResourcesTemp.dayCounter<=36?this.ctx.fillStyle="#0000F3":this.playerResourcesTemp.dayCounter>=37&&this.playerResourcesTemp.dayCounter<=39?this.ctx.fillStyle="#0000E6":this.playerResourcesTemp.dayCounter>=40&&(this.ctx.fillStyle="#0000DA"):this.playerResourcesTemp.dayCounter>=41&&this.playerResourcesTemp.dayCounter<79?this.playerResourcesTemp.dayCounter<=70?this.ctx.fillStyle="#0000CD":this.playerResourcesTemp.dayCounter>=71&&this.playerResourcesTemp.dayCounter<=73?this.ctx.fillStyle="#0000BD":this.playerResourcesTemp.dayCounter>=74&&this.playerResourcesTemp.dayCounter<=76?this.ctx.fillStyle="#0000AC":this.playerResourcesTemp.dayCounter>=77&&(this.ctx.fillStyle="#00009C"):this.playerResourcesTemp.dayCounter>=79&&(this.playerResourcesTemp.dayCounter<=115?this.ctx.fillStyle="#00008B":this.playerResourcesTemp.dayCounter>=116&&this.playerResourcesTemp.dayCounter<=117?this.ctx.fillStyle="#0000A8":this.playerResourcesTemp.dayCounter>=118&&this.playerResourcesTemp.dayCounter<=119?this.ctx.fillStyle="#0000C5":this.playerResourcesTemp.dayCounter>=120&&(this.ctx.fillStyle="#0000E2")),this.ctx.fillRect(0,this.ctx.canvas.height/2*-1,this.ctx.canvas.width,this.ctx.canvas.height),this.playerResourcesTemp.dayCounter>=79&&this.playerResourcesTemp.dayCounter<=117?this.drawStars(this.stars):this.getStars(),this.ctx.drawImage(this.sunImg,this.playerResourcesTemp.sky.sun.x+-.1*this.ctx.canvas.width,this.playerResourcesTemp.sky.sun.y+-.055*this.ctx.canvas.width,10*this.objectSize,10*this.objectSize),this.ctx.drawImage(this.moonImg,this.playerResourcesTemp.sky.moon.x+-.1*this.ctx.canvas.width,this.playerResourcesTemp.sky.moon.y+-.055*this.ctx.canvas.width,10*this.objectSize,10*this.objectSize),this.drawSky(),this.playerResourcesTemp.dayCounter<=40?this.playerResourcesTemp.dayCounter<=33?this.ctx.fillStyle="#228B22":this.playerResourcesTemp.dayCounter>=34&&this.playerResourcesTemp.dayCounter<=36?this.ctx.fillStyle="#1A881A":this.playerResourcesTemp.dayCounter>=37&&this.playerResourcesTemp.dayCounter<=39?this.ctx.fillStyle="#118611":this.playerResourcesTemp.dayCounter>=40&&(this.ctx.fillStyle="#098309"):this.playerResourcesTemp.dayCounter>=41&&this.playerResourcesTemp.dayCounter<79?this.playerResourcesTemp.dayCounter<=70?this.ctx.fillStyle="#008000":this.playerResourcesTemp.dayCounter>=71&&this.playerResourcesTemp.dayCounter<=73?this.ctx.fillStyle="#007900":this.playerResourcesTemp.dayCounter>=74&&this.playerResourcesTemp.dayCounter<=76?this.ctx.fillStyle="#007200":this.playerResourcesTemp.dayCounter>=77&&(this.ctx.fillStyle="#006B00"):this.playerResourcesTemp.dayCounter>=79&&(this.playerResourcesTemp.dayCounter<=115?this.ctx.fillStyle="#006400":this.playerResourcesTemp.dayCounter>=116&&this.playerResourcesTemp.dayCounter<=117?this.ctx.fillStyle="#096E09":this.playerResourcesTemp.dayCounter>=118&&this.playerResourcesTemp.dayCounter<=119?this.ctx.fillStyle="#117811":this.playerResourcesTemp.dayCounter>=120&&(this.ctx.fillStyle="#1A811A")),this.ctx.fillRect(0,this.ctx.canvas.height/2,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.drawImage(this.currentStone.image,.5*this.ctx.canvas.width+-.1*this.ctx.canvas.width,.74*this.ctx.canvas.height+-.055*this.ctx.canvas.width,10*this.objectSize,10*this.objectSize),this.chiselClicked&&this.playerChiseled()}playerChiseled(){const e=.1*Math.floor(3*Math.random()+4),t=.1*Math.floor(3*Math.random()+6);this.ctx.drawImage(this.rockHit,this.ctx.canvas.width*e+-.1*this.ctx.canvas.width,this.ctx.canvas.height*t+-.055*this.ctx.canvas.width,10*this.objectSize,10*this.objectSize),this.ctx.restore()}chiselStone(e){if(e+=this.chiselDmg,this.playerResourcesTemp.bricks<this.playerResourcesTemp.stockpile){this.chiselClicked=!0,e>=Math.trunc(this.currentStone.hitpoints/4)&&0===this.hits&&this.ctx&&(this.currentStone.image=this.stone2,this.hits++,e>Math.trunc(this.currentStone.hitpoints/3)+Math.trunc(this.currentStone.hitpoints/3)&&this.hits++),e>Math.trunc(this.currentStone.hitpoints/3)&&1===this.hits&&this.ctx&&(this.currentStone.image=this.stone3,e>Math.trunc(this.currentStone.hitpoints/2)+Math.trunc(this.currentStone.hitpoints/4)&&this.hits++),e>Math.trunc(this.currentStone.hitpoints/2)&&2===this.hits&&this.ctx&&(this.currentStone.image=this.stone4,e>=Math.trunc(this.currentStone.hitpoints)&&this.hits++),e>=Math.trunc(this.currentStone.hitpoints)&&3===this.hits&&(this.playerResourcesTemp.bricks+=1,this.playerResourcesTemp.totalBricks+=1,this.optionsSelected.soundsOn&&!this.isGuardMoneyView&&this.addStoneSound.play(),this.resetStone());const t=setInterval(()=>{this.chiselClicked=!1,clearInterval(t)},100)}}sellStone(){let e=Math.floor(Math.random()*(this.bartering+1))+1;if(e>=this.playerResourcesTemp.bricks&&(e=this.playerResourcesTemp.bricks),this.playerResourcesTemp.bricks>0){this.playerResourcesTemp.bricks<=e&&(this.playerResourcesTemp.bricks=e);const t=(Math.floor(Math.random()*(this.bartering+3+this.playerResources.tradeWorkersLvl))+(1+this.bartering+this.playerResources.tradeWorkersLvl))*e;this.playerResourcesTemp.money+=t,this.playerResourcesTemp.totalMoney+=t,this.playerResourcesTemp.bricks-=e,this.playerResourcesReturn.emit(this.playerResourcesTemp),this.optionsSelected.soundsOn&&!this.isGuardMoneyView&&this.sellSound.play()}else this.playerResourcesTemp.bricks<0&&(this.playerResourcesTemp.bricks=0,this.playerResourcesReturn.emit(this.playerResourcesTemp))}resetStone(){this.playerResourcesTemp.clicks=0,this.playerResourcesReturn.emit(this.playerResourcesTemp),this.stoneHP=Math.floor(10*Math.random())+10,this.currentStone.image=this.stone1,this.currentStone.hitpoints=this.stoneHP,this.hits=0}getStoneWorkerWorkTime(){this.stoneCutterWorkInterval=setInterval(()=>{!1===this.playerResourcesTemp.newPlayer&&(this.stoneWorkerFreq=Math.floor(5*Math.random())+1)},2500)}drawWorker(e){this.ctx.drawImage(e.image,e.x,e.y,5*this.objectSize,5*this.objectSize)}getAllWorkers(e,t){this.ngZone.runOutsideAngular(()=>this.gameTicks(e,t)),this.gameInterval=setInterval(()=>{this.gameTicks(e,t)},30)}gameTicks(e,t){this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.drawBackground(),t.forEach(e=>{(this.tradeWorkerFreq===e.frequency&&this.playerResourcesTemp.bricks>0||!0===e.startedWork)&&(0===e.startPos&&(0===e.direction&&e.x<.38*this.ctx.canvas.width?(e.x+=.005*this.ctx.canvas.width+this.tradeWorkerSpeed,e.startedWork=!0,e.x>.38*this.ctx.canvas.width&&(e.direction=1)):1===e.direction&&(e.x>=-9*this.objectSize?e.x-=.005*this.ctx.canvas.width+this.tradeWorkerSpeed:(e.startedWork=!1,e.startPos=0,e.direction=0,this.sellStone(),this.playerResourcesReturn.emit(this.playerResourcesTemp)))),1===e.startPos&&(1===e.direction&&e.x>=.5*this.ctx.canvas.width?(e.x-=.005*this.ctx.canvas.width+this.tradeWorkerSpeed,e.startedWork=!0,e.x<.5*this.ctx.canvas.width&&(e.direction=0)):0===e.direction&&(e.x<=this.ctx.canvas.width+this.objectSize?e.x+=.005*this.ctx.canvas.width+this.tradeWorkerSpeed:(e.startedWork=!1,e.startPos=1,e.direction=1,this.sellStone())))),this.drawWorker(e)}),e.forEach(e=>{if(this.stoneWorkerFreq===e.frequency||!0===e.startedWork){if(0===e.startPos)if(0===e.direction&&e.x<.38*this.ctx.canvas.width){if(e.x+=.005*this.ctx.canvas.width+this.stoneWorkerSpeed,e.startedWork=!0,e.x>.38*this.ctx.canvas.width){for(let e=0;e<this.playerResourcesTemp.chiselLvl;e++)this.playerResourcesTemp.clicks+=.6;let t=1e3-10*this.playerResourcesTemp.stoneWorkerLvl;t<=30&&(t=30);const s=setInterval(()=>{this.isWorking?(e.workLoad--,this.playerResourcesTemp.clicks+=1,this.chiselStone(this.playerResourcesTemp.clicks),e.workLoad<=0&&(e.direction=1,clearInterval(s)),this.playerResourcesReturn.emit(this.playerResourcesTemp)):clearInterval(s)},t)}}else 1===e.direction&&(e.x>=-9*this.objectSize?e.x-=.005*this.ctx.canvas.width+this.stoneWorkerSpeed:(e.startedWork=!1,e.startPos=0,e.direction=0,e.workLoad=Math.floor(5*Math.random())+3+this.playerResourcesTemp.stoneWorkerLvl));if(1===e.startPos)if(1===e.direction&&e.x>=.5*this.ctx.canvas.width){if(e.x-=.005*this.ctx.canvas.width+this.stoneWorkerSpeed,e.startedWork=!0,e.x<.5*this.ctx.canvas.width){for(let e=0;e<this.playerResourcesTemp.chiselLvl;e++)this.playerResourcesTemp.clicks+=.6;let t=1e3-10*this.playerResourcesTemp.stoneWorkerLvl;t<=30&&(t=30);const s=setInterval(()=>{this.isWorking?(e.workLoad--,this.playerResourcesTemp.clicks+=1,this.chiselStone(this.playerResourcesTemp.clicks),e.workLoad<=0&&(e.direction=0,clearInterval(s)),this.playerResourcesReturn.emit(this.playerResourcesTemp)):clearInterval(s)},t)}}else 0===e.direction&&(e.x<=this.ctx.canvas.width+this.objectSize?e.x+=.005*this.ctx.canvas.width+this.stoneWorkerSpeed:(e.startedWork=!1,e.startPos=1,e.direction=1,e.workLoad=Math.floor(5*Math.random())+3+this.playerResourcesTemp.stoneWorkerLvl))}this.drawWorker(e)}),this.requestGameAnimatId=requestAnimationFrame(()=>this.gameTicks)}getTradeWorkerWorkTime(){this.tradeWorksWorkInterval=setInterval(()=>{!1===this.playerResourcesTemp.newPlayer&&(this.tradeWorkerFreq=Math.floor(5*Math.random())+1)},2500)}getWorkerPayment(){let e=!1;this.workPayInterval=setInterval(()=>{if(!1===this.playerResourcesTemp.newPlayer&&(this.workPayCounter++,this.playerResourcesTemp.dayCounter=this.workPayCounter,this.playerResourcesReturn.emit(this.playerResourcesTemp),this.workPayCounter>=120)){const t=this.playerResourcesTemp.stoneWorkers.length*(2*this.playerResourcesTemp.stoneWorkerLvl+2),s=this.playerResourcesTemp.tradeWorkers.length*(2*this.playerResourcesTemp.tradeWorkersLvl+2),r=20*this.playerResourcesTemp.totalGuards;if(this.workerPayday=t+s+r,this.playerResourcesTemp.money-=t+s+r,this.playerResourcesTemp.daysPast++,this.workPayCounter=0,this.playerResourcesTemp.money<0&&(e=!0,this.playerResourcesTemp.credit--),this.playerResourcesReturn.emit(this.playerResourcesTemp),this.playerResourcesTemp.stoneWorkers.length>0||this.playerResourcesTemp.tradeWorkers.length>0){this.displayPayday=!0;const t=setInterval(()=>{if(this.displayPayday=!1,e){this.displayCreditHit=!0;const e=setInterval(()=>{this.displayCreditHit=!1,clearInterval(e)},5e3)}clearInterval(t)},5e3)}}},1e3)}drawSky(){this.playerResourcesTemp.dayCounter<=40&&this.playerResourcesTemp.dayCounter>0?(this.playerResourcesTemp.sky.sun.y+=-58e-5*this.ctx.canvas.height+-16e-5*this.ctx.canvas.height,this.playerResourcesTemp.sky.sun.x=.5*this.ctx.canvas.width,this.playerResourcesTemp.sky.moon.x=.5*this.ctx.canvas.width,this.playerResourcesTemp.sky.moon.y=.74*this.ctx.canvas.height):this.playerResourcesTemp.dayCounter>=41&&this.playerResourcesTemp.dayCounter<79?(this.playerResourcesTemp.sky.sun.x=.5*this.ctx.canvas.width,this.playerResourcesTemp.sky.sun.y=.74*this.ctx.canvas.height,this.playerResourcesTemp.sky.moon.x=.5*this.ctx.canvas.width,this.playerResourcesTemp.sky.moon.y=.74*this.ctx.canvas.height):this.playerResourcesTemp.dayCounter>=79&&(this.playerResourcesTemp.sky.moon.y+=-58e-5*this.ctx.canvas.height+-16e-5*this.ctx.canvas.height,this.playerResourcesTemp.sky.moon.x=.5*this.ctx.canvas.width,this.playerResourcesTemp.sky.sun.x=.5*this.ctx.canvas.width,this.playerResourcesTemp.sky.sun.y=.74*this.ctx.canvas.height)}drawStars(e){const t=setInterval(()=>{this.playerResourcesTemp.dayCounter>=78&&this.playerResourcesTemp.dayCounter<=79?(this.starLight+=.1,this.starLight>=1&&(this.starLight=1)):this.playerResourcesTemp.dayCounter<=115&&(this.starLight=1),this.playerResourcesTemp.dayCounter>=116&&this.playerResourcesTemp.dayCounter<=117&&(this.starLight-=.1,this.starLight<=0&&(this.starLight=0)),clearInterval(t)},100);for(let s=0;s<e.length;s++)this.ctx.beginPath(),this.ctx.arc(e[s].x,e[s].y,e[s].radius,0,2*Math.PI,!1),this.ctx.fillStyle="rgba(255, 255, 255, "+this.starLight+")",this.ctx.fill(),this.ctx.lineWidth=1,this.ctx.strokeStyle="rgba(255, 255, 255, "+this.starLight+")",this.ctx.stroke()}getStars(){this.stars=[];for(let e=0;e<this.starCount;e++){const e={x:0,y:0,radius:0};e.x=Math.floor(Math.random()*this.ctx.canvas.width)+1,e.y=Math.floor(Math.random()*(this.ctx.canvas.height/2))+1,e.radius=.1*this.objectSize,this.stars.push(e)}}}return e.\u0275fac=function(t){return new(t||e)(i.Ob(i.A))},e.\u0275cmp=i.Ib({type:e,selectors:[["app-stone-cutter-view"]],viewQuery:function(e,t){var s;1&e&&i.xc(U,!0),2&e&&i.qc(s=i.dc())&&(t.canvas=s.first)},inputs:{playerResources:"playerResources",isGuardMoneyView:"isGuardMoneyView"},outputs:{playerResourcesReturn:"playerResourcesReturn"},decls:5,vars:2,consts:[[1,"stone-view-wrapper"],["class","workers-payday",4,"ngIf"],["class","credit-hit",4,"ngIf"],["id","canvas"],["canvas",""],[1,"workers-payday"],[1,"credit-hit"]],template:function(e,t){1&e&&(i.Ub(0,"div",0),i.zc(1,A,2,1,"p",1),i.zc(2,P,2,0,"p",2),i.Pb(3,"canvas",3,4),i.Tb()),2&e&&(i.Cb(1),i.lc("ngIf",t.displayPayday),i.Cb(1),i.lc("ngIf",t.displayCreditHit))},directives:[r.k],styles:["#canvas[_ngcontent-%COMP%]{display:block;margin:0 auto}.credit-hit[_ngcontent-%COMP%], .workers-payday[_ngcontent-%COMP%]{position:absolute;top:calc(20% + 1.4em);text-align:center;width:90%}.credit-hit[_ngcontent-%COMP%]{color:red;font-weight:bolder}"]}),e})();const G=["canvasGuardMoney"];let B=(()=>{class e{constructor(e){this.ngZone=e,this.playerResourcesTemp={chiselLvl:0,money:0,bricks:0,clicks:0,barterLvl:0,tradeWorkers:[],tradeWorkersCount:0,tradeWorkersLvl:0,stoneWorkers:[],stoneCuttersCount:0,stoneWorkerLvl:0,guards:[],guardCount:0,guardWeaponLvl:0,guardArmorLvl:0,guardSpeedLvl:0,dayCounter:0,daysPast:0,version:.5,totalClicks:0,totalBricks:0,totalMoney:0,newPlayer:!0,quests:{questLvl:0,questDesc:"",questReward:0,completed:!1,quest:{complete:!1,chiselLvl:0,barterLvl:0,masons:0,masonLvl:0,traders:0,traderLvl:0}},sky:{sun:{x:0,y:0},moon:{x:0,y:0}},housingLimit:0,housingLvl:0,totalWorkers:0,stockpile:0,stockpileLvl:0,screenWidth:0,screenChange:!1,gameLevel:1,currentChapter:"",newPlayerVault:!0,banditWave:0,bandits:[],banditWaveCounter:0,banditSpawnCount:0,isBanditWaveStarted:!1,moneyTaken:0,credit:3,banditsStopped:0,totalGuards:0,tutorialGuards:0},this.playerResourcesReturn=new i.o,this.stars=[],this.starLight=0,this.vaultImg=new Image,this.guardImg=new Image,this.banditImg=new Image,this.combatHit=new Image,this.combatSound1Path="assets/sounds/sword_clang1.wav",this.combatSound1=new Audio,this.combatSound2Path="assets/sounds/sword_clang2.wav",this.combatSound2=new Audio,this.optionsSelected={darkMode:!0,soundsOn:!0}}set playerResources(e){this.playerResourcesTemp=e}ngOnInit(){if(localStorage.length>0&&localStorage.getItem("mason_options")){const e=JSON.parse(localStorage.getItem("mason_options"));this.optionsSelected={darkMode:e.darkMode,soundsOn:e.soundsOn};const t=document.getElementsByTagName("body");this.optionsSelected.darkMode?t[0].classList.add("darkMode"):t[0].classList.remove("darkMode")}else{document.getElementsByTagName("body")[0].classList.add("darkMode");const e=JSON.stringify(this.optionsSelected);localStorage.setItem("mason_options",e)}this.combatSound1.src=this.combatSound1Path,this.combatSound1.load(),this.combatSound2.src=this.combatSound2Path,this.combatSound2.load(),this.ctx=this.canvas.nativeElement.getContext("2d"),this.ctx.canvas.width=.9*window.innerWidth,this.ctx.canvas.height=.5*window.innerHeight,this.objectSizeWidth=.01*this.ctx.canvas.width,this.objectSizeHeight=.01*this.ctx.canvas.height,this.objectSize=this.objectSizeWidth+this.objectSizeHeight,this.starCount=Math.abs(this.ctx.canvas.width/15),this.getStars(),this.vaultImg.src="./assets/images/vault.png",this.guardImg.src="./assets/images/guard.png",this.banditImg.src="./assets/images/bandit.png",this.combatHit.src="./assets/images/rockChiseled.png",this.vaultImg.onload=()=>{this.startBanditWaves(),this.playerResourcesTemp.isBanditWaveStarted&&this.spawnBandits(),this.playerResourcesTemp.guards.forEach(e=>{e.image=this.guardImg}),this.playerResourcesTemp.bandits.forEach(e=>{e.image=this.banditImg}),this.getAllCharacters(this.playerResourcesTemp.guards,this.playerResourcesTemp.bandits)}}ngOnDestroy(){this.combatSound1=new Audio,this.combatSound2=new Audio,clearInterval(this.gameInterval),clearInterval(this.banditSpawnInterval),clearInterval(this.banditWaveInterval),cancelAnimationFrame(this.requestGameAnimatId)}drawBackground(){this.playerResourcesTemp.dayCounter<=40?this.playerResourcesTemp.dayCounter<=33?this.ctx.fillStyle="#0000FF":this.playerResourcesTemp.dayCounter>=34&&this.playerResourcesTemp.dayCounter<=36?this.ctx.fillStyle="#0000F3":this.playerResourcesTemp.dayCounter>=37&&this.playerResourcesTemp.dayCounter<=39?this.ctx.fillStyle="#0000E6":this.playerResourcesTemp.dayCounter>=40&&(this.ctx.fillStyle="#0000DA"):this.playerResourcesTemp.dayCounter>=41&&this.playerResourcesTemp.dayCounter<79?this.playerResourcesTemp.dayCounter<=70?this.ctx.fillStyle="#0000CD":this.playerResourcesTemp.dayCounter>=71&&this.playerResourcesTemp.dayCounter<=73?this.ctx.fillStyle="#0000BD":this.playerResourcesTemp.dayCounter>=74&&this.playerResourcesTemp.dayCounter<=76?this.ctx.fillStyle="#0000AC":this.playerResourcesTemp.dayCounter>=77&&(this.ctx.fillStyle="#00009C"):this.playerResourcesTemp.dayCounter>=79&&(this.playerResourcesTemp.dayCounter<=115?this.ctx.fillStyle="#00008B":this.playerResourcesTemp.dayCounter>=116&&this.playerResourcesTemp.dayCounter<=117?this.ctx.fillStyle="#0000A8":this.playerResourcesTemp.dayCounter>=118&&this.playerResourcesTemp.dayCounter<=119?this.ctx.fillStyle="#0000C5":this.playerResourcesTemp.dayCounter>=120&&(this.ctx.fillStyle="#0000E2")),this.ctx.fillRect(0,this.ctx.canvas.height/6*-1,this.ctx.canvas.width,this.ctx.canvas.height),this.playerResourcesTemp.dayCounter>=79&&this.playerResourcesTemp.dayCounter<=117?this.drawStars(this.stars):this.getStars(),this.playerResourcesTemp.dayCounter<=40?this.playerResourcesTemp.dayCounter<=33?this.ctx.fillStyle="#228B22":this.playerResourcesTemp.dayCounter>=34&&this.playerResourcesTemp.dayCounter<=36?this.ctx.fillStyle="#1A881A":this.playerResourcesTemp.dayCounter>=37&&this.playerResourcesTemp.dayCounter<=39?this.ctx.fillStyle="#118611":this.playerResourcesTemp.dayCounter>=40&&(this.ctx.fillStyle="#098309"):this.playerResourcesTemp.dayCounter>=41&&this.playerResourcesTemp.dayCounter<79?this.playerResourcesTemp.dayCounter<=70?this.ctx.fillStyle="#008000":this.playerResourcesTemp.dayCounter>=71&&this.playerResourcesTemp.dayCounter<=73?this.ctx.fillStyle="#007900":this.playerResourcesTemp.dayCounter>=74&&this.playerResourcesTemp.dayCounter<=76?this.ctx.fillStyle="#007200":this.playerResourcesTemp.dayCounter>=77&&(this.ctx.fillStyle="#006B00"):this.playerResourcesTemp.dayCounter>=79&&(this.playerResourcesTemp.dayCounter<=115?this.ctx.fillStyle="#006400":this.playerResourcesTemp.dayCounter>=116&&this.playerResourcesTemp.dayCounter<=117?this.ctx.fillStyle="#096E09":this.playerResourcesTemp.dayCounter>=118&&this.playerResourcesTemp.dayCounter<=119?this.ctx.fillStyle="#117811":this.playerResourcesTemp.dayCounter>=120&&(this.ctx.fillStyle="#1A811A")),this.ctx.fillRect(0,this.ctx.canvas.height/6,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.drawImage(this.vaultImg,.5*this.ctx.canvas.width+-.1*this.ctx.canvas.width,.73*this.ctx.canvas.height+-.055*this.ctx.canvas.width,10*this.objectSize,10*this.objectSize)}gameTicks(e,t){this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.drawBackground(),t.forEach((e,t)=>{!1===e.inCombat&&0===e.startPos&&0===e.animatePos&&e.x<.3*this.ctx.canvas.width&&(e.x+=.003*this.ctx.canvas.width),!1===e.inCombat&&0===e.startPos&&0===e.animatePos&&e.x>=.3*this.ctx.canvas.width&&e.animatePos++,!1===e.inCombat&&0===e.startPos&&1===e.animatePos&&(e.y<1*this.ctx.canvas.height&&(e.y+=.003*this.ctx.canvas.height),e.y>=1*this.ctx.canvas.height&&(e.finished=!0)),!1===e.inCombat&&1===e.startPos&&0===e.animatePos&&e.x<.3*this.ctx.canvas.width&&(e.x+=.003*this.ctx.canvas.width),!1===e.inCombat&&1===e.startPos&&0===e.animatePos&&e.x>=.14*this.ctx.canvas.width&&e.animatePos++,!1===e.inCombat&&1===e.startPos&&1===e.animatePos&&(e.y<1*this.ctx.canvas.height&&(e.y+=.003*this.ctx.canvas.height),e.y>=1*this.ctx.canvas.height&&(e.finished=!0)),!1===e.inCombat&&2===e.startPos&&0===e.animatePos&&e.x>.62*this.ctx.canvas.width&&(e.x-=.003*this.ctx.canvas.width),!1===e.inCombat&&2===e.startPos&&0===e.animatePos&&e.x<=.62*this.ctx.canvas.width&&e.animatePos++,!1===e.inCombat&&2===e.startPos&&1===e.animatePos&&(e.y<1*this.ctx.canvas.height&&(e.y+=.003*this.ctx.canvas.height),e.y>=1*this.ctx.canvas.height&&(e.finished=!0)),!1===e.inCombat&&3===e.startPos&&0===e.animatePos&&e.x>.78*this.ctx.canvas.width&&(e.x-=.003*this.ctx.canvas.width),!1===e.inCombat&&3===e.startPos&&0===e.animatePos&&e.x<=.78*this.ctx.canvas.width&&e.animatePos++,!1===e.inCombat&&3===e.startPos&&1===e.animatePos&&(e.y<1*this.ctx.canvas.height&&(e.y+=.003*this.ctx.canvas.height),e.y>=1*this.ctx.canvas.height&&(e.finished=!0)),this.drawCharacters(e)}),t.forEach((e,s)=>{!0===e.finished&&(e.hp>0?(0===e.level?(this.playerResourcesTemp.money-=50,this.playerResourcesTemp.moneyTaken+=50):1===e.level?(this.playerResourcesTemp.money-=100,this.playerResourcesTemp.moneyTaken+=100):(this.playerResourcesTemp.money-=100*e.level,this.playerResourcesTemp.moneyTaken+=100*e.level),t.splice(s,1),this.playerResourcesReturn.emit(this.playerResourcesTemp)):e.hp<=0&&!0===e.finished&&t.splice(s,1))}),e.forEach((e,s)=>{0===e.startPos&&0===e.animatePos&&(e.target||t.forEach(t=>{!1===t.inCombat&&!1===t.isTarget&&t.y+.3*this.ctx.canvas.height>=e.y&&t.x+.3*this.ctx.canvas.width>=e.x&&t.x-.3*this.ctx.canvas.width<=e.x&&(e.target=t)}),e.target&&(e.hasTarget=!0,e.target.isTarget=!0,e.target.y<e.y-.04*this.ctx.canvas.width?(e.y-=.003*this.ctx.canvas.height,e.target.x>e.x+.01*this.ctx.canvas.width&&(e.x+=.003*this.ctx.canvas.height),e.target.x<e.x-.01*this.ctx.canvas.width&&(e.x-=.003*this.ctx.canvas.height)):e.target.inCombat=!0),e.target&&!0===e.target.inCombat&&(this.guardAttack(e),this.banditAttack(e))),0===e.startPos&&1===e.animatePos&&(e.y<1*this.ctx.canvas.height&&(e.y+=.005*this.ctx.canvas.height),e.y>=1*this.ctx.canvas.height&&(this.playerResourcesTemp.guardCount++,e.isAlive=!1,this.playerResourcesReturn.emit(this.playerResourcesTemp))),this.drawCharacters(e)}),e.forEach((t,s)=>{!1===t.isAlive&&(e.splice(s,1),this.playerResourcesReturn.emit(this.playerResourcesTemp))}),this.requestGameAnimatId=requestAnimationFrame(()=>this.gameTicks)}getAllCharacters(e,t){this.ngZone.runOutsideAngular(()=>this.gameTicks(e,t)),this.gameInterval=setInterval(()=>{this.gameTicks(e,t)},30)}getStars(){this.stars=[];for(let e=0;e<this.starCount;e++){const e={x:0,y:0,radius:0};e.x=Math.floor(Math.random()*this.ctx.canvas.width)+1,e.y=Math.floor(Math.random()*(this.ctx.canvas.height/2))+1,e.radius=.1*this.objectSize,this.stars.push(e)}}drawStars(e){const t=setInterval(()=>{this.playerResourcesTemp.dayCounter>=78&&this.playerResourcesTemp.dayCounter<=79?(this.starLight+=.1,this.starLight>=1&&(this.starLight=1)):this.playerResourcesTemp.dayCounter<=115&&(this.starLight=1),this.playerResourcesTemp.dayCounter>=116&&this.playerResourcesTemp.dayCounter<=117&&(this.starLight-=.1,this.starLight<=0&&(this.starLight=0)),clearInterval(t)},100);for(let s=0;s<e.length;s++)this.ctx.beginPath(),this.ctx.arc(e[s].x,e[s].y,e[s].radius,0,2*Math.PI,!1),this.ctx.fillStyle="rgba(255, 255, 255, "+this.starLight+")",this.ctx.fill(),this.ctx.lineWidth=1,this.ctx.strokeStyle="rgba(255, 255, 255, "+this.starLight+")",this.ctx.stroke()}playerTap(e){if(e.clientY>=.44*this.ctx.canvas.height&&e.clientX>.087*this.ctx.canvas.width&&e.clientX<this.ctx.canvas.width+.025*this.ctx.canvas.width)if(e.clientX>.52*this.ctx.canvas.width+-.1*this.ctx.canvas.width&&e.clientX<.51*this.ctx.canvas.width+-.1*this.ctx.canvas.width+14*this.objectSize&&e.clientY>.89*this.ctx.canvas.height+-.055*this.ctx.canvas.width);else{const t={id:Math.floor(9999*Math.random())+"-"+Math.floor(9999*Math.random())+"-"+Math.floor(9999*Math.random()),image:this.guardImg,speed:this.playerResourcesTemp.guardSpeedLvl,hp:9+this.playerResourcesTemp.guardArmorLvl,x:e.clientX-.1*this.ctx.canvas.width,y:e.clientY-.28*this.ctx.canvas.height,startPos:0,animatePos:0,attack:this.playerResourcesTemp.guardWeaponLvl,defense:this.playerResourcesTemp.guardArmorLvl,hasTarget:!1,target:null,isAlive:!0,isTutorialGuard:!1};this.playerResourcesTemp.tutorialGuards>0&&(t.isTutorialGuard=!0),this.playerResourcesTemp.guardCount>0&&(this.playerResourcesTemp.guards.push(t),this.playerResourcesTemp.guardCount--,this.playerResourcesReturn.emit(this.playerResourcesTemp))}}drawCharacters(e){this.ctx.drawImage(e.image,e.x,e.y,5*this.objectSize,5*this.objectSize)}spawnBandits(){let e=0,t=0,s=0,r=0,a=0,i=0,o=0;this.banditSpawnInterval=setInterval(()=>{this.playerResourcesTemp.banditWave<=2&&(e=Math.floor(4*Math.random()),t=0,s=10,r=2,a=0,i=0,o=0),this.playerResourcesTemp.banditWave>2&&this.playerResourcesTemp.banditWave<=5&&(e=Math.floor(4*Math.random()),t=Math.floor(2*Math.random())+1,s=10+Math.floor(2*Math.random())+1,r=5,a=Math.floor(2*Math.random())+1,i=a,o=a),this.playerResourcesTemp.banditWave>5&&this.playerResourcesTemp.banditWave<=8&&(e=Math.floor(4*Math.random()),t=Math.floor(3*Math.random())+2,s=10+Math.floor(3*Math.random())+2,r=11,a=Math.floor(3*Math.random())+2,i=a,o=a),this.playerResourcesTemp.banditWave>8&&this.playerResourcesTemp.banditWave<=11&&(e=Math.floor(4*Math.random()),t=Math.floor(5*Math.random())+4,s=10+Math.floor(5*Math.random())+4,r=23,a=Math.floor(5*Math.random())+4,i=a,o=a),this.playerResourcesTemp.banditWave>11&&this.playerResourcesTemp.banditWave<=14&&(e=Math.floor(4*Math.random()),t=Math.floor(9*Math.random())+8,s=10+Math.floor(9*Math.random())+8,r=47,a=Math.floor(16*Math.random())+15,i=a,o=a),this.playerResourcesTemp.banditWave>14&&this.playerResourcesTemp.banditWave<=17&&(e=Math.floor(4*Math.random()),t=Math.floor(15*Math.random())+16,s=10+Math.floor(15*Math.random())+16,r=50,a=Math.floor(11*Math.random())+30,i=a,o=a),this.playerResourcesTemp.banditWave>17&&this.playerResourcesTemp.banditWave<=20&&(e=Math.floor(4*Math.random()),t=Math.floor(21*Math.random())+30,s=10+Math.floor(11*Math.random())+30,r=60,a=Math.floor(11*Math.random())+40,i=a,o=a),this.playerResourcesTemp.banditWave>20&&this.playerResourcesTemp.banditWave<=23&&(e=Math.floor(4*Math.random()),t=Math.floor(11*Math.random())+50,s=10+Math.floor(11*Math.random())+40,r=70,a=Math.floor(11*Math.random())+50,i=a,o=a),this.playerResourcesTemp.banditWave>23&&this.playerResourcesTemp.banditWave<=26&&(e=Math.floor(4*Math.random()),t=Math.floor(11*Math.random())+60,s=10+Math.floor(11*Math.random())+50,r=80,a=Math.floor(11*Math.random())+60,i=a,o=a),this.playerResourcesTemp.banditWave>26&&this.playerResourcesTemp.banditWave<=29&&(e=Math.floor(4*Math.random()),t=Math.floor(11*Math.random())+70,s=10+Math.floor(11*Math.random())+60,r=90,a=Math.floor(11*Math.random())+70,i=a,o=a),this.playerResourcesTemp.banditWave>29&&(e=Math.floor(4*Math.random()),t=Math.floor(20*Math.random())+80,s=10+Math.floor(11*Math.random())+70,r=100,a=Math.floor(11*Math.random())+80,i=a,o=a),this.addBandit(e,t,s,a,i,o),this.playerResourcesTemp.banditSpawnCount++,this.playerResourcesTemp.banditSpawnCount>=r&&(this.playerResourcesTemp.banditWave++,this.playerResourcesTemp.isBanditWaveStarted=!1,this.playerResourcesTemp.banditSpawnCount=0,clearInterval(this.banditSpawnInterval)),this.playerResourcesReturn.emit(this.playerResourcesTemp)},1500)}addBandit(e,t,s,r,a,i){let o=0,n=0;0===e?(o=-.1*this.ctx.canvas.width,n=.2*this.ctx.canvas.height):1===e?(o=-.1*this.ctx.canvas.width,n=.48*this.ctx.canvas.height):2===e?(o=1.1*this.ctx.canvas.width,n=.2*this.ctx.canvas.height):3===e&&(o=1.1*this.ctx.canvas.width,n=.48*this.ctx.canvas.height);const c={id:Math.floor(9999*Math.random())+"-"+Math.floor(9999*Math.random())+"-"+Math.floor(9999*Math.random()),image:this.banditImg,speed:t,hp:s,x:o,y:n,startPos:e,animatePos:0,finished:!1,level:r,attack:a,defense:i,inCombat:!1,isTarget:!1},l=setTimeout(()=>{this.playerResourcesTemp.bandits.push(c),this.playerResourcesReturn.emit(this.playerResourcesTemp),l&&clearTimeout(l)},1e3)}combatEffects(e,t){const s=.22*Math.floor(3*Math.random()+4),r=.12*Math.floor(3*Math.random()+6);this.ctx.drawImage(this.combatHit,e+s+-.1*e,t+r+-.055*t,8*this.objectSize,8*this.objectSize),this.ctx.restore()}guardAttack(e){if(e&&e.target){const t=this.playerResourcesTemp.guards.find(t=>t.id===e.id),s=this.playerResourcesTemp.bandits.find(e=>e.id===t.target.id);if(1===Math.floor(Math.random()*(100-t.speed)+1)){this.combatEffects(t.x,t.y),this.optionsSelected.soundsOn&&this.isGuardMoneyView&&this.combatSound1.play();let r=1+this.playerResourcesTemp.guardWeaponLvl-s.defense;r<=0&&(r=1),s.hp-=r,s.hp<=0&&(s.finished=!0,s.inCombat=!1,t.target=null,e.animatePos++,this.playerResourcesTemp.banditsStopped++),this.playerResourcesReturn.emit(this.playerResourcesTemp)}}}banditAttack(e){if(e&&e.target){const t=this.playerResourcesTemp.guards.find(t=>t.id===e.id),s=this.playerResourcesTemp.bandits.find(e=>e.id===t.target.id);if(1===Math.floor(Math.random()*(100-t.target.speed)+1)){this.combatEffects(s.x,s.y),this.optionsSelected.soundsOn&&this.isGuardMoneyView&&this.combatSound2.play();let e=1+s.attack-t.defense;e<=0&&(e=1),t.hp-=e,!t.isTutorialGuard&&t.hp<=0?(t.isAlive=!1,s.inCombat=!1,s.isTarget=!1,this.playerResourcesTemp.totalGuards--,this.playerResourcesTemp.totalWorkers--):t.isTutorialGuard&&t.hp<=0&&(t.isAlive=!1,s.inCombat=!1,s.isTarget=!1,this.playerResourcesTemp.tutorialGuards--),this.playerResourcesReturn.emit(this.playerResourcesTemp)}}}startBanditWaves(){this.banditWaveInterval=setInterval(()=>{!1===this.playerResourcesTemp.newPlayerVault&&(this.playerResourcesTemp.banditWaveCounter++,this.playerResourcesTemp.banditWaveCounter>=260&&(this.playerResourcesTemp.isBanditWaveStarted=!0,260===this.playerResourcesTemp.banditWaveCounter&&this.spawnBandits(),this.playerResourcesTemp.banditWaveCounter=0),this.playerResourcesReturn.emit(this.playerResourcesTemp))},1e3)}}return e.\u0275fac=function(t){return new(t||e)(i.Ob(i.A))},e.\u0275cmp=i.Ib({type:e,selectors:[["app-guard-money-view"]],viewQuery:function(e,t){var s;1&e&&i.xc(G,!0),2&e&&i.qc(s=i.dc())&&(t.canvas=s.first)},inputs:{playerResources:"playerResources",isGuardMoneyView:"isGuardMoneyView"},outputs:{playerResourcesReturn:"playerResourcesReturn"},decls:3,vars:0,consts:[[1,"stone-view-wrapper"],["id","canvasGuardMoney",3,"click"],["canvasGuardMoney",""]],template:function(e,t){1&e&&(i.Ub(0,"div",0),i.Ub(1,"canvas",1,2),i.cc("click",(function(e){return t.playerTap(e)})),i.Tb(),i.Tb())},styles:["#canvasGuardMoney[_ngcontent-%COMP%]{display:block;margin:0 auto}"]}),e})();function O(e,t){if(1&e&&(i.Ub(0,"div",7),i.Ub(1,"h3",8),i.Ac(2,"Owe Guards"),i.Tb(),i.Ub(3,"p",4),i.Ac(4),i.Tb(),i.Tb()),2&e){const e=i.gc();i.Cb(4),i.Cc("$",e.totalGuardCost," a day")}}const z=function(e){return{"title-dm":e}};function V(e,t){if(1&e&&(i.Ub(0,"span"),i.Ub(1,"h2",6),i.Ac(2,"Guards"),i.Tb(),i.Ub(3,"div",7),i.Ub(4,"h3",8),i.Ac(5,"Hired Guards"),i.Tb(),i.Ub(6,"p",4),i.Ac(7),i.Tb(),i.Tb(),i.Ub(8,"div",7),i.Ub(9,"h3",8),i.Ac(10,"Weapon Level"),i.Tb(),i.Ub(11,"p",4),i.Ac(12),i.Tb(),i.Tb(),i.Ub(13,"div",7),i.Ub(14,"h3",8),i.Ac(15,"Armor Level"),i.Tb(),i.Ub(16,"p",4),i.Ac(17),i.Tb(),i.Tb(),i.Ub(18,"div",7),i.Ub(19,"h3",8),i.Ac(20,"Speed Level"),i.Tb(),i.Ub(21,"p",4),i.Ac(22),i.Tb(),i.Tb(),i.Tb()),2&e){const e=i.gc();i.Cb(1),i.lc("ngClass",i.oc(5,z,!0===e.optionsSelected.darkMode)),i.Cb(6),i.Bc(e.playerResourcesTemp.totalGuards),i.Cb(5),i.Bc(e.playerResourcesTemp.guardWeaponLvl),i.Cb(5),i.Bc(e.playerResourcesTemp.guardArmorLvl),i.Cb(5),i.Bc(e.playerResourcesTemp.guardSpeedLvl)}}function D(e,t){if(1&e&&(i.Ub(0,"span"),i.Ub(1,"div",7),i.Ub(2,"h3",8),i.Ac(3,"Bandit Waves"),i.Tb(),i.Ub(4,"p",4),i.Ac(5),i.Tb(),i.Tb(),i.Ub(6,"div",7),i.Ub(7,"h3",8),i.Ac(8,"Money Stolen"),i.Tb(),i.Ub(9,"p",4),i.Ac(10),i.Tb(),i.Tb(),i.Ub(11,"div",7),i.Ub(12,"h3",8),i.Ac(13,"Bandits Slain"),i.Tb(),i.Ub(14,"p",4),i.Ac(15),i.Tb(),i.Tb(),i.Tb()),2&e){const e=i.gc();i.Cb(5),i.Bc(e.playerResourcesTemp.banditWave),i.Cb(5),i.Cc("$",e.playerResourcesTemp.moneyTaken,""),i.Cb(5),i.Bc(e.playerResourcesTemp.banditsStopped)}}let _=(()=>{class e{constructor(){this.playerResourcesTemp={chiselLvl:0,money:0,bricks:0,clicks:0,barterLvl:0,tradeWorkers:[],tradeWorkersCount:0,tradeWorkersLvl:0,stoneWorkers:[],stoneCuttersCount:0,stoneWorkerLvl:0,guards:[],guardCount:0,guardWeaponLvl:0,guardArmorLvl:0,guardSpeedLvl:0,dayCounter:0,daysPast:0,version:.5,totalClicks:0,totalBricks:0,totalMoney:0,newPlayer:!0,quests:{questLvl:0,questDesc:"",questReward:0,completed:!1,quest:{complete:!1,chiselLvl:0,barterLvl:0,masons:0,masonLvl:0,traders:0,traderLvl:0}},sky:{sun:{x:0,y:0},moon:{x:0,y:0}},housingLimit:0,housingLvl:0,totalWorkers:0,stockpile:0,stockpileLvl:0,screenWidth:0,screenChange:!1,gameLevel:1,currentChapter:"",newPlayerVault:!0,banditWave:0,bandits:[],banditWaveCounter:0,banditSpawnCount:0,isBanditWaveStarted:!1,moneyTaken:0,credit:3,banditsStopped:0,totalGuards:0,tutorialGuards:0},this.workersProfits=0,this.workersPayCheck=0,this.pageHeight=0,this.timeOfDay="Morning",this.baseCostPerBrick=1,this.creditScore="Great",this.displayAfterPayday="",this.totalMasonCost=0,this.totalTraderCost=0,this.totalGuardCost=0,this.optionsSelected={darkMode:!0,soundsOn:!0}}get playerResources(){return this.playerResourcesTemp}set playerResources(e){this.playerResourcesTemp=e}ngOnInit(){if(localStorage.length>0&&localStorage.getItem("mason_options")){const e=JSON.parse(localStorage.getItem("mason_options"));this.optionsSelected={darkMode:e.darkMode,soundsOn:e.soundsOn}}this.calcWorkerProfits(),this.calcHeightOfPage(),this.calcTimeOfDay(),this.calcCreditScore(),this.calcMoneyAfterPayday(),this.baseCostPerBrick+=this.playerResourcesTemp.barterLvl+this.playerResourcesTemp.tradeWorkersLvl}calcWorkerProfits(){const e=4+this.playerResourcesTemp.stoneWorkerLvl;let t=0,s=0,r=0;this.totalMasonCost=this.playerResourcesTemp.stoneWorkers.length*(2*this.playerResourcesTemp.stoneWorkerLvl+2),this.totalTraderCost=this.playerResourcesTemp.tradeWorkers.length*(2*this.playerResourcesTemp.tradeWorkersLvl+2),this.totalGuardCost=20*this.playerResourcesTemp.totalGuards,this.workersPayCheck=this.totalMasonCost+this.totalTraderCost+this.totalGuardCost;const a=Math.floor(Math.random()*(this.playerResourcesTemp.barterLvl+3+this.playerResourcesTemp.tradeWorkersLvl))+1+this.playerResourcesTemp.barterLvl+this.playerResourcesTemp.tradeWorkersLvl;s=9.6*(e+.6*this.playerResourcesTemp.stoneWorkerLvl*this.playerResourcesTemp.stoneWorkers.length),t=s/14.5,r=Math.ceil(t*a)*this.playerResourcesTemp.tradeWorkers.length+this.playerResourcesTemp.tradeWorkersLvl,this.workersProfits=r-this.workersPayCheck}calcHeightOfPage(){const e=window.innerHeight;this.pageHeight=e-.39*e}calcTimeOfDay(){this.playerResourcesTemp.dayCounter<=40?this.timeOfDay="Morning":this.playerResourcesTemp.dayCounter>=41&&this.playerResourcesTemp.dayCounter<79?this.timeOfDay="Afternoon":this.playerResourcesTemp.dayCounter>=79&&(this.timeOfDay="Evening")}calcCreditScore(){3===this.playerResourcesTemp.credit?this.creditScore="Great":2===this.playerResourcesTemp.credit?this.creditScore="Good":1===this.playerResourcesTemp.credit&&(this.creditScore="Terrible")}calcMoneyAfterPayday(){const e=this.playerResourcesTemp.money-this.workersPayCheck;e>0?this.displayAfterPayday="$"+Math.abs(e):e<0&&(this.displayAfterPayday="-$"+Math.abs(e))}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=i.Ib({type:e,selectors:[["app-stats-view"]],inputs:{playerResources:"playerResources"},decls:127,vars:49,consts:[[1,"stats-wrapper"],[1,"display-money"],["id","scrollbar",1,"stat-lvls"],[1,"quest-wrapper"],[1,"lvl-amount"],[1,"row"],[1,"stat-titles",3,"ngClass"],[1,"column"],[1,"lvl-title"],["class","column",4,"ngIf"],[4,"ngIf"]],template:function(e,t){1&e&&(i.Ub(0,"div",0),i.Ub(1,"p",1),i.Ac(2),i.Tb(),i.Ub(3,"div",2),i.Ub(4,"div",3),i.Ub(5,"p",4),i.Ac(6,"Current Quest"),i.Tb(),i.Ub(7,"p",4),i.Ac(8),i.Tb(),i.Ub(9,"p",4),i.Ac(10),i.Tb(),i.Tb(),i.Ub(11,"div",5),i.Ub(12,"h2",6),i.Ac(13,"Player's Levels"),i.Tb(),i.Ub(14,"div",7),i.Ub(15,"h3",8),i.Ac(16,"Chisel Level"),i.Tb(),i.Ub(17,"p",4),i.Ac(18),i.Tb(),i.Tb(),i.Ub(19,"div",7),i.Ub(20,"h3",8),i.Ac(21,"Barter Level"),i.Tb(),i.Ub(22,"p",4),i.Ac(23),i.Tb(),i.Tb(),i.Ub(24,"div",7),i.Ub(25,"h3",8),i.Ac(26,"Housing Level"),i.Tb(),i.Ub(27,"p",4),i.Ac(28),i.Tb(),i.Tb(),i.Ub(29,"div",7),i.Ub(30,"h3",8),i.Ac(31,"Stockpile Level"),i.Tb(),i.Ub(32,"p",4),i.Ac(33),i.Tb(),i.Tb(),i.Ub(34,"div",7),i.Ub(35,"h3",8),i.Ac(36,"Credit Rating"),i.Tb(),i.Ub(37,"p",4),i.Ac(38),i.Tb(),i.Tb(),i.Ub(39,"h2",6),i.Ac(40,"Worker Payments"),i.Tb(),i.Ub(41,"div",7),i.Ub(42,"h3",8),i.Ac(43,"$ Per Brick"),i.Tb(),i.Ub(44,"p",4),i.Ac(45),i.Tb(),i.Tb(),i.Ub(46,"div",7),i.Ub(47,"h3",8),i.Ac(48,"Owe Masons"),i.Tb(),i.Ub(49,"p",4),i.Ac(50),i.Tb(),i.Tb(),i.Ub(51,"div",7),i.Ub(52,"h3",8),i.Ac(53,"Owe Traders"),i.Tb(),i.Ub(54,"p",4),i.Ac(55),i.Tb(),i.Tb(),i.zc(56,O,5,1,"div",9),i.Ub(57,"div",7),i.Ub(58,"h3",8),i.Ac(59,"Owe Workers"),i.Tb(),i.Ub(60,"p",4),i.Ac(61),i.Tb(),i.Tb(),i.Ub(62,"div",7),i.Ub(63,"h3",8),i.Ac(64,"Est. Profits"),i.Tb(),i.Ub(65,"p",4),i.Ac(66),i.Tb(),i.Tb(),i.Ub(67,"h2",6),i.Ac(68,"Mason Workers"),i.Tb(),i.Ub(69,"div",7),i.Ub(70,"h3",8),i.Ac(71,"Hired Masons"),i.Tb(),i.Ub(72,"p",4),i.Ac(73),i.Tb(),i.Tb(),i.Ub(74,"div",7),i.Ub(75,"h3",8),i.Ac(76,"Masons Level"),i.Tb(),i.Ub(77,"p",4),i.Ac(78),i.Tb(),i.Tb(),i.Ub(79,"h2",6),i.Ac(80,"Trader Workers"),i.Tb(),i.Ub(81,"div",7),i.Ub(82,"h3",8),i.Ac(83,"Hired Traders"),i.Tb(),i.Ub(84,"p",4),i.Ac(85),i.Tb(),i.Tb(),i.Ub(86,"div",7),i.Ub(87,"h3",8),i.Ac(88,"Traders Level"),i.Tb(),i.Ub(89,"p",4),i.Ac(90),i.Tb(),i.Tb(),i.zc(91,V,23,7,"span",10),i.Ub(92,"h2",6),i.Ac(93,"Game Time"),i.Tb(),i.Ub(94,"div",7),i.Ub(95,"h3",8),i.Ac(96,"Time Of Day"),i.Tb(),i.Ub(97,"p",4),i.Ac(98),i.Tb(),i.Tb(),i.Ub(99,"div",7),i.Ub(100,"h3",8),i.Ac(101,"Days Past"),i.Tb(),i.Ub(102,"p",4),i.Ac(103),i.Tb(),i.Tb(),i.Ub(104,"h2",6),i.Ac(105,"Good To Know"),i.Tb(),i.Ub(106,"div",7),i.Ub(107,"h3",8),i.Ac(108,"Total Clicks"),i.Tb(),i.Ub(109,"p",4),i.Ac(110),i.Tb(),i.Tb(),i.Ub(111,"div",7),i.Ub(112,"h3",8),i.Ac(113,"Total Bricks"),i.Tb(),i.Ub(114,"p",4),i.Ac(115),i.Tb(),i.Tb(),i.Ub(116,"div",7),i.Ub(117,"h3",8),i.Ac(118,"Total Workers"),i.Tb(),i.Ub(119,"p",4),i.Ac(120),i.Tb(),i.Tb(),i.Ub(121,"div",7),i.Ub(122,"h3",8),i.Ac(123,"Total Money"),i.Tb(),i.Ub(124,"p",4),i.Ac(125),i.Tb(),i.Tb(),i.zc(126,D,16,3,"span",10),i.Tb(),i.Tb(),i.Tb()),2&e&&(i.Cb(2),i.Ec("Money: $",t.playerResourcesTemp.money," | Housing: ",t.playerResourcesTemp.totalWorkers,"/",t.playerResourcesTemp.housingLimit,""),i.Cb(1),i.yc("height",t.pageHeight,"px"),i.Cb(5),i.Bc(t.playerResourcesTemp.quests.questDesc),i.Cb(2),i.Cc("Reward: $",t.playerResourcesTemp.quests.questReward,""),i.Cb(2),i.lc("ngClass",i.oc(37,z,!0===t.optionsSelected.darkMode)),i.Cb(6),i.Bc(t.playerResourcesTemp.chiselLvl),i.Cb(5),i.Bc(t.playerResourcesTemp.barterLvl),i.Cb(5),i.Bc(t.playerResourcesTemp.housingLvl),i.Cb(5),i.Bc(t.playerResourcesTemp.stockpileLvl),i.Cb(5),i.Bc(t.creditScore),i.Cb(1),i.lc("ngClass",i.oc(39,z,!0===t.optionsSelected.darkMode)),i.Cb(6),i.Dc("$",t.baseCostPerBrick," - $",t.playerResourcesTemp.barterLvl+3+t.playerResourcesTemp.tradeWorkersLvl,""),i.Cb(5),i.Cc("$",t.totalMasonCost," a day"),i.Cb(5),i.Cc("$",t.totalTraderCost," a day"),i.Cb(1),i.lc("ngIf",t.playerResourcesTemp.gameLevel>=2),i.Cb(5),i.Cc("$",t.workersPayCheck," a day"),i.Cb(5),i.Cc("$",t.workersProfits,""),i.Cb(1),i.lc("ngClass",i.oc(41,z,!0===t.optionsSelected.darkMode)),i.Cb(6),i.Bc(t.playerResourcesTemp.stoneCuttersCount),i.Cb(5),i.Bc(t.playerResourcesTemp.stoneWorkerLvl),i.Cb(1),i.lc("ngClass",i.oc(43,z,!0===t.optionsSelected.darkMode)),i.Cb(6),i.Bc(t.playerResourcesTemp.tradeWorkersCount),i.Cb(5),i.Bc(t.playerResourcesTemp.tradeWorkersLvl),i.Cb(1),i.lc("ngIf",t.playerResourcesTemp.gameLevel>=2),i.Cb(1),i.lc("ngClass",i.oc(45,z,!0===t.optionsSelected.darkMode)),i.Cb(6),i.Bc(t.timeOfDay),i.Cb(5),i.Bc(t.playerResourcesTemp.daysPast),i.Cb(1),i.lc("ngClass",i.oc(47,z,!0===t.optionsSelected.darkMode)),i.Cb(6),i.Bc(t.playerResourcesTemp.totalClicks),i.Cb(5),i.Bc(t.playerResourcesTemp.totalBricks),i.Cb(5),i.Bc(t.playerResourcesTemp.totalWorkers),i.Cb(5),i.Cc("$",t.playerResourcesTemp.totalMoney,""),i.Cb(1),i.lc("ngIf",t.playerResourcesTemp.gameLevel>=2))},directives:[r.i,r.k],styles:['.column[_ngcontent-%COMP%]{width:45%;padding:7px;display:inline-block;margin-left:calc(4% - .7em)}.row[_ngcontent-%COMP%]:after{content:"";display:table;clear:both}.stats-wrapper[_ngcontent-%COMP%]{margin-top:2%}.stat-lvls[_ngcontent-%COMP%]{width:100%;overflow:auto;height:24em}.stat-titles[_ngcontent-%COMP%]{border-bottom:1px solid #000;padding:0;margin:0 calc(4% - .1em) calc(1% - .6em) 0}.lvl-amount[_ngcontent-%COMP%], .lvl-title[_ngcontent-%COMP%], .stat-titles[_ngcontent-%COMP%]{text-align:center}.lvl-title[_ngcontent-%COMP%]{padding:0;margin:calc(1% + .4em) 0 0}.display-money[_ngcontent-%COMP%]{font-weight:700;text-align:center}.title-dm[_ngcontent-%COMP%]{border-bottom:1px solid #fff}.quest-wrapper[_ngcontent-%COMP%]{border:1px solid;border-radius:5px;margin-bottom:3%}']}),e})();function H(e,t){if(1&e){const e=i.Vb();i.Ub(0,"button",7),i.cc("click",(function(t){return i.tc(e),i.gc().ShowVault()})),i.Ac(1,"Vault"),i.Tb()}}function F(e,t){if(1&e&&(i.Ub(0,"p",21),i.Ac(1,"Quest Completed!"),i.Tb()),2&e){const e=i.gc(2);i.yc("width",.9*e.playerResources.screenWidth,"px")("right",.9*e.playerResources.screenWidth/18,"px")}}const j=function(e){return{"title-dm":e}};function $(e,t){if(1&e){const e=i.Vb();i.Ub(0,"span",15),i.Ub(1,"div",16),i.Ub(2,"p",17),i.Ac(3),i.Tb(),i.zc(4,F,2,4,"p",18),i.Ub(5,"button",19),i.cc("click",(function(t){return i.tc(e),i.gc().displayUpgrades()})),i.Ac(6,"Close"),i.Tb(),i.Tb(),i.Ub(7,"app-upgrade-menu",20),i.cc("stoneWorkerReturn",(function(t){return i.tc(e),i.gc().stoneWorkerReturn(t)}))("tradeWorkerReturn",(function(t){return i.tc(e),i.gc().tradeWorkerReturn(t)}))("guardReturn",(function(t){return i.tc(e),i.gc().guardReturn(t)}))("playerResourcesReturn",(function(t){return i.tc(e),i.gc().playerResourcesReturn(t)})),i.Tb(),i.Tb()}if(2&e){const e=i.gc();i.Cb(1),i.lc("ngClass",i.oc(4,j,!0===e.optionsSelected.darkMode)),i.Cb(2),i.Bc(e.playerResources.currentChapter),i.Cb(1),i.lc("ngIf",e.quests.completed),i.Cb(3),i.lc("playerResources",e.playerResources)}}function N(e,t){if(1&e&&(i.Ub(0,"p",21),i.Ac(1,"Quest Completed!"),i.Tb()),2&e){const e=i.gc(2);i.yc("width",.9*e.playerResources.screenWidth,"px")("right",.9*e.playerResources.screenWidth/18,"px")}}const E=function(e,t){return{display:e,hide:t}};function Y(e,t){if(1&e&&(i.Ub(0,"p",36),i.Ac(1,"New Quest Availiable! Select The Stats Button \u{1f44c}"),i.Tb()),2&e){const e=i.gc(2);i.yc("width",.9*e.playerResources.screenWidth,"px")("right",.9*e.playerResources.screenWidth/18,"px"),i.lc("ngClass",i.pc(5,E,!e.isGuardMoneyView,e.isGuardMoneyView))}}function Q(e,t){if(1&e&&(i.Ub(0,"p",21),i.Ac(1,"Bandits Are Attacking Your Vault!"),i.Tb()),2&e){const e=i.gc(2);i.yc("width",.9*e.playerResources.screenWidth,"px")("right",.9*e.playerResources.screenWidth/18,"px")}}function J(e,t){if(1&e){const e=i.Vb();i.Ub(0,"span"),i.Ub(1,"app-guard-money-view",31),i.cc("playerResourcesReturn",(function(t){return i.tc(e),i.gc(2).playerResourcesReturn(t)})),i.Tb(),i.Tb()}if(2&e){const e=i.gc(2);i.Cb(1),i.lc("ngClass",i.pc(3,E,e.isGuardMoneyView,!e.isGuardMoneyView))("playerResources",e.playerResources)("isGuardMoneyView",e.isGuardMoneyView)}}function X(e,t){if(1&e){const e=i.Vb();i.Ub(0,"button",35),i.cc("keydown",(function(t){return i.tc(e),i.gc(2).unfocusAllButtons(t)}))("click",(function(t){return i.tc(e),i.gc(2).chisleStone()})),i.Ac(1,"Chisel"),i.Tb()}}function K(e,t){if(1&e){const e=i.Vb();i.Ub(0,"button",35),i.cc("keydown",(function(t){return i.tc(e),i.gc(2).unfocusAllButtons(t)}))("click",(function(t){return i.tc(e),i.gc(2).sellStone()})),i.Ac(1,"Sell"),i.Tb()}}const Z=function(e){return{color:e}};function ee(e,t){if(1&e){const e=i.Vb();i.Ub(0,"span",22),i.Ub(1,"p",23),i.Ac(2),i.Pb(3,"img",24),i.Tb(),i.Ub(4,"p",25),i.Ac(5),i.Pb(6,"img",26),i.Tb(),i.Ub(7,"p",27),i.Pb(8,"img",28),i.Tb(),i.Ub(9,"p",29),i.Ac(10),i.Tb(),i.zc(11,N,2,4,"p",18),i.zc(12,Y,2,8,"p",30),i.zc(13,Q,2,4,"p",18),i.Ub(14,"span"),i.Ub(15,"app-stone-cutter-view",31),i.cc("playerResourcesReturn",(function(t){return i.tc(e),i.gc().playerResourcesReturn(t)})),i.Tb(),i.Tb(),i.zc(16,J,2,6,"span",32),i.Ub(17,"div",33),i.zc(18,X,2,0,"button",34),i.zc(19,K,2,0,"button",34),i.Ub(20,"button",35),i.cc("keydown",(function(t){return i.tc(e),i.gc().unfocusAllButtons(t)}))("click",(function(t){return i.tc(e),i.gc().displayUpgrades()})),i.Ac(21,"Upgrade"),i.Tb(),i.Ub(22,"button",35),i.cc("keydown",(function(t){return i.tc(e),i.gc().unfocusAllButtons(t)}))("click",(function(t){return i.tc(e),i.gc().displayStats()})),i.Ac(23,"Stats"),i.Tb(),i.Tb(),i.Tb()}if(2&e){const e=i.gc();i.Cb(1),i.lc("ngClass",i.pc(20,E,!e.isGuardMoneyView,e.isGuardMoneyView)),i.Cb(1),i.Dc("",e.playerResources.bricks,"/",e.playerResources.stockpile," "),i.Cb(1),i.mc("src",e.stoneIconPath,i.uc),i.Cb(1),i.lc("ngClass",i.pc(23,E,e.isGuardMoneyView,!e.isGuardMoneyView)),i.Cb(1),i.Bc(e.playerResources.guardCount),i.Cb(1),i.mc("src",e.guardIconPath,i.uc),i.Cb(1),i.lc("ngClass",i.pc(26,E,e.playerResources.isBanditWaveStarted,!e.playerResources.isBanditWaveStarted)),i.Cb(1),i.mc("src",e.banditIconPath,i.uc),i.Cb(1),i.lc("ngStyle",i.oc(29,Z,e.money<0?"red":"white")),i.Cb(1),i.Cc("$",e.money,""),i.Cb(1),i.lc("ngIf",e.quests.completed),i.Cb(1),i.lc("ngIf",e.isQuestAvailiable&&13!==e.quests.questLvl),i.Cb(1),i.lc("ngIf",e.playerResources.banditWaveCounter>255),i.Cb(2),i.lc("ngClass",i.pc(31,E,!e.isGuardMoneyView,e.isGuardMoneyView))("playerResources",e.playerResources)("isGuardMoneyView",e.isGuardMoneyView),i.Cb(1),i.lc("ngIf",e.playerResources.gameLevel>=2),i.Cb(2),i.lc("ngIf",!e.isGuardMoneyView),i.Cb(1),i.lc("ngIf",!e.isGuardMoneyView)}}function te(e,t){if(1&e){const e=i.Vb();i.Ub(0,"span",37),i.Ub(1,"div",38),i.Ub(2,"p",17),i.Ac(3),i.Tb(),i.Ub(4,"button",39),i.cc("click",(function(t){return i.tc(e),i.gc().displayStats()})),i.Ac(5,"Close"),i.Tb(),i.Tb(),i.Pb(6,"app-stats-view",40),i.Tb()}if(2&e){const e=i.gc();i.Cb(1),i.lc("ngClass",i.oc(3,j,!0===e.optionsSelected.darkMode)),i.Cb(2),i.Bc(e.playerResources.currentChapter),i.Cb(3),i.lc("playerResources",e.playerResources)}}const se=function(e){return{"info-dm":e}};function re(e,t){if(1&e){const e=i.Vb();i.Ub(0,"div",41),i.Ub(1,"div",42),i.Ub(2,"mat-toolbar",43),i.Ub(3,"div",44),i.Ub(4,"p",45),i.Ac(5,"New Stuff!"),i.Tb(),i.Tb(),i.Tb(),i.Ub(6,"span"),i.Ub(7,"p",46),i.Ac(8,"There is some new content here! Would you like to update now? It will only take a second \u{1f44d}"),i.Tb(),i.Ub(9,"p",46),i.Ac(10,"If you're in the middle of a game, no worries, you can update later if you want. Exit the game and restart the app and then you'll be up to date."),i.Tb(),i.Ub(11,"button",47),i.cc("click",(function(t){return i.tc(e),i.gc().getNewUpdatesFromServer()})),i.Ac(12,"It's Ok To Update Now"),i.Tb(),i.Ub(13,"button",47),i.cc("click",(function(t){return i.tc(e),i.gc().getUpdateLater()})),i.Ac(14,"I Need A Minute Here.."),i.Tb(),i.Tb(),i.Tb(),i.Tb()}if(2&e){const e=i.gc();i.Cb(1),i.lc("ngClass",i.oc(1,se,!0===e.optionsSelected.darkMode))}}function ae(e,t){1&e&&(i.Ub(0,"p",45),i.Ac(1,"Tap Anywhere To Continue"),i.Tb())}function ie(e,t){1&e&&(i.Ub(0,"p",45),i.Ac(1,"Welcome!"),i.Tb())}function oe(e,t){if(1&e){const e=i.Vb();i.Ub(0,"span"),i.Ub(1,"p",46),i.Ac(2,"Welcome To Mason!"),i.Tb(),i.Ub(3,"p",46),i.Ac(4,"The game where you make bricks and attempt to rule the world!"),i.Tb(),i.Ub(5,"p",46),i.Ac(6,"You appear to be new, would you like to learn how to play?"),i.Tb(),i.Ub(7,"button",47),i.cc("click",(function(t){return i.tc(e),i.gc(2).beginTutorial()})),i.Ac(8,"Yes Please!"),i.Tb(),i.Ub(9,"button",47),i.cc("click",(function(t){return i.tc(e),i.gc(2).tutorialDone()})),i.Ac(10,"I know what I'm doing"),i.Tb(),i.Tb()}}function ne(e,t){1&e&&(i.Ub(0,"p",46),i.Ac(1,"First off I want to say thank you for playing! If you're here, then I know you're going to like this \u{1f44d}"),i.Tb())}function ce(e,t){1&e&&(i.Ub(0,"p",46),i.Ac(1,"The first thing you want to do is to Chisel rocks into bricks. This will be your source of income. Select the 'Chisel' button to start to shape your bicks."),i.Tb())}function le(e,t){1&e&&(i.Ub(0,"p",46),i.Ac(1,"When you have one or more bricks, you can sell them. Click the 'Sell' button to exchange your bricks for money."),i.Tb())}function he(e,t){1&e&&(i.Ub(0,"p",46),i.Ac(1,"When you have some money on hand, you can upgrade your tools or hire some workers to help you make and sell bricks. To see the upgrades availiable, Select the 'Upgrade' button."),i.Tb())}function ue(e,t){1&e&&(i.Ub(0,"p",46),i.Ac(1,"Keep in mind, workers will want to be paid based on their levels. A worker's pay check begins at $2 a day and will increase $2 per each level."),i.Tb())}function de(e,t){1&e&&(i.Ub(0,"p",46),i.Ac(1,"The bartering skill is useful to sell more bricks at a time for more money. Traders you hire will get better at bartering as you do."),i.Tb())}function pe(e,t){1&e&&(i.Ub(0,"p",46),i.Ac(1,"Complete quests for bonus cash. You can check your current quest by clicking the 'Stats' button."),i.Tb())}function ye(e,t){1&e&&(i.Ub(0,"p",46),i.Ac(1,"When new areas are unlocked, you can go to them by clicking on the 'Areas' button at the top right of the screen."),i.Tb())}function me(e,t){1&e&&(i.Ub(0,"p",46),i.Ac(1,"That should get you started. As your riches grow, so will the challenges that lie ahead. Good luck!"),i.Tb())}function be(e,t){if(1&e){const e=i.Vb();i.Ub(0,"div",48),i.cc("click",(function(t){return i.tc(e),i.gc().closeNewPlayerPrompt()})),i.Ub(1,"div",42),i.Ub(2,"mat-toolbar",43),i.Ub(3,"div",44),i.zc(4,ae,2,0,"p",49),i.zc(5,ie,2,0,"p",49),i.Tb(),i.Tb(),i.zc(6,oe,11,0,"span",32),i.zc(7,ne,2,0,"p",50),i.zc(8,ce,2,0,"p",50),i.zc(9,le,2,0,"p",50),i.zc(10,he,2,0,"p",50),i.zc(11,ue,2,0,"p",50),i.zc(12,de,2,0,"p",50),i.zc(13,pe,2,0,"p",50),i.zc(14,ye,2,0,"p",50),i.zc(15,me,2,0,"p",50),i.Tb(),i.Tb()}if(2&e){const e=i.gc();i.Cb(1),i.lc("ngClass",i.oc(13,se,!0===e.optionsSelected.darkMode)),i.Cb(3),i.lc("ngIf",e.tutorialStep<9),i.Cb(1),i.lc("ngIf",9===e.tutorialStep),i.Cb(1),i.lc("ngIf",10===e.tutorialStep),i.Cb(1),i.lc("ngIf",9===e.tutorialStep),i.Cb(1),i.lc("ngIf",8===e.tutorialStep),i.Cb(1),i.lc("ngIf",7===e.tutorialStep),i.Cb(1),i.lc("ngIf",6===e.tutorialStep),i.Cb(1),i.lc("ngIf",5===e.tutorialStep),i.Cb(1),i.lc("ngIf",4===e.tutorialStep),i.Cb(1),i.lc("ngIf",3===e.tutorialStep),i.Cb(1),i.lc("ngIf",2===e.tutorialStep),i.Cb(1),i.lc("ngIf",1===e.tutorialStep)}}function ge(e,t){1&e&&(i.Ub(0,"p",45),i.Ac(1,"Tap Anywhere To Continue"),i.Tb())}function ve(e,t){1&e&&(i.Ub(0,"p",45),i.Ac(1,"Congratulations!"),i.Tb())}function ke(e,t){if(1&e){const e=i.Vb();i.Ub(0,"span"),i.Ub(1,"p",46),i.Ac(2,"You have proven that you can run a profitable business \u{1f44d}"),i.Tb(),i.Ub(3,"p",46),i.Ac(4,"With more money comes more problems unfortunately... Would you like to know what's coming next?"),i.Tb(),i.Ub(5,"button",51),i.cc("click",(function(t){return i.tc(e),i.gc(2).beginVaultTutorial()})),i.Ac(6,"Yes Please!"),i.Tb(),i.Ub(7,"button",51),i.cc("click",(function(t){return i.tc(e),i.gc(2).vaultTutorialDone()})),i.Ac(8,"I know what I'm doing"),i.Tb(),i.Tb()}if(2&e){const e=i.gc(2);i.Cb(5),i.lc("disabled",e.newLevelCounter<=2),i.Cb(2),i.lc("disabled",e.newLevelCounter<=2)}}function Te(e,t){1&e&&(i.Ub(0,"p",46),i.Ac(1,"First off, I want you to know that There's no need to panic. But your vault is under ATTACK!"),i.Tb())}function Ce(e,t){1&e&&(i.Ub(0,"p",46),i.Ac(1,"Bandits have been spotted coming this way! It looks like your wealth has attracted their attention..."),i.Tb())}function Re(e,t){1&e&&(i.Ub(0,"p",46),i.Ac(1,"Don't be surprised if they keep coming back. You will have to hire some help to keep the bandits away."),i.Tb())}function fe(e,t){1&e&&(i.Ub(0,"p",46),i.Ac(1,"You can hire guards in your Upgrades now. You can also upgrade their weapons and armor as well."),i.Tb())}function we(e,t){1&e&&(i.Ub(0,"p",46),i.Ac(1,"Luckily for you, you have three guards on hand! You'll just have to tell them where to guard. More on that later."),i.Tb())}function qe(e,t){1&e&&(i.Ub(0,"p",46),i.Ac(1,"Keep in mind, if the bandits take too much of your money and you can't pay for your workers, you may have to fire them. That's now an option in the Upgrades. Don't let your funds dip below $0."),i.Tb())}function We(e,t){1&e&&(i.Ub(0,"p",46),i.Ac(1,"Now let's go to your vault. Tap on the Areas button at the top right of the screen and select the Vault."),i.Tb())}function Se(e,t){if(1&e){const e=i.Vb();i.Ub(0,"div",48),i.cc("click",(function(t){return i.tc(e),i.gc().closeNewPlayerVaultPrompt()})),i.Ub(1,"div",42),i.Ub(2,"mat-toolbar",43),i.Ub(3,"div",44),i.zc(4,ge,2,0,"p",49),i.zc(5,ve,2,0,"p",49),i.Tb(),i.Tb(),i.zc(6,ke,9,2,"span",32),i.zc(7,Te,2,0,"p",50),i.zc(8,Ce,2,0,"p",50),i.zc(9,Re,2,0,"p",50),i.zc(10,fe,2,0,"p",50),i.zc(11,we,2,0,"p",50),i.zc(12,qe,2,0,"p",50),i.zc(13,We,2,0,"p",50),i.Tb(),i.Tb()}if(2&e){const e=i.gc();i.Cb(1),i.lc("ngClass",i.oc(11,se,!0===e.optionsSelected.darkMode)),i.Cb(3),i.lc("ngIf",e.vaultTutorialStep<8),i.Cb(1),i.lc("ngIf",8===e.vaultTutorialStep),i.Cb(1),i.lc("ngIf",8===e.vaultTutorialStep),i.Cb(1),i.lc("ngIf",7===e.vaultTutorialStep),i.Cb(1),i.lc("ngIf",6===e.vaultTutorialStep),i.Cb(1),i.lc("ngIf",5===e.vaultTutorialStep),i.Cb(1),i.lc("ngIf",4===e.vaultTutorialStep),i.Cb(1),i.lc("ngIf",3===e.vaultTutorialStep),i.Cb(1),i.lc("ngIf",2===e.vaultTutorialStep),i.Cb(1),i.lc("ngIf",1===e.vaultTutorialStep)}}function Le(e,t){1&e&&(i.Ub(0,"p",45),i.Ac(1,"Tap Anywhere To Continue"),i.Tb())}function Me(e,t){1&e&&(i.Ub(0,"span"),i.Ub(1,"p",46),i.Ac(2,"Good deal, you made it!"),i.Tb(),i.Ub(3,"p",46),i.Ac(4,"Here is your vault. This is where all your money is stored. Now let's put your guards to good use."),i.Tb(),i.Tb())}function xe(e,t){1&e&&(i.Ub(0,"p",46),i.Ac(1,"To place a guard on the map, tap the screen in the place you'd like to put it."),i.Tb())}function Ue(e,t){1&e&&(i.Ub(0,"p",46),i.Ac(1,"You can't put a guard on top of the vault, obviously."),i.Tb())}function Ae(e,t){1&e&&(i.Ub(0,"p",46),i.Ac(1,"The Guards can see very well in front of them but it is possible for bandits to sneak around them. Place your guards in front of the bandits. Not behind them."),i.Tb())}function Pe(e,t){1&e&&(i.Ub(0,"p",46),i.Ac(1,"Admittedly, your guards don't look as equiped as the bandits coming this way.. Use them wisely!"),i.Tb())}function Ie(e,t){1&e&&(i.Ub(0,"p",46),i.Ac(1,"When this battle is over, I would recommend upgrading your guards and perhaps hire more of them."),i.Tb())}function Ge(e,t){1&e&&(i.Ub(0,"p",46),i.Ac(1,"The bandits will be here any second, get ready!"),i.Tb())}function Be(e,t){if(1&e){const e=i.Vb();i.Ub(0,"div",48),i.cc("click",(function(t){return i.tc(e),i.gc().closeNewPlayerVaultSecPrompt()})),i.Ub(1,"div",42),i.Ub(2,"mat-toolbar",43),i.Ub(3,"div",44),i.zc(4,Le,2,0,"p",49),i.Tb(),i.Tb(),i.zc(5,Me,5,0,"span",32),i.zc(6,xe,2,0,"p",50),i.zc(7,Ue,2,0,"p",50),i.zc(8,Ae,2,0,"p",50),i.zc(9,Pe,2,0,"p",50),i.zc(10,Ie,2,0,"p",50),i.zc(11,Ge,2,0,"p",50),i.Tb(),i.Tb()}if(2&e){const e=i.gc();i.Cb(1),i.lc("ngClass",i.oc(9,se,!0===e.optionsSelected.darkMode)),i.Cb(3),i.lc("ngIf",e.vaultSecTutorialStep<=7),i.Cb(1),i.lc("ngIf",7===e.vaultSecTutorialStep),i.Cb(1),i.lc("ngIf",6===e.vaultSecTutorialStep),i.Cb(1),i.lc("ngIf",5===e.vaultSecTutorialStep),i.Cb(1),i.lc("ngIf",4===e.vaultSecTutorialStep),i.Cb(1),i.lc("ngIf",3===e.vaultSecTutorialStep),i.Cb(1),i.lc("ngIf",2===e.vaultSecTutorialStep),i.Cb(1),i.lc("ngIf",1===e.vaultSecTutorialStep)}}function Oe(e,t){if(1&e){const e=i.Vb();i.Ub(0,"div",41),i.Ub(1,"div",42),i.Ub(2,"mat-toolbar",43),i.Ub(3,"div",44),i.Ub(4,"p",45),i.Ac(5,"It's All Over..."),i.Tb(),i.Tb(),i.Tb(),i.Ub(6,"span"),i.Ub(7,"p",46),i.Ac(8,"I'm sorry but you've gone out of business..."),i.Tb(),i.Ub(9,"p",46),i.Ac(10,"Would you like to load your last save or start a new game?"),i.Tb(),i.Ub(11,"button",51),i.cc("click",(function(t){return i.tc(e),i.gc().loadLastSave()})),i.Ac(12,"Load Last Save"),i.Tb(),i.Ub(13,"button",51),i.cc("click",(function(t){return i.tc(e),i.gc().restartGame()})),i.Ac(14,"Start Over"),i.Tb(),i.Tb(),i.Tb(),i.Tb()}if(2&e){const e=i.gc();i.Cb(1),i.lc("ngClass",i.oc(3,se,!0===e.optionsSelected.darkMode)),i.Cb(10),i.lc("disabled",e.endGameCounter<=2),i.Cb(2),i.lc("disabled",e.endGameCounter<=2)}}const ze=[{path:"",component:(()=>{class e{constructor(e,t){this.swUpdate=e,this.ref=t,this.tradeWorkerGroup=[],this.stoneWorkerGroup=[],this.guardGroup=[],this.banditGroup=[],this.clicks=0,this.bricks=0,this.money=0,this.chiselLvl=0,this.barterLvl=0,this.stoneWorkerLvl=0,this.tradeWorkerLvl=0,this.guardWeaponLvl=0,this.guardArmorLvl=0,this.guardSpeedLvl=0,this.dayCounter=0,this.daysPast=0,this.version=.5,this.totalClicks=0,this.totalBricks=0,this.totalMoney=0,this.newPlayer=!0,this.newPlayerVault=!0,this.tutorialStep=10,this.vaultTutorialStep=8,this.vaultSecTutorialStep=7,this.tutorialStart=!1,this.isQuestAvailiable=!1,this.gameLevel=1,this.banditWave=0,this.tradeWorkersCount=0,this.stoneCuttersCount=0,this.guardCount=0,this.totalGuards=0,this.tutorialGuards=0,this.endGameCounter=0,this.newLevelCounter=0,this.stoneIconPath="assets/images/rock4.png",this.guardIconPath="assets/images/guard.png",this.banditIconPath="assets/images/bandit.png",this.chiselSoundPath="assets/sounds/chisel.wav",this.sellSoundPath="assets/sounds/sell.wav",this.chiselSound=new Audio,this.sellSound=new Audio,this.isGuardMoneyView=!1,this.quests={questLvl:0,questDesc:"",questReward:0,completed:!1,quest:{complete:!1,chiselLvl:0,barterLvl:0,masons:0,masonLvl:0,traders:0,traderLvl:0}},this.sky={sun:{x:0,y:0},moon:{x:0,y:0}},this.housingLimit=8,this.housingLvl=0,this.totalWorkers=0,this.stockpileLvl=0,this.stockpile=10,this.screenWidth=0,this.screenChange=!1,this.currentChapter="Humble Beginnings",this.banditWaveCounter=0,this.banditSpawnCount=0,this.isBanditWaveStarted=!1,this.moneyTaken=0,this.credit=3,this.banditsStopped=0,this.playerResources={chiselLvl:this.chiselLvl,money:this.money,bricks:this.bricks,clicks:this.clicks,barterLvl:this.barterLvl,tradeWorkers:this.tradeWorkerGroup,tradeWorkersCount:this.tradeWorkersCount,tradeWorkersLvl:this.tradeWorkerLvl,stoneWorkers:this.stoneWorkerGroup,stoneCuttersCount:this.stoneCuttersCount,stoneWorkerLvl:this.stoneWorkerLvl,guards:this.guardGroup,guardCount:this.guardCount,guardWeaponLvl:this.guardWeaponLvl,guardArmorLvl:this.guardArmorLvl,guardSpeedLvl:this.guardSpeedLvl,dayCounter:this.dayCounter,daysPast:this.daysPast,version:this.version,totalClicks:this.totalClicks,totalBricks:this.totalBricks,totalMoney:this.totalMoney,newPlayer:this.newPlayer,quests:this.quests,sky:this.sky,housingLimit:this.housingLimit,housingLvl:this.housingLvl,totalWorkers:this.totalWorkers,stockpile:this.stockpile,stockpileLvl:this.stockpileLvl,screenWidth:this.screenWidth,screenChange:this.screenChange,gameLevel:this.gameLevel,currentChapter:this.currentChapter,newPlayerVault:this.newPlayerVault,banditWave:this.banditWave,bandits:this.banditGroup,banditWaveCounter:this.banditWaveCounter,banditSpawnCount:this.banditSpawnCount,isBanditWaveStarted:this.isBanditWaveStarted,moneyTaken:this.moneyTaken,credit:this.credit,banditsStopped:this.banditsStopped,totalGuards:this.totalGuards,tutorialGuards:this.tutorialGuards},this.gameUpdateWarning=!1,this.isUpgradeDisplayed=!1,this.isStatsDisplayed=!1,this.gameOver=!1,this.tradeWorkerObj={speed:0,frequency:Math.floor(5*Math.random())+1,x:0,y:0},this.optionsSelected={darkMode:!0,soundsOn:!0}}ngOnInit(){if(this.swUpdate.isEnabled&&(this.updateWatch=this.swUpdate.available.subscribe(()=>{this.gameUpdateWarning=!0})),this.chiselSound.src=this.chiselSoundPath,this.chiselSound.load(),this.sellSound.src=this.sellSoundPath,this.chiselSound.load(),localStorage.length>0&&localStorage.getItem("mason_options")){const e=JSON.parse(localStorage.getItem("mason_options"));this.optionsSelected={darkMode:e.darkMode,soundsOn:e.soundsOn};const t=document.getElementsByTagName("body");this.optionsSelected.darkMode?t[0].classList.add("darkMode"):t[0].classList.remove("darkMode")}else{document.getElementsByTagName("body")[0].classList.add("darkMode");const e=JSON.stringify(this.optionsSelected);localStorage.setItem("mason_options",e)}if(localStorage.length>0&&localStorage.getItem("mason_data")){const e=JSON.parse(localStorage.getItem("mason_data"));this.playerResources={chiselLvl:e.chiselLvl?e.chiselLvl:0,money:e.money?e.money:0,bricks:e.bricks?e.bricks:0,clicks:e.clicks?e.clicks:0,barterLvl:e.barterLvl?e.barterLvl:0,tradeWorkers:e.tradeWorkers?e.tradeWorkers:[],tradeWorkersCount:e.tradeWorkersCount?e.tradeWorkersCount:0,tradeWorkersLvl:e.tradeWorkersLvl?e.tradeWorkersLvl:0,stoneWorkers:e.stoneWorkers?e.stoneWorkers:[],stoneCuttersCount:e.stoneCuttersCount?e.stoneCuttersCount:0,stoneWorkerLvl:e.stoneWorkerLvl?e.stoneWorkerLvl:0,guards:e.guards?e.guards:[],guardCount:e.guardCount?e.guardCount:0,guardWeaponLvl:e.guardWeaponLvl?e.guardWeaponLvl:0,guardArmorLvl:e.guardArmorLvl?e.guardArmorLvl:0,guardSpeedLvl:e.guardSpeedLvl?e.guardSpeedLvl:0,dayCounter:e.dayCounter?e.dayCounter:0,daysPast:e.daysPast?e.daysPast:0,version:e.version,totalClicks:e.totalClicks?e.totalClicks:0,totalBricks:e.totalBricks?e.totalBricks:0,totalMoney:e.totalMoney?e.totalMoney:0,newPlayer:void 0===e.newPlayer,quests:void 0===e.quests?this.quests:e.quests,sky:void 0===e.sky?this.sky:e.sky,housingLimit:void 0===e.housingLimit?this.housingLimit:e.housingLimit,housingLvl:void 0===e.housingLvl?this.housingLvl:e.housingLvl,totalWorkers:void 0===e.totalWorkers?this.totalWorkers:e.totalWorkers,stockpile:void 0===e.stockpile?this.stockpile:e.stockpile,stockpileLvl:void 0===e.stockpileLvl?this.stockpileLvl:e.stockpileLvl,screenWidth:void 0===e.screenWidth?this.screenWidth:e.screenWidth,screenChange:void 0===e.screenChange?this.screenChange:e.screenChange,gameLevel:void 0===e.gameLevel?this.gameLevel:e.gameLevel,currentChapter:void 0===e.currentChapter?this.currentChapter:e.currentChapter,newPlayerVault:void 0===e.newPlayerVault?this.newPlayerVault:e.newPlayerVault,banditWave:void 0===e.banditWave?this.banditWave:e.banditWave,bandits:e.bandits?e.bandits:[],banditWaveCounter:e.banditWaveCounter?e.banditWaveCounter:0,banditSpawnCount:e.banditSpawnCount?e.banditSpawnCount:0,isBanditWaveStarted:!!e.isBanditWaveStarted&&e.isBanditWaveStarted,moneyTaken:e.moneyTaken?e.moneyTaken:0,credit:e.credit?e.credit:3,banditsStopped:e.banditsStopped?e.banditsStopped:0,totalGuards:e.totalGuards?e.totalGuards:0,tutorialGuards:e.tutorialGuards?e.tutorialGuards:0},this.getScreenWidth(),this.chiselLvl=e.chiselLvl?e.chiselLvl:0,this.money=e.money?e.money:0,this.bricks=e.bricks?e.bricks:0,this.clicks=e.clicks?e.clicks:0,this.barterLvl=e.barterLvl?e.barterLvl:0,this.tradeWorkerGroup=e.tradeWorkers?e.tradeWorkers:[],this.tradeWorkersCount=e.tradeWorkersCount?e.tradeWorkersCount:0,this.tradeWorkerLvl=e.tradeWorkersLvl?e.tradeWorkersLvl:0,this.stoneWorkerGroup=e.stoneWorkers?e.stoneWorkers:[],this.stoneCuttersCount=e.stoneCuttersCount?e.stoneCuttersCount:0,this.stoneWorkerLvl=e.stoneWorkerLvl?e.stoneWorkerLvl:0,this.guardGroup=e.guards?e.guards:[],this.guardCount=e.guardCount?e.guardCount:0,this.guardWeaponLvl=e.guardWeaponLvl?e.guardWeaponLvl:0,this.guardArmorLvl=e.guardArmorLvl?e.guardArmorLvl:0,this.guardSpeedLvl=e.guardSpeedLvl?e.guardSpeedLvl:0,this.dayCounter=e.dayCounter?e.dayCounter:0,this.daysPast=e.daysPast?e.daysPast:0,this.version=e.version,this.totalClicks=e.totalClicks?e.totalClicks:0,this.totalBricks=e.totalBricks?e.totalBricks:0,this.totalMoney=e.totalMoney?e.totalMoney:0,this.newPlayer=void 0===e.newPlayer,this.quests=void 0===e.quests?this.quests:e.quests,this.sky=void 0===e.sky?this.sky:e.sky,this.housingLimit=void 0===e.housingLimit?this.housingLimit:e.housingLimit,this.housingLvl=void 0===e.housingLvl?this.housingLvl:e.housingLvl,this.totalWorkers=void 0===e.totalWorkers?this.totalWorkers:e.totalWorkers,this.stockpile=void 0===e.stockpile?this.stockpile:e.stockpile,this.stockpileLvl=void 0===e.stockpileLvl?this.stockpileLvl:e.stockpileLvl,this.screenWidth=void 0===e.screenWidth?this.screenWidth:e.screenWidth,this.screenChange=void 0===e.screenChange?this.screenChange:e.screenChange,this.gameLevel=void 0===e.gameLevel?this.gameLevel:e.gameLevel,this.currentChapter=void 0===e.currentChapter?this.currentChapter:e.currentChapter,this.newPlayerVault=void 0===e.newPlayerVault?this.newPlayerVault:e.newPlayerVault,this.banditWave=void 0===e.banditWave?this.banditWave:e.banditWave,this.banditGroup=e.bandits?e.bandits:[],this.banditWaveCounter=e.banditWaveCounter?e.banditWaveCounter:0,this.banditSpawnCount=e.banditSpawnCount?e.banditSpawnCount:0,this.isBanditWaveStarted=!!e.isBanditWaveStarted&&e.isBanditWaveStarted,this.moneyTaken=e.moneyTaken?e.moneyTaken:0,this.credit=e.credit?e.credit:0,this.banditsStopped=e.banditsStopped?e.banditsStopped:0,this.totalGuards=e.totalGuards?e.totalGuards:0,this.tutorialGuards=e.tutorialGuards?e.tutorialGuards:0}}chisleStone(){this.playerResources.bricks<this.playerResources.stockpile&&(this.optionsSelected.soundsOn&&this.chiselSound.play(),this.isQuestAvailiable=!1,this.clicks+=1,this.totalClicks+=1,this.playerResources={chiselLvl:this.chiselLvl,money:this.money,bricks:this.bricks,clicks:this.clicks,barterLvl:this.barterLvl,tradeWorkers:this.tradeWorkerGroup,tradeWorkersCount:this.tradeWorkersCount,tradeWorkersLvl:this.tradeWorkerLvl,stoneWorkers:this.stoneWorkerGroup,stoneCuttersCount:this.stoneCuttersCount,stoneWorkerLvl:this.stoneWorkerLvl,guards:this.guardGroup,guardCount:this.guardCount,guardWeaponLvl:this.guardWeaponLvl,guardArmorLvl:this.guardArmorLvl,guardSpeedLvl:this.guardSpeedLvl,dayCounter:this.dayCounter,daysPast:this.daysPast,version:this.version,totalClicks:this.totalClicks,totalBricks:this.totalBricks,totalMoney:this.totalMoney,newPlayer:this.newPlayer,quests:this.quests,sky:this.sky,housingLimit:this.housingLimit,housingLvl:this.housingLvl,totalWorkers:this.totalWorkers,stockpile:this.stockpile,stockpileLvl:this.stockpileLvl,screenWidth:this.screenWidth,screenChange:this.screenChange,gameLevel:this.gameLevel,currentChapter:this.currentChapter,newPlayerVault:this.newPlayerVault,banditWave:this.banditWave,bandits:this.banditGroup,banditWaveCounter:this.banditWaveCounter,banditSpawnCount:this.banditSpawnCount,isBanditWaveStarted:this.isBanditWaveStarted,moneyTaken:this.moneyTaken,credit:this.credit,banditsStopped:this.banditsStopped,totalGuards:this.totalGuards,tutorialGuards:this.tutorialGuards},this.ref.markForCheck())}sellStone(){let e=Math.floor(Math.random()*(this.barterLvl+1))+1;if(e>=this.bricks&&(e=this.bricks),this.bricks>0){const t=(Math.floor(Math.random()*(this.barterLvl+3+this.playerResources.tradeWorkersLvl))+(1+this.barterLvl+this.playerResources.tradeWorkersLvl))*e;this.money+=t,this.totalMoney+=t,this.bricks-=e,this.totalClicks+=1,this.optionsSelected.soundsOn&&this.sellSound.play()}else this.bricks<=0&&(this.bricks=0);this.playerResources.totalClicks=this.totalClicks,this.playerResources.totalMoney=this.totalMoney,this.playerResources.money=this.money,this.playerResources.bricks=this.bricks,this.ref.markForCheck()}playerResourcesReturn(e){if(this.playerResources=e,this.clicks=e.clicks,this.money=e.money,this.totalMoney=e.totalMoney,this.bricks=e.bricks,this.chiselLvl=e.chiselLvl,this.tradeWorkerLvl=e.tradeWorkersLvl,this.tradeWorkersCount=e.tradeWorkersCount,this.stoneWorkerLvl=e.stoneWorkerLvl,this.stoneCuttersCount=e.stoneCuttersCount,this.barterLvl=e.barterLvl,this.dayCounter=e.dayCounter,this.daysPast=e.daysPast,this.totalBricks=e.totalBricks,this.newPlayer=e.newPlayer,this.sky=e.sky,this.housingLimit=e.housingLimit,this.housingLvl=e.housingLvl,this.totalWorkers=e.totalWorkers,this.stockpile=e.stockpile,this.stockpileLvl=e.stockpileLvl,this.screenWidth=e.screenWidth,this.screenChange=e.screenChange,this.gameLevel=e.gameLevel,this.currentChapter=e.currentChapter,this.newPlayerVault=e.newPlayerVault,this.banditWave=e.banditWave,this.guardWeaponLvl=e.guardWeaponLvl,this.guardArmorLvl=e.guardArmorLvl,this.guardSpeedLvl=e.guardSpeedLvl,this.guardCount=e.guardCount,this.banditWaveCounter=e.banditWaveCounter,this.banditSpawnCount=e.banditSpawnCount,this.isBanditWaveStarted=e.isBanditWaveStarted,this.moneyTaken=e.moneyTaken,this.credit=e.credit,this.banditsStopped=e.banditsStopped,this.totalGuards=e.totalGuards,this.tutorialGuards=e.tutorialGuards,this.setQuests(),0===this.playerResources.credit){this.gameOver=!0;const e=setInterval(()=>{this.endGameCounter++,this.endGameCounter>=2&&(this.endGameCounter=0,clearInterval(e))},1e3)}this.ref.markForCheck()}stoneWorkerReturn(e){if(e){const e={image:new Image,speed:0,frequency:Math.floor(5*Math.random())+1,workLoad:Math.floor(5*Math.random())+3,x:0,y:0,startPos:0,direction:0,startedWork:!1};this.stoneWorkerGroup.push(e),this.playerResources.stoneWorkers=this.stoneWorkerGroup,this.ref.markForCheck()}}tradeWorkerReturn(e){if(e){const e={image:new Image,speed:0,frequency:Math.floor(5*Math.random())+1,x:0,y:0,startPos:0,direction:0,startedWork:!1};this.tradeWorkerGroup.push(e),this.playerResources.tradeWorkers=this.tradeWorkerGroup,this.ref.markForCheck()}}guardReturn(e){e&&(this.guardCount++,this.totalGuards++,this.totalWorkers++,this.playerResources.guardCount=this.guardCount,this.playerResources.totalGuards=this.totalGuards,this.playerResources.totalWorkers=this.totalWorkers,this.ref.markForCheck())}displayUpgrades(){this.isUpgradeDisplayed?this.isUpgradeDisplayed=!1:(this.saveGame(),this.isUpgradeDisplayed=!0,this.playerResources.clicks=0,this.clicks=0)}displayStats(){this.isStatsDisplayed?this.isStatsDisplayed=!1:(this.saveGame(),this.isStatsDisplayed=!0,this.playerResources.clicks=0,this.clicks=0)}getNewUpdatesFromServer(){this.gameUpdateWarning=!1,window.location.reload()}getUpdateLater(){this.updateWatch&&(this.updateWatch.unsubscribe(),this.gameUpdateWarning=!1)}saveGame(){const e=JSON.stringify(this.playerResources);localStorage.setItem("mason_data",e)}saveGameAndQuit(){const e=JSON.stringify(this.playerResources);localStorage.setItem("mason_data",e),history.back()}closeNewPlayerPrompt(){this.tutorialStep--,0===this.tutorialStep&&(this.tutorialDone(),this.saveGame())}closeNewPlayerVaultPrompt(){this.vaultTutorialStep<8&&this.vaultTutorialStep--}closeNewPlayerVaultSecPrompt(){this.vaultSecTutorialStep--,0===this.vaultSecTutorialStep&&this.vaultTutorialDone()}beginTutorial(){this.tutorialStep=10}tutorialDone(){this.newPlayer=!1,this.tutorialStep=10,this.playerResources.newPlayer=!1,this.tutorialStart=!1,this.isQuestAvailiable=!0,this.ref.markForCheck(),this.newQuestMessage(),this.saveGame()}vaultTutorialDone(){this.newPlayerVault=!1,this.playerResources.newPlayerVault=!1,this.playerResources.banditWaveCounter=257,this.newLevelCounter=0,this.ref.markForCheck(),this.saveGame()}beginVaultTutorial(){this.vaultTutorialStep--}getScreenWidth(){0===this.playerResources.screenWidth&&(this.playerResources.screenWidth=window.innerWidth),this.playerResources.screenWidth===window.innerWidth?this.playerResources.screenChange=!1:this.playerResources.screenWidth!==window.innerWidth&&(this.playerResources.screenChange=!0,this.playerResources.screenWidth=window.innerWidth)}unfocusAllButtons(e){e.preventDefault(),e.stopPropagation()}ShowQuarry(){this.isGuardMoneyView=!1}ShowVault(){this.isGuardMoneyView=!0}loadLastSave(){window.location.reload()}restartGame(){localStorage.removeItem("mason_data"),window.location.reload()}newQuestMessage(){const e=setInterval(()=>{this.isQuestAvailiable=!1,e&&clearInterval(e)},4500)}questCompleted(){this.quests.completed=!0,this.quests.quest.complete=!0;const e=setInterval(()=>{this.quests.completed=!1,this.isQuestAvailiable=!0,this.ref.markForCheck(),this.newQuestMessage(),e&&clearInterval(e)},3500)}setQuests(){if(0!==this.quests.questLvl||this.quests.completed)if(1!==this.quests.questLvl||this.quests.completed)if(2!==this.quests.questLvl||this.quests.completed)if(3!==this.quests.questLvl||this.quests.completed)if(4!==this.quests.questLvl||this.quests.completed)if(5!==this.quests.questLvl||this.quests.completed)if(6!==this.quests.questLvl||this.quests.completed)if(7!==this.quests.questLvl||this.quests.completed)if(8!==this.quests.questLvl||this.quests.completed)if(9!==this.quests.questLvl||this.quests.completed)if(10!==this.quests.questLvl||this.quests.completed)if(11!==this.quests.questLvl||this.quests.completed)if(12!==this.quests.questLvl||this.quests.completed)if(13!==this.quests.questLvl||this.quests.completed)14!==this.quests.questLvl||this.quests.completed?15!==this.quests.questLvl||this.quests.completed?16!==this.quests.questLvl||this.quests.completed?17!==this.quests.questLvl||this.quests.completed?18!==this.quests.questLvl||this.quests.completed?19!==this.quests.questLvl||this.quests.completed?20!==this.quests.questLvl||this.quests.completed?21!==this.quests.questLvl||this.quests.completed?22!==this.quests.questLvl||this.quests.completed||(this.quests.questDesc="That is all there is for now. Get ready for the next challenge \u{1f647}\u200d\u2642\ufe0f",this.currentChapter="Rise To Power",this.playerResources.currentChapter=this.currentChapter,this.playerResources.gameLevel=3,this.quests.quest.complete=!1,this.quests.questReward=1e5):(this.quests.questDesc="Beat 30 waves of bandits",this.quests.quest.complete=!1,this.quests.questReward=2500,this.playerResources.banditWave>30&&!this.quests.quest.complete&&(this.playerResources.totalMoney+=this.quests.questReward,this.playerResources.money+=this.quests.questReward,this.quests.questLvl++,this.questCompleted())):(this.quests.questDesc="Beat 27 waves of bandits",this.quests.quest.complete=!1,this.quests.questReward=2500,this.playerResources.banditWave>27&&!this.quests.quest.complete&&(this.playerResources.totalMoney+=this.quests.questReward,this.playerResources.money+=this.quests.questReward,this.quests.questLvl++,this.questCompleted())):(this.quests.questDesc="Beat 24 waves of bandits",this.quests.quest.complete=!1,this.quests.questReward=2500,this.playerResources.banditWave>24&&!this.quests.quest.complete&&(this.playerResources.totalMoney+=this.quests.questReward,this.playerResources.money+=this.quests.questReward,this.quests.questLvl++,this.questCompleted())):(this.quests.questDesc="Beat 21 waves of bandits",this.quests.quest.complete=!1,this.quests.questReward=2500,this.playerResources.banditWave>21&&!this.quests.quest.complete&&(this.playerResources.totalMoney+=this.quests.questReward,this.playerResources.money+=this.quests.questReward,this.quests.questLvl++,this.questCompleted())):(this.quests.questDesc="Beat 18 waves of bandits",this.quests.quest.complete=!1,this.quests.questReward=2e3,this.playerResources.banditWave>18&&!this.quests.quest.complete&&(this.playerResources.totalMoney+=this.quests.questReward,this.playerResources.money+=this.quests.questReward,this.quests.questLvl++,this.questCompleted())):(this.quests.questDesc="Beat 15 waves of bandits",this.quests.quest.complete=!1,this.quests.questReward=2e3,this.playerResources.banditWave>15&&!this.quests.quest.complete&&(this.playerResources.totalMoney+=this.quests.questReward,this.playerResources.money+=this.quests.questReward,this.quests.questLvl++,this.questCompleted())):(this.quests.questDesc="Beat 12 waves of bandits",this.quests.quest.complete=!1,this.quests.questReward=2e3,this.playerResources.banditWave>12&&!this.quests.quest.complete&&(this.playerResources.totalMoney+=this.quests.questReward,this.playerResources.money+=this.quests.questReward,this.quests.questLvl++,this.questCompleted())):(this.quests.questDesc="Beat 5 waves of bandits",this.quests.quest.complete=!1,this.quests.questReward=1500,this.playerResources.banditWave>5&&!this.quests.quest.complete&&(this.playerResources.totalMoney+=this.quests.questReward,this.playerResources.money+=this.quests.questReward,this.quests.questLvl++,this.questCompleted()));else{if(this.quests.questDesc="Beat 2 waves of bandits",this.currentChapter="Rise To Fame",this.playerResources.currentChapter=this.currentChapter,this.playerResources.gameLevel=2,this.quests.quest.complete=!1,this.quests.questReward=1500,this.playerResources.newPlayerVault&&this.newPlayerVault){this.tutorialGuards=3,this.guardCount=3,this.totalGuards=3,this.playerResources.tutorialGuards=this.tutorialGuards,this.playerResources.guardCount=this.guardCount,this.playerResources.totalGuards=this.totalGuards;const e=setInterval(()=>{this.newLevelCounter++,this.newLevelCounter>=2&&clearInterval(e)},1e3)}this.playerResources.banditWave>2&&!this.quests.quest.complete&&(this.playerResources.totalMoney+=this.quests.questReward,this.playerResources.money+=this.quests.questReward,this.quests.questLvl++,this.questCompleted())}else this.quests.questDesc="Get over $10,000 Total Money",this.quests.quest.complete=!1,this.quests.questReward=1e3,this.playerResources.totalMoney>=1e4&&!this.quests.quest.complete&&(this.playerResources.totalMoney+=this.quests.questReward,this.playerResources.money+=this.quests.questReward,this.quests.questLvl++,this.questCompleted());else this.quests.questDesc="Get over $5,000 Total Money",this.quests.quest.complete=!1,this.quests.questReward=500,this.playerResources.totalMoney>=5e3&&!this.quests.quest.complete&&(this.playerResources.totalMoney+=this.quests.questReward,this.playerResources.money+=this.quests.questReward,this.quests.questLvl++,this.questCompleted());else this.quests.questDesc="Get over $2,000 Total Money",this.quests.quest.complete=!1,this.quests.questReward=40,this.playerResources.totalMoney>=2e3&&!this.quests.quest.complete&&(this.playerResources.totalMoney+=this.quests.questReward,this.playerResources.money+=this.quests.questReward,this.quests.questLvl++,this.questCompleted());else this.quests.questDesc="Hire A Total Of 5 Masons",this.quests.quest.masons=5,this.quests.questReward=35,this.quests.quest.complete=!1,this.playerResources.stoneCuttersCount>=this.quests.quest.masons&&!this.quests.quest.complete&&(this.playerResources.totalMoney+=this.quests.questReward,this.playerResources.money+=this.quests.questReward,this.quests.questLvl++,this.questCompleted());else this.quests.questDesc="Hire A Total of 3 Traders",this.quests.quest.traders=3,this.quests.questReward=30,this.quests.quest.complete=!1,this.playerResources.tradeWorkersCount>=this.quests.quest.traders&&!this.quests.quest.complete&&(this.playerResources.totalMoney+=this.quests.questReward,this.playerResources.money+=this.quests.questReward,this.quests.questLvl++,this.questCompleted());else this.quests.questDesc="Get Your Barter Skill Up To Level 5",this.quests.quest.barterLvl=5,this.quests.questReward=35,this.quests.quest.complete=!1,this.playerResources.barterLvl>=this.quests.quest.barterLvl&&!this.quests.quest.complete&&(this.playerResources.totalMoney+=this.quests.questReward,this.playerResources.money+=this.quests.questReward,this.quests.questLvl++,this.questCompleted());else this.quests.questDesc="Get Your Chisel Skill Up To Level 7",this.quests.quest.chiselLvl=7,this.quests.questReward=25,this.quests.quest.complete=!1,this.playerResources.chiselLvl>=this.quests.quest.chiselLvl&&!this.quests.quest.complete&&(this.playerResources.totalMoney+=this.quests.questReward,this.playerResources.money+=this.quests.questReward,this.quests.questLvl++,this.questCompleted());else this.quests.questDesc="Upgrade The Stockpile to Level 1",this.quests.quest.complete=!1,this.quests.questReward=15,this.playerResources.stockpileLvl>=1&&!this.quests.quest.complete&&(this.playerResources.totalMoney+=this.quests.questReward,this.playerResources.money+=this.quests.questReward,this.quests.questLvl++,this.questCompleted());else this.quests.questDesc="Upgrade The Housing to Level 1",this.quests.quest.complete=!1,this.quests.questReward=20,this.playerResources.housingLvl>=1&&!this.quests.quest.complete&&(this.playerResources.totalMoney+=this.quests.questReward,this.playerResources.money+=this.quests.questReward,this.quests.questLvl++,this.questCompleted());else this.quests.questDesc="Hire A Mason",this.quests.quest.masons=1,this.quests.questReward=10,this.quests.quest.complete=!1,this.playerResources.stoneCuttersCount>=this.quests.quest.masons&&!this.quests.quest.complete&&(this.playerResources.totalMoney+=this.quests.questReward,this.playerResources.money+=this.quests.questReward,this.quests.questLvl++,this.questCompleted());else this.quests.questDesc="Hire A Trader",this.quests.quest.traders=1,this.quests.questReward=10,this.quests.quest.complete=!1,this.playerResources.tradeWorkersCount>=this.quests.quest.traders&&!this.quests.quest.complete&&(this.playerResources.totalMoney+=this.quests.questReward,this.playerResources.money+=this.quests.questReward,this.quests.questLvl++,this.questCompleted());else this.quests.questDesc="Get Your Barter Skill Up To Level 3",this.quests.quest.barterLvl=3,this.quests.questReward=20,this.quests.quest.complete=!1,this.playerResources.barterLvl>=this.quests.quest.barterLvl&&!this.quests.quest.complete&&(this.playerResources.totalMoney+=this.quests.questReward,this.playerResources.money+=this.quests.questReward,this.quests.questLvl++,this.questCompleted());else this.quests.questDesc="Get Your Chisel Skill Up To Level 3",this.quests.quest.chiselLvl=3,this.quests.questReward=10,this.playerResources.chiselLvl>=this.quests.quest.chiselLvl&&!this.quests.quest.complete&&(this.playerResources.totalMoney+=this.quests.questReward,this.playerResources.money+=this.quests.questReward,this.quests.questLvl++,this.questCompleted());this.playerResources.quests=this.quests}}return e.\u0275fac=function(t){return new(t||e)(i.Ob(o.b),i.Ob(i.h))},e.\u0275cmp=i.Ib({type:e,selectors:[["app-mason-game"]],decls:23,vars:10,consts:[[1,"game-content"],[1,"logo-container"],[1,"noSelect",3,"click"],[1,"logo"],[1,"save-text"],["mat-button","",1,"area-btn",3,"matMenuTriggerFor"],["menu","matMenu"],["mat-menu-item","",3,"click"],["mat-menu-item","",3,"click",4,"ngIf"],[1,"game-wrapper"],["class","upgrade-space",4,"ngIf"],["class","game-space",4,"ngIf"],["class","stat-space",4,"ngIf"],["class","modal",4,"ngIf"],["class","modal",3,"click",4,"ngIf"],[1,"upgrade-space"],[1,"options-title-contents",3,"ngClass"],[1,"chapter-text"],["class","quest-completed",3,"width","right",4,"ngIf"],["mat-raised-button","","color","primary",1,"close-upgrades",3,"click"],[3,"playerResources","stoneWorkerReturn","tradeWorkerReturn","guardReturn","playerResourcesReturn"],[1,"quest-completed"],[1,"game-space"],[1,"brick-count",3,"ngClass"],["alt","bricks",1,"brick-icon",3,"src"],[1,"guard-count",3,"ngClass"],["alt","guard",1,"guard-icon",3,"src"],[1,"bandit-count",3,"ngClass"],["alt","bandit",1,"guard-icon",3,"src"],[1,"money-count",3,"ngStyle"],["class","quest-completed",3,"ngClass","width","right",4,"ngIf"],[3,"ngClass","playerResources","isGuardMoneyView","playerResourcesReturn"],[4,"ngIf"],[1,"controls-wrapper"],["mat-raised-button","","color","primary","class","control-button",3,"keydown","click",4,"ngIf"],["mat-raised-button","","color","primary",1,"control-button",3,"keydown","click"],[1,"quest-completed",3,"ngClass"],[1,"stat-space"],[1,"stats-title-contents",3,"ngClass"],["mat-raised-button","","color","primary",1,"close-stats",3,"click"],[3,"playerResources"],[1,"modal"],[1,"info-wrapper",3,"ngClass"],["color","primary"],["id","menu-width"],[1,"info-text"],[1,"info-text","info-text-area"],["mat-raised-button","","color","primary",1,"control-button",3,"click"],[1,"modal",3,"click"],["class","info-text",4,"ngIf"],["class","info-text info-text-area",4,"ngIf"],["mat-raised-button","","color","primary",1,"control-button",3,"disabled","click"]],template:function(e,t){if(1&e&&(i.Ub(0,"div",0),i.Ub(1,"span",1),i.Ub(2,"span",2),i.cc("click",(function(e){return t.saveGameAndQuit()})),i.Ub(3,"mat-icon",3),i.Ac(4,"exit_to_app"),i.Tb(),i.Ub(5,"span",4),i.Ac(6,"Exit"),i.Tb(),i.Tb(),i.Tb(),i.Ub(7,"button",5),i.Ac(8,"Areas"),i.Tb(),i.Ub(9,"mat-menu",null,6),i.Ub(11,"button",7),i.cc("click",(function(e){return t.ShowQuarry()})),i.Ac(12,"Quarry"),i.Tb(),i.zc(13,H,2,0,"button",8),i.Tb(),i.Ub(14,"div",9),i.zc(15,$,8,6,"span",10),i.zc(16,ee,24,34,"span",11),i.zc(17,te,7,5,"span",12),i.zc(18,re,15,3,"div",13),i.zc(19,be,16,15,"div",14),i.zc(20,Se,14,13,"div",14),i.zc(21,Be,12,11,"div",14),i.zc(22,Oe,15,5,"div",13),i.Tb(),i.Tb()),2&e){const e=i.rc(10);i.Cb(7),i.lc("matMenuTriggerFor",e),i.Cb(6),i.lc("ngIf",t.playerResources.gameLevel>=2),i.Cb(2),i.lc("ngIf",t.isUpgradeDisplayed),i.Cb(1),i.lc("ngIf",!t.isUpgradeDisplayed&&!t.isStatsDisplayed),i.Cb(1),i.lc("ngIf",t.isStatsDisplayed),i.Cb(1),i.lc("ngIf",t.gameUpdateWarning),i.Cb(1),i.lc("ngIf",t.newPlayer&&!t.tutorialStart&&t.tutorialStep>0),i.Cb(1),i.lc("ngIf",t.playerResources.newPlayerVault&&13===t.quests.questLvl&&t.vaultTutorialStep>0),i.Cb(1),i.lc("ngIf",t.playerResources.newPlayerVault&&t.isGuardMoneyView),i.Cb(1),i.lc("ngIf",t.gameOver)}},directives:[n.a,c.a,l.c,l.d,l.a,r.k,r.i,x,r.l,I,B,_,h.a],styles:[".brick-icon[_ngcontent-%COMP%]{width:calc(1em - 7%)}.bandit-count[_ngcontent-%COMP%], .brick-count[_ngcontent-%COMP%], .guard-count[_ngcontent-%COMP%]{position:absolute;left:calc(93% - 6.4rem);color:#fff;font-size:calc(2em - 50%)}.guard-count[_ngcontent-%COMP%]{left:calc(93% - 4.5rem)}.bandit-count[_ngcontent-%COMP%]{left:46%;top:3.49rem;opacity:.77}.guard-icon[_ngcontent-%COMP%]{width:calc(1em - 1%)}.money-count[_ngcontent-%COMP%]{position:absolute;left:13%;color:#fff;font-size:calc(2em - 50%)}.close-upgrades[_ngcontent-%COMP%]{display:inline-block;margin-bottom:calc(1% + .4em);position:relative;left:calc(100% - 15em)}.chapter-text[_ngcontent-%COMP%]{display:inline-block;font-weight:700;width:9em}.close-stats[_ngcontent-%COMP%]{display:inline-block;margin-bottom:calc(1% + .4em);position:relative;left:calc(100% - 15em)}.logo-container[_ngcontent-%COMP%]{cursor:pointer;position:absolute;top:calc(1% + .5em);color:#fff;font-weight:700}.save-text[_ngcontent-%COMP%]{position:absolute;top:14%;left:112%}.info-wrapper[_ngcontent-%COMP%]{height:calc(46% + .1em);top:calc(21% - .1em)}.options-title-contents[_ngcontent-%COMP%], .stats-title-contents[_ngcontent-%COMP%]{border-bottom:1px solid #000}.title-dm[_ngcontent-%COMP%]{border-bottom:1px solid #fff}.info-dm[_ngcontent-%COMP%]{background-color:#606060}.quest-completed[_ngcontent-%COMP%]{position:absolute;top:calc(16% + 1.4em);right:calc(2em + 2.4%);text-align:center;width:90%;background-color:#673ab7;border-radius:5px;z-index:10;padding-top:.5em;padding-bottom:.5em}.noSelect[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-align:center;align-items:center;-webkit-box-pack:center;justify-content:center}.display[_ngcontent-%COMP%]{display:inline}.hide[_ngcontent-%COMP%]{display:none}.area-btn[_ngcontent-%COMP%]{font-weight:700;cursor:pointer;position:absolute;top:calc(1% + .5em);color:#fff;left:calc(100% - 6em)}"],changeDetection:0}),e})()}];let Ve=(()=>{class e{}return e.\u0275mod=i.Mb({type:e}),e.\u0275inj=i.Lb({factory:function(t){return new(t||e)},imports:[[a.d.forChild(ze)],a.d]}),e})();s.d(t,"MasonGameModule",(function(){return De}));let De=(()=>{class e{}return e.\u0275mod=i.Mb({type:e}),e.\u0275inj=i.Lb({factory:function(t){return new(t||e)},imports:[[Ve,r.c,c.b,h.b,n.b,l.b]]}),e})()}}]);