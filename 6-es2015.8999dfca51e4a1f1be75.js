(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{"4shC":function(e,t,s){"use strict";s.r(t);var r=s("ofXK"),a=s("tyNb"),i=s("fXoL"),o=s("Jho9"),n=s("bTqV"),c=s("NFeN"),h=s("STbY"),l=s("7EHt"),u=s("/t3+");function d(e,t){1&e&&(i.Vb(0,"mat-icon",16),i.Cc(1,"star"),i.Ub())}function p(e,t){1&e&&(i.Vb(0,"mat-icon",16),i.Cc(1,"star"),i.Ub())}function m(e,t){if(1&e){const e=i.Wb();i.Vb(0,"button",17),i.dc("click",(function(t){return i.vc(e),i.hc().fireWorker("mason")})),i.Cc(1,"Fire Mason"),i.Ub()}if(2&e){const e=i.hc();i.mc("disabled",e.playerResources.stoneWorkers.length<1)}}function y(e,t){if(1&e){const e=i.Wb();i.Vb(0,"button",17),i.dc("click",(function(t){return i.vc(e),i.hc().fireWorker("trader")})),i.Cc(1,"Fire Trader"),i.Ub()}if(2&e){const e=i.hc();i.mc("disabled",e.playerResources.tradeWorkers.length<1)}}function b(e,t){1&e&&(i.Vb(0,"mat-icon",16),i.Cc(1,"star"),i.Ub())}function g(e,t){if(1&e){const e=i.Wb();i.Vb(0,"span"),i.Vb(1,"h2",5),i.Cc(2,"Hire Guards"),i.Ub(),i.Vb(3,"mat-accordion"),i.Vb(4,"mat-expansion-panel",6),i.Vb(5,"mat-expansion-panel-header",6),i.Vb(6,"mat-panel-title"),i.Vb(7,"span",7),i.Vb(8,"h4",8),i.Cc(9,"Hire and train guards"),i.Ub(),i.Bc(10,b,2,0,"mat-icon",9),i.Ub(),i.Ub(),i.Ub(),i.Vb(11,"button",10),i.dc("click",(function(t){i.vc(e);const s=i.hc();return s.displayUpgradeMenu("guard",s.guardCost)})),i.Cc(12),i.Ub(),i.Vb(13,"button",10),i.dc("click",(function(t){i.vc(e);const s=i.hc();return s.displayUpgradeMenu("guardWep",s.guardWeaponCost)})),i.Cc(14),i.Ub(),i.Vb(15,"button",10),i.dc("click",(function(t){i.vc(e);const s=i.hc();return s.displayUpgradeMenu("guardArmor",s.guardArmorCost)})),i.Cc(16),i.Ub(),i.Vb(17,"button",10),i.dc("click",(function(t){i.vc(e);const s=i.hc();return s.displayUpgradeMenu("guardSpeed",s.guardSpeedCost)})),i.Cc(18),i.Ub(),i.Ub(),i.Ub(),i.Ub()}if(2&e){const e=i.hc();i.Cb(10),i.mc("ngIf",e.guardsUpAval),i.Cb(1),i.mc("disabled",e.playerResources.money<e.guardCost),i.Cb(1),i.Ec("Hire Guard: $",e.guardCost,""),i.Cb(1),i.mc("disabled",e.playerResources.money<e.guardWeaponCost||99===e.playerResources.guardWeaponLvl),i.Cb(1),i.Ec("Upgrade Weapon: $",e.guardWeaponCost,""),i.Cb(1),i.mc("disabled",e.playerResources.money<e.guardArmorCost||99===e.playerResources.guardArmorLvl),i.Cb(1),i.Ec("Upgrade Armor: $",e.guardArmorCost,""),i.Cb(1),i.mc("disabled",e.playerResources.money<e.guardSpeedCost||99===e.playerResources.guardSpeedLvl),i.Cb(1),i.Ec("Upgrade Speed: $",e.guardSpeedCost,"")}}function C(e,t){1&e&&(i.Vb(0,"p",24),i.Cc(1,"Hired \u{1f44d}"),i.Ub())}function v(e,t){1&e&&(i.Vb(0,"p",24),i.Cc(1,"Upgraded \u{1f44d}"),i.Ub())}const k=function(e){return{"info-dm":e}};function R(e,t){if(1&e){const e=i.Wb();i.Vb(0,"div",18),i.dc("click",(function(t){return i.vc(e),i.hc().closeUpgradedMenu()})),i.Vb(1,"div",19),i.Vb(2,"mat-toolbar",20),i.Vb(3,"div",21),i.Vb(4,"p",22),i.Cc(5,"Tap Anywhere To Continue"),i.Ub(),i.Ub(),i.Ub(),i.Bc(6,C,2,0,"p",23),i.Bc(7,v,2,0,"p",23),i.Ub(),i.Ub()}if(2&e){const e=i.hc();i.Cb(1),i.mc("ngClass",i.pc(3,k,!0===e.optionsSelected.darkMode)),i.Cb(5),i.mc("ngIf","mason"===e.currentUpgradeStat||"trader"===e.currentUpgradeStat||"guard"===e.currentUpgradeStat),i.Cb(1),i.mc("ngIf","mason"!==e.currentUpgradeStat&&"trader"!==e.currentUpgradeStat&&"guard"!==e.currentUpgradeStat)}}function f(e,t){if(1&e){const e=i.Wb();i.Vb(0,"div",18),i.dc("click",(function(t){return i.vc(e),i.hc().closeHousingLimitModal()})),i.Vb(1,"div",19),i.Vb(2,"mat-toolbar",20),i.Vb(3,"div",21),i.Vb(4,"p",22),i.Cc(5,"Tap Anywhere To Continue"),i.Ub(),i.Ub(),i.Ub(),i.Vb(6,"p",25),i.Cc(7,"Not enough space for them to live.. Upgrade your Housing."),i.Ub(),i.Ub(),i.Ub()}if(2&e){const e=i.hc();i.Cb(1),i.mc("ngClass",i.pc(1,k,!0===e.optionsSelected.darkMode))}}function w(e,t){if(1&e){const e=i.Wb();i.Vb(0,"div",26),i.Vb(1,"div",19),i.Vb(2,"mat-toolbar"),i.Vb(3,"div",21),i.Vb(4,"p",22),i.Cc(5,"Are You Sure?"),i.Ub(),i.Ub(),i.Ub(),i.Vb(6,"span"),i.Vb(7,"p",25),i.Cc(8,"Once they are fired, the deal is final."),i.Ub(),i.Vb(9,"button",27),i.dc("click",(function(t){return i.vc(e),i.hc().deleteWorker()})),i.Cc(10,"Fire Them"),i.Ub(),i.Vb(11,"button",27),i.dc("click",(function(t){return i.vc(e),i.hc().cancelFireWorker()})),i.Cc(12,"Nevermind"),i.Ub(),i.Ub(),i.Ub(),i.Ub()}if(2&e){const e=i.hc();i.Cb(1),i.mc("ngClass",i.pc(1,k,!0===e.optionsSelected.darkMode))}}function T(e,t){if(1&e&&(i.Vb(0,"p",30),i.Cc(1),i.Ub()),2&e){const e=i.hc(2);i.Cb(1),i.Ec("Upgrade Cost: $",e.currentUpgradeCost,"")}}function S(e,t){if(1&e&&(i.Vb(0,"p",30),i.Cc(1),i.Ub()),2&e){const e=i.hc(2);i.Cb(1),i.Ec("Worker Cost: $",e.currentUpgradeCost,"")}}function U(e,t){if(1&e&&(i.Vb(0,"p",30),i.Cc(1),i.Ub()),2&e){const e=i.hc(2);i.Cb(1),i.Ec("Guard Cost: $",e.currentUpgradeCost,"")}}function W(e,t){if(1&e&&(i.Vb(0,"p",30),i.Cc(1),i.Vb(2,"span",31),i.Cc(3),i.Ub(),i.Ub()),2&e){const e=i.hc(2);i.Cb(1),i.Ec("Level: ",e.currentUpgradeLvl," => "),i.Cb(2),i.Dc(e.currentUpgradeLvl+1)}}function x(e,t){if(1&e&&(i.Vb(0,"p",30),i.Cc(1),i.Vb(2,"span",31),i.Cc(3),i.Ub(),i.Ub()),2&e){const e=i.hc(2);i.Cb(1),i.Ec("Count: ",e.currentUpgradeLvl," => "),i.Cb(2),i.Dc(e.currentUpgradeLvl+1)}}function M(e,t){if(1&e&&(i.Vb(0,"span"),i.Vb(1,"p",30),i.Cc(2),i.Vb(3,"span",31),i.Cc(4),i.Ub(),i.Ub(),i.Ub()),2&e){const e=i.hc(2);i.Cb(2),i.Ec("Chisel Damage: ",e.chiselDmg," => "),i.Cb(2),i.Dc(e.nextChiselDmg)}}function L(e,t){if(1&e&&(i.Vb(0,"span"),i.Vb(1,"p",30),i.Cc(2),i.Vb(3,"span",31),i.Cc(4),i.Ub(),i.Ub(),i.Vb(5,"p",30),i.Cc(6),i.Vb(7,"span",31),i.Cc(8),i.Ub(),i.Ub(),i.Ub()),2&e){const e=i.hc(2);i.Cb(2),i.Fc("Sell at Once: ",e.playerLowBrickSell,"-",e.playerMaxBrickSell," => "),i.Cb(2),i.Fc("",e.playerLowBrickSell,"-",e.playerMaxBrickSell+1,""),i.Cb(2),i.Fc("Selling Rate: $",e.playerBarterLowRate+e.workerBarterRate,"-$",e.playerBarterMaxRate+e.workerBarterRate," => "),i.Cb(2),i.Fc("$",e.playerBarterLowRate+e.workerBarterRate+1,"-$",e.playerBarterMaxRate+e.workerBarterRate+1,"")}}function q(e,t){if(1&e&&(i.Vb(0,"span"),i.Vb(1,"p",30),i.Cc(2),i.Vb(3,"span",31),i.Cc(4),i.Ub(),i.Cc(5," Workers"),i.Ub(),i.Ub()),2&e){const e=i.hc(2);i.Cb(2),i.Ec("Housing Space: ",e.playerResourcesTemp.housingLimit," => "),i.Cb(2),i.Dc(e.playerResourcesTemp.housingLimit+8)}}function V(e,t){if(1&e&&(i.Vb(0,"span"),i.Vb(1,"p",30),i.Cc(2),i.Vb(3,"span",31),i.Cc(4),i.Ub(),i.Cc(5," Pallets"),i.Ub(),i.Ub()),2&e){const e=i.hc(2);i.Cb(2),i.Ec("Storage: ",e.playerResourcesTemp.stockpile," => "),i.Cb(2),i.Dc(e.playerResourcesTemp.stockpile+10)}}function I(e,t){if(1&e&&(i.Vb(0,"span"),i.Vb(1,"p",30),i.Cc(2),i.Ub(),i.Vb(3,"p",30),i.Cc(4),i.Ub(),i.Vb(5,"p",30),i.Cc(6),i.Ub(),i.Ub()),2&e){const e=i.hc(2);i.Cb(2),i.Fc("Workload: ",e.masonLowWorkload,"-",e.masonMaxWorkload," Strikes"),i.Cb(2),i.Ec("Chisel Damage: ",e.chiselDmg,""),i.Cb(2),i.Ec("Move Speed: ",e.masonMovementSpeed," steps/sec")}}function P(e,t){if(1&e&&(i.Vb(0,"span"),i.Vb(1,"p",30),i.Cc(2),i.Ub(),i.Vb(3,"p",30),i.Cc(4),i.Ub(),i.Vb(5,"p",30),i.Cc(6),i.Ub(),i.Ub()),2&e){const e=i.hc(2);i.Cb(2),i.Fc("Sell at Once: ",e.playerLowBrickSell,"-",e.playerMaxBrickSell,""),i.Cb(2),i.Fc("Selling Rate: $",e.playerBarterLowRate+e.workerBarterRate,"-$",e.playerBarterMaxRate+e.workerBarterRate,""),i.Cb(2),i.Ec("Move Speed: ",e.traderMovementSpeed," steps/sec")}}function B(e,t){if(1&e&&(i.Vb(0,"span"),i.Vb(1,"p",30),i.Cc(2),i.Vb(3,"span",31),i.Cc(4),i.Ub(),i.Cc(5," Strikes"),i.Ub(),i.Vb(6,"p",30),i.Cc(7),i.Vb(8,"span",31),i.Cc(9),i.Ub(),i.Cc(10," hits/sec"),i.Ub(),i.Vb(11,"p",30),i.Cc(12),i.Vb(13,"span",31),i.Cc(14),i.Ub(),i.Cc(15," steps/sec"),i.Ub(),i.Ub()),2&e){const e=i.hc(2);i.Cb(2),i.Fc("Workload: ",e.masonLowWorkload,"-",e.masonMaxWorkload," => "),i.Cb(2),i.Fc("",e.masonLowWorkload+1,"-",e.masonMaxWorkload+1,""),i.Cb(3),i.Ec("Chisel Speed: ",e.masonChiselSpeed," => "),i.Cb(2),i.Dc(e.masonUpChiselSpeed),i.Cb(3),i.Ec("Move Speed: ",e.masonMovementSpeed," => "),i.Cb(2),i.Dc(e.masonUpMovementSpeed)}}function A(e,t){if(1&e&&(i.Vb(0,"span"),i.Vb(1,"p",30),i.Cc(2),i.Vb(3,"span",31),i.Cc(4),i.Ub(),i.Ub(),i.Vb(5,"p",30),i.Cc(6),i.Vb(7,"span",31),i.Cc(8),i.Ub(),i.Cc(9," steps/sec"),i.Ub(),i.Ub()),2&e){const e=i.hc(2);i.Cb(2),i.Fc("Selling Rate: $",e.playerBarterLowRate+e.workerBarterRate,"-$",e.playerBarterMaxRate+e.workerBarterRate," => "),i.Cb(2),i.Fc("$",e.playerBarterLowRate+e.workerBarterRate+1,"-$",e.playerBarterMaxRate+e.workerBarterRate+1,""),i.Cb(2),i.Ec("Move Speed: ",e.traderMovementSpeed," => "),i.Cb(2),i.Dc(e.traderUpMovementSpeed)}}function O(e,t){if(1&e&&(i.Vb(0,"span"),i.Vb(1,"p",30),i.Cc(2),i.Ub(),i.Vb(3,"p",30),i.Cc(4),i.Ub(),i.Vb(5,"p",30),i.Cc(6),i.Ub(),i.Ub()),2&e){const e=i.hc(2);i.Cb(2),i.Ec("Weapon Damage: ",e.playerResourcesTemp.guardWeaponLvl+1," Health"),i.Cb(2),i.Ec("Armor Rating: ",e.playerResourcesTemp.guardArmorLvl+1,""),i.Cb(2),i.Ec("Hit Chance: ",e.playerResourcesTemp.guardSpeedLvl+1,"%")}}function G(e,t){if(1&e&&(i.Vb(0,"span"),i.Vb(1,"p",30),i.Cc(2),i.Vb(3,"span",31),i.Cc(4),i.Ub(),i.Cc(5," Health"),i.Ub(),i.Ub()),2&e){const e=i.hc(2);i.Cb(2),i.Ec("Weapon Damage: ",e.playerResourcesTemp.guardWeaponLvl+1," => "),i.Cb(2),i.Dc(e.playerResourcesTemp.guardWeaponLvl+2)}}function D(e,t){if(1&e&&(i.Vb(0,"span"),i.Vb(1,"p",30),i.Cc(2),i.Vb(3,"span",31),i.Cc(4),i.Ub(),i.Ub(),i.Ub()),2&e){const e=i.hc(2);i.Cb(2),i.Ec("Armor Rating: ",e.playerResourcesTemp.guardArmorLvl+1," => "),i.Cb(2),i.Dc(e.playerResourcesTemp.guardArmorLvl+2)}}function E(e,t){if(1&e&&(i.Vb(0,"span"),i.Vb(1,"p",30),i.Cc(2),i.Vb(3,"span",31),i.Cc(4),i.Ub(),i.Cc(5,"%"),i.Ub(),i.Ub()),2&e){const e=i.hc(2);i.Cb(2),i.Ec("Hit Chance: ",e.playerResourcesTemp.guardSpeedLvl+1,"% => "),i.Cb(2),i.Dc(e.playerResourcesTemp.guardSpeedLvl+2)}}function _(e,t){1&e&&(i.Vb(0,"span"),i.Cc(1,"Upgrade"),i.Ub())}function H(e,t){1&e&&(i.Vb(0,"span"),i.Cc(1,"Hire"),i.Ub())}function F(e,t){if(1&e){const e=i.Wb();i.Vb(0,"div",18),i.dc("click",(function(t){return i.vc(e),i.hc().closeUpgradeMenu()})),i.Vb(1,"div",19),i.Vb(2,"mat-toolbar"),i.Vb(3,"div",21),i.Vb(4,"p",22),i.Cc(5,"Tap Anywhere To Continue"),i.Ub(),i.Ub(),i.Ub(),i.Bc(6,T,2,1,"p",28),i.Bc(7,S,2,1,"p",28),i.Bc(8,U,2,1,"p",28),i.Vb(9,"p",25),i.Cc(10),i.Ub(),i.Bc(11,W,4,2,"p",28),i.Bc(12,x,4,2,"p",28),i.Bc(13,M,5,2,"span",13),i.Bc(14,L,9,8,"span",13),i.Bc(15,q,6,2,"span",13),i.Bc(16,V,6,2,"span",13),i.Bc(17,I,7,4,"span",13),i.Bc(18,P,7,5,"span",13),i.Bc(19,B,16,8,"span",13),i.Bc(20,A,10,6,"span",13),i.Bc(21,O,7,3,"span",13),i.Bc(22,G,6,2,"span",13),i.Bc(23,D,5,2,"span",13),i.Bc(24,E,6,2,"span",13),i.Vb(25,"button",29),i.dc("click",(function(t){return i.vc(e),i.hc().upgradeStat()})),i.Bc(26,_,2,0,"span",13),i.Bc(27,H,2,0,"span",13),i.Ub(),i.Ub(),i.Ub()}if(2&e){const e=i.hc();i.Cb(1),i.mc("ngClass",i.pc(21,k,!0===e.optionsSelected.darkMode)),i.Cb(5),i.mc("ngIf","mason"!==e.currentUpgradeStat&&"trader"!==e.currentUpgradeStat&&"guard"!==e.currentUpgradeStat),i.Cb(1),i.mc("ngIf","mason"===e.currentUpgradeStat||"trader"===e.currentUpgradeStat),i.Cb(1),i.mc("ngIf","guard"===e.currentUpgradeStat),i.Cb(2),i.Dc(e.currentUpgradeDesc),i.Cb(1),i.mc("ngIf","mason"!==e.currentUpgradeStat&&"trader"!==e.currentUpgradeStat&&"guard"!==e.currentUpgradeStat),i.Cb(1),i.mc("ngIf","mason"===e.currentUpgradeStat||"trader"===e.currentUpgradeStat||"guard"===e.currentUpgradeStat),i.Cb(1),i.mc("ngIf","chisel"===e.currentUpgradeStat),i.Cb(1),i.mc("ngIf","barter"===e.currentUpgradeStat),i.Cb(1),i.mc("ngIf","housing"===e.currentUpgradeStat),i.Cb(1),i.mc("ngIf","stockpile"===e.currentUpgradeStat),i.Cb(1),i.mc("ngIf","mason"===e.currentUpgradeStat),i.Cb(1),i.mc("ngIf","trader"===e.currentUpgradeStat),i.Cb(1),i.mc("ngIf","upMason"===e.currentUpgradeStat),i.Cb(1),i.mc("ngIf","upTrader"===e.currentUpgradeStat),i.Cb(1),i.mc("ngIf","guard"===e.currentUpgradeStat),i.Cb(1),i.mc("ngIf","guardWep"===e.currentUpgradeStat),i.Cb(1),i.mc("ngIf","guardArmor"===e.currentUpgradeStat),i.Cb(1),i.mc("ngIf","guardSpeed"===e.currentUpgradeStat),i.Cb(2),i.mc("ngIf","guard"!==e.currentUpgradeStat&&"trader"!==e.currentUpgradeStat&&"mason"!==e.currentUpgradeStat),i.Cb(1),i.mc("ngIf","guard"===e.currentUpgradeStat||"trader"===e.currentUpgradeStat||"mason"===e.currentUpgradeStat)}}let z=(()=>{class e{constructor(){this.playerResourcesTemp={chiselLvl:0,money:0,bricks:0,clicks:0,barterLvl:0,tradeWorkers:[],tradeWorkersCount:0,tradeWorkersLvl:0,stoneWorkers:[],stoneCuttersCount:0,stoneWorkerLvl:0,guards:[],guardCount:0,guardWeaponLvl:0,guardArmorLvl:0,guardSpeedLvl:0,dayCounter:0,daysPast:0,version:.5,totalBricks:0,totalMoney:0,newPlayer:!0,quests:{questLvl:0,questDesc:"",questReward:0,completed:!1,quest:{complete:!1,chiselLvl:0,barterLvl:0,masons:0,masonLvl:0,traders:0,traderLvl:0}},sky:{sun:{x:0,y:0},moon:{x:0,y:0}},housingLimit:0,housingLvl:0,totalWorkers:0,stockpile:0,stockpileLvl:0,screenWidth:0,screenChange:!1,gameLevel:1,currentChapter:"",newPlayerVault:!0,banditWave:0,bandits:[],banditWaveCounter:0,banditSpawnCount:0,isBanditWaveStarted:!1,moneyTaken:0,credit:3,banditsStopped:0,totalGuards:0,tutorialGuards:0},this.pageHeight=0,this.isHousingFull=!1,this.statUpgraded=!1,this.stoneWorkerReturn=new i.o,this.tradeWorkerReturn=new i.o,this.guardReturn=new i.o,this.playerResourcesReturn=new i.o,this.chiselLvlCost=10,this.barterLvlCost=10,this.stoneWorkerCost=30,this.tradeWorkerCost=30,this.guardCost=100,this.trainStoneWorkerCost=25,this.trainTradeWorkerCost=25,this.stockpileCost=50,this.housingCost=50,this.guardWeaponCost=500,this.guardArmorCost=500,this.guardSpeedCost=500,this.displayFireWorker=!1,this.economyUpAval=!1,this.workersUpAval=!1,this.guardsUpAval=!1,this.upgradeMenuShow=!1,this.currentUpgradeCost=0,this.currentUpgradeDesc="",this.currentUpgradeStat="",this.currentUpgradeLvl=0,this.chiselDmg=0,this.nextChiselDmg=0,this.playerBarterMaxRate=0,this.playerBarterLowRate=0,this.workerBarterRate=0,this.masonChiselSpeed=0,this.masonUpChiselSpeed=0,this.playerMaxBrickSell=0,this.playerLowBrickSell=0,this.masonMaxWorkload=0,this.masonLowWorkload=0,this.masonMovementSpeed=0,this.masonUpMovementSpeed=0,this.traderMovementSpeed=0,this.traderUpMovementSpeed=0,this.optionsSelected={darkMode:!1,soundsOn:!0},this.stoneWallImagePath="assets/images/stoneWall.png",this.upgradeSound=new Audio,this.upgradeSoundPath="assets/sounds/upgrade.wav"}get playerResources(){return this.playerResourcesTemp}set playerResources(e){this.playerResourcesTemp=e}ngOnInit(){if(this.playerResourcesTemp.newPlayer&&document.getElementById("Close-Upgrades-Btn")&&(document.getElementById("Close-Upgrades-Btn").style.border="3px solid #8ADC41"),this.upgradeSound.src=this.upgradeSoundPath,this.upgradeSound.load(),localStorage.length>0&&localStorage.getItem("mason_options")){const e=JSON.parse(localStorage.getItem("mason_options"));this.optionsSelected={darkMode:e.darkMode,soundsOn:e.soundsOn};const t=document.getElementsByTagName("body");this.optionsSelected.darkMode?t[0].classList.add("darkMode"):t[0].classList.remove("darkMode")}else{const e=JSON.stringify(this.optionsSelected);localStorage.setItem("mason_options",e)}this.calcHeightOfPage();for(let e=0;e<this.playerResourcesTemp.chiselLvl;e++){const e=Math.trunc(this.chiselLvlCost/4)+Math.trunc(this.chiselLvlCost/3);this.chiselLvlCost+=e}for(let e=0;e<this.playerResourcesTemp.barterLvl;e++){const e=Math.trunc(this.barterLvlCost/2)+Math.trunc(this.barterLvlCost/3);this.barterLvlCost+=e}for(let e=0;e<this.playerResourcesTemp.stoneWorkerLvl;e++){const e=Math.trunc(this.trainStoneWorkerCost/10);this.trainStoneWorkerCost+=e;const t=Math.trunc(this.stoneWorkerCost/7);this.stoneWorkerCost+=t}for(let e=0;e<this.playerResourcesTemp.tradeWorkersLvl;e++){const e=Math.trunc(this.trainTradeWorkerCost/10);this.trainTradeWorkerCost+=e;const t=Math.trunc(this.tradeWorkerCost/7);this.tradeWorkerCost+=t}for(let e=0;e<this.playerResourcesTemp.stoneWorkers.length;e++){const e=Math.trunc(this.trainStoneWorkerCost/10);this.trainStoneWorkerCost+=e}for(let e=0;e<this.playerResourcesTemp.tradeWorkers.length;e++){const e=Math.trunc(this.trainTradeWorkerCost/10);this.trainTradeWorkerCost+=e}for(let e=0;e<this.playerResourcesTemp.stockpileLvl;e++){const e=Math.trunc(this.stockpileCost/4);this.stockpileCost+=e}for(let e=0;e<this.playerResourcesTemp.housingLvl;e++){const e=Math.trunc(this.housingCost/4);this.housingCost+=e}for(let e=0;e<this.playerResourcesTemp.guardWeaponLvl;e++){this.guardCost+=50;const e=Math.trunc(this.guardWeaponCost/10);this.guardWeaponCost+=e}for(let e=0;e<this.playerResourcesTemp.guardArmorLvl;e++){this.guardCost+=50;const e=Math.trunc(this.guardArmorCost/10);this.guardArmorCost+=e}for(let e=0;e<this.playerResourcesTemp.guardSpeedLvl;e++){this.guardCost+=50;const e=Math.trunc(this.guardSpeedCost/10);this.guardSpeedCost+=e}this.economyUpCheck(),this.workerUpCheck(),this.guardUpCheck()}ngOnDestroy(){this.upgradeSound=new Audio,clearInterval(this.displayUpgradeInterval)}hireStoneWorker(){if(this.playerResourcesTemp.totalWorkers<this.playerResourcesTemp.housingLimit){this.playerResourcesTemp.money-=this.stoneWorkerCost,this.playerResourcesTemp.stoneCuttersCount++;const e=Math.trunc(this.trainStoneWorkerCost/10);this.trainStoneWorkerCost+=e,this.playerResourcesTemp.totalWorkers++,this.playerResourcesReturn.emit(this.playerResourcesTemp),this.stoneWorkerReturn.emit(!0),this.economyUpCheck(),this.workerUpCheck(),this.guardUpCheck()}else this.isHousingFull=!0}hireTradeWorker(){if(this.playerResourcesTemp.totalWorkers<this.playerResourcesTemp.housingLimit){this.playerResourcesTemp.money-=this.tradeWorkerCost,this.playerResourcesTemp.tradeWorkersCount++;const e=Math.trunc(this.trainTradeWorkerCost/10);this.trainTradeWorkerCost+=e,this.playerResourcesTemp.totalWorkers++,this.playerResourcesReturn.emit(this.playerResourcesTemp),this.tradeWorkerReturn.emit(!0),this.economyUpCheck(),this.workerUpCheck(),this.guardUpCheck()}else this.isHousingFull=!0}hireGuard(){this.playerResourcesTemp.totalWorkers<this.playerResourcesTemp.housingLimit?(this.playerResourcesTemp.money-=this.guardCost,this.playerResourcesReturn.emit(this.playerResourcesTemp),this.guardReturn.emit(!0),this.economyUpCheck(),this.workerUpCheck(),this.guardUpCheck()):this.isHousingFull=!0}upgradeChisel(){this.playerResourcesTemp.money-=this.chiselLvlCost,this.playerResourcesTemp.chiselLvl++,this.playerResourcesReturn.emit(this.playerResourcesTemp);const e=Math.trunc(this.chiselLvlCost/4)+Math.trunc(this.chiselLvlCost/3);this.chiselLvlCost+=e,this.economyUpCheck(),this.workerUpCheck(),this.guardUpCheck()}trainMason(){this.playerResourcesTemp.money-=this.trainStoneWorkerCost,this.playerResourcesTemp.stoneWorkerLvl++,this.playerResourcesReturn.emit(this.playerResourcesTemp);const e=Math.trunc(this.trainStoneWorkerCost/10);this.trainStoneWorkerCost+=e;const t=Math.trunc(this.stoneWorkerCost/7);this.stoneWorkerCost+=t,this.economyUpCheck(),this.workerUpCheck(),this.guardUpCheck()}trainTrader(){this.playerResourcesTemp.money-=this.trainTradeWorkerCost,this.playerResourcesTemp.tradeWorkersLvl++,this.playerResourcesReturn.emit(this.playerResourcesTemp);const e=Math.trunc(this.trainTradeWorkerCost/10);this.trainTradeWorkerCost+=e;const t=Math.trunc(this.tradeWorkerCost/7);this.tradeWorkerCost+=t,this.economyUpCheck(),this.workerUpCheck(),this.guardUpCheck()}upgradeBarter(){this.playerResourcesTemp.money-=this.barterLvlCost,this.playerResourcesTemp.barterLvl++,this.playerResourcesReturn.emit(this.playerResourcesTemp);const e=Math.trunc(this.barterLvlCost/2)+Math.trunc(this.barterLvlCost/3);this.barterLvlCost+=e,this.economyUpCheck(),this.workerUpCheck(),this.guardUpCheck()}upgradeStockpile(){this.playerResourcesTemp.money-=this.stockpileCost,this.playerResourcesTemp.stockpile+=10,this.playerResourcesTemp.stockpileLvl++,this.playerResourcesReturn.emit(this.playerResourcesTemp);const e=Math.trunc(this.stockpileCost/4);this.stockpileCost+=e,this.economyUpCheck(),this.workerUpCheck(),this.guardUpCheck()}upgradeHousing(){this.playerResourcesTemp.money-=this.housingCost,this.playerResourcesTemp.housingLimit+=8,this.playerResourcesTemp.housingLvl++,this.playerResourcesReturn.emit(this.playerResourcesTemp);const e=Math.trunc(this.housingCost/4);this.housingCost+=e,this.economyUpCheck(),this.workerUpCheck(),this.guardUpCheck()}upgradeGuardWeapon(){this.playerResourcesTemp.money-=this.guardWeaponCost,this.playerResourcesTemp.guardWeaponLvl++,this.guardCost+=50;const e=Math.trunc(this.guardWeaponCost/10);this.guardWeaponCost+=e,this.playerResourcesReturn.emit(this.playerResourcesTemp),this.economyUpCheck(),this.workerUpCheck(),this.guardUpCheck()}upgradeGuardArmor(){this.playerResourcesTemp.money-=this.guardArmorCost,this.playerResourcesTemp.guardArmorLvl++,this.guardCost+=50;const e=Math.trunc(this.guardArmorCost/10);this.guardArmorCost+=e,this.playerResourcesReturn.emit(this.playerResourcesTemp),this.economyUpCheck(),this.workerUpCheck(),this.guardUpCheck()}upgradeGuardSpeed(){this.playerResourcesTemp.money-=this.guardSpeedCost,this.playerResourcesTemp.guardSpeedLvl++,this.guardCost+=50;const e=Math.trunc(this.guardSpeedCost/10);this.guardSpeedCost+=e,this.playerResourcesReturn.emit(this.playerResourcesTemp),this.economyUpCheck(),this.workerUpCheck(),this.guardUpCheck()}calcHeightOfPage(){const e=.62*window.innerHeight,t=.0733*window.innerWidth;this.pageHeight=e+t}onResize(e){this.calcHeightOfPage()}closeHousingLimitModal(){this.isHousingFull=!1}fireWorker(e){this.displayFireWorker=!0,this.workerFired=e}deleteWorker(){"mason"===this.workerFired?(this.playerResourcesTemp.stoneWorkers.splice(this.playerResourcesTemp.stoneWorkers.length-1,1),this.playerResourcesTemp.stoneCuttersCount--,this.playerResourcesReturn.emit(this.playerResourcesTemp)):"trader"===this.workerFired&&(this.playerResourcesTemp.tradeWorkers.splice(this.playerResourcesTemp.tradeWorkers.length-1,1),this.playerResourcesTemp.tradeWorkersCount--,this.playerResourcesReturn.emit(this.playerResourcesTemp)),this.cancelFireWorker()}cancelFireWorker(){this.displayFireWorker=!1}economyUpCheck(){this.economyUpAval=this.playerResourcesTemp.money>=this.chiselLvlCost||this.playerResourcesTemp.money>=this.barterLvlCost||this.playerResourcesTemp.money>=this.stockpileCost||this.playerResourcesTemp.money>=this.housingCost}workerUpCheck(){this.workersUpAval=this.playerResourcesTemp.money>=this.stoneWorkerCost||this.playerResourcesTemp.money>=this.tradeWorkerCost||this.playerResourcesTemp.money>=this.trainStoneWorkerCost||this.playerResourcesTemp.money>=this.trainTradeWorkerCost}guardUpCheck(){this.guardsUpAval=this.playerResourcesTemp.money>=this.guardCost||this.playerResourcesTemp.money>=this.guardWeaponCost||this.playerResourcesTemp.money>=this.guardArmorCost||this.playerResourcesTemp.money>=this.guardSpeedCost}displayUpgradeMenu(e,t){this.upgradeMenuShow=!0,this.currentUpgradeStat=e,this.currentUpgradeCost=t,this.displayUpgradeDesc()}displayUpgradeDesc(){"chisel"===this.currentUpgradeStat?(this.currentUpgradeDesc="Upgrading your Chisel will help you and your Masons shape the rocks into bricks faster.",this.currentUpgradeLvl=this.playerResourcesTemp.chiselLvl,this.calcPlayerChiselDmg()):"barter"===this.currentUpgradeStat?(this.currentUpgradeDesc="Upgrading the Bartering skill will help you and your Traders sell more bricks at a better price.",this.currentUpgradeLvl=this.playerResourcesTemp.barterLvl,this.calcPlayerBarterRate(),this.calcWorkerBarterRate(),this.calcBarterSellCount()):"housing"===this.currentUpgradeStat?(this.currentUpgradeDesc="Upgrading your Housing will increase the number of rooms availiable for your workers to live and sleep.",this.currentUpgradeLvl=this.playerResourcesTemp.housingLvl):"stockpile"===this.currentUpgradeStat?(this.currentUpgradeDesc="Upgrading your Stockpile will increase the number of bricks you can store at once.",this.currentUpgradeLvl=this.playerResourcesTemp.stockpileLvl):"mason"===this.currentUpgradeStat?(this.currentUpgradeDesc="Masons will help shape the bricks for you. They will expect $2 a day as starting pay.",this.currentUpgradeLvl=this.playerResourcesTemp.stoneCuttersCount,this.calcMasonWorkload(),this.calcPlayerChiselDmg(),this.calcMasonMovementSpeed()):"trader"===this.currentUpgradeStat?(this.currentUpgradeDesc="Traders will sell the bricks for you. They will expect $2 a day as starting pay.",this.currentUpgradeLvl=this.playerResourcesTemp.tradeWorkersCount,this.calcPlayerBarterRate(),this.calcWorkerBarterRate(),this.calcBarterSellCount(),this.calcTraderMovementSpeed()):"upMason"===this.currentUpgradeStat?(this.currentUpgradeDesc="Training Masons will increase their movement speed and will work harder. They will expect $2 more a day.",this.currentUpgradeLvl=this.playerResourcesTemp.stoneWorkerLvl,this.calcUpMasonSpeed(),this.calcMasonChiselSpeed(),this.calcUpMasonChiselSpeed(),this.calcMasonWorkload(),this.calcMasonMovementSpeed()):"upTrader"===this.currentUpgradeStat?(this.currentUpgradeDesc="Training Traders will increase their movement speed and increase how much you can sell each brick for. They will expect $2 more a day.",this.currentUpgradeLvl=this.playerResourcesTemp.tradeWorkersLvl,this.calcPlayerBarterRate(),this.calcWorkerBarterRate(),this.calcBarterSellCount(),this.calcTraderMovementSpeed(),this.calcUpTraderSpeed()):"guard"===this.currentUpgradeStat?(this.currentUpgradeDesc="Guards will protect your money from any bandit trying to take it. Guards will expect a fix rate of $20 a day regardless of skills.",this.currentUpgradeLvl=this.playerResourcesTemp.guardCount):"guardWep"===this.currentUpgradeStat?(this.currentUpgradeDesc="Upgrading the weapon of the guards will increase the damage they can do.",this.currentUpgradeLvl=this.playerResourcesTemp.guardWeaponLvl):"guardArmor"===this.currentUpgradeStat?(this.currentUpgradeDesc="Upgrading the armor of your guards will increase the number of hits they can take in battle.",this.currentUpgradeLvl=this.playerResourcesTemp.guardArmorLvl):"guardSpeed"===this.currentUpgradeStat&&(this.currentUpgradeDesc="Upgrading the guards speed will increase their attack rate.",this.currentUpgradeLvl=this.playerResourcesTemp.guardSpeedLvl)}upgradeStat(){"chisel"===this.currentUpgradeStat?this.upgradeChisel():"barter"===this.currentUpgradeStat?this.upgradeBarter():"housing"===this.currentUpgradeStat?this.upgradeHousing():"stockpile"===this.currentUpgradeStat?this.upgradeStockpile():"mason"===this.currentUpgradeStat?(this.playerResourcesTemp.housingLimit>this.playerResourcesTemp.totalWorkers&&(this.statUpgraded=!0),this.hireStoneWorker()):"trader"===this.currentUpgradeStat?(this.playerResourcesTemp.housingLimit>this.playerResourcesTemp.totalWorkers&&(this.statUpgraded=!0),this.hireTradeWorker()):"upMason"===this.currentUpgradeStat?this.trainMason():"upTrader"===this.currentUpgradeStat?this.trainTrader():"guard"===this.currentUpgradeStat?(this.playerResourcesTemp.housingLimit>this.playerResourcesTemp.totalWorkers&&(this.statUpgraded=!0),this.hireGuard()):"guardWep"===this.currentUpgradeStat?this.upgradeGuardWeapon():"guardArmor"===this.currentUpgradeStat?this.upgradeGuardArmor():"guardSpeed"===this.currentUpgradeStat&&this.upgradeGuardSpeed(),"mason"!==this.currentUpgradeStat&&"trader"!==this.currentUpgradeStat&&"guard"!==this.currentUpgradeStat&&(this.statUpgraded=!0)}closeUpgradedMenu(){this.optionsSelected.soundsOn&&this.upgradeSound.play(),this.statUpgraded=!1,this.currentUpgradeStat=""}closeUpgradeMenu(){this.upgradeMenuShow=!1,this.currentUpgradeCost=0,this.currentUpgradeDesc="",this.resetStats()}resetStats(){this.chiselDmg=0,this.nextChiselDmg=0,this.playerBarterLowRate=0,this.playerBarterMaxRate=0,this.workerBarterRate=0,this.masonMaxWorkload=0,this.masonLowWorkload=0,this.masonMovementSpeed=0,this.playerMaxBrickSell=0,this.playerLowBrickSell=0,this.traderMovementSpeed=0,this.masonUpMovementSpeed=0,this.masonChiselSpeed=0,this.masonUpChiselSpeed=0,this.traderUpMovementSpeed=0}calcPlayerChiselDmg(){this.chiselDmg+=1;for(let e=0;e<this.playerResourcesTemp.chiselLvl;e++)this.chiselDmg+=.6;this.chiselDmg=+this.chiselDmg.toFixed(2),this.nextChiselDmg=+(this.chiselDmg+.6).toFixed(2)}calcPlayerBarterRate(){this.playerBarterLowRate=this.playerResourcesTemp.barterLvl+1,this.playerBarterMaxRate=this.playerBarterLowRate+2}calcWorkerBarterRate(){this.workerBarterRate=this.playerResourcesTemp.tradeWorkersLvl}calcMasonWorkload(){this.masonLowWorkload=3+this.playerResourcesTemp.stoneWorkerLvl,this.masonMaxWorkload=7+this.playerResourcesTemp.stoneWorkerLvl}calcMasonMovementSpeed(){let e=0;for(let t=0;t<this.playerResourcesTemp.stoneWorkerLvl;t++)e+=.05*this.playerResources.screenWidth;this.masonMovementSpeed=+((.5*this.playerResources.screenWidth+e)/100).toFixed(2)}calcBarterSellCount(){this.playerMaxBrickSell=1+this.playerResourcesTemp.barterLvl,this.playerLowBrickSell=1}calcTraderMovementSpeed(){let e=0;for(let t=0;t<this.playerResourcesTemp.tradeWorkersLvl;t++)e+=.05*this.playerResources.screenWidth;this.traderMovementSpeed=+((.5*this.playerResources.screenWidth+e)/100).toFixed(2)}calcUpMasonSpeed(){let e=0;for(let t=0;t<this.playerResourcesTemp.stoneWorkerLvl+1;t++)e+=.05*this.playerResources.screenWidth;this.masonUpMovementSpeed=+((.5*this.playerResources.screenWidth+e)/100).toFixed(2)}calcMasonChiselSpeed(){let e=1e3-10*this.playerResourcesTemp.stoneWorkerLvl;e<=30&&(e=30),this.masonChiselSpeed=+(1e3/e).toFixed(2)}calcUpMasonChiselSpeed(){let e=1e3-10*(this.playerResourcesTemp.stoneWorkerLvl+1);e<=30&&(e=30),this.masonUpChiselSpeed=+(1e3/e).toFixed(2)}calcUpTraderSpeed(){let e=0;for(let t=0;t<this.playerResourcesTemp.tradeWorkersLvl+1;t++)e+=.05*this.playerResources.screenWidth;this.traderUpMovementSpeed=+((.5*this.playerResources.screenWidth+e)/100).toFixed(2)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=i.Jb({type:e,selectors:[["app-upgrade-menu"]],inputs:{playerResources:"playerResources"},outputs:{stoneWorkerReturn:"stoneWorkerReturn",tradeWorkerReturn:"tradeWorkerReturn",guardReturn:"guardReturn",playerResourcesReturn:"playerResourcesReturn"},decls:53,vars:32,consts:[[1,"upgrade-wrapper",3,"resize"],[1,"display-money"],[1,"upgrade-wall-border"],[1,"upgrade-opt-title-contents"],["id","scrollbar",1,"upgrade-list"],[1,"upgrade-titles"],[1,"expansion-panel-color"],[1,"panel-titles"],[1,"upgrade-btn"],["class","upgrade-available",4,"ngIf"],["mat-raised-button","",1,"control-button","upgrade-btn",3,"disabled","click"],[1,"worker-titles"],["mat-raised-button","","class","control-button fire-btn",3,"disabled","click",4,"ngIf"],[4,"ngIf"],["class","modal",3,"click",4,"ngIf"],["class","modal",4,"ngIf"],[1,"upgrade-available"],["mat-raised-button","",1,"control-button","fire-btn",3,"disabled","click"],[1,"modal",3,"click"],[1,"info-wrapper",3,"ngClass"],["color","primary"],["id","menu-width"],[1,"info-header"],["class","info-text upgraded-text",4,"ngIf"],[1,"info-text","upgraded-text"],[1,"info-text","info-text-area"],[1,"modal"],["mat-raised-button","",1,"control-button",3,"click"],["class","info-text",4,"ngIf"],["mat-raised-button","",1,"control-button","info-text-area",3,"click"],[1,"info-text"],[1,"upgrade-green"]],template:function(e,t){1&e&&(i.Vb(0,"div",0),i.dc("resize",(function(e){return t.onResize(e)}),!1,i.uc),i.Vb(1,"p",1),i.Cc(2),i.Ub(),i.Vb(3,"div",2),i.Vb(4,"div",3),i.Vb(5,"div",4),i.Vb(6,"h2",5),i.Cc(7,"Economy Upgrades"),i.Ub(),i.Vb(8,"mat-accordion"),i.Vb(9,"mat-expansion-panel",6),i.Vb(10,"mat-expansion-panel-header",6),i.Vb(11,"mat-panel-title"),i.Vb(12,"span",7),i.Vb(13,"h4",8),i.Cc(14,"Raise base skill levels"),i.Ub(),i.Bc(15,d,2,0,"mat-icon",9),i.Ub(),i.Ub(),i.Ub(),i.Vb(16,"button",10),i.dc("click",(function(e){return t.displayUpgradeMenu("chisel",t.chiselLvlCost)})),i.Cc(17),i.Ub(),i.Vb(18,"button",10),i.dc("click",(function(e){return t.displayUpgradeMenu("barter",t.barterLvlCost)})),i.Cc(19),i.Ub(),i.Vb(20,"button",10),i.dc("click",(function(e){return t.displayUpgradeMenu("stockpile",t.stockpileCost)})),i.Cc(21),i.Ub(),i.Vb(22,"button",10),i.dc("click",(function(e){return t.displayUpgradeMenu("housing",t.housingCost)})),i.Cc(23),i.Ub(),i.Ub(),i.Ub(),i.Vb(24,"h2",5),i.Cc(25,"Hire Workers"),i.Ub(),i.Vb(26,"mat-accordion"),i.Vb(27,"mat-expansion-panel",6),i.Vb(28,"mat-expansion-panel-header",6),i.Vb(29,"mat-panel-title"),i.Vb(30,"span",7),i.Vb(31,"h4",8),i.Cc(32,"Hire and train workers"),i.Ub(),i.Bc(33,p,2,0,"mat-icon",9),i.Ub(),i.Ub(),i.Ub(),i.Vb(34,"h3",11),i.Cc(35,"Masons"),i.Ub(),i.Vb(36,"button",10),i.dc("click",(function(e){return t.displayUpgradeMenu("mason",t.stoneWorkerCost)})),i.Cc(37),i.Ub(),i.Vb(38,"button",10),i.dc("click",(function(e){return t.displayUpgradeMenu("upMason",t.trainStoneWorkerCost)})),i.Cc(39),i.Ub(),i.Bc(40,m,2,1,"button",12),i.Vb(41,"h3",11),i.Cc(42,"Traders"),i.Ub(),i.Vb(43,"button",10),i.dc("click",(function(e){return t.displayUpgradeMenu("trader",t.tradeWorkerCost)})),i.Cc(44),i.Ub(),i.Vb(45,"button",10),i.dc("click",(function(e){return t.displayUpgradeMenu("upTrader",t.trainTradeWorkerCost)})),i.Cc(46),i.Ub(),i.Bc(47,y,2,1,"button",12),i.Ub(),i.Ub(),i.Bc(48,g,19,9,"span",13),i.Ub(),i.Ub(),i.Ub(),i.Bc(49,R,8,5,"div",14),i.Bc(50,f,8,3,"div",14),i.Bc(51,w,13,3,"div",15),i.Bc(52,F,28,23,"div",14),i.Ub()),2&e&&(i.Cb(2),i.Gc("Money: $",t.playerResourcesTemp.money," | Housing: ",t.playerResourcesTemp.totalWorkers,"/",t.playerResourcesTemp.housingLimit,""),i.Cb(1),i.Ac("border-image-source","url("+t.stoneWallImagePath+")",i.Ib),i.Cb(2),i.Ac("height",t.pageHeight,"px"),i.Cb(10),i.mc("ngIf",t.economyUpAval),i.Cb(1),i.mc("disabled",t.playerResources.money<t.chiselLvlCost),i.Cb(1),i.Ec("Upgrade Chisel: $",t.chiselLvlCost,""),i.Cb(1),i.mc("disabled",t.playerResources.money<t.barterLvlCost),i.Cb(1),i.Ec("Upgrade Bartering: $",t.barterLvlCost,""),i.Cb(1),i.mc("disabled",t.playerResources.money<t.stockpileCost),i.Cb(1),i.Ec("Upgrade Stockpile: $",t.stockpileCost,""),i.Cb(1),i.mc("disabled",t.playerResources.money<t.housingCost),i.Cb(1),i.Ec("Upgrade Housing: $",t.housingCost,""),i.Cb(10),i.mc("ngIf",t.workersUpAval),i.Cb(3),i.mc("disabled",t.playerResources.money<t.stoneWorkerCost),i.Cb(1),i.Ec("Hire Mason: $",t.stoneWorkerCost,""),i.Cb(1),i.mc("disabled",0===t.playerResources.stoneWorkers.length||t.playerResources.money<t.trainStoneWorkerCost),i.Cb(1),i.Ec("Train Masons: $",t.trainStoneWorkerCost,""),i.Cb(1),i.mc("ngIf",t.playerResourcesTemp.gameLevel>=2),i.Cb(3),i.mc("disabled",t.playerResources.money<t.tradeWorkerCost),i.Cb(1),i.Ec("Hire Trader: $",t.tradeWorkerCost,""),i.Cb(1),i.mc("disabled",0===t.playerResources.tradeWorkers.length||t.playerResources.money<t.trainTradeWorkerCost),i.Cb(1),i.Ec("Train Trader: $",t.trainTradeWorkerCost,""),i.Cb(1),i.mc("ngIf",t.playerResourcesTemp.gameLevel>=2),i.Cb(1),i.mc("ngIf",t.playerResourcesTemp.gameLevel>=2),i.Cb(1),i.mc("ngIf",t.statUpgraded),i.Cb(1),i.mc("ngIf",t.isHousingFull),i.Cb(1),i.mc("ngIf",t.displayFireWorker),i.Cb(1),i.mc("ngIf",t.upgradeMenuShow))},directives:[l.a,l.c,l.d,l.e,r.k,n.a,c.a,r.i,u.a],styles:[".upgrade-wrapper[_ngcontent-%COMP%]{width:100%;height:100%;min-width:100%;min-height:100%;overflow:hidden;position:fixed;top:calc(2.6% + 5.43rem);background-color:#228b22}.upgrade-list[_ngcontent-%COMP%]{width:100%;overflow:auto;height:24em}.upgrade-btn[_ngcontent-%COMP%]{display:inline-block!important}.display-money[_ngcontent-%COMP%]{font-weight:700;text-align:center;margin-bottom:.3em;font-size:calc(100% + .1rem)}.info-dm[_ngcontent-%COMP%]{background-color:#606060}.upgrade-titles[_ngcontent-%COMP%], .worker-titles[_ngcontent-%COMP%]{text-align:center;padding:0;margin:.4em 0 .2em;display:inline-block;width:76%}.upgrade-available[_ngcontent-%COMP%]{font-size:21px;width:19px;height:21px;color:gold;vertical-align:text-bottom}.worker-titles[_ngcontent-%COMP%]{width:100%!important;text-indent:0!important}.fire-btn[_ngcontent-%COMP%]{width:99.4%!important;display:inline-block!important;background-color:#f44336!important}.upgrade-wall-border[_ngcontent-%COMP%]{border-image-repeat:repeat;border-image-width:auto;width:100%;border-bottom:1.1rem solid transparent!important;border-image-slice:15;background-color:#228b22;height:calc(100% - 10rem);margin:0 auto}.upgrade-opt-title-contents[_ngcontent-%COMP%]{padding:1.5rem}.upgrade-green[_ngcontent-%COMP%]{color:#8adc41}.upgraded-text[_ngcontent-%COMP%]{font-size:1.2rem;font-weight:700}.mat-toolbar[_ngcontent-%COMP%]{background-color:silver}@media only screen and (min-width:320px){.upgrade-titles[_ngcontent-%COMP%], .worker-titles[_ngcontent-%COMP%]{width:100%}.upgrade-opt-title-contents[_ngcontent-%COMP%]{padding:.98rem}.upgrade-wall-border[_ngcontent-%COMP%]{height:calc(100% - 9.8rem)}}@media only screen and (min-width:360px){.upgrade-titles[_ngcontent-%COMP%], .worker-titles[_ngcontent-%COMP%]{width:100%}.upgrade-opt-title-contents[_ngcontent-%COMP%]{padding:1.2rem}.upgrade-wall-border[_ngcontent-%COMP%]{height:calc(100% - 9.9rem)}}@media only screen and (min-width:375px){.upgrade-titles[_ngcontent-%COMP%], .worker-titles[_ngcontent-%COMP%]{width:100%}.upgrade-opt-title-contents[_ngcontent-%COMP%]{padding:1.2rem}.upgrade-wall-border[_ngcontent-%COMP%]{height:calc(100% - 10rem)}}@media only screen and (min-width:411px){.upgrade-titles[_ngcontent-%COMP%], .worker-titles[_ngcontent-%COMP%]{width:100%}.upgrade-opt-title-contents[_ngcontent-%COMP%]{padding:1.2rem}.upgrade-wall-border[_ngcontent-%COMP%]{height:calc(100% - 10.1rem)}}@media only screen and (min-width:414px){.upgrade-titles[_ngcontent-%COMP%], .worker-titles[_ngcontent-%COMP%]{width:100%}.upgrade-opt-title-contents[_ngcontent-%COMP%]{padding:1.2rem}.upgrade-wall-border[_ngcontent-%COMP%]{height:calc(100% - 10rem)}}@media only screen and (min-width:768px){.upgrade-titles[_ngcontent-%COMP%], .worker-titles[_ngcontent-%COMP%]{width:100%}.upgrade-opt-title-contents[_ngcontent-%COMP%]{padding:1.2rem}.upgrade-wall-border[_ngcontent-%COMP%]{height:calc(100% - 10.3rem)}}@media only screen and (min-width:1024px)and (min-height:1366px){.upgrade-wall-border[_ngcontent-%COMP%]{height:calc(100% - 11rem)}.upgrade-wrapper[_ngcontent-%COMP%]{top:calc(2.6% + 5.06rem)}}"]}),e})();const $=["canvas"];function N(e,t){1&e&&(i.Vb(0,"p",6),i.Cc(1,"Worker's Payday In 10 Seconds"),i.Ub())}function j(e,t){if(1&e&&(i.Vb(0,"p",7),i.Cc(1),i.Ub()),2&e){const e=i.hc();i.Cb(1),i.Ec("Worker's Payday -$",e.workerPayday,"")}}function Q(e,t){1&e&&(i.Vb(0,"p",8),i.Cc(1,"Your Rating Took A Hit..."),i.Ub())}let J=(()=>{class e{constructor(e){this.ngZone=e,this.playerResourcesTemp={chiselLvl:0,money:0,bricks:0,clicks:0,barterLvl:0,tradeWorkers:[],tradeWorkersCount:0,tradeWorkersLvl:0,stoneWorkers:[],stoneCuttersCount:0,stoneWorkerLvl:0,guards:[],guardCount:0,guardWeaponLvl:0,guardArmorLvl:0,guardSpeedLvl:0,dayCounter:0,daysPast:0,version:.5,totalClicks:0,totalBricks:0,totalMoney:0,newPlayer:!0,quests:{questLvl:0,questDesc:"",questReward:0,completed:!1,quest:{complete:!1,chiselLvl:0,barterLvl:0,masons:0,masonLvl:0,traders:0,traderLvl:0}},sky:{sun:{x:0,y:0},moon:{x:0,y:0}},housingLimit:0,housingLvl:0,totalWorkers:0,stockpile:0,stockpileLvl:0,screenWidth:0,screenChange:!1,gameLevel:1,currentChapter:"",newPlayerVault:!0,banditWave:0,bandits:[],banditWaveCounter:0,banditSpawnCount:0,isBanditWaveStarted:!1,moneyTaken:0,credit:3,banditsStopped:0,totalGuards:0,tutorialGuards:0},this.playerResourcesReturn=new i.o,this.stone1=new Image,this.stone2=new Image,this.stone3=new Image,this.stone4=new Image,this.rockHit=new Image,this.stoneWorkerImg=new Image,this.tradeWorkerImg=new Image,this.grassMorningImg=new Image,this.grassAfternoonImg=new Image,this.grassEveningImg=new Image,this.sunImg=new Image,this.moonImg=new Image,this.stoneHP=Math.floor(10*Math.random())+10,this.addStoneSoundPath="assets/sounds/add_stone.wav",this.addStoneSound=new Audio,this.sellSoundPath="assets/sounds/sell.wav",this.sellSound=new Audio,this.currentStone={image:this.stone1,hitpoints:this.stoneHP},this.hits=0,this.stoneWorkerFreq=Math.floor(5*Math.random())+1,this.tradeWorkerFreq=Math.floor(5*Math.random())+1,this.workPayCounter=0,this.isWorking=!0,this.totalWorkers=0,this.chiselDmg=0,this.bartering=0,this.stoneWorkerSpeed=0,this.tradeWorkerSpeed=0,this.chiselClicked=!1,this.workerPayday=0,this.displayPayday=!1,this.displayCreditHit=!1,this.optionsSelected={darkMode:!1,soundsOn:!0},this.stars=[],this.starLight=0}get playerResources(){return this.playerResourcesTemp}set playerResources(e){this.playerResourcesTemp=e,this.chiselStone(this.playerResourcesTemp.clicks)}ngOnInit(){if(this.addStoneSound.src=this.addStoneSoundPath,this.addStoneSound.load(),this.sellSound.src=this.sellSoundPath,this.sellSound.load(),localStorage.length>0&&localStorage.getItem("mason_options")){const e=JSON.parse(localStorage.getItem("mason_options"));this.optionsSelected={darkMode:e.darkMode,soundsOn:e.soundsOn};const t=document.getElementsByTagName("body");this.optionsSelected.darkMode?t[0].classList.add("darkMode"):t[0].classList.remove("darkMode")}else{document.getElementsByTagName("body")[0].classList.add("darkMode");const e=JSON.stringify(this.optionsSelected);localStorage.setItem("mason_options",e)}this.stone1.src="./assets/images/rock1.png",this.stone2.src="./assets/images/rock2.png",this.stone3.src="./assets/images/rock3.png",this.stone4.src="./assets/images/rock4.png",this.rockHit.src="./assets/images/rockChiseled.png",this.stoneWorkerImg.src="./assets/images/stoneWorker.png",this.tradeWorkerImg.src="./assets/images/tradeWorker.png",this.grassEveningImg.src="./assets/images/grass1.png",this.grassMorningImg.src="./assets/images/grass2.png",this.grassAfternoonImg.src="./assets/images/grass2.png",this.sunImg.src="./assets/images/sunImage.png",this.moonImg.src="./assets/images/moonImage.png",this.ctx=this.canvas.nativeElement.getContext("2d"),this.ctx.canvas.width=1*window.innerWidth,this.ctx.canvas.height=.5*window.innerHeight,this.objectSizeHeight=.01*this.ctx.canvas.height,this.objectSize=this.objectSizeHeight,this.starCount=Math.abs(this.ctx.canvas.width/15),this.getStars(),this.stone1.onload=()=>{this.getStoneWorkerWorkTime(),this.getTradeWorkerWorkTime(),this.getWorkerPayment(),this.resetStone(),0===this.playerResourcesTemp.sky.sun.x&&0===this.playerResourcesTemp.sky.sun.y&&(this.playerResourcesTemp.sky.sun.x=.49*this.ctx.canvas.width,this.playerResourcesTemp.sky.sun.y=.74*this.ctx.canvas.height),0===this.playerResourcesTemp.sky.moon.x&&0===this.playerResourcesTemp.sky.moon.y&&(this.playerResourcesTemp.sky.moon.x=.49*this.ctx.canvas.width,this.playerResourcesTemp.sky.moon.y=.74*this.ctx.canvas.height),this.playerResourcesReturn.emit(this.playerResourcesTemp),this.playerResourcesTemp.stoneWorkers.length>0&&this.playerResourcesTemp.stoneWorkers.forEach(e=>{e.startPos=Math.floor(2*Math.random()),e.workLoad=Math.floor(5*Math.random())+3+this.playerResourcesTemp.stoneWorkerLvl,e.image=this.stoneWorkerImg,0===e.startPos?(e.x=-25*this.ctx.canvas.width/100,e.y=80*this.ctx.canvas.height/100,e.direction=0):1===e.startPos&&(e.x=125*this.ctx.canvas.width/100,e.y=80*this.ctx.canvas.height/100,e.direction=1)}),this.playerResourcesTemp.tradeWorkers.length>0&&this.playerResourcesTemp.tradeWorkers.forEach(e=>{e.startPos=Math.floor(2*Math.random()),e.image=this.tradeWorkerImg,0===e.startPos?(e.x=-25*this.ctx.canvas.width/100,e.y=50*this.ctx.canvas.height/100,e.direction=0):1===e.startPos&&(e.x=125*this.ctx.canvas.width/100,e.y=50*this.ctx.canvas.height/100,e.direction=1)}),this.chiselClicked=!1,this.getAllWorkers(this.playerResourcesTemp.stoneWorkers,this.playerResourcesTemp.tradeWorkers);for(let e=0;e<this.playerResourcesTemp.chiselLvl;e++)this.chiselDmg+=.6;for(let e=0;e<this.playerResourcesTemp.stoneWorkerLvl;e++)this.stoneWorkerSpeed+=.05*this.ctx.canvas.width;for(let e=0;e<this.playerResourcesTemp.tradeWorkersLvl;e++)this.tradeWorkerSpeed+=.05*this.ctx.canvas.width;for(let e=0;e<this.playerResourcesTemp.barterLvl;e++)this.bartering+=1;this.workPayCounter=this.playerResourcesTemp.dayCounter,this.totalWorkers=this.playerResourcesTemp.totalWorkers}}ngOnDestroy(){this.sellSound=new Audio,this.addStoneSound=new Audio,this.isWorking=!1,clearInterval(this.gameInterval),clearInterval(this.workPayInterval),clearInterval(this.tradeWorksWorkInterval),clearInterval(this.stoneCutterWorkInterval),cancelAnimationFrame(this.requestGameAnimatId)}drawBackground(){this.playerResourcesTemp.dayCounter<=40?this.playerResourcesTemp.dayCounter<=33?this.ctx.fillStyle="#0000FF":this.playerResourcesTemp.dayCounter>=34&&this.playerResourcesTemp.dayCounter<=36?this.ctx.fillStyle="#0000F3":this.playerResourcesTemp.dayCounter>=37&&this.playerResourcesTemp.dayCounter<=39?this.ctx.fillStyle="#0000E6":this.playerResourcesTemp.dayCounter>=40&&(this.ctx.fillStyle="#0000DA"):this.playerResourcesTemp.dayCounter>=41&&this.playerResourcesTemp.dayCounter<79?this.playerResourcesTemp.dayCounter<=70?this.ctx.fillStyle="#0000CD":this.playerResourcesTemp.dayCounter>=71&&this.playerResourcesTemp.dayCounter<=73?this.ctx.fillStyle="#0000BD":this.playerResourcesTemp.dayCounter>=74&&this.playerResourcesTemp.dayCounter<=76?this.ctx.fillStyle="#0000AC":this.playerResourcesTemp.dayCounter>=77&&(this.ctx.fillStyle="#00009C"):this.playerResourcesTemp.dayCounter>=79&&(this.playerResourcesTemp.dayCounter<=115?this.ctx.fillStyle="#00008B":this.playerResourcesTemp.dayCounter>=116&&this.playerResourcesTemp.dayCounter<=117?this.ctx.fillStyle="#0000A8":this.playerResourcesTemp.dayCounter>=118&&this.playerResourcesTemp.dayCounter<=119?this.ctx.fillStyle="#0000C5":this.playerResourcesTemp.dayCounter>=120&&(this.ctx.fillStyle="#0000E2")),this.ctx.fillRect(0,this.ctx.canvas.height/2*-1,this.ctx.canvas.width,this.ctx.canvas.height),this.playerResourcesTemp.dayCounter>=79&&this.playerResourcesTemp.dayCounter<=117?this.drawStars(this.stars):this.getStars(),this.ctx.drawImage(this.sunImg,this.playerResourcesTemp.sky.sun.x-.18*this.ctx.canvas.height,this.playerResourcesTemp.sky.sun.y+-.055*this.ctx.canvas.width,40*this.objectSize,40*this.objectSize),this.ctx.drawImage(this.moonImg,this.playerResourcesTemp.sky.moon.x-.15*this.ctx.canvas.height,this.playerResourcesTemp.sky.moon.y+-.055*this.ctx.canvas.width,35*this.objectSize,35*this.objectSize),this.drawSky(),this.playerResourcesTemp.dayCounter<=40?this.playerResourcesTemp.dayCounter<=36?this.ctx.fillStyle="#228B22":this.playerResourcesTemp.dayCounter>=37&&this.playerResourcesTemp.dayCounter<=38?this.ctx.fillStyle="#1A881A":this.playerResourcesTemp.dayCounter>=39&&this.playerResourcesTemp.dayCounter<=40&&(this.ctx.fillStyle="#118611"):this.playerResourcesTemp.dayCounter>=41&&this.playerResourcesTemp.dayCounter<79?this.playerResourcesTemp.dayCounter<=74?this.ctx.fillStyle="#008000":this.playerResourcesTemp.dayCounter>=75&&this.playerResourcesTemp.dayCounter<=76?this.ctx.fillStyle="#007900":this.playerResourcesTemp.dayCounter>=77&&this.playerResourcesTemp.dayCounter<=78&&(this.ctx.fillStyle="#007200"):this.playerResourcesTemp.dayCounter>=79&&(this.playerResourcesTemp.dayCounter<=116?this.ctx.fillStyle="#006400":this.playerResourcesTemp.dayCounter>=117&&this.playerResourcesTemp.dayCounter<=118?this.ctx.fillStyle="#096E09":this.playerResourcesTemp.dayCounter>=119&&this.playerResourcesTemp.dayCounter<=120&&(this.ctx.fillStyle="#117811")),this.ctx.fillRect(0,this.ctx.canvas.height/2,this.ctx.canvas.width,this.ctx.canvas.height),this.drawGrass(),this.ctx.drawImage(this.currentStone.image,.49*this.ctx.canvas.width-.129*this.ctx.canvas.height,.65*this.ctx.canvas.height,30*this.objectSize,30*this.objectSize),this.chiselClicked&&this.playerChiseled()}drawGrass(){if(this.playerResourcesTemp.dayCounter<=37){const e=this.ctx.createPattern(this.grassMorningImg,"repeat");this.ctx.fillStyle=e,this.ctx.fillRect(0,this.ctx.canvas.height/2,this.ctx.canvas.width,this.ctx.canvas.height)}else if(this.playerResourcesTemp.dayCounter>=38&&this.playerResourcesTemp.dayCounter<77){const e=this.ctx.createPattern(this.grassAfternoonImg,"repeat");this.ctx.fillStyle=e,this.ctx.fillRect(0,this.ctx.canvas.height/2,this.ctx.canvas.width,this.ctx.canvas.height)}else if(this.playerResourcesTemp.dayCounter>=77&&this.playerResourcesTemp.dayCounter<119){const e=this.ctx.createPattern(this.grassEveningImg,"repeat");this.ctx.fillStyle=e,this.ctx.fillRect(0,this.ctx.canvas.height/2,this.ctx.canvas.width,this.ctx.canvas.height)}else if(this.playerResourcesTemp.dayCounter>=119&&this.playerResourcesTemp.dayCounter<=120){const e=this.ctx.createPattern(this.grassMorningImg,"repeat");this.ctx.fillStyle=e,this.ctx.fillRect(0,this.ctx.canvas.height/2,this.ctx.canvas.width,this.ctx.canvas.height)}}playerChiseled(){const e=.1*Math.floor(3*Math.random()+4),t=.1*Math.floor(3*Math.random()+6);this.ctx.drawImage(this.rockHit,this.ctx.canvas.width*e+-.1*this.ctx.canvas.height,this.ctx.canvas.height*t+-.055*this.ctx.canvas.height,25*this.objectSize,25*this.objectSize)}chiselStone(e){if(e+=this.chiselDmg,this.playerResourcesTemp.bricks<this.playerResourcesTemp.stockpile){if(this.chiselClicked=!0,e>=Math.trunc(this.currentStone.hitpoints/4)&&0===this.hits&&this.ctx&&(this.currentStone.image=this.stone2,this.hits++,e>Math.trunc(this.currentStone.hitpoints/3)+Math.trunc(this.currentStone.hitpoints/3)&&this.hits++),e>Math.trunc(this.currentStone.hitpoints/3)&&1===this.hits&&this.ctx&&(this.currentStone.image=this.stone3,e>Math.trunc(this.currentStone.hitpoints/2)+Math.trunc(this.currentStone.hitpoints/4)&&this.hits++),e>Math.trunc(this.currentStone.hitpoints/2)&&2===this.hits&&this.ctx&&(this.currentStone.image=this.stone4,e>=Math.trunc(this.currentStone.hitpoints)&&this.hits++),e>=Math.trunc(this.currentStone.hitpoints)&&3===this.hits){this.playerResourcesTemp.bricks+=1,this.playerResourcesTemp.totalBricks+=1,this.optionsSelected.soundsOn&&!this.isGuardMoneyView&&this.addStoneSound.play(),document.getElementById("bricks").style.color="#8ADC41";const e=setInterval(()=>{document.getElementById("bricks")?(document.getElementById("bricks").style.color="#fff",clearInterval(e)):clearInterval(e)},350);this.resetStone()}const t=setInterval(()=>{this.chiselClicked=!1,clearInterval(t)},100)}}sellStone(){let e=Math.floor(Math.random()*(this.bartering+1))+1;if(e>=this.playerResourcesTemp.bricks&&(e=this.playerResourcesTemp.bricks),this.playerResourcesTemp.bricks>0){this.playerResourcesTemp.bricks<=e&&(this.playerResourcesTemp.bricks=e);const t=(Math.floor(Math.random()*(this.bartering+3+this.playerResources.tradeWorkersLvl))+(1+this.bartering+this.playerResources.tradeWorkersLvl))*e;this.playerResourcesTemp.money+=t,this.playerResourcesTemp.totalMoney+=t,this.playerResourcesTemp.bricks-=e,this.playerResourcesReturn.emit(this.playerResourcesTemp),this.optionsSelected.soundsOn&&!this.isGuardMoneyView&&this.sellSound.play(),document.getElementById("money").style.color="#8ADC41";const s=setInterval(()=>{document.getElementById("money")?(document.getElementById("money").style.color=this.playerResourcesTemp.money>=0?"#fff":"red",clearInterval(s)):clearInterval(s)},350)}else this.playerResourcesTemp.bricks<0&&(this.playerResourcesTemp.bricks=0,this.playerResourcesReturn.emit(this.playerResourcesTemp))}resetStone(){this.playerResourcesTemp.clicks=0,this.playerResourcesReturn.emit(this.playerResourcesTemp),this.stoneHP=Math.floor(10*Math.random())+10,this.currentStone.image=this.stone1,this.currentStone.hitpoints=this.stoneHP,this.hits=0}getStoneWorkerWorkTime(){this.stoneCutterWorkInterval=setInterval(()=>{!1===this.playerResourcesTemp.newPlayer&&(this.stoneWorkerFreq=Math.floor(5*Math.random())+1)},2500)}drawWorker(e){this.ctx.drawImage(e.image,e.x,e.y,15*this.objectSize,15*this.objectSize)}getAllWorkers(e,t){this.ngZone.runOutsideAngular(()=>this.gameTicks(e,t)),this.gameInterval=setInterval(()=>{this.gameTicks(e,t)},1e3/33)}gameTicks(e,t){this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.drawBackground(),t.forEach(e=>{(this.tradeWorkerFreq===e.frequency&&this.playerResourcesTemp.bricks>0||!0===e.startedWork)&&(0===e.startPos&&(0===e.direction&&e.x<.48*this.ctx.canvas.width-.129*this.ctx.canvas.height?(e.x+=(.5*this.ctx.canvas.width+this.tradeWorkerSpeed)/100,e.startedWork=!0,e.x>.48*this.ctx.canvas.width-.129*this.ctx.canvas.height&&(e.direction=1)):1===e.direction&&(e.x>=-25*this.ctx.canvas.width/100?e.x-=(.5*this.ctx.canvas.width+this.tradeWorkerSpeed)/100:(e.startedWork=!1,e.startPos=0,e.direction=0,this.sellStone(),this.playerResourcesReturn.emit(this.playerResourcesTemp)))),1===e.startPos&&(1===e.direction&&e.x>=.5*this.ctx.canvas.width?(e.x-=(.5*this.ctx.canvas.width+this.tradeWorkerSpeed)/100,e.startedWork=!0,e.x<.5*this.ctx.canvas.width&&(e.direction=0)):0===e.direction&&(e.x<=125*this.ctx.canvas.width/100?e.x+=(.5*this.ctx.canvas.width+this.tradeWorkerSpeed)/100:(e.startedWork=!1,e.startPos=1,e.direction=1,this.sellStone())))),this.drawWorker(e)}),e.forEach(e=>{if(this.stoneWorkerFreq===e.frequency||!0===e.startedWork){if(0===e.startPos)if(0===e.direction&&e.x<.48*this.ctx.canvas.width-.129*this.ctx.canvas.height){if(e.x+=(.5*this.ctx.canvas.width+this.stoneWorkerSpeed)/100,e.startedWork=!0,e.x>.48*this.ctx.canvas.width-.129*this.ctx.canvas.height){for(let e=0;e<this.playerResourcesTemp.chiselLvl;e++)this.playerResourcesTemp.clicks+=.6;let t=1e3-10*this.playerResourcesTemp.stoneWorkerLvl;t<=30&&(t=30);const s=setInterval(()=>{this.isWorking&&!0===e.startedWork?(e.workLoad--,this.playerResourcesTemp.clicks+=1,this.chiselStone(this.playerResourcesTemp.clicks),e.workLoad<=0&&(e.direction=1,clearInterval(s)),this.playerResourcesReturn.emit(this.playerResourcesTemp)):clearInterval(s)},t)}}else 1===e.direction&&(e.x>=-25*this.ctx.canvas.width/100?e.x-=(.5*this.ctx.canvas.width+this.stoneWorkerSpeed)/100:(e.startedWork=!1,e.startPos=0,e.direction=0,e.workLoad=Math.floor(5*Math.random())+3+this.playerResourcesTemp.stoneWorkerLvl));if(1===e.startPos)if(1===e.direction&&e.x>=.5*this.ctx.canvas.width){if(e.x-=(.5*this.ctx.canvas.width+this.stoneWorkerSpeed)/100,e.startedWork=!0,e.x<.5*this.ctx.canvas.width){for(let e=0;e<this.playerResourcesTemp.chiselLvl;e++)this.playerResourcesTemp.clicks+=.6;let t=1e3-10*this.playerResourcesTemp.stoneWorkerLvl;t<=30&&(t=30);const s=setInterval(()=>{this.isWorking&&!0===e.startedWork?(e.workLoad--,this.playerResourcesTemp.clicks+=1,this.chiselStone(this.playerResourcesTemp.clicks),e.workLoad<=0&&(e.direction=0,clearInterval(s)),this.playerResourcesReturn.emit(this.playerResourcesTemp)):clearInterval(s)},t)}}else 0===e.direction&&(e.x<=125*this.ctx.canvas.width/100?e.x+=(.5*this.ctx.canvas.width+this.stoneWorkerSpeed)/100:(e.startedWork=!1,e.startPos=1,e.direction=1,e.workLoad=Math.floor(5*Math.random())+3+this.playerResourcesTemp.stoneWorkerLvl))}this.drawWorker(e)}),this.requestGameAnimatId=requestAnimationFrame(()=>this.gameTicks)}getTradeWorkerWorkTime(){this.tradeWorksWorkInterval=setInterval(()=>{!1===this.playerResourcesTemp.newPlayer&&(this.tradeWorkerFreq=Math.floor(5*Math.random())+1)},2500)}getWorkerPayment(){let e=!1;this.workPayInterval=setInterval(()=>{if(!1===this.playerResourcesTemp.newPlayer&&(this.workPayCounter++,this.playerResourcesTemp.dayCounter=this.workPayCounter,this.playerResourcesReturn.emit(this.playerResourcesTemp),this.workPayCounter>=120)){const t=this.playerResourcesTemp.stoneWorkers.length*(2*this.playerResourcesTemp.stoneWorkerLvl+2),s=this.playerResourcesTemp.tradeWorkers.length*(2*this.playerResourcesTemp.tradeWorkersLvl+2),r=20*this.playerResourcesTemp.totalGuards;if(this.workerPayday=t+s+r,this.playerResourcesTemp.money-=t+s+r,this.playerResourcesTemp.daysPast++,this.workPayCounter=0,this.playerResourcesTemp.dayCounter=0,this.playerResourcesTemp.totalWorkers>0){document.getElementById("money").style.color="#F7461F";const e=setInterval(()=>{document.getElementById("money")?(document.getElementById("money").style.color=this.playerResourcesTemp.money>=0?"#fff":"red",clearInterval(e)):clearInterval(e)},1500)}if(this.playerResourcesTemp.money<0&&(e=!0,this.playerResourcesTemp.credit--),this.playerResourcesReturn.emit(this.playerResourcesTemp),this.playerResourcesTemp.stoneWorkers.length>0||this.playerResourcesTemp.tradeWorkers.length>0){this.displayPayday=!0;const t=setInterval(()=>{if(this.displayPayday=!1,e){this.displayCreditHit=!0;const e=setInterval(()=>{this.displayCreditHit=!1,clearInterval(e)},5e3)}clearInterval(t)},5e3)}}},1e3)}drawSky(){this.playerResourcesTemp.dayCounter<=50&&this.playerResourcesTemp.dayCounter>0?(this.playerResourcesTemp.sky.sun.y+=-58e-5*this.ctx.canvas.height+-16e-5*this.ctx.canvas.height,this.playerResourcesTemp.sky.sun.x=.49*this.ctx.canvas.width,this.playerResourcesTemp.sky.moon.x=.49*this.ctx.canvas.width,this.playerResourcesTemp.sky.moon.y=.74*this.ctx.canvas.height):this.playerResourcesTemp.dayCounter>=51&&this.playerResourcesTemp.dayCounter<79?(this.playerResourcesTemp.sky.sun.x=.49*this.ctx.canvas.width,this.playerResourcesTemp.sky.sun.y=.74*this.ctx.canvas.height,this.playerResourcesTemp.sky.moon.x=.49*this.ctx.canvas.width,this.playerResourcesTemp.sky.moon.y=.74*this.ctx.canvas.height):this.playerResourcesTemp.dayCounter>=79&&(this.playerResourcesTemp.sky.moon.y+=-58e-5*this.ctx.canvas.height+-16e-5*this.ctx.canvas.height,this.playerResourcesTemp.sky.moon.x=.49*this.ctx.canvas.width,this.playerResourcesTemp.sky.sun.x=.49*this.ctx.canvas.width,this.playerResourcesTemp.sky.sun.y=.74*this.ctx.canvas.height)}drawStars(e){const t=setInterval(()=>{this.playerResourcesTemp.dayCounter>=78&&this.playerResourcesTemp.dayCounter<=79?(this.starLight+=.1,this.starLight>=1&&(this.starLight=1)):this.playerResourcesTemp.dayCounter<=115&&(this.starLight=1),this.playerResourcesTemp.dayCounter>=116&&this.playerResourcesTemp.dayCounter<=117&&(this.starLight-=.1,this.starLight<=0&&(this.starLight=0)),clearInterval(t)},100);for(let s=0;s<e.length;s++)this.ctx.beginPath(),this.ctx.arc(e[s].x,e[s].y,e[s].radius,0,2*Math.PI,!1),this.ctx.fillStyle="rgba(255, 255, 255, "+this.starLight+")",this.ctx.fill(),this.ctx.lineWidth=2,this.ctx.strokeStyle="rgba(255, 255, 255, "+this.starLight+")",this.ctx.stroke()}getStars(){this.stars=[];for(let e=0;e<this.starCount;e++){const e={x:0,y:0,radius:0};e.x=Math.floor(Math.random()*this.ctx.canvas.width)+1,e.y=Math.floor(Math.random()*(this.ctx.canvas.height/2))+1,e.radius=.1*this.objectSize,this.stars.push(e)}}onResize(e){this.newResizePositions(),this.objectSizeHeight=.01*this.ctx.canvas.height,this.objectSize=this.objectSizeHeight,this.starCount=Math.abs(this.ctx.canvas.width/15),this.getStars(),this.stoneWorkerSpeed=0,this.tradeWorkerSpeed=0;for(let t=0;t<this.playerResourcesTemp.stoneWorkerLvl;t++)this.stoneWorkerSpeed+=.05*this.ctx.canvas.width;for(let t=0;t<this.playerResourcesTemp.tradeWorkersLvl;t++)this.tradeWorkerSpeed+=.05*this.ctx.canvas.width}newResizePositions(){this.playerResourcesTemp.stoneWorkers.forEach(e=>{e.x=e.x/this.ctx.canvas.width,e.y=e.y/this.ctx.canvas.height}),this.playerResourcesTemp.tradeWorkers.forEach(e=>{e.x=e.x/this.ctx.canvas.width,e.y=e.y/this.ctx.canvas.height}),this.playerResourcesTemp.sky.sun.x=this.playerResourcesTemp.sky.sun.x/this.ctx.canvas.width,this.playerResourcesTemp.sky.sun.y=this.playerResourcesTemp.sky.sun.y/this.ctx.canvas.height,this.playerResourcesTemp.sky.moon.x=this.playerResourcesTemp.sky.moon.x/this.ctx.canvas.width,this.playerResourcesTemp.sky.moon.y=this.playerResourcesTemp.sky.moon.y/this.ctx.canvas.height,this.ctx.canvas.width=1*window.innerWidth,this.ctx.canvas.height=.5*window.innerHeight,this.playerResourcesTemp.stoneWorkers.forEach(e=>{e.x=e.x*this.ctx.canvas.width,e.y=e.y*this.ctx.canvas.height}),this.playerResourcesTemp.tradeWorkers.forEach(e=>{e.x=e.x*this.ctx.canvas.width,e.y=e.y*this.ctx.canvas.height}),this.playerResourcesTemp.sky.sun.x=this.playerResourcesTemp.sky.sun.x*this.ctx.canvas.width,this.playerResourcesTemp.sky.sun.y=this.playerResourcesTemp.sky.sun.y*this.ctx.canvas.height,this.playerResourcesTemp.sky.moon.x=this.playerResourcesTemp.sky.moon.x*this.ctx.canvas.width,this.playerResourcesTemp.sky.moon.y=this.playerResourcesTemp.sky.moon.y*this.ctx.canvas.height}}return e.\u0275fac=function(t){return new(t||e)(i.Pb(i.A))},e.\u0275cmp=i.Jb({type:e,selectors:[["app-stone-cutter-view"]],viewQuery:function(e,t){var s;1&e&&i.zc($,!0),2&e&&i.rc(s=i.ec())&&(t.canvas=s.first)},inputs:{playerResources:"playerResources",isGuardMoneyView:"isGuardMoneyView"},outputs:{playerResourcesReturn:"playerResourcesReturn"},decls:6,vars:3,consts:[[1,"stone-view-wrapper",3,"resize"],["class","workers-payday-warning",4,"ngIf"],["class","workers-payday",4,"ngIf"],["class","credit-hit",4,"ngIf"],["id","canvas"],["canvas",""],[1,"workers-payday-warning"],[1,"workers-payday"],[1,"credit-hit"]],template:function(e,t){1&e&&(i.Vb(0,"div",0),i.dc("resize",(function(e){return t.onResize(e)}),!1,i.uc),i.Bc(1,N,2,0,"p",1),i.Bc(2,j,2,1,"p",2),i.Bc(3,Q,2,0,"p",3),i.Qb(4,"canvas",4,5),i.Ub()),2&e&&(i.Cb(1),i.mc("ngIf",t.totalWorkers>0&&t.workPayCounter>=110&&t.workPayCounter<=114),i.Cb(1),i.mc("ngIf",t.displayPayday),i.Cb(1),i.mc("ngIf",t.displayCreditHit))},directives:[r.k],styles:["#canvas[_ngcontent-%COMP%]{display:block;margin:0 auto}.credit-hit[_ngcontent-%COMP%]{position:absolute;top:calc(20% + 1.4em);text-align:center;width:100%;color:red;font-weight:bolder}.workers-payday-warning[_ngcontent-%COMP%]{background-color:#606060}"]}),e})();const Y=["canvasGuardMoney"];function X(e,t){1&e&&(i.Vb(0,"p",4),i.Cc(1,"Worker's Payday In 10 Seconds"),i.Ub())}let Z=(()=>{class e{constructor(e){this.ngZone=e,this.playerResourcesTemp={chiselLvl:0,money:0,bricks:0,clicks:0,barterLvl:0,tradeWorkers:[],tradeWorkersCount:0,tradeWorkersLvl:0,stoneWorkers:[],stoneCuttersCount:0,stoneWorkerLvl:0,guards:[],guardCount:0,guardWeaponLvl:0,guardArmorLvl:0,guardSpeedLvl:0,dayCounter:0,daysPast:0,version:.5,totalClicks:0,totalBricks:0,totalMoney:0,newPlayer:!0,quests:{questLvl:0,questDesc:"",questReward:0,completed:!1,quest:{complete:!1,chiselLvl:0,barterLvl:0,masons:0,masonLvl:0,traders:0,traderLvl:0}},sky:{sun:{x:0,y:0},moon:{x:0,y:0}},housingLimit:0,housingLvl:0,totalWorkers:0,stockpile:0,stockpileLvl:0,screenWidth:0,screenChange:!1,gameLevel:1,currentChapter:"",newPlayerVault:!0,banditWave:0,bandits:[],banditWaveCounter:0,banditSpawnCount:0,isBanditWaveStarted:!1,moneyTaken:0,credit:3,banditsStopped:0,totalGuards:0,tutorialGuards:0},this.playerResourcesReturn=new i.o,this.stars=[],this.starLight=0,this.vaultImg=new Image,this.guardImg=new Image,this.banditImg=new Image,this.combatHit=new Image,this.grassMorningImg=new Image,this.grassAfternoonImg=new Image,this.grassEveningImg=new Image,this.combatSound1Path="assets/sounds/sword_clang1.wav",this.combatSound1=new Audio,this.combatSound2Path="assets/sounds/sword_clang2.wav",this.combatSound2=new Audio,this.optionsSelected={darkMode:!1,soundsOn:!0}}set playerResources(e){this.playerResourcesTemp=e}ngOnInit(){if(localStorage.length>0&&localStorage.getItem("mason_options")){const e=JSON.parse(localStorage.getItem("mason_options"));this.optionsSelected={darkMode:e.darkMode,soundsOn:e.soundsOn};const t=document.getElementsByTagName("body");this.optionsSelected.darkMode?t[0].classList.add("darkMode"):t[0].classList.remove("darkMode")}else{document.getElementsByTagName("body")[0].classList.add("darkMode");const e=JSON.stringify(this.optionsSelected);localStorage.setItem("mason_options",e)}this.combatSound1.src=this.combatSound1Path,this.combatSound1.load(),this.combatSound2.src=this.combatSound2Path,this.combatSound2.load(),this.ctx=this.canvas.nativeElement.getContext("2d"),this.ctx.canvas.width=1*window.innerWidth,this.ctx.canvas.height=.5*window.innerHeight,this.objectSizeHeight=.01*this.ctx.canvas.height,this.objectSize=this.objectSizeHeight,this.starCount=Math.abs(this.ctx.canvas.width/15),this.getStars(),this.vaultImg.src="./assets/images/vault.png",this.guardImg.src="./assets/images/guard.png",this.banditImg.src="./assets/images/bandit.png",this.combatHit.src="./assets/images/rockChiseled.png",this.grassEveningImg.src="./assets/images/grass1.png",this.grassMorningImg.src="./assets/images/grass2.png",this.grassAfternoonImg.src="./assets/images/grass2.png",this.vaultImg.onload=()=>{this.startBanditWaves(),this.playerResourcesTemp.isBanditWaveStarted&&this.spawnBandits(),this.playerResourcesTemp.guards.forEach(e=>{e.image=this.guardImg}),this.playerResourcesTemp.bandits.forEach(e=>{e.image=this.banditImg}),this.getAllCharacters(this.playerResourcesTemp.guards,this.playerResourcesTemp.bandits)}}ngOnDestroy(){this.combatSound1=new Audio,this.combatSound2=new Audio,clearInterval(this.gameInterval),clearInterval(this.banditSpawnInterval),clearInterval(this.banditWaveInterval),cancelAnimationFrame(this.requestGameAnimatId)}drawBackground(){this.playerResourcesTemp.dayCounter<=40?this.playerResourcesTemp.dayCounter<=33?this.ctx.fillStyle="#0000FF":this.playerResourcesTemp.dayCounter>=34&&this.playerResourcesTemp.dayCounter<=36?this.ctx.fillStyle="#0000F3":this.playerResourcesTemp.dayCounter>=37&&this.playerResourcesTemp.dayCounter<=39?this.ctx.fillStyle="#0000E6":this.playerResourcesTemp.dayCounter>=40&&(this.ctx.fillStyle="#0000DA"):this.playerResourcesTemp.dayCounter>=41&&this.playerResourcesTemp.dayCounter<79?this.playerResourcesTemp.dayCounter<=70?this.ctx.fillStyle="#0000CD":this.playerResourcesTemp.dayCounter>=71&&this.playerResourcesTemp.dayCounter<=73?this.ctx.fillStyle="#0000BD":this.playerResourcesTemp.dayCounter>=74&&this.playerResourcesTemp.dayCounter<=76?this.ctx.fillStyle="#0000AC":this.playerResourcesTemp.dayCounter>=77&&(this.ctx.fillStyle="#00009C"):this.playerResourcesTemp.dayCounter>=79&&(this.playerResourcesTemp.dayCounter<=115?this.ctx.fillStyle="#00008B":this.playerResourcesTemp.dayCounter>=116&&this.playerResourcesTemp.dayCounter<=117?this.ctx.fillStyle="#0000A8":this.playerResourcesTemp.dayCounter>=118&&this.playerResourcesTemp.dayCounter<=119?this.ctx.fillStyle="#0000C5":this.playerResourcesTemp.dayCounter>=120&&(this.ctx.fillStyle="#0000E2")),this.ctx.fillRect(0,this.ctx.canvas.height/6*-1,this.ctx.canvas.width,this.ctx.canvas.height),this.playerResourcesTemp.dayCounter>=79&&this.playerResourcesTemp.dayCounter<=117?this.drawStars(this.stars):this.getStars(),this.playerResourcesTemp.dayCounter<=40?this.playerResourcesTemp.dayCounter<=33?this.ctx.fillStyle="#228B22":this.playerResourcesTemp.dayCounter>=34&&this.playerResourcesTemp.dayCounter<=36?this.ctx.fillStyle="#1A881A":this.playerResourcesTemp.dayCounter>=37&&this.playerResourcesTemp.dayCounter<=39?this.ctx.fillStyle="#118611":this.playerResourcesTemp.dayCounter>=40&&(this.ctx.fillStyle="#098309"):this.playerResourcesTemp.dayCounter>=41&&this.playerResourcesTemp.dayCounter<79?this.playerResourcesTemp.dayCounter<=70?this.ctx.fillStyle="#008000":this.playerResourcesTemp.dayCounter>=71&&this.playerResourcesTemp.dayCounter<=73?this.ctx.fillStyle="#007900":this.playerResourcesTemp.dayCounter>=74&&this.playerResourcesTemp.dayCounter<=76?this.ctx.fillStyle="#007200":this.playerResourcesTemp.dayCounter>=77&&(this.ctx.fillStyle="#006B00"):this.playerResourcesTemp.dayCounter>=79&&(this.playerResourcesTemp.dayCounter<=115?this.ctx.fillStyle="#006400":this.playerResourcesTemp.dayCounter>=116&&this.playerResourcesTemp.dayCounter<=117?this.ctx.fillStyle="#096E09":this.playerResourcesTemp.dayCounter>=118&&this.playerResourcesTemp.dayCounter<=119?this.ctx.fillStyle="#117811":this.playerResourcesTemp.dayCounter>=120&&(this.ctx.fillStyle="#1A811A")),this.ctx.fillRect(0,this.ctx.canvas.height/6,this.ctx.canvas.width,this.ctx.canvas.height),this.drawGrass(),this.ctx.drawImage(this.vaultImg,.49*this.ctx.canvas.width-.129*this.ctx.canvas.height,.65*this.ctx.canvas.height,30*this.objectSize,30*this.objectSize)}drawGrass(){if(this.playerResourcesTemp.dayCounter<=37){const e=this.ctx.createPattern(this.grassMorningImg,"repeat");this.ctx.fillStyle=e,this.ctx.fillRect(0,this.ctx.canvas.height/6,this.ctx.canvas.width,this.ctx.canvas.height)}else if(this.playerResourcesTemp.dayCounter>=38&&this.playerResourcesTemp.dayCounter<77){const e=this.ctx.createPattern(this.grassAfternoonImg,"repeat");this.ctx.fillStyle=e,this.ctx.fillRect(0,this.ctx.canvas.height/6,this.ctx.canvas.width,this.ctx.canvas.height)}else if(this.playerResourcesTemp.dayCounter>=77&&this.playerResourcesTemp.dayCounter<119){const e=this.ctx.createPattern(this.grassEveningImg,"repeat");this.ctx.fillStyle=e,this.ctx.fillRect(0,this.ctx.canvas.height/6,this.ctx.canvas.width,this.ctx.canvas.height)}else if(this.playerResourcesTemp.dayCounter>=119&&this.playerResourcesTemp.dayCounter<=120){const e=this.ctx.createPattern(this.grassMorningImg,"repeat");this.ctx.fillStyle=e,this.ctx.fillRect(0,this.ctx.canvas.height/6,this.ctx.canvas.width,this.ctx.canvas.height)}}gameTicks(e,t){this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.drawBackground(),t.forEach((e,t)=>{!1===e.inCombat&&0===e.startPos&&0===e.animatePos&&0===e.direction&&e.x<.2*this.ctx.canvas.width&&(e.x+=.3*this.ctx.canvas.width/100),!1===e.inCombat&&0===e.startPos&&0===e.animatePos&&0===e.direction&&e.x>=.19*this.ctx.canvas.width&&e.animatePos++,!1===e.inCombat&&0===e.startPos&&0===e.animatePos&&1===e.direction&&e.x<.03*this.ctx.canvas.width&&(e.x+=.3*this.ctx.canvas.width/100),!1===e.inCombat&&0===e.startPos&&0===e.animatePos&&1===e.direction&&e.x>=.02*this.ctx.canvas.width&&e.animatePos++,!1===e.inCombat&&0===e.startPos&&1===e.animatePos&&(e.y<1*this.ctx.canvas.height&&(e.y+=.3*this.ctx.canvas.height/100),e.y>=1*this.ctx.canvas.height&&(e.finished=!0)),!1===e.inCombat&&1===e.startPos&&0===e.animatePos&&0===e.direction&&e.x>.67*this.ctx.canvas.width&&(e.x-=.3*this.ctx.canvas.width/100),!1===e.inCombat&&1===e.startPos&&0===e.animatePos&&0===e.direction&&e.x<=.67*this.ctx.canvas.width&&e.animatePos++,!1===e.inCombat&&1===e.startPos&&0===e.animatePos&&1===e.direction&&e.x>.84*this.ctx.canvas.width&&(e.x-=.3*this.ctx.canvas.width/100),!1===e.inCombat&&1===e.startPos&&0===e.animatePos&&1===e.direction&&e.x<=.84*this.ctx.canvas.width&&e.animatePos++,!1===e.inCombat&&1===e.startPos&&1===e.animatePos&&(e.y<1*this.ctx.canvas.height&&(e.y+=.3*this.ctx.canvas.height/100),e.y>=1*this.ctx.canvas.height&&(e.finished=!0)),this.drawCharacters(e)}),t.forEach((e,s)=>{if(!0===e.finished){e.hp>0?(0===e.level?(this.playerResourcesTemp.money-=50,this.playerResourcesTemp.moneyTaken+=50):1===e.level?(this.playerResourcesTemp.money-=100,this.playerResourcesTemp.moneyTaken+=100):(this.playerResourcesTemp.money-=100*e.level,this.playerResourcesTemp.moneyTaken+=100*e.level),t.splice(s,1),this.playerResourcesReturn.emit(this.playerResourcesTemp)):e.hp<=0&&!0===e.finished&&t.splice(s,1),document.getElementById("money").style.color="#F7461F";const r=setInterval(()=>{document.getElementById("money")?(document.getElementById("money").style.color=this.playerResourcesTemp.money>=0?"#fff":"red",clearInterval(r)):clearInterval(r)},1500)}}),e.forEach((e,s)=>{0===e.startPos&&0===e.animatePos&&(e.target||t.forEach(t=>{!1===t.inCombat&&!1===t.isTarget&&t.y+.3*this.ctx.canvas.height>=e.y&&t.x+.3*this.ctx.canvas.width>=e.x&&t.x-.3*this.ctx.canvas.width<=e.x&&(e.target=t)}),e.target&&(e.hasTarget=!0,e.target.isTarget=!0,e.target.y<e.y-.08*this.ctx.canvas.height&&(e.y-=.4*this.ctx.canvas.height/100),e.target.y>e.y+.08*this.ctx.canvas.height&&(e.y+=.4*this.ctx.canvas.height/100),e.target.x>e.x+.05*this.ctx.canvas.height?e.x+=.4*this.ctx.canvas.height/100:e.target.x<e.x-.05*this.ctx.canvas.height&&(e.x-=.4*this.ctx.canvas.height/100),e.y>this.ctx.canvas.height&&(this.playerResourcesTemp.guardCount++,e.isAlive=!1,this.playerResourcesReturn.emit(this.playerResourcesTemp)),e.y-e.target.y<=.08*this.ctx.canvas.height&&e.target.y-e.y<=.08*this.ctx.canvas.height&&e.x-e.target.x<=.08*this.ctx.canvas.width&&e.target.x-e.x<=.08*this.ctx.canvas.width&&(e.target.inCombat=!0)),e.target&&!0===e.target.inCombat&&(this.guardAttack(e),this.banditAttack(e))),0===e.startPos&&1===e.animatePos&&(e.y<this.ctx.canvas.height&&(e.y+=.4*this.ctx.canvas.height/100),e.y>=1*this.ctx.canvas.height&&(this.playerResourcesTemp.guardCount++,e.isAlive=!1,this.playerResourcesReturn.emit(this.playerResourcesTemp))),this.drawCharacters(e)}),e.forEach((t,s)=>{!1===t.isAlive&&(e.splice(s,1),this.playerResourcesReturn.emit(this.playerResourcesTemp))}),this.requestGameAnimatId=requestAnimationFrame(()=>this.gameTicks)}getAllCharacters(e,t){this.ngZone.runOutsideAngular(()=>this.gameTicks(e,t)),this.gameInterval=setInterval(()=>{this.gameTicks(e,t)},1e3/33)}getStars(){this.stars=[];for(let e=0;e<this.starCount;e++){const e={x:0,y:0,radius:0};e.x=Math.floor(Math.random()*this.ctx.canvas.width)+1,e.y=Math.floor(Math.random()*(this.ctx.canvas.height/2))+1,e.radius=.1*this.objectSize,this.stars.push(e)}}drawStars(e){const t=setInterval(()=>{this.playerResourcesTemp.dayCounter>=78&&this.playerResourcesTemp.dayCounter<=79?(this.starLight+=.1,this.starLight>=1&&(this.starLight=1)):this.playerResourcesTemp.dayCounter<=115&&(this.starLight=1),this.playerResourcesTemp.dayCounter>=116&&this.playerResourcesTemp.dayCounter<=117&&(this.starLight-=.1,this.starLight<=0&&(this.starLight=0)),clearInterval(t)},100);for(let s=0;s<e.length;s++)this.ctx.beginPath(),this.ctx.arc(e[s].x,e[s].y,e[s].radius,0,2*Math.PI,!1),this.ctx.fillStyle="rgba(255, 255, 255, "+this.starLight+")",this.ctx.fill(),this.ctx.lineWidth=1,this.ctx.strokeStyle="rgba(255, 255, 255, "+this.starLight+")",this.ctx.stroke()}playerTap(e){if(e.clientY>=.4*this.ctx.canvas.height&&e.clientX>.087*this.ctx.canvas.width&&e.clientX<this.ctx.canvas.width+.025*this.ctx.canvas.width)if(e.clientX>.44*this.ctx.canvas.width-.129*this.ctx.canvas.height&&e.clientX<.57*this.ctx.canvas.width-.129*this.ctx.canvas.height*-1&&e.clientY>.82*this.ctx.canvas.height+-.055*this.ctx.canvas.width);else{const t={id:Math.floor(9999*Math.random())+"-"+Math.floor(9999*Math.random())+"-"+Math.floor(9999*Math.random()),image:this.guardImg,speed:this.playerResourcesTemp.guardSpeedLvl,hp:9+this.playerResourcesTemp.guardArmorLvl,x:e.clientX-.07*this.ctx.canvas.height,y:e.clientY-.24*this.ctx.canvas.height,startPos:0,animatePos:0,attack:this.playerResourcesTemp.guardWeaponLvl,defense:this.playerResourcesTemp.guardArmorLvl,hasTarget:!1,target:null,isAlive:!0,isTutorialGuard:!1};this.playerResourcesTemp.tutorialGuards>0&&(t.isTutorialGuard=!0,this.playerResourcesTemp.tutorialGuards--),this.playerResourcesTemp.guardCount>0&&(this.playerResourcesTemp.guards.push(t),this.playerResourcesTemp.guardCount--,this.playerResourcesReturn.emit(this.playerResourcesTemp))}}drawCharacters(e){this.ctx.drawImage(e.image,e.x,e.y,15*this.objectSize,15*this.objectSize)}spawnBandits(){let e=0,t=0,s=0,r=0,a=0,i=0,o=0;this.banditSpawnInterval=setInterval(()=>{this.playerResourcesTemp.banditWave<=2&&(e=Math.floor(2*Math.random()),t=0,s=10,r=2,a=0,i=0,o=0),this.playerResourcesTemp.banditWave>2&&this.playerResourcesTemp.banditWave<=5&&(e=Math.floor(2*Math.random()),t=Math.floor(2*Math.random())+1,s=10+Math.floor(2*Math.random())+1,r=5,a=Math.floor(2*Math.random())+1,i=a,o=a),this.playerResourcesTemp.banditWave>5&&this.playerResourcesTemp.banditWave<=8&&(e=Math.floor(2*Math.random()),t=Math.floor(3*Math.random())+2,s=10+Math.floor(3*Math.random())+2,r=11,a=Math.floor(3*Math.random())+2,i=a,o=a),this.playerResourcesTemp.banditWave>8&&this.playerResourcesTemp.banditWave<=11&&(e=Math.floor(2*Math.random()),t=Math.floor(5*Math.random())+4,s=10+Math.floor(5*Math.random())+4,r=23,a=Math.floor(5*Math.random())+4,i=a,o=a),this.playerResourcesTemp.banditWave>11&&this.playerResourcesTemp.banditWave<=14&&(e=Math.floor(2*Math.random()),t=Math.floor(9*Math.random())+8,s=10+Math.floor(9*Math.random())+8,r=47,a=Math.floor(16*Math.random())+15,i=a,o=a),this.playerResourcesTemp.banditWave>14&&this.playerResourcesTemp.banditWave<=17&&(e=Math.floor(2*Math.random()),t=Math.floor(15*Math.random())+16,s=10+Math.floor(15*Math.random())+16,r=50,a=Math.floor(11*Math.random())+30,i=a,o=a),this.playerResourcesTemp.banditWave>17&&this.playerResourcesTemp.banditWave<=20&&(e=Math.floor(2*Math.random()),t=Math.floor(21*Math.random())+30,s=10+Math.floor(11*Math.random())+30,r=60,a=Math.floor(11*Math.random())+40,i=a,o=a),this.playerResourcesTemp.banditWave>20&&this.playerResourcesTemp.banditWave<=23&&(e=Math.floor(2*Math.random()),t=Math.floor(11*Math.random())+50,s=10+Math.floor(11*Math.random())+40,r=70,a=Math.floor(11*Math.random())+50,i=a,o=a),this.playerResourcesTemp.banditWave>23&&this.playerResourcesTemp.banditWave<=26&&(e=Math.floor(2*Math.random()),t=Math.floor(11*Math.random())+60,s=10+Math.floor(11*Math.random())+50,r=80,a=Math.floor(11*Math.random())+60,i=a,o=a),this.playerResourcesTemp.banditWave>26&&this.playerResourcesTemp.banditWave<=29&&(e=Math.floor(2*Math.random()),t=Math.floor(11*Math.random())+70,s=10+Math.floor(11*Math.random())+60,r=90,a=Math.floor(11*Math.random())+70,i=a,o=a),this.playerResourcesTemp.banditWave>29&&(e=Math.floor(2*Math.random()),t=Math.floor(20*Math.random())+80,s=10+Math.floor(11*Math.random())+70,r=100,a=Math.floor(11*Math.random())+80,i=a,o=a),this.addBandit(e,t,s,a,i,o),this.playerResourcesTemp.banditSpawnCount++,this.playerResourcesTemp.banditSpawnCount>=r&&(this.playerResourcesTemp.banditWave++,this.playerResourcesTemp.isBanditWaveStarted=!1,this.playerResourcesTemp.banditSpawnCount=0,this.playerResourcesTemp.banditWaveCounter=0,clearInterval(this.banditSpawnInterval)),this.playerResourcesReturn.emit(this.playerResourcesTemp)},2e3)}addBandit(e,t,s,r,a,i){let o=0,n=0;0===e?(o=-15*this.ctx.canvas.width/100,n=17*this.ctx.canvas.height/100):1===e&&(o=115*this.ctx.canvas.width/100,n=17*this.ctx.canvas.height/100);const c={id:Math.floor(9999*Math.random())+"-"+Math.floor(9999*Math.random())+"-"+Math.floor(9999*Math.random()),image:this.banditImg,speed:t,hp:s,x:o,y:n,direction:Math.floor(2*Math.random()),startPos:e,animatePos:0,finished:!1,level:r,attack:a,defense:i,inCombat:!1,isTarget:!1},h=setTimeout(()=>{this.playerResourcesTemp.bandits.push(c),this.playerResourcesReturn.emit(this.playerResourcesTemp),h&&clearTimeout(h)},1e3)}combatEffects(e,t){const s=.22*Math.floor(3*Math.random()+4),r=.12*Math.floor(3*Math.random()+6);this.ctx.drawImage(this.combatHit,e+s+-.1*e,t+r+-.055*t,20*this.objectSize,20*this.objectSize)}guardAttack(e){if(e&&e.target){const t=this.playerResourcesTemp.guards.find(t=>t.id===e.id);if(t){const s=this.playerResourcesTemp.bandits.find(e=>e.id===t.target.id);if(s){if(1===Math.floor(Math.random()*(100-t.speed)+1)){this.combatEffects(t.x,t.y),this.optionsSelected.soundsOn&&this.isGuardMoneyView&&this.combatSound1.play();let r=1+this.playerResourcesTemp.guardWeaponLvl-s.defense;r<=0&&(r=1),s.hp-=r,s.hp<=0&&(s.finished=!0,s.inCombat=!1,t.target=null,e.animatePos++,this.playerResourcesTemp.banditsStopped++),this.playerResourcesReturn.emit(this.playerResourcesTemp)}}else t.target={}}}}banditAttack(e){if(e&&e.target){const t=this.playerResourcesTemp.guards.find(t=>t.id===e.id);if(t){const e=this.playerResourcesTemp.bandits.find(e=>e.id===t.target.id);if(1===Math.floor(Math.random()*(100-t.target.speed)+1)){this.combatEffects(e.x,e.y),this.optionsSelected.soundsOn&&this.isGuardMoneyView&&this.combatSound2.play();let s=1+e.attack-t.defense;s<=0&&(s=1),t.hp-=s,!t.isTutorialGuard&&t.hp<=0?(t.isAlive=!1,e.inCombat=!1,e.isTarget=!1,this.playerResourcesTemp.totalGuards--,this.playerResourcesTemp.totalWorkers--):t.isTutorialGuard&&t.hp<=0&&(t.isAlive=!1,e.inCombat=!1,e.isTarget=!1,this.playerResourcesTemp.tutorialGuards--,this.playerResourcesTemp.totalGuards--),this.playerResourcesReturn.emit(this.playerResourcesTemp)}}}}startBanditWaves(){this.banditWaveInterval=setInterval(()=>{!1===this.playerResourcesTemp.newPlayerVault&&(this.playerResourcesTemp.banditWaveCounter++,this.playerResourcesTemp.banditWaveCounter>=180&&(this.playerResourcesTemp.isBanditWaveStarted=!0,180===this.playerResourcesTemp.banditWaveCounter&&this.spawnBandits()),this.playerResourcesReturn.emit(this.playerResourcesTemp))},1e3)}onResize(e){this.newResizePositions(),this.objectSizeHeight=.01*this.ctx.canvas.height,this.objectSize=this.objectSizeHeight,this.starCount=Math.abs(this.ctx.canvas.width/15),this.getStars()}newResizePositions(){this.playerResourcesTemp.guards.forEach(e=>{e.x=e.x/this.ctx.canvas.width,e.y=e.y/this.ctx.canvas.height}),this.playerResourcesTemp.bandits.forEach(e=>{e.x=e.x/this.ctx.canvas.width,e.y=e.y/this.ctx.canvas.height}),this.ctx.canvas.width=1*window.innerWidth,this.ctx.canvas.height=.5*window.innerHeight,this.playerResourcesTemp.guards.forEach(e=>{e.x=e.x*this.ctx.canvas.width,e.y=e.y*this.ctx.canvas.height}),this.playerResourcesTemp.bandits.forEach(e=>{e.x=e.x*this.ctx.canvas.width,e.y=e.y*this.ctx.canvas.height})}}return e.\u0275fac=function(t){return new(t||e)(i.Pb(i.A))},e.\u0275cmp=i.Jb({type:e,selectors:[["app-guard-money-view"]],viewQuery:function(e,t){var s;1&e&&i.zc(Y,!0),2&e&&i.rc(s=i.ec())&&(t.canvas=s.first)},inputs:{playerResources:"playerResources",isGuardMoneyView:"isGuardMoneyView"},outputs:{playerResourcesReturn:"playerResourcesReturn"},decls:4,vars:1,consts:[[1,"stone-view-wrapper",3,"resize"],["class","workers-payday-warning payday-border",4,"ngIf"],["id","canvasGuardMoney",3,"click"],["canvasGuardMoney",""],[1,"workers-payday-warning","payday-border"]],template:function(e,t){1&e&&(i.Vb(0,"div",0),i.dc("resize",(function(e){return t.onResize(e)}),!1,i.uc),i.Bc(1,X,2,0,"p",1),i.Vb(2,"canvas",2,3),i.dc("click",(function(e){return t.playerTap(e)})),i.Ub(),i.Ub()),2&e&&(i.Cb(1),i.mc("ngIf",t.playerResourcesTemp.totalWorkers>0&&t.playerResourcesTemp.dayCounter>=110&&t.playerResourcesTemp.dayCounter<=114))},directives:[r.k],styles:["#canvasGuardMoney[_ngcontent-%COMP%]{display:block;margin:0 auto}"]}),e})();function K(e,t){if(1&e&&(i.Vb(0,"div",15),i.Vb(1,"h4",14),i.Cc(2,"Owe Guards"),i.Ub(),i.Vb(3,"p",7),i.Cc(4),i.Ub(),i.Ub()),2&e){const e=i.hc();i.Cb(4),i.Ec("-$",e.totalGuardCost," a day")}}function ee(e,t){if(1&e&&(i.Vb(0,"span"),i.Vb(1,"mat-accordion"),i.Vb(2,"mat-expansion-panel",10),i.Vb(3,"mat-expansion-panel-header",11),i.Vb(4,"mat-panel-title"),i.Vb(5,"span",12),i.Vb(6,"h3"),i.Cc(7,"Guards"),i.Ub(),i.Ub(),i.Ub(),i.Ub(),i.Vb(8,"div",13),i.Vb(9,"h4",14),i.Cc(10,"Hired Guard"),i.Ub(),i.Vb(11,"p",7),i.Cc(12),i.Ub(),i.Ub(),i.Vb(13,"div",15),i.Vb(14,"h4",14),i.Cc(15,"Weapon Level"),i.Ub(),i.Vb(16,"p",7),i.Cc(17),i.Ub(),i.Ub(),i.Vb(18,"div",13),i.Vb(19,"h4",14),i.Cc(20,"Armor Level"),i.Ub(),i.Vb(21,"p",7),i.Cc(22),i.Ub(),i.Ub(),i.Vb(23,"div",15),i.Vb(24,"h4",14),i.Cc(25,"Speed Level"),i.Ub(),i.Vb(26,"p",7),i.Cc(27),i.Ub(),i.Ub(),i.Ub(),i.Ub(),i.Ub()),2&e){const e=i.hc();i.Cb(12),i.Dc(e.playerResourcesTemp.totalGuards),i.Cb(5),i.Dc(e.playerResourcesTemp.guardWeaponLvl),i.Cb(5),i.Dc(e.playerResourcesTemp.guardArmorLvl),i.Cb(5),i.Dc(e.playerResourcesTemp.guardSpeedLvl)}}function te(e,t){if(1&e&&(i.Vb(0,"span"),i.Vb(1,"div",13),i.Vb(2,"h4",14),i.Cc(3,"Bandit Waves"),i.Ub(),i.Vb(4,"p",7),i.Cc(5),i.Ub(),i.Ub(),i.Vb(6,"div",15),i.Vb(7,"h4",14),i.Cc(8,"Money Stolen"),i.Ub(),i.Vb(9,"p",7),i.Cc(10),i.Ub(),i.Ub(),i.Vb(11,"div",13),i.Vb(12,"h4",14),i.Cc(13,"Bandits fended"),i.Ub(),i.Vb(14,"p",7),i.Cc(15),i.Ub(),i.Ub(),i.Ub()),2&e){const e=i.hc();i.Cb(5),i.Dc(e.playerResourcesTemp.banditWave),i.Cb(5),i.Ec("$",e.playerResourcesTemp.moneyTaken,""),i.Cb(5),i.Dc(e.playerResourcesTemp.banditsStopped)}}const se=function(e){return{"right-column":e}};let re=(()=>{class e{constructor(){this.playerResourcesTemp={chiselLvl:0,money:0,bricks:0,clicks:0,barterLvl:0,tradeWorkers:[],tradeWorkersCount:0,tradeWorkersLvl:0,stoneWorkers:[],stoneCuttersCount:0,stoneWorkerLvl:0,guards:[],guardCount:0,guardWeaponLvl:0,guardArmorLvl:0,guardSpeedLvl:0,dayCounter:0,daysPast:0,version:.5,totalClicks:0,totalBricks:0,totalMoney:0,newPlayer:!0,quests:{questLvl:0,questDesc:"",questReward:0,completed:!1,quest:{complete:!1,chiselLvl:0,barterLvl:0,masons:0,masonLvl:0,traders:0,traderLvl:0}},sky:{sun:{x:0,y:0},moon:{x:0,y:0}},housingLimit:0,housingLvl:0,totalWorkers:0,stockpile:0,stockpileLvl:0,screenWidth:0,screenChange:!1,gameLevel:1,currentChapter:"",newPlayerVault:!0,banditWave:0,bandits:[],banditWaveCounter:0,banditSpawnCount:0,isBanditWaveStarted:!1,moneyTaken:0,credit:3,banditsStopped:0,totalGuards:0,tutorialGuards:0},this.workersProfits=0,this.workersPayCheck=0,this.pageHeight=0,this.timeOfDay="Morning",this.baseCostPerBrick=1,this.creditScore="Great",this.displayAfterPayday="",this.totalMasonCost=0,this.totalTraderCost=0,this.totalGuardCost=0,this.stoneWallImagePath="assets/images/stoneWall.png",this.optionsSelected={darkMode:!1,soundsOn:!0}}get playerResources(){return this.playerResourcesTemp}set playerResources(e){this.playerResourcesTemp=e}ngOnInit(){if(this.playerResourcesTemp.newPlayer&&document.getElementById("Close-Stats-Btn")&&(document.getElementById("Close-Stats-Btn").style.border="3px solid #8ADC41"),localStorage.length>0&&localStorage.getItem("mason_options")){const e=JSON.parse(localStorage.getItem("mason_options"));this.optionsSelected={darkMode:e.darkMode,soundsOn:e.soundsOn}}this.calcWorkerProfits(),this.calcHeightOfPage(),this.calcTimeOfDay(),this.calcCreditScore(),this.calcMoneyAfterPayday(),this.baseCostPerBrick+=this.playerResourcesTemp.barterLvl+this.playerResourcesTemp.tradeWorkersLvl}calcWorkerProfits(){const e=4+this.playerResourcesTemp.stoneWorkerLvl;let t=0,s=0,r=0;this.totalMasonCost=this.playerResourcesTemp.stoneWorkers.length*(2*this.playerResourcesTemp.stoneWorkerLvl+2),this.totalTraderCost=this.playerResourcesTemp.tradeWorkers.length*(2*this.playerResourcesTemp.tradeWorkersLvl+2),this.totalGuardCost=20*this.playerResourcesTemp.totalGuards,this.workersPayCheck=this.totalMasonCost+this.totalTraderCost+this.totalGuardCost;const a=Math.floor(Math.random()*(this.playerResourcesTemp.barterLvl+3+this.playerResourcesTemp.tradeWorkersLvl))+1+this.playerResourcesTemp.barterLvl+this.playerResourcesTemp.tradeWorkersLvl;s=9.6*(e+.6*this.playerResourcesTemp.stoneWorkerLvl*this.playerResourcesTemp.stoneWorkers.length),t=s/14.5,r=Math.ceil(t*a)*this.playerResourcesTemp.tradeWorkers.length+this.playerResourcesTemp.tradeWorkersLvl,this.workersProfits=r-this.workersPayCheck}calcHeightOfPage(){const e=.62*window.innerHeight,t=.0733*window.innerWidth;this.pageHeight=e+t}onResize(e){this.calcHeightOfPage()}calcTimeOfDay(){this.playerResourcesTemp.dayCounter<=40?this.timeOfDay="Morning":this.playerResourcesTemp.dayCounter>=41&&this.playerResourcesTemp.dayCounter<79?this.timeOfDay="Afternoon":this.playerResourcesTemp.dayCounter>=79&&(this.timeOfDay="Evening")}calcCreditScore(){3===this.playerResourcesTemp.credit?this.creditScore="Great \u{1f947}":2===this.playerResourcesTemp.credit?this.creditScore="Good \u{1f44d}":1===this.playerResourcesTemp.credit&&(this.creditScore="Terrible \u{1f612}")}calcMoneyAfterPayday(){const e=this.playerResourcesTemp.money-this.workersPayCheck;e>0?this.displayAfterPayday="$"+Math.abs(e):e<0&&(this.displayAfterPayday="-$"+Math.abs(e))}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=i.Jb({type:e,selectors:[["app-stats-view"]],inputs:{playerResources:"playerResources"},decls:160,vars:43,consts:[[1,"stats-wrapper",3,"resize"],[1,"display-money"],[1,"stat-wall-border"],[1,"stat-opt-title-contents"],["id","scrollbar",1,"stat-lvls"],[1,"quest-wrapper"],[1,"lvl-amount","quest-title"],[1,"lvl-amount"],[1,"border-wall"],[1,"row"],[1,"expansion-panel-color","margin-top"],[1,"expansion-panel-color"],[1,"panel-titles"],[1,"column"],[1,"lvl-title"],[1,"column","right-column"],["class","column right-column",4,"ngIf"],[1,"column",3,"ngClass"],[4,"ngIf"]],template:function(e,t){1&e&&(i.Vb(0,"div",0),i.dc("resize",(function(e){return t.onResize(e)}),!1,i.uc),i.Vb(1,"p",1),i.Cc(2),i.Ub(),i.Vb(3,"div",2),i.Vb(4,"div",3),i.Vb(5,"div",4),i.Vb(6,"div",5),i.Vb(7,"p",6),i.Cc(8,"Current Quest"),i.Ub(),i.Vb(9,"p",7),i.Cc(10),i.Ub(),i.Vb(11,"p",7),i.Cc(12),i.Ub(),i.Qb(13,"div",8),i.Ub(),i.Vb(14,"div",9),i.Vb(15,"mat-accordion"),i.Vb(16,"mat-expansion-panel",10),i.Vb(17,"mat-expansion-panel-header",11),i.Vb(18,"mat-panel-title"),i.Vb(19,"span",12),i.Vb(20,"h3"),i.Cc(21,"Economy Levels"),i.Ub(),i.Ub(),i.Ub(),i.Ub(),i.Vb(22,"div",13),i.Vb(23,"h4",14),i.Cc(24,"Chisel Level"),i.Ub(),i.Vb(25,"p",7),i.Cc(26),i.Ub(),i.Ub(),i.Vb(27,"div",15),i.Vb(28,"h4",14),i.Cc(29,"Barter Level"),i.Ub(),i.Vb(30,"p",7),i.Cc(31),i.Ub(),i.Ub(),i.Vb(32,"div",13),i.Vb(33,"h4",14),i.Cc(34,"Housing Level"),i.Ub(),i.Vb(35,"p",7),i.Cc(36),i.Ub(),i.Ub(),i.Vb(37,"div",15),i.Vb(38,"h4",14),i.Cc(39,"Stockpile Level"),i.Ub(),i.Vb(40,"p",7),i.Cc(41),i.Ub(),i.Ub(),i.Vb(42,"div",13),i.Vb(43,"h4",14),i.Cc(44,"Rating"),i.Ub(),i.Vb(45,"p",7),i.Cc(46),i.Ub(),i.Ub(),i.Ub(),i.Ub(),i.Vb(47,"mat-accordion"),i.Vb(48,"mat-expansion-panel",10),i.Vb(49,"mat-expansion-panel-header",11),i.Vb(50,"mat-panel-title"),i.Vb(51,"span",12),i.Vb(52,"h3"),i.Cc(53,"Worker Payments"),i.Ub(),i.Ub(),i.Ub(),i.Ub(),i.Vb(54,"div",13),i.Vb(55,"h4",14),i.Cc(56,"$ Per Brick"),i.Ub(),i.Vb(57,"p",7),i.Cc(58),i.Ub(),i.Ub(),i.Vb(59,"div",15),i.Vb(60,"h4",14),i.Cc(61,"Owe Masons"),i.Ub(),i.Vb(62,"p",7),i.Cc(63),i.Ub(),i.Ub(),i.Vb(64,"div",13),i.Vb(65,"h4",14),i.Cc(66,"Owe Traders"),i.Ub(),i.Vb(67,"p",7),i.Cc(68),i.Ub(),i.Ub(),i.Bc(69,K,5,1,"div",16),i.Vb(70,"div",17),i.Vb(71,"h4",14),i.Cc(72,"Owe Workers"),i.Ub(),i.Vb(73,"p",7),i.Cc(74),i.Ub(),i.Ub(),i.Vb(75,"div",17),i.Vb(76,"h4",14),i.Cc(77,"Est. Profits"),i.Ub(),i.Vb(78,"p",7),i.Cc(79),i.Ub(),i.Ub(),i.Ub(),i.Ub(),i.Vb(80,"mat-accordion"),i.Vb(81,"mat-expansion-panel",10),i.Vb(82,"mat-expansion-panel-header",11),i.Vb(83,"mat-panel-title"),i.Vb(84,"span",12),i.Vb(85,"h3"),i.Cc(86,"Mason Workers"),i.Ub(),i.Ub(),i.Ub(),i.Ub(),i.Vb(87,"div",13),i.Vb(88,"h4",14),i.Cc(89,"Hired Mason"),i.Ub(),i.Vb(90,"p",7),i.Cc(91),i.Ub(),i.Ub(),i.Vb(92,"div",15),i.Vb(93,"h4",14),i.Cc(94,"Masons Level"),i.Ub(),i.Vb(95,"p",7),i.Cc(96),i.Ub(),i.Ub(),i.Ub(),i.Ub(),i.Vb(97,"mat-accordion"),i.Vb(98,"mat-expansion-panel",10),i.Vb(99,"mat-expansion-panel-header",11),i.Vb(100,"mat-panel-title"),i.Vb(101,"span",12),i.Vb(102,"h3"),i.Cc(103,"Trade Workers"),i.Ub(),i.Ub(),i.Ub(),i.Ub(),i.Vb(104,"div",13),i.Vb(105,"h4",14),i.Cc(106,"Hired Trader"),i.Ub(),i.Vb(107,"p",7),i.Cc(108),i.Ub(),i.Ub(),i.Vb(109,"div",15),i.Vb(110,"h4",14),i.Cc(111,"Traders Level"),i.Ub(),i.Vb(112,"p",7),i.Cc(113),i.Ub(),i.Ub(),i.Ub(),i.Ub(),i.Bc(114,ee,28,4,"span",18),i.Vb(115,"mat-accordion"),i.Vb(116,"mat-expansion-panel",10),i.Vb(117,"mat-expansion-panel-header",11),i.Vb(118,"mat-panel-title"),i.Vb(119,"span",12),i.Vb(120,"h3"),i.Cc(121,"Mason Time"),i.Ub(),i.Ub(),i.Ub(),i.Ub(),i.Vb(122,"div",13),i.Vb(123,"h4",14),i.Cc(124,"Time Of Day"),i.Ub(),i.Vb(125,"p",7),i.Cc(126),i.Ub(),i.Ub(),i.Vb(127,"div",15),i.Vb(128,"h4",14),i.Cc(129,"Days Past"),i.Ub(),i.Vb(130,"p",7),i.Cc(131),i.Ub(),i.Ub(),i.Ub(),i.Ub(),i.Vb(132,"mat-accordion"),i.Vb(133,"mat-expansion-panel",10),i.Vb(134,"mat-expansion-panel-header",11),i.Vb(135,"mat-panel-title"),i.Vb(136,"span",12),i.Vb(137,"h3"),i.Cc(138,"Good To Know"),i.Ub(),i.Ub(),i.Ub(),i.Ub(),i.Vb(139,"div",13),i.Vb(140,"h4",14),i.Cc(141,"Total Taps"),i.Ub(),i.Vb(142,"p",7),i.Cc(143),i.Ub(),i.Ub(),i.Vb(144,"div",15),i.Vb(145,"h4",14),i.Cc(146,"Total Bricks"),i.Ub(),i.Vb(147,"p",7),i.Cc(148),i.Ub(),i.Ub(),i.Vb(149,"div",13),i.Vb(150,"h4",14),i.Cc(151,"Total Workers"),i.Ub(),i.Vb(152,"p",7),i.Cc(153),i.Ub(),i.Ub(),i.Vb(154,"div",15),i.Vb(155,"h4",14),i.Cc(156,"Total Money"),i.Ub(),i.Vb(157,"p",7),i.Cc(158),i.Ub(),i.Ub(),i.Bc(159,te,16,3,"span",18),i.Ub(),i.Ub(),i.Ub(),i.Ub(),i.Ub(),i.Ub(),i.Ub()),2&e&&(i.Cb(2),i.Gc("Money: $",t.playerResourcesTemp.money," | Housing: ",t.playerResourcesTemp.totalWorkers,"/",t.playerResourcesTemp.housingLimit,""),i.Cb(1),i.Ac("border-image-source","url("+t.stoneWallImagePath+")",i.Ib),i.Cb(2),i.Ac("height",t.pageHeight,"px"),i.Cb(1),i.Ac("border-image-source","url("+t.stoneWallImagePath+")",i.Ib),i.Cb(4),i.Dc(t.playerResourcesTemp.quests.questDesc),i.Cb(2),i.Ec("Reward: $",t.playerResourcesTemp.quests.questReward,""),i.Cb(1),i.Ac("border-image-source","url("+t.stoneWallImagePath+")",i.Ib),i.Cb(13),i.Dc(t.playerResourcesTemp.chiselLvl),i.Cb(5),i.Dc(t.playerResourcesTemp.barterLvl),i.Cb(5),i.Dc(t.playerResourcesTemp.housingLvl),i.Cb(5),i.Dc(t.playerResourcesTemp.stockpileLvl),i.Cb(5),i.Dc(t.creditScore),i.Cb(12),i.Fc("+$",t.baseCostPerBrick," - $",t.playerResourcesTemp.barterLvl+3+t.playerResourcesTemp.tradeWorkersLvl,""),i.Cb(5),i.Ec("-$",t.totalMasonCost," a day"),i.Cb(5),i.Ec("-$",t.totalTraderCost," a day"),i.Cb(1),i.mc("ngIf",t.playerResourcesTemp.gameLevel>=2),i.Cb(1),i.mc("ngClass",i.pc(39,se,t.playerResourcesTemp.gameLevel<2)),i.Cb(4),i.Ec("-$",t.workersPayCheck," a day"),i.Cb(1),i.mc("ngClass",i.pc(41,se,t.playerResourcesTemp.gameLevel>=2)),i.Cb(4),i.Ec("+$",t.workersProfits,""),i.Cb(12),i.Dc(t.playerResourcesTemp.stoneCuttersCount),i.Cb(5),i.Dc(t.playerResourcesTemp.stoneWorkerLvl),i.Cb(12),i.Dc(t.playerResourcesTemp.tradeWorkersCount),i.Cb(5),i.Dc(t.playerResourcesTemp.tradeWorkersLvl),i.Cb(1),i.mc("ngIf",t.playerResourcesTemp.gameLevel>=2),i.Cb(12),i.Dc(t.timeOfDay),i.Cb(5),i.Dc(t.playerResourcesTemp.daysPast),i.Cb(12),i.Dc(t.playerResourcesTemp.totalClicks),i.Cb(5),i.Dc(t.playerResourcesTemp.totalBricks),i.Cb(5),i.Dc(t.playerResourcesTemp.totalWorkers),i.Cb(5),i.Ec("$",t.playerResourcesTemp.totalMoney,""),i.Cb(1),i.mc("ngIf",t.playerResourcesTemp.gameLevel>=2))},directives:[l.a,l.c,l.d,l.e,r.k,r.i],styles:['.column[_ngcontent-%COMP%]{width:46%;padding:3px;display:inline-block;margin-left:calc(4% - .7em);border-right:1px solid}.right-column[_ngcontent-%COMP%]{border:none}.row[_ngcontent-%COMP%]:after{content:"";display:table;clear:both}.stats-wrapper[_ngcontent-%COMP%]{width:100%;height:100%;min-width:100%;min-height:100%;overflow:hidden;position:fixed;top:calc(2.6% + 5.46rem);background-color:#228b22}.stat-lvls[_ngcontent-%COMP%]{width:100%;overflow:auto;height:24em}.lvl-amount[_ngcontent-%COMP%]{text-align:center;font-size:calc(100% + .1rem)}.margin-top[_ngcontent-%COMP%]{margin-top:1rem!important;margin-bottom:.5rem!important}.lvl-title[_ngcontent-%COMP%]{text-align:center;padding:0;margin:calc(1% + .4em) 0 0}.display-money[_ngcontent-%COMP%], .quest-title[_ngcontent-%COMP%]{font-weight:700}.display-money[_ngcontent-%COMP%]{text-align:center;font-size:calc(100% + .1rem)}.quest-wrapper[_ngcontent-%COMP%]{margin-top:1.5%}.border-wall[_ngcontent-%COMP%]{border-image-repeat:repeat;width:calc(100% - .05rem);border-bottom:1.1rem solid transparent!important;border-image-slice:36;margin:0 auto .5rem}.stat-wall-border[_ngcontent-%COMP%]{border-image-repeat:repeat;border-image-width:auto;width:100%;border-bottom:1.1rem solid transparent!important;border-image-slice:15;background-color:#228b22;height:calc(100% - 10rem);margin:0 auto}.stat-opt-title-contents[_ngcontent-%COMP%]{padding:1.5rem 1.1rem}.mat-expansion-panel-body[_ngcontent-%COMP%]{padding:0!important}@media only screen and (min-width:320px){.stat-wall-border[_ngcontent-%COMP%]{height:calc(100% - 10.5rem)}}@media only screen and (min-width:360px){.stat-wall-border[_ngcontent-%COMP%]{height:calc(100% - 10.6rem)}}@media only screen and (min-width:375px){.stat-wall-border[_ngcontent-%COMP%]{height:calc(100% - 10.7rem)}.stats-wrapper[_ngcontent-%COMP%]{top:calc(2.6% + 5.46rem)}}@media only screen and (min-width:411px){.stat-wall-border[_ngcontent-%COMP%]{height:calc(100% - 10.8rem)}}@media only screen and (min-width:414px){.stat-wall-border[_ngcontent-%COMP%]{height:calc(100% - 10.8rem)}}@media only screen and (min-width:768px){.stat-wall-border[_ngcontent-%COMP%]{height:calc(100% - 11.3rem)}.stats-wrapper[_ngcontent-%COMP%]{top:calc(2.6% + 5.6rem)}}@media only screen and (min-width:1024px)and (min-height:1366px){.stat-wall-border[_ngcontent-%COMP%]{height:calc(100% - 11.6rem)}.stats-wrapper[_ngcontent-%COMP%]{top:calc(2.6% + 5rem)}}']}),e})();function ae(e,t){if(1&e){const e=i.Wb();i.Vb(0,"button",13),i.dc("click",(function(t){return i.vc(e),i.hc().ShowVault()})),i.Cc(1,"Vault"),i.Ub()}}function ie(e,t){if(1&e&&(i.Vb(0,"p",20),i.Cc(1,"Quest Completed!"),i.Ub()),2&e){const e=i.hc(2);i.Ac("width",e.gameStageWidth,"px")("right",e.gameStageWidth/18,"px")}}function oe(e,t){if(1&e){const e=i.Wb();i.Vb(0,"span",14),i.Vb(1,"div",15),i.Vb(2,"p",16),i.Cc(3),i.Ub(),i.Bc(4,ie,2,4,"p",17),i.Vb(5,"button",18),i.dc("click",(function(t){return i.vc(e),i.hc().displayUpgrades()})),i.Cc(6,"Close"),i.Ub(),i.Ub(),i.Vb(7,"app-upgrade-menu",19),i.dc("stoneWorkerReturn",(function(t){return i.vc(e),i.hc().stoneWorkerReturn(t)}))("tradeWorkerReturn",(function(t){return i.vc(e),i.hc().tradeWorkerReturn(t)}))("guardReturn",(function(t){return i.vc(e),i.hc().guardReturn(t)}))("playerResourcesReturn",(function(t){return i.vc(e),i.hc().playerResourcesReturn(t)})),i.Ub(),i.Ub()}if(2&e){const e=i.hc();i.Cb(3),i.Dc(e.playerResources.currentChapter),i.Cb(1),i.mc("ngIf",e.quests.completed),i.Cb(3),i.mc("playerResources",e.playerResources)}}function ne(e,t){if(1&e&&(i.Vb(0,"p",20),i.Cc(1,"Quest Completed!"),i.Ub()),2&e){const e=i.hc(2);i.Ac("width",e.gameStageWidth,"px")("right",e.gameStageWidth/18,"px")}}const ce=function(e,t){return{display:e,hide:t}};function he(e,t){if(1&e&&(i.Vb(0,"p",39),i.Cc(1,"New Quest Availiable! Select The Stats Button \u{1f44c}"),i.Ub()),2&e){const e=i.hc(2);i.Ac("width",e.gameStageWidth,"px")("right",e.gameStageWidth/18,"px"),i.mc("ngClass",i.qc(5,ce,!e.isGuardMoneyView,e.isGuardMoneyView))}}function le(e,t){if(1&e&&(i.Vb(0,"p",20),i.Cc(1,"Bandits Are Attacking Your Vault!"),i.Ub()),2&e){const e=i.hc(2);i.Ac("width",e.gameStageWidth,"px")("right",e.gameStageWidth/18,"px")}}function ue(e,t){if(1&e){const e=i.Wb();i.Vb(0,"span"),i.Vb(1,"app-guard-money-view",31),i.dc("playerResourcesReturn",(function(t){return i.vc(e),i.hc(2).playerResourcesReturn(t)})),i.Ub(),i.Ub()}if(2&e){const e=i.hc(2);i.Cb(1),i.mc("ngClass",i.qc(3,ce,e.isGuardMoneyView,!e.isGuardMoneyView))("playerResources",e.playerResources)("isGuardMoneyView",e.isGuardMoneyView)}}function de(e,t){if(1&e){const e=i.Wb();i.Vb(0,"button",40),i.dc("click",(function(t){return i.vc(e),i.hc(2).chisleStone()})),i.Cc(1,"Chisel"),i.Ub()}if(2&e){const e=i.hc(2);i.mc("disabled",e.disableChisel)}}function pe(e,t){if(1&e){const e=i.Wb();i.Vb(0,"button",41),i.dc("click",(function(t){return i.vc(e),i.hc(2).sellStone()})),i.Cc(1,"Sell"),i.Ub()}if(2&e){const e=i.hc(2);i.mc("disabled",e.disableSell)}}function me(e,t){if(1&e){const e=i.Wb();i.Vb(0,"span",21),i.Vb(1,"div",22),i.Vb(2,"span",23),i.Cc(3),i.Ub(),i.Vb(4,"span",24),i.Cc(5),i.Qb(6,"img",25),i.Ub(),i.Vb(7,"span",26),i.Cc(8),i.Qb(9,"img",27),i.Ub(),i.Vb(10,"span",28),i.Qb(11,"img",29),i.Ub(),i.Ub(),i.Bc(12,ne,2,4,"p",17),i.Bc(13,he,2,8,"p",30),i.Bc(14,le,2,4,"p",17),i.Vb(15,"span"),i.Vb(16,"app-stone-cutter-view",31),i.dc("playerResourcesReturn",(function(t){return i.vc(e),i.hc().playerResourcesReturn(t)})),i.Ub(),i.Ub(),i.Bc(17,ue,2,6,"span",32),i.Vb(18,"div",33),i.Vb(19,"div",34),i.Bc(20,de,2,1,"button",35),i.Bc(21,pe,2,1,"button",36),i.Vb(22,"button",37),i.dc("click",(function(t){return i.vc(e),i.hc().displayUpgrades()})),i.Cc(23,"Upgrade"),i.Ub(),i.Vb(24,"button",38),i.dc("click",(function(t){return i.vc(e),i.hc().displayStats()})),i.Cc(25,"Stats"),i.Ub(),i.Ub(),i.Ub(),i.Ub()}if(2&e){const e=i.hc();i.Cb(3),i.Ec("$",e.money,""),i.Cb(1),i.mc("ngClass",i.qc(23,ce,!e.isGuardMoneyView,e.isGuardMoneyView)),i.Cb(1),i.Fc("",e.playerResources.bricks,"/",e.playerResources.stockpile," "),i.Cb(1),i.nc("src",e.stoneIconPath,i.wc),i.Cb(1),i.mc("ngClass",i.qc(26,ce,e.isGuardMoneyView,!e.isGuardMoneyView)),i.Cb(1),i.Dc(e.playerResources.guardCount),i.Cb(1),i.nc("src",e.guardIconPath,i.wc),i.Cb(1),i.mc("ngClass",i.qc(29,ce,e.playerResources.isBanditWaveStarted,!e.playerResources.isBanditWaveStarted)),i.Cb(1),i.nc("src",e.banditIconPath,i.wc),i.Cb(1),i.mc("ngIf",e.quests.completed),i.Cb(1),i.mc("ngIf",e.isQuestAvailiable&&11!==e.quests.questLvl),i.Cb(1),i.mc("ngIf",e.playerResources.banditWaveCounter>175&&e.playerResources.banditWaveCounter<=180),i.Cb(2),i.mc("ngClass",i.qc(32,ce,!e.isGuardMoneyView,e.isGuardMoneyView))("playerResources",e.playerResources)("isGuardMoneyView",e.isGuardMoneyView),i.Cb(1),i.mc("ngIf",e.playerResources.gameLevel>=2),i.Cb(2),i.Ac("width",e.gameStageWidth,"px"),i.Cb(1),i.mc("ngIf",!e.isGuardMoneyView),i.Cb(1),i.mc("ngIf",!e.isGuardMoneyView),i.Cb(1),i.mc("disabled",e.disableUpgrade),i.Cb(2),i.mc("disabled",e.disableStats)}}function ye(e,t){if(1&e){const e=i.Wb();i.Vb(0,"span",42),i.Vb(1,"div",43),i.Vb(2,"p",16),i.Cc(3),i.Ub(),i.Vb(4,"button",44),i.dc("click",(function(t){return i.vc(e),i.hc().displayStats()})),i.Cc(5,"Close"),i.Ub(),i.Ub(),i.Qb(6,"app-stats-view",45),i.Ub()}if(2&e){const e=i.hc();i.Cb(3),i.Dc(e.playerResources.currentChapter),i.Cb(3),i.mc("playerResources",e.playerResources)}}const be=function(e){return{"info-dm":e}};function ge(e,t){if(1&e){const e=i.Wb();i.Vb(0,"div",46),i.Vb(1,"div",47),i.Vb(2,"mat-toolbar",48),i.Vb(3,"div",49),i.Vb(4,"p",50),i.Cc(5,"New Update!"),i.Ub(),i.Ub(),i.Ub(),i.Vb(6,"span"),i.Vb(7,"p",51),i.Cc(8,"There appears to be a new update to Mason! Would you like to update now?"),i.Ub(),i.Vb(9,"button",52),i.dc("click",(function(t){return i.vc(e),i.hc().getNewUpdatesFromServer()})),i.Cc(10,"Aye \u{1f389}"),i.Ub(),i.Vb(11,"button",52),i.dc("click",(function(t){return i.vc(e),i.hc().getUpdateLater()})),i.Cc(12,"Next Time"),i.Ub(),i.Ub(),i.Ub(),i.Ub()}if(2&e){const e=i.hc();i.Cb(1),i.mc("ngClass",i.pc(1,be,!0===e.optionsSelected.darkMode))}}function Ce(e,t){1&e&&(i.Vb(0,"p",50),i.Cc(1,"Tap Anywhere To Continue"),i.Ub())}function ve(e,t){1&e&&(i.Vb(0,"p",50),i.Cc(1,"Welcome!"),i.Ub())}function ke(e,t){if(1&e){const e=i.Wb();i.Vb(0,"span"),i.Vb(1,"p",51),i.Cc(2,"Welcome To Mason!"),i.Ub(),i.Vb(3,"p",51),i.Cc(4,"You appear to be new to this land. Would you like a few tips to help get your kingdom started?"),i.Ub(),i.Vb(5,"button",52),i.dc("click",(function(t){return i.vc(e),i.hc(2).beginTutorial()})),i.Cc(6,"Aye"),i.Ub(),i.Vb(7,"button",52),i.dc("click",(function(t){return i.vc(e),i.hc(2).tutorialDone()})),i.Cc(8,"I know what I'm doing \u{1f44d}"),i.Ub(),i.Ub()}}function Re(e,t){1&e&&(i.Vb(0,"p",51),i.Cc(1,"The first thing you want to do is to start generating income. You shall do this by crafting and selling bricks."),i.Ub())}function fe(e,t){1&e&&(i.Vb(0,"p",51),i.Cc(1,"Tap the 'Chisel' button to start shaping your bricks. Keep tapping the button until the brick is made."),i.Ub())}function we(e,t){1&e&&(i.Vb(0,"p",51),i.Cc(1,"When You have one or more bricks, You can sell them. Tap the 'Sell' button to exchange your bricks for money."),i.Ub())}function Te(e,t){1&e&&(i.Vb(0,"p",51),i.Cc(1,"When you have some money on hand, you can upgrade your tools or hire some workers to help you make and sell bricks. To see the upgrades availiable, Select the 'Upgrade' button."),i.Ub())}function Se(e,t){1&e&&(i.Vb(0,"p",51),i.Cc(1,"Complete quests for a bonus stipend. You can check your current quest by tapping the 'Stats' button."),i.Ub())}function Ue(e,t){1&e&&(i.Vb(0,"p",51),i.Cc(1,"When new areas are unlocked, you can go to them by tapping on the 'Areas' button at the top right of the screen. When you do, select a destination."),i.Ub())}function We(e,t){1&e&&(i.Vb(0,"p",51),i.Cc(1,"That should get you started \u{1f647}\u200d\u2642\ufe0f As your kingdom grows, so will the challenges that lie ahead. Good luck!"),i.Ub())}function xe(e,t){if(1&e){const e=i.Wb();i.Vb(0,"div",53),i.dc("click",(function(t){return i.vc(e),i.hc().closeNewPlayerPrompt()})),i.Vb(1,"div",47),i.Vb(2,"mat-toolbar",48),i.Vb(3,"div",49),i.Bc(4,Ce,2,0,"p",54),i.Bc(5,ve,2,0,"p",54),i.Ub(),i.Ub(),i.Bc(6,ke,9,0,"span",32),i.Bc(7,Re,2,0,"p",55),i.Bc(8,fe,2,0,"p",55),i.Bc(9,we,2,0,"p",55),i.Bc(10,Te,2,0,"p",55),i.Bc(11,Se,2,0,"p",55),i.Bc(12,Ue,2,0,"p",55),i.Bc(13,We,2,0,"p",55),i.Ub(),i.Ub()}if(2&e){const e=i.hc();i.Cb(1),i.mc("ngClass",i.pc(11,be,!0===e.optionsSelected.darkMode)),i.Cb(3),i.mc("ngIf",e.tutorialStep<8),i.Cb(1),i.mc("ngIf",8===e.tutorialStep),i.Cb(1),i.mc("ngIf",8===e.tutorialStep),i.Cb(1),i.mc("ngIf",7===e.tutorialStep),i.Cb(1),i.mc("ngIf",6===e.tutorialStep),i.Cb(1),i.mc("ngIf",5===e.tutorialStep),i.Cb(1),i.mc("ngIf",4===e.tutorialStep),i.Cb(1),i.mc("ngIf",3===e.tutorialStep),i.Cb(1),i.mc("ngIf",2===e.tutorialStep),i.Cb(1),i.mc("ngIf",1===e.tutorialStep)}}function Me(e,t){1&e&&(i.Vb(0,"p",50),i.Cc(1,"Tap Anywhere To Continue"),i.Ub())}function Le(e,t){1&e&&(i.Vb(0,"p",50),i.Cc(1,"Congratulations!"),i.Ub())}function qe(e,t){if(1&e){const e=i.Wb();i.Vb(0,"span"),i.Vb(1,"p",51),i.Cc(2,"You have proven that you can run a successful kingdom \u{1f44d}"),i.Ub(),i.Vb(3,"p",51),i.Cc(4,"More money comes more problems I'm afraid... Would you like to know what's over the horizon?"),i.Ub(),i.Vb(5,"button",56),i.dc("click",(function(t){return i.vc(e),i.hc(2).beginVaultTutorial()})),i.Cc(6,"Aye"),i.Ub(),i.Vb(7,"button",56),i.dc("click",(function(t){return i.vc(e),i.hc(2).vaultTutorialDone()})),i.Cc(8,"I know what I'm doing"),i.Ub(),i.Ub()}if(2&e){const e=i.hc(2);i.Cb(5),i.mc("disabled",e.newLevelCounter<=2),i.Cb(2),i.mc("disabled",e.newLevelCounter<=2)}}function Ve(e,t){1&e&&(i.Vb(0,"p",51),i.Cc(1,"Bandits have been spotted coming this way! They seem to be headed to our vault."),i.Ub())}function Ie(e,t){1&e&&(i.Vb(0,"p",51),i.Cc(1,"You will have to hire some help to defend your wealth. When you tap on the 'Upgrades' button, you can now hire and train guards."),i.Ub())}function Pe(e,t){1&e&&(i.Vb(0,"p",51),i.Cc(1,"Fortunately, You have three guards on hand. They should be able to stop them."),i.Ub())}function Be(e,t){1&e&&(i.Vb(0,"p",51),i.Cc(1,"Bear this in mind, if the bandits take too much of your money and you can't pay for your workers, you may have to fire some. Don't let your treasury dip below $0."),i.Ub())}function Ae(e,t){1&e&&(i.Vb(0,"p",51),i.Cc(1,"Now let's go to your vault. Tap on the Areas button at the top right of the screen and select the 'Vault'."),i.Ub())}function Oe(e,t){if(1&e){const e=i.Wb();i.Vb(0,"div",53),i.dc("click",(function(t){return i.vc(e),i.hc().closeNewPlayerVaultPrompt()})),i.Vb(1,"div",47),i.Vb(2,"mat-toolbar",48),i.Vb(3,"div",49),i.Bc(4,Me,2,0,"p",54),i.Bc(5,Le,2,0,"p",54),i.Ub(),i.Ub(),i.Bc(6,qe,9,2,"span",32),i.Bc(7,Ve,2,0,"p",55),i.Bc(8,Ie,2,0,"p",55),i.Bc(9,Pe,2,0,"p",55),i.Bc(10,Be,2,0,"p",55),i.Bc(11,Ae,2,0,"p",55),i.Ub(),i.Ub()}if(2&e){const e=i.hc();i.Cb(1),i.mc("ngClass",i.pc(9,be,!0===e.optionsSelected.darkMode)),i.Cb(3),i.mc("ngIf",e.vaultTutorialStep<6),i.Cb(1),i.mc("ngIf",6===e.vaultTutorialStep),i.Cb(1),i.mc("ngIf",6===e.vaultTutorialStep),i.Cb(1),i.mc("ngIf",5===e.vaultTutorialStep),i.Cb(1),i.mc("ngIf",4===e.vaultTutorialStep),i.Cb(1),i.mc("ngIf",3===e.vaultTutorialStep),i.Cb(1),i.mc("ngIf",2===e.vaultTutorialStep),i.Cb(1),i.mc("ngIf",1===e.vaultTutorialStep)}}function Ge(e,t){1&e&&(i.Vb(0,"p",50),i.Cc(1,"Tap Anywhere To Continue"),i.Ub())}function De(e,t){1&e&&(i.Vb(0,"span"),i.Vb(1,"p",51),i.Cc(2,"You have arrived!"),i.Ub(),i.Vb(3,"p",51),i.Cc(4,"Here is your vault. This is where all your money is stored. Now let's put your guards to good use."),i.Ub(),i.Ub())}function Ee(e,t){1&e&&(i.Vb(0,"p",51),i.Cc(1,"To defend your vault, tap on the bandits coming your way to place a guard. Guards will also wait for a target if they don't see one."),i.Ub())}function _e(e,t){1&e&&(i.Vb(0,"p",51),i.Cc(1,"It is possible for some bandits to sneak around your guards. Place your guards in front of the bandits."),i.Ub())}function He(e,t){1&e&&(i.Vb(0,"p",51),i.Cc(1,"Admittedly, your guards don't look as equiped as the bandits coming this way.. Use them wisely!"),i.Ub())}function Fe(e,t){1&e&&(i.Vb(0,"p",51),i.Cc(1,"When this battle is over, I would recommend upgrading your guards and perhaps hire more of them."),i.Ub())}function ze(e,t){1&e&&(i.Vb(0,"p",51),i.Cc(1,"The bandits will be here any second! Get ready to tap on the bandits when you see them!"),i.Ub())}function $e(e,t){if(1&e){const e=i.Wb();i.Vb(0,"div",53),i.dc("click",(function(t){return i.vc(e),i.hc().closeNewPlayerVaultSecPrompt()})),i.Vb(1,"div",47),i.Vb(2,"mat-toolbar",48),i.Vb(3,"div",49),i.Bc(4,Ge,2,0,"p",54),i.Ub(),i.Ub(),i.Bc(5,De,5,0,"span",32),i.Bc(6,Ee,2,0,"p",55),i.Bc(7,_e,2,0,"p",55),i.Bc(8,He,2,0,"p",55),i.Bc(9,Fe,2,0,"p",55),i.Bc(10,ze,2,0,"p",55),i.Ub(),i.Ub()}if(2&e){const e=i.hc();i.Cb(1),i.mc("ngClass",i.pc(8,be,!0===e.optionsSelected.darkMode)),i.Cb(3),i.mc("ngIf",e.vaultSecTutorialStep<=6),i.Cb(1),i.mc("ngIf",6===e.vaultSecTutorialStep),i.Cb(1),i.mc("ngIf",5===e.vaultSecTutorialStep),i.Cb(1),i.mc("ngIf",4===e.vaultSecTutorialStep),i.Cb(1),i.mc("ngIf",3===e.vaultSecTutorialStep),i.Cb(1),i.mc("ngIf",2===e.vaultSecTutorialStep),i.Cb(1),i.mc("ngIf",1===e.vaultSecTutorialStep)}}function Ne(e,t){if(1&e){const e=i.Wb();i.Vb(0,"div",46),i.Vb(1,"div",47),i.Vb(2,"mat-toolbar",48),i.Vb(3,"div",49),i.Vb(4,"p",50),i.Cc(5,"It's All Over..."),i.Ub(),i.Ub(),i.Ub(),i.Vb(6,"span"),i.Vb(7,"p",51),i.Cc(8,"I'm sorry but your kingdom has been ransacked..."),i.Ub(),i.Vb(9,"p",51),i.Cc(10,"Would you like to start a new kingdom?"),i.Ub(),i.Vb(11,"button",56),i.dc("click",(function(t){return i.vc(e),i.hc().restartGame()})),i.Cc(12,"Aye..."),i.Ub(),i.Ub(),i.Ub(),i.Ub()}if(2&e){const e=i.hc();i.Cb(1),i.mc("ngClass",i.pc(2,be,!0===e.optionsSelected.darkMode)),i.Cb(10),i.mc("disabled",e.endGameCounter<=2)}}const je=[{path:"",component:(()=>{class e{constructor(e,t){this.swUpdate=e,this.ref=t,this.tradeWorkerGroup=[],this.stoneWorkerGroup=[],this.guardGroup=[],this.banditGroup=[],this.clicks=0,this.bricks=0,this.money=0,this.chiselLvl=0,this.barterLvl=0,this.stoneWorkerLvl=0,this.tradeWorkerLvl=0,this.guardWeaponLvl=0,this.guardArmorLvl=0,this.guardSpeedLvl=0,this.dayCounter=0,this.daysPast=0,this.version=.5,this.totalClicks=0,this.totalBricks=0,this.totalMoney=0,this.newPlayer=!0,this.newPlayerVault=!0,this.tutorialStep=8,this.vaultTutorialStep=6,this.vaultSecTutorialStep=6,this.tutorialStart=!1,this.isQuestAvailiable=!1,this.gameLevel=1,this.banditWave=0,this.chiselThrottled=!1,this.tutorialThrottled=!1,this.vaultTutorialThrottled=!1,this.tradeWorkersCount=0,this.stoneCuttersCount=0,this.guardCount=0,this.totalGuards=0,this.tutorialGuards=0,this.endGameCounter=0,this.newLevelCounter=0,this.stoneIconPath="assets/images/rock4.png",this.guardIconPath="assets/images/guard.png",this.banditIconPath="assets/images/bandit.png",this.chiselSoundPath="assets/sounds/chisel.wav",this.sellSoundPath="assets/sounds/sell.wav",this.chiselSound=new Audio,this.sellSound=new Audio,this.isGuardMoneyView=!1,this.quests={questLvl:0,questDesc:"",questReward:0,completed:!1,quest:{complete:!1,chiselLvl:0,barterLvl:0,masons:0,masonLvl:0,traders:0,traderLvl:0}},this.sky={sun:{x:0,y:0},moon:{x:0,y:0}},this.housingLimit=8,this.housingLvl=0,this.totalWorkers=0,this.stockpileLvl=0,this.stockpile=10,this.screenWidth=0,this.gameStageWidth=0,this.screenChange=!1,this.currentChapter="Humble Beginnings",this.banditWaveCounter=0,this.banditSpawnCount=0,this.isBanditWaveStarted=!1,this.moneyTaken=0,this.credit=3,this.banditsStopped=0,this.playerResources={chiselLvl:this.chiselLvl,money:this.money,bricks:this.bricks,clicks:this.clicks,barterLvl:this.barterLvl,tradeWorkers:this.tradeWorkerGroup,tradeWorkersCount:this.tradeWorkersCount,tradeWorkersLvl:this.tradeWorkerLvl,stoneWorkers:this.stoneWorkerGroup,stoneCuttersCount:this.stoneCuttersCount,stoneWorkerLvl:this.stoneWorkerLvl,guards:this.guardGroup,guardCount:this.guardCount,guardWeaponLvl:this.guardWeaponLvl,guardArmorLvl:this.guardArmorLvl,guardSpeedLvl:this.guardSpeedLvl,dayCounter:this.dayCounter,daysPast:this.daysPast,version:this.version,totalClicks:this.totalClicks,totalBricks:this.totalBricks,totalMoney:this.totalMoney,newPlayer:this.newPlayer,quests:this.quests,sky:this.sky,housingLimit:this.housingLimit,housingLvl:this.housingLvl,totalWorkers:this.totalWorkers,stockpile:this.stockpile,stockpileLvl:this.stockpileLvl,screenWidth:this.screenWidth,screenChange:this.screenChange,gameLevel:this.gameLevel,currentChapter:this.currentChapter,newPlayerVault:this.newPlayerVault,banditWave:this.banditWave,bandits:this.banditGroup,banditWaveCounter:this.banditWaveCounter,banditSpawnCount:this.banditSpawnCount,isBanditWaveStarted:this.isBanditWaveStarted,moneyTaken:this.moneyTaken,credit:this.credit,banditsStopped:this.banditsStopped,totalGuards:this.totalGuards,tutorialGuards:this.tutorialGuards},this.gameUpdateWarning=!1,this.isUpgradeDisplayed=!1,this.isStatsDisplayed=!1,this.gameOver=!1,this.disableChisel=!1,this.disableSell=!1,this.disableUpgrade=!1,this.disableStats=!1,this.disableAreas=!1,this.tradeWorkerObj={speed:0,frequency:Math.floor(5*Math.random())+1,x:0,y:0},this.optionsSelected={darkMode:!1,soundsOn:!0}}ngOnInit(){if(this.swUpdate.isEnabled&&(this.updateWatch=this.swUpdate.available.subscribe(()=>{this.gameUpdateWarning=!0})),this.chiselSound.src=this.chiselSoundPath,this.chiselSound.load(),this.sellSound.src=this.sellSoundPath,this.chiselSound.load(),localStorage.length>0&&localStorage.getItem("mason_options")){const e=JSON.parse(localStorage.getItem("mason_options"));this.optionsSelected={darkMode:e.darkMode,soundsOn:e.soundsOn};const t=document.getElementsByTagName("body");this.optionsSelected.darkMode?t[0].classList.add("darkMode"):t[0].classList.remove("darkMode")}else{document.getElementsByTagName("body")[0].classList.add("darkMode");const e=JSON.stringify(this.optionsSelected);localStorage.setItem("mason_options",e)}if(localStorage.length>0&&localStorage.getItem("mason_data")){const e=JSON.parse(localStorage.getItem("mason_data"));this.playerResources={chiselLvl:e.chiselLvl?e.chiselLvl:0,money:e.money?e.money:0,bricks:e.bricks?e.bricks:0,clicks:e.clicks?e.clicks:0,barterLvl:e.barterLvl?e.barterLvl:0,tradeWorkers:e.tradeWorkers?e.tradeWorkers:[],tradeWorkersCount:e.tradeWorkersCount?e.tradeWorkersCount:0,tradeWorkersLvl:e.tradeWorkersLvl?e.tradeWorkersLvl:0,stoneWorkers:e.stoneWorkers?e.stoneWorkers:[],stoneCuttersCount:e.stoneCuttersCount?e.stoneCuttersCount:0,stoneWorkerLvl:e.stoneWorkerLvl?e.stoneWorkerLvl:0,guards:e.guards?e.guards:[],guardCount:e.guardCount?e.guardCount:0,guardWeaponLvl:e.guardWeaponLvl?e.guardWeaponLvl:0,guardArmorLvl:e.guardArmorLvl?e.guardArmorLvl:0,guardSpeedLvl:e.guardSpeedLvl?e.guardSpeedLvl:0,dayCounter:e.dayCounter?e.dayCounter:0,daysPast:e.daysPast?e.daysPast:0,version:e.version,totalClicks:e.totalClicks?e.totalClicks:0,totalBricks:e.totalBricks?e.totalBricks:0,totalMoney:e.totalMoney?e.totalMoney:0,newPlayer:void 0===e.newPlayer||!0===e.newPlayer,quests:void 0===e.quests?this.quests:e.quests,sky:void 0===e.sky?this.sky:e.sky,housingLimit:void 0===e.housingLimit?this.housingLimit:e.housingLimit,housingLvl:void 0===e.housingLvl?this.housingLvl:e.housingLvl,totalWorkers:void 0===e.totalWorkers?this.totalWorkers:e.totalWorkers,stockpile:void 0===e.stockpile?this.stockpile:e.stockpile,stockpileLvl:void 0===e.stockpileLvl?this.stockpileLvl:e.stockpileLvl,screenWidth:void 0===e.screenWidth?this.screenWidth:e.screenWidth,screenChange:void 0===e.screenChange?this.screenChange:e.screenChange,gameLevel:void 0===e.gameLevel?this.gameLevel:e.gameLevel,currentChapter:void 0===e.currentChapter?this.currentChapter:e.currentChapter,newPlayerVault:void 0===e.newPlayerVault||!0===e.newPlayerVault,banditWave:void 0===e.banditWave?this.banditWave:e.banditWave,bandits:e.bandits?e.bandits:[],banditWaveCounter:e.banditWaveCounter?e.banditWaveCounter:0,banditSpawnCount:e.banditSpawnCount?e.banditSpawnCount:0,isBanditWaveStarted:!!e.isBanditWaveStarted&&e.isBanditWaveStarted,moneyTaken:e.moneyTaken?e.moneyTaken:0,credit:e.credit?e.credit:3,banditsStopped:e.banditsStopped?e.banditsStopped:0,totalGuards:e.totalGuards?e.totalGuards:0,tutorialGuards:e.tutorialGuards?e.tutorialGuards:0},this.chiselLvl=e.chiselLvl?e.chiselLvl:0,this.money=e.money?e.money:0,this.bricks=e.bricks?e.bricks:0,this.clicks=e.clicks?e.clicks:0,this.barterLvl=e.barterLvl?e.barterLvl:0,this.tradeWorkerGroup=e.tradeWorkers?e.tradeWorkers:[],this.tradeWorkersCount=e.tradeWorkersCount?e.tradeWorkersCount:0,this.tradeWorkerLvl=e.tradeWorkersLvl?e.tradeWorkersLvl:0,this.stoneWorkerGroup=e.stoneWorkers?e.stoneWorkers:[],this.stoneCuttersCount=e.stoneCuttersCount?e.stoneCuttersCount:0,this.stoneWorkerLvl=e.stoneWorkerLvl?e.stoneWorkerLvl:0,this.guardGroup=e.guards?e.guards:[],this.guardCount=e.guardCount?e.guardCount:0,this.guardWeaponLvl=e.guardWeaponLvl?e.guardWeaponLvl:0,this.guardArmorLvl=e.guardArmorLvl?e.guardArmorLvl:0,this.guardSpeedLvl=e.guardSpeedLvl?e.guardSpeedLvl:0,this.dayCounter=e.dayCounter?e.dayCounter:0,this.daysPast=e.daysPast?e.daysPast:0,this.version=e.version,this.totalClicks=e.totalClicks?e.totalClicks:0,this.totalBricks=e.totalBricks?e.totalBricks:0,this.totalMoney=e.totalMoney?e.totalMoney:0,this.newPlayer=void 0===e.newPlayer||!0===e.newPlayer,this.quests=void 0===e.quests?this.quests:e.quests,this.sky=void 0===e.sky?this.sky:e.sky,this.housingLimit=void 0===e.housingLimit?this.housingLimit:e.housingLimit,this.housingLvl=void 0===e.housingLvl?this.housingLvl:e.housingLvl,this.totalWorkers=void 0===e.totalWorkers?this.totalWorkers:e.totalWorkers,this.stockpile=void 0===e.stockpile?this.stockpile:e.stockpile,this.stockpileLvl=void 0===e.stockpileLvl?this.stockpileLvl:e.stockpileLvl,this.screenWidth=void 0===e.screenWidth?this.screenWidth:e.screenWidth,this.screenChange=void 0===e.screenChange?this.screenChange:e.screenChange,this.gameLevel=void 0===e.gameLevel?this.gameLevel:e.gameLevel,this.currentChapter=void 0===e.currentChapter?this.currentChapter:e.currentChapter,this.newPlayerVault=void 0===e.newPlayerVault?this.newPlayerVault:e.newPlayerVault,this.banditWave=void 0===e.banditWave?this.banditWave:e.banditWave,this.banditGroup=e.bandits?e.bandits:[],this.banditWaveCounter=e.banditWaveCounter?e.banditWaveCounter:0,this.banditSpawnCount=e.banditSpawnCount?e.banditSpawnCount:0,this.isBanditWaveStarted=!!e.isBanditWaveStarted&&e.isBanditWaveStarted,this.moneyTaken=e.moneyTaken?e.moneyTaken:0,this.credit=e.credit?e.credit:0,this.banditsStopped=e.banditsStopped?e.banditsStopped:0,this.totalGuards=e.totalGuards?e.totalGuards:0,this.tutorialGuards=e.tutorialGuards?e.tutorialGuards:0}this.getScreenWidth()}chisleStone(){this.chiselThrottled||(this.playerResources.bricks<this.playerResources.stockpile&&(this.optionsSelected.soundsOn&&this.chiselSound.play(),this.chiselThrottled=!0,this.isQuestAvailiable=!1,this.clicks+=1,this.totalClicks+=1,this.playerResources={chiselLvl:this.chiselLvl,money:this.money,bricks:this.bricks,clicks:this.clicks,barterLvl:this.barterLvl,tradeWorkers:this.tradeWorkerGroup,tradeWorkersCount:this.tradeWorkersCount,tradeWorkersLvl:this.tradeWorkerLvl,stoneWorkers:this.stoneWorkerGroup,stoneCuttersCount:this.stoneCuttersCount,stoneWorkerLvl:this.stoneWorkerLvl,guards:this.guardGroup,guardCount:this.guardCount,guardWeaponLvl:this.guardWeaponLvl,guardArmorLvl:this.guardArmorLvl,guardSpeedLvl:this.guardSpeedLvl,dayCounter:this.dayCounter,daysPast:this.daysPast,version:this.version,totalClicks:this.totalClicks,totalBricks:this.totalBricks,totalMoney:this.totalMoney,newPlayer:this.newPlayer,quests:this.quests,sky:this.sky,housingLimit:this.housingLimit,housingLvl:this.housingLvl,totalWorkers:this.totalWorkers,stockpile:this.stockpile,stockpileLvl:this.stockpileLvl,screenWidth:this.screenWidth,screenChange:this.screenChange,gameLevel:this.gameLevel,currentChapter:this.currentChapter,newPlayerVault:this.newPlayerVault,banditWave:this.banditWave,bandits:this.banditGroup,banditWaveCounter:this.banditWaveCounter,banditSpawnCount:this.banditSpawnCount,isBanditWaveStarted:this.isBanditWaveStarted,moneyTaken:this.moneyTaken,credit:this.credit,banditsStopped:this.banditsStopped,totalGuards:this.totalGuards,tutorialGuards:this.tutorialGuards},this.ref.markForCheck(),setTimeout(()=>{this.chiselThrottled=!1},100)),5===this.tutorialStep&&this.playerResources.bricks>0&&(this.tutorialStart=!1))}sellStone(){let e=Math.floor(Math.random()*(this.barterLvl+1))+1;if(e>=this.bricks&&(e=this.bricks),this.bricks>0){const t=(Math.floor(Math.random()*(this.barterLvl+3+this.playerResources.tradeWorkersLvl))+(1+this.barterLvl+this.playerResources.tradeWorkersLvl))*e;this.money+=t,this.totalMoney+=t,this.bricks-=e,this.totalClicks+=1,this.optionsSelected.soundsOn&&this.sellSound.play(),document.getElementById("money").style.color="#8ADC41";const s=setInterval(()=>{document.getElementById("money")?(document.getElementById("money").style.color=this.playerResources.money>=0?"#fff":"#F7461F",clearInterval(s)):clearInterval(s)},350)}else this.bricks<=0&&(this.bricks=0);this.playerResources.totalClicks=this.totalClicks,this.playerResources.totalMoney=this.totalMoney,this.playerResources.money=this.money,this.playerResources.bricks=this.bricks,this.ref.markForCheck(),5===this.tutorialStep&&(this.tutorialStart=!1,this.tutorialStep--)}playerResourcesReturn(e){if(this.playerResources=e,this.clicks=e.clicks,this.money=e.money,this.totalMoney=e.totalMoney,this.bricks=e.bricks,this.chiselLvl=e.chiselLvl,this.tradeWorkerLvl=e.tradeWorkersLvl,this.tradeWorkersCount=e.tradeWorkersCount,this.stoneWorkerLvl=e.stoneWorkerLvl,this.stoneCuttersCount=e.stoneCuttersCount,this.barterLvl=e.barterLvl,this.dayCounter=e.dayCounter,this.daysPast=e.daysPast,this.totalBricks=e.totalBricks,this.newPlayer=e.newPlayer,this.sky=e.sky,this.housingLimit=e.housingLimit,this.housingLvl=e.housingLvl,this.totalWorkers=e.totalWorkers,this.stockpile=e.stockpile,this.stockpileLvl=e.stockpileLvl,this.screenWidth=e.screenWidth,this.screenChange=e.screenChange,this.gameLevel=e.gameLevel,this.currentChapter=e.currentChapter,this.newPlayerVault=e.newPlayerVault,this.banditWave=e.banditWave,this.guardWeaponLvl=e.guardWeaponLvl,this.guardArmorLvl=e.guardArmorLvl,this.guardSpeedLvl=e.guardSpeedLvl,this.guardCount=e.guardCount,this.banditWaveCounter=e.banditWaveCounter,this.banditSpawnCount=e.banditSpawnCount,this.isBanditWaveStarted=e.isBanditWaveStarted,this.moneyTaken=e.moneyTaken,this.credit=e.credit,this.banditsStopped=e.banditsStopped,this.totalGuards=e.totalGuards,this.tutorialGuards=e.tutorialGuards,this.setQuests(),0===this.playerResources.credit){this.gameOver=!0;const e=setInterval(()=>{this.endGameCounter++,this.endGameCounter>=2&&(this.endGameCounter=0,clearInterval(e))},1e3)}this.ref.markForCheck()}stoneWorkerReturn(e){if(e){const e={image:new Image,speed:0,frequency:Math.floor(5*Math.random())+1,workLoad:Math.floor(5*Math.random())+3,x:0,y:0,startPos:0,direction:0,startedWork:!0};this.stoneWorkerGroup.push(e),this.playerResources.stoneWorkers=this.stoneWorkerGroup,this.ref.markForCheck()}}tradeWorkerReturn(e){if(e){const e={image:new Image,speed:0,frequency:Math.floor(5*Math.random())+1,x:0,y:0,startPos:0,direction:0,startedWork:!0};this.tradeWorkerGroup.push(e),this.playerResources.tradeWorkers=this.tradeWorkerGroup,this.ref.markForCheck()}}guardReturn(e){e&&(this.guardCount++,this.totalGuards++,this.totalWorkers++,this.playerResources.guardCount=this.guardCount,this.playerResources.totalGuards=this.totalGuards,this.playerResources.totalWorkers=this.totalWorkers,this.ref.markForCheck())}displayUpgrades(){this.isUpgradeDisplayed?(this.isUpgradeDisplayed=!1,this.newPlayer&&(this.tutorialStart=!1,this.tutorialStep=3)):(this.saveGame(),this.isUpgradeDisplayed=!0,this.playerResources.clicks=0,this.clicks=0)}displayStats(){this.isStatsDisplayed?(this.isStatsDisplayed=!1,this.newPlayer&&(this.tutorialStart=!1,this.tutorialStep=2)):(this.saveGame(),this.isStatsDisplayed=!0,this.playerResources.clicks=0,this.clicks=0)}getNewUpdatesFromServer(){this.gameUpdateWarning=!1,window.location.reload()}getUpdateLater(){this.updateWatch&&(this.updateWatch.unsubscribe(),this.gameUpdateWarning=!1)}saveGame(){const e=JSON.stringify(this.playerResources);localStorage.setItem("mason_data",e)}saveGameAndQuit(){const e=JSON.stringify(this.playerResources);localStorage.setItem("mason_data",e),history.back()}closeNewPlayerPrompt(){this.tutorialThrottled||(this.tutorialThrottled=!0,6===this.tutorialStep&&(this.tutorialStart=!0,document.getElementById("Chisel-Btn").style.border="3px solid #8ADC41",this.disableChisel=!1,this.disableSell=!0,this.disableUpgrade=!0,this.disableStats=!0,this.disableAreas=!0),5===this.tutorialStep&&(setTimeout(()=>{this.tutorialStart=!0},1500),document.getElementById("Chisel-Btn").style.border="none",document.getElementById("Sell-Btn").style.border="3px solid #8ADC41",this.disableChisel=!0,this.disableSell=!1,this.disableUpgrade=!0,this.disableStats=!0,this.disableAreas=!0),4===this.tutorialStep&&(setTimeout(()=>{this.tutorialStart=!0},1500),document.getElementById("Chisel-Btn").style.border="none",document.getElementById("Sell-Btn").style.border="none",document.getElementById("Upgrade-Btn").style.border="3px solid #8ADC41",this.disableChisel=!0,this.disableSell=!0,this.disableUpgrade=!1,this.disableStats=!0,this.disableAreas=!0),3===this.tutorialStep&&(setTimeout(()=>{this.tutorialStart=!0},1500),document.getElementById("Chisel-Btn").style.border="none",document.getElementById("Sell-Btn").style.border="none",document.getElementById("Upgrade-Btn").style.border="none",document.getElementById("Stats-Btn").style.border="3px solid #8ADC41",this.disableChisel=!0,this.disableSell=!0,this.disableUpgrade=!0,this.disableStats=!1,this.disableAreas=!0),2===this.tutorialStep&&(setTimeout(()=>{this.tutorialStart=!0},1500),document.getElementById("Chisel-Btn").style.border="none",document.getElementById("Sell-Btn").style.border="none",document.getElementById("Upgrade-Btn").style.border="none",document.getElementById("Stats-Btn").style.border="none",document.getElementById("Area-Btn").style.border="3px solid #8ADC41",this.disableChisel=!0,this.disableSell=!0,this.disableUpgrade=!0,this.disableStats=!0,this.disableAreas=!1),1===this.tutorialStep&&(this.disableChisel=!1,this.disableSell=!1,this.disableUpgrade=!1,this.disableStats=!1,this.disableAreas=!1,document.getElementById("Area-Btn").style.border="none",this.tutorialDone(),this.saveGame()),this.tutorialStep>=6&&this.tutorialStep--,setTimeout(()=>{this.tutorialThrottled=!1},2e3))}closeNewPlayerVaultPrompt(){this.vaultTutorialThrottled||(this.vaultTutorialThrottled=!0,this.vaultTutorialStep<6&&this.vaultTutorialStep--,0===this.vaultTutorialStep&&(document.getElementById("Area-Btn").style.border="3px solid #8ADC41",this.disableChisel=!0,this.disableSell=!0,this.disableUpgrade=!0,this.disableStats=!0,this.disableAreas=!1),setTimeout(()=>{this.vaultTutorialThrottled=!1},2e3))}closeNewPlayerVaultSecPrompt(){this.vaultTutorialThrottled||(this.vaultTutorialThrottled=!0,this.vaultSecTutorialStep--,0===this.vaultSecTutorialStep&&this.vaultTutorialDone(),setTimeout(()=>{this.vaultTutorialThrottled=!1},2e3))}beginTutorial(){this.tutorialStep=8}tutorialDone(){this.newPlayer=!1,this.tutorialStep=8,this.playerResources.newPlayer=!1,this.tutorialStart=!1,this.isQuestAvailiable=!0,this.ref.markForCheck(),this.newQuestMessage(),this.saveGame()}vaultTutorialDone(){this.newPlayerVault=!1,this.playerResources.newPlayerVault=!1,this.playerResources.banditWaveCounter=177,this.newLevelCounter=0,this.ref.markForCheck(),this.saveGame()}beginVaultTutorial(){this.vaultTutorialStep--}getScreenWidth(){0===this.playerResources.screenWidth&&(this.playerResources.screenWidth=window.innerWidth),this.playerResources.screenWidth===window.innerWidth?this.playerResources.screenChange=!1:this.playerResources.screenWidth!==window.innerWidth&&(this.playerResources.screenChange=!0,this.playerResources.screenWidth=window.innerWidth),this.gameStageWidth=.9*window.innerWidth}onResize(e){this.getScreenWidth()}ShowQuarry(){this.isGuardMoneyView=!1,this.playerResources.newPlayer&&(this.tutorialStep--,this.tutorialStart=!1)}ShowVault(){this.isGuardMoneyView=!0,this.playerResources.newPlayerVault&&(document.getElementById("Area-Btn").style.border="none",this.disableChisel=!1,this.disableSell=!1,this.disableUpgrade=!1,this.disableStats=!1,this.disableAreas=!1)}restartGame(){localStorage.removeItem("mason_data"),window.location.reload()}newQuestMessage(){const e=setInterval(()=>{this.isQuestAvailiable=!1,e&&clearInterval(e)},4500)}questCompleted(){this.quests.completed=!0,this.quests.quest.complete=!0;const e=setInterval(()=>{this.quests.completed=!1,this.isQuestAvailiable=!0,this.ref.markForCheck(),this.newQuestMessage(),e&&clearInterval(e)},3500)}setQuests(){if(0!==this.quests.questLvl||this.quests.completed)if(1!==this.quests.questLvl||this.quests.completed)if(2!==this.quests.questLvl||this.quests.completed)if(3!==this.quests.questLvl||this.quests.completed)if(4!==this.quests.questLvl||this.quests.completed)if(5!==this.quests.questLvl||this.quests.completed)if(6!==this.quests.questLvl||this.quests.completed)if(7!==this.quests.questLvl||this.quests.completed)if(8!==this.quests.questLvl||this.quests.completed)if(9!==this.quests.questLvl||this.quests.completed)if(10!==this.quests.questLvl||this.quests.completed)if(11!==this.quests.questLvl||this.quests.completed)12!==this.quests.questLvl||this.quests.completed?13!==this.quests.questLvl||this.quests.completed?14!==this.quests.questLvl||this.quests.completed?15!==this.quests.questLvl||this.quests.completed?16!==this.quests.questLvl||this.quests.completed?17!==this.quests.questLvl||this.quests.completed?18!==this.quests.questLvl||this.quests.completed?19!==this.quests.questLvl||this.quests.completed?20!==this.quests.questLvl||this.quests.completed||(this.quests.questDesc="That is all there is for now. Get ready for the next challenge \u{1f647}\u200d\u2642\ufe0f",this.currentChapter="Rise To Power",this.playerResources.currentChapter=this.currentChapter,this.playerResources.gameLevel=3,this.quests.quest.complete=!1,this.quests.questReward=1e5):(this.quests.questDesc="Beat 30 waves of bandits",this.quests.quest.complete=!1,this.quests.questReward=2100,this.playerResources.banditWave>30&&!this.quests.quest.complete&&(this.playerResources.totalMoney+=this.quests.questReward,this.playerResources.money+=this.quests.questReward,this.quests.questLvl++,this.questCompleted())):(this.quests.questDesc="Beat 27 waves of bandits",this.quests.quest.complete=!1,this.quests.questReward=1900,this.playerResources.banditWave>27&&!this.quests.quest.complete&&(this.playerResources.totalMoney+=this.quests.questReward,this.playerResources.money+=this.quests.questReward,this.quests.questLvl++,this.questCompleted())):(this.quests.questDesc="Beat 24 waves of bandits",this.quests.quest.complete=!1,this.quests.questReward=1700,this.playerResources.banditWave>24&&!this.quests.quest.complete&&(this.playerResources.totalMoney+=this.quests.questReward,this.playerResources.money+=this.quests.questReward,this.quests.questLvl++,this.questCompleted())):(this.quests.questDesc="Beat 21 waves of bandits",this.quests.quest.complete=!1,this.quests.questReward=1500,this.playerResources.banditWave>21&&!this.quests.quest.complete&&(this.playerResources.totalMoney+=this.quests.questReward,this.playerResources.money+=this.quests.questReward,this.quests.questLvl++,this.questCompleted())):(this.quests.questDesc="Beat 18 waves of bandits",this.quests.quest.complete=!1,this.quests.questReward=1300,this.playerResources.banditWave>18&&!this.quests.quest.complete&&(this.playerResources.totalMoney+=this.quests.questReward,this.playerResources.money+=this.quests.questReward,this.quests.questLvl++,this.questCompleted())):(this.quests.questDesc="Beat 15 waves of bandits",this.quests.quest.complete=!1,this.quests.questReward=1100,this.playerResources.banditWave>15&&!this.quests.quest.complete&&(this.playerResources.totalMoney+=this.quests.questReward,this.playerResources.money+=this.quests.questReward,this.quests.questLvl++,this.questCompleted())):(this.quests.questDesc="Beat 12 waves of bandits",this.quests.quest.complete=!1,this.quests.questReward=900,this.playerResources.banditWave>12&&!this.quests.quest.complete&&(this.playerResources.totalMoney+=this.quests.questReward,this.playerResources.money+=this.quests.questReward,this.quests.questLvl++,this.questCompleted())):(this.quests.questDesc="Beat 5 waves of bandits",this.quests.quest.complete=!1,this.quests.questReward=700,this.playerResources.banditWave>5&&!this.quests.quest.complete&&(this.playerResources.totalMoney+=this.quests.questReward,this.playerResources.money+=this.quests.questReward,this.quests.questLvl++,this.questCompleted()));else{if(this.quests.questDesc="Beat 2 waves of bandits",this.currentChapter="Rise To Fame",this.playerResources.currentChapter=this.currentChapter,this.playerResources.gameLevel=2,this.quests.quest.complete=!1,this.quests.questReward=500,this.playerResources.newPlayerVault&&this.newPlayerVault){this.tutorialGuards=3,this.guardCount=3,this.totalGuards=3,this.playerResources.tutorialGuards=this.tutorialGuards,this.playerResources.guardCount=this.guardCount,this.playerResources.totalGuards=this.totalGuards;const e=setInterval(()=>{this.newLevelCounter++,this.newLevelCounter>=2&&clearInterval(e)},300)}this.playerResources.banditWave>2&&!this.quests.quest.complete&&(this.playerResources.totalMoney+=this.quests.questReward,this.playerResources.money+=this.quests.questReward,this.quests.questLvl++,this.questCompleted())}else this.quests.questDesc="Get over $2,000 Total Money",this.quests.quest.complete=!1,this.quests.questReward=40,this.playerResources.totalMoney>=2e3&&!this.quests.quest.complete&&(this.playerResources.totalMoney+=this.quests.questReward,this.playerResources.money+=this.quests.questReward,this.quests.questLvl++,this.questCompleted());else this.quests.questDesc="Hire A Total of 3 Traders",this.quests.quest.traders=3,this.quests.questReward=30,this.quests.quest.complete=!1,this.playerResources.tradeWorkersCount>=this.quests.quest.traders&&!this.quests.quest.complete&&(this.playerResources.totalMoney+=this.quests.questReward,this.playerResources.money+=this.quests.questReward,this.quests.questLvl++,this.questCompleted());else this.quests.questDesc="Hire A Total Of 5 Masons",this.quests.quest.masons=5,this.quests.questReward=35,this.quests.quest.complete=!1,this.playerResources.stoneCuttersCount>=this.quests.quest.masons&&!this.quests.quest.complete&&(this.playerResources.totalMoney+=this.quests.questReward,this.playerResources.money+=this.quests.questReward,this.quests.questLvl++,this.questCompleted());else this.quests.questDesc="Upgrade The Housing to Level 1",this.quests.quest.complete=!1,this.quests.questReward=20,this.playerResources.housingLvl>=1&&!this.quests.quest.complete&&(this.playerResources.totalMoney+=this.quests.questReward,this.playerResources.money+=this.quests.questReward,this.quests.questLvl++,this.questCompleted());else this.quests.questDesc="Get Your Chisel Skill Up To Level 7",this.quests.quest.chiselLvl=7,this.quests.questReward=25,this.quests.quest.complete=!1,this.playerResources.chiselLvl>=this.quests.quest.chiselLvl&&!this.quests.quest.complete&&(this.playerResources.totalMoney+=this.quests.questReward,this.playerResources.money+=this.quests.questReward,this.quests.questLvl++,this.questCompleted());else this.quests.questDesc="Get Your Barter Skill Up To Level 5",this.quests.quest.barterLvl=5,this.quests.questReward=35,this.quests.quest.complete=!1,this.playerResources.barterLvl>=this.quests.quest.barterLvl&&!this.quests.quest.complete&&(this.playerResources.totalMoney+=this.quests.questReward,this.playerResources.money+=this.quests.questReward,this.quests.questLvl++,this.questCompleted());else this.quests.questDesc="Upgrade The Stockpile to Level 1",this.quests.quest.complete=!1,this.quests.questReward=15,this.playerResources.stockpileLvl>=1&&!this.quests.quest.complete&&(this.playerResources.totalMoney+=this.quests.questReward,this.playerResources.money+=this.quests.questReward,this.quests.questLvl++,this.questCompleted());else this.quests.questDesc="Hire A Trader",this.quests.quest.traders=1,this.quests.questReward=10,this.quests.quest.complete=!1,this.playerResources.tradeWorkersCount>=this.quests.quest.traders&&!this.quests.quest.complete&&(this.playerResources.totalMoney+=this.quests.questReward,this.playerResources.money+=this.quests.questReward,this.quests.questLvl++,this.questCompleted());else this.quests.questDesc="Hire A Mason",this.quests.quest.masons=1,this.quests.questReward=10,this.quests.quest.complete=!1,this.playerResources.stoneCuttersCount>=this.quests.quest.masons&&!this.quests.quest.complete&&(this.playerResources.totalMoney+=this.quests.questReward,this.playerResources.money+=this.quests.questReward,this.quests.questLvl++,this.questCompleted());else this.quests.questDesc="Get Your Chisel Skill Up To Level 3",this.quests.quest.chiselLvl=3,this.quests.questReward=10,this.quests.quest.complete=!1,this.playerResources.chiselLvl>=this.quests.quest.chiselLvl&&!this.quests.quest.complete&&(this.playerResources.totalMoney+=this.quests.questReward,this.playerResources.money+=this.quests.questReward,this.quests.questLvl++,this.questCompleted());else this.quests.questDesc="Get Your Barter Skill Up To Level 3",this.quests.quest.barterLvl=3,this.quests.questReward=20,this.playerResources.barterLvl>=this.quests.quest.barterLvl&&!this.quests.quest.complete&&(this.playerResources.totalMoney+=this.quests.questReward,this.playerResources.money+=this.quests.questReward,this.quests.questLvl++,this.questCompleted());this.playerResources.quests=this.quests}}return e.\u0275fac=function(t){return new(t||e)(i.Pb(o.b),i.Pb(i.h))},e.\u0275cmp=i.Jb({type:e,selectors:[["app-mason-game"]],decls:21,vars:11,consts:[[1,"game-content",3,"resize"],["mat-raised-button","",1,"noSelect","app-exit",3,"click"],[1,"logo"],["id","Area-Btn","mat-raised-button","",1,"area-btn",3,"disabled","matMenuTriggerFor"],["menu","matMenu"],["id","Quarry-Btn","mat-menu-item","",3,"click"],["mat-menu-item","",3,"click",4,"ngIf"],[1,"game-wrapper"],["class","upgrade-space",4,"ngIf"],["class","game-space",4,"ngIf"],["class","stat-space",4,"ngIf"],["class","modal",4,"ngIf"],["class","modal",3,"click",4,"ngIf"],["mat-menu-item","",3,"click"],[1,"upgrade-space"],[1,"options-title-contents"],[1,"chapter-text"],["class","quest-completed",3,"width","right",4,"ngIf"],["id","Close-Upgrades-Btn","mat-raised-button","",1,"close-upgrades",3,"click"],[3,"playerResources","stoneWorkerReturn","tradeWorkerReturn","guardReturn","playerResourcesReturn"],[1,"quest-completed"],[1,"game-space"],[1,"toolbar"],["id","money",1,"money-count"],["id","bricks",1,"brick-count",3,"ngClass"],["alt","bricks",1,"brick-icon",3,"src"],[1,"guard-count",3,"ngClass"],["alt","guard",1,"guard-icon",3,"src"],[1,"bandit-count",3,"ngClass"],["alt","bandit",1,"guard-icon",3,"src"],["class","quest-completed",3,"ngClass","width","right",4,"ngIf"],[3,"ngClass","playerResources","isGuardMoneyView","playerResourcesReturn"],[4,"ngIf"],[1,"controls-background"],[1,"controls-wrapper"],["id","Chisel-Btn","mat-raised-button","","class","control-button",3,"disabled","click",4,"ngIf"],["id","Sell-Btn","mat-raised-button","","class","control-button",3,"disabled","click",4,"ngIf"],["id","Upgrade-Btn","mat-raised-button","",1,"control-button",3,"disabled","click"],["id","Stats-Btn","mat-raised-button","",1,"control-button",3,"disabled","click"],[1,"quest-completed",3,"ngClass"],["id","Chisel-Btn","mat-raised-button","",1,"control-button",3,"disabled","click"],["id","Sell-Btn","mat-raised-button","",1,"control-button",3,"disabled","click"],[1,"stat-space"],[1,"stats-title-contents"],["id","Close-Stats-Btn","mat-raised-button","","color","primary",1,"close-stats",3,"click"],[3,"playerResources"],[1,"modal"],[1,"info-wrapper",3,"ngClass"],["color","primary"],["id","menu-width"],[1,"info-header"],[1,"info-text","info-text-area"],["mat-raised-button","","color","primary",1,"control-button",3,"click"],[1,"modal",3,"click"],["class","info-header",4,"ngIf"],["class","info-text info-text-area",4,"ngIf"],["mat-raised-button","","color","primary",1,"control-button",3,"disabled","click"]],template:function(e,t){if(1&e&&(i.Vb(0,"div",0),i.dc("resize",(function(e){return t.onResize(e)}),!1,i.uc),i.Vb(1,"button",1),i.dc("click",(function(e){return t.saveGameAndQuit()})),i.Vb(2,"mat-icon",2),i.Cc(3,"exit_to_app"),i.Ub(),i.Cc(4," Exit"),i.Ub(),i.Vb(5,"button",3),i.Cc(6,"Areas"),i.Ub(),i.Vb(7,"mat-menu",null,4),i.Vb(9,"button",5),i.dc("click",(function(e){return t.ShowQuarry()})),i.Cc(10,"Quarry"),i.Ub(),i.Bc(11,ae,2,0,"button",6),i.Ub(),i.Vb(12,"div",7),i.Bc(13,oe,8,3,"span",8),i.Bc(14,me,26,35,"span",9),i.Bc(15,ye,7,2,"span",10),i.Bc(16,ge,13,3,"div",11),i.Bc(17,xe,14,13,"div",12),i.Bc(18,Oe,12,11,"div",12),i.Bc(19,$e,11,10,"div",12),i.Bc(20,Ne,13,4,"div",11),i.Ub(),i.Ub()),2&e){const e=i.sc(8);i.Cb(5),i.mc("disabled",t.disableAreas)("matMenuTriggerFor",e),i.Cb(6),i.mc("ngIf",t.playerResources.gameLevel>=2),i.Cb(2),i.mc("ngIf",t.isUpgradeDisplayed),i.Cb(1),i.mc("ngIf",!t.isUpgradeDisplayed&&!t.isStatsDisplayed),i.Cb(1),i.mc("ngIf",t.isStatsDisplayed),i.Cb(1),i.mc("ngIf",t.gameUpdateWarning),i.Cb(1),i.mc("ngIf",t.newPlayer&&!t.tutorialStart&&t.tutorialStep>0),i.Cb(1),i.mc("ngIf",t.playerResources.newPlayerVault&&11===t.quests.questLvl&&t.vaultTutorialStep>0),i.Cb(1),i.mc("ngIf",t.playerResources.newPlayerVault&&t.isGuardMoneyView),i.Cb(1),i.mc("ngIf",t.gameOver)}},directives:[n.a,c.a,h.c,h.d,h.a,r.k,z,r.i,J,Z,re,u.a],styles:[".brick-icon[_ngcontent-%COMP%], .guard-icon[_ngcontent-%COMP%]{width:1.1rem}.brick-count[_ngcontent-%COMP%], .guard-count[_ngcontent-%COMP%]{float:right;padding-right:calc(10% + .5rem)}.bandit-count[_ngcontent-%COMP%], .brick-count[_ngcontent-%COMP%], .guard-count[_ngcontent-%COMP%]{font-size:calc(100% + .1rem)}.bandit-count[_ngcontent-%COMP%]{position:absolute;left:48%;opacity:.77;color:#fff}.money-count[_ngcontent-%COMP%]{float:left;padding-left:calc(10% + .5rem);font-size:calc(100% + .1rem)}.close-upgrades[_ngcontent-%COMP%]{margin-bottom:calc(1% + .4em);background-color:grey;color:#fff;float:right;margin-right:.55rem;margin-top:.4rem;width:calc(24% + 2.7rem)}.chapter-text[_ngcontent-%COMP%]{display:inline-block;font-weight:700;width:9em;padding-left:15px;font-size:calc(100% + .1rem)}.close-stats[_ngcontent-%COMP%]{margin-bottom:calc(1% + .4em);background-color:grey;color:#fff;float:right;margin-right:.55rem;margin-top:.4rem;width:calc(24% + 2.7rem)}.logo[_ngcontent-%COMP%]{font-size:20px;width:19px;height:21px}.save-text[_ngcontent-%COMP%]{position:absolute;top:14%;left:112%}.info-wrapper[_ngcontent-%COMP%]{height:calc(46% + .1em);top:calc(21% - .1em);background-color:#606060}.options-title-contents[_ngcontent-%COMP%], .stats-title-contents[_ngcontent-%COMP%]{background-color:#228b22}.quest-completed[_ngcontent-%COMP%]{position:absolute;top:calc(16% + 1.4em);right:calc(2em + 2.4%);text-align:center;width:90%;background-color:grey;color:#fff;border-radius:5px;z-index:10;padding:.2rem .1rem;font-size:calc(100% + .1rem)}.noSelect[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-align:center;align-items:center;-webkit-box-pack:center;justify-content:center}.display[_ngcontent-%COMP%]{display:inline}.hide[_ngcontent-%COMP%]{display:none}.area-btn[_ngcontent-%COMP%]{left:calc(76% - 3.3rem)}.app-exit[_ngcontent-%COMP%], .area-btn[_ngcontent-%COMP%]{font-weight:700;cursor:pointer;position:absolute;top:calc(1% + .26em);color:#fff;background-color:grey;width:calc(24% + 2.7rem)}.app-exit[_ngcontent-%COMP%]{margin-left:.55rem}.controls-wrapper[_ngcontent-%COMP%]{margin:0 auto}.controls-background[_ngcontent-%COMP%]{width:100%;position:fixed;left:0;background-color:silver!important;height:100%}.toolbar[_ngcontent-%COMP%]{color:#fff;background-color:#8b4513;width:100%;border-radius:1px;position:absolute;font-size:calc(2em - 50%);padding-bottom:.1rem;padding-top:.1rem}"],changeDetection:0}),e})()}];let Qe=(()=>{class e{}return e.\u0275mod=i.Nb({type:e}),e.\u0275inj=i.Mb({factory:function(t){return new(t||e)},imports:[[a.d.forChild(je)],a.d]}),e})();s.d(t,"MasonGameModule",(function(){return Je}));let Je=(()=>{class e{}return e.\u0275mod=i.Nb({type:e}),e.\u0275inj=i.Mb({factory:function(t){return new(t||e)},imports:[[Qe,r.c,n.b,u.b,c.b,h.b,l.b]]}),e})()}}]);