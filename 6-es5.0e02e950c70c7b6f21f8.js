function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var s=0;s<t.length;s++){var r=t[s];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _createClass(e,t,s){return t&&_defineProperties(e.prototype,t),s&&_defineProperties(e,s),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{"4shC":function(e,t,s){"use strict";s.r(t);var r=s("ofXK"),a=s("tyNb"),o=s("fXoL"),i=s("Jho9"),n=s("NFeN"),c=s("bTqV"),l=s("STbY"),u=s("/t3+");function h(e,t){if(1&e){var s=o.Vb();o.Ub(0,"button",10),o.cc("click",(function(e){return o.uc(s),o.gc().fireWorker("mason")})),o.Bc(1,"Fire Mason"),o.Tb()}if(2&e){var r=o.gc();o.lc("disabled",r.playerResources.stoneWorkers.length<1)}}function d(e,t){if(1&e){var s=o.Vb();o.Ub(0,"button",10),o.cc("click",(function(e){return o.uc(s),o.gc().fireWorker("trader")})),o.Bc(1,"Fire Trader"),o.Tb()}if(2&e){var r=o.gc();o.lc("disabled",r.playerResources.tradeWorkers.length<1)}}function p(e,t){if(1&e){var s=o.Vb();o.Ub(0,"span"),o.Ub(1,"h2",3),o.Bc(2,"Hire Guards"),o.Tb(),o.Ub(3,"button",4),o.cc("click",(function(e){return o.uc(s),o.gc().hireGuard()})),o.Bc(4),o.Tb(),o.Ub(5,"button",5),o.cc("click",(function(e){return o.uc(s),o.gc().helpMe(8)})),o.Bc(6,"?"),o.Tb(),o.Ub(7,"button",4),o.cc("click",(function(e){return o.uc(s),o.gc().upgradeGuardWeapon()})),o.Bc(8),o.Tb(),o.Ub(9,"button",5),o.cc("click",(function(e){return o.uc(s),o.gc().helpMe(9)})),o.Bc(10,"?"),o.Tb(),o.Ub(11,"button",4),o.cc("click",(function(e){return o.uc(s),o.gc().upgradeGuardArmor()})),o.Bc(12),o.Tb(),o.Ub(13,"button",5),o.cc("click",(function(e){return o.uc(s),o.gc().helpMe(10)})),o.Bc(14,"?"),o.Tb(),o.Ub(15,"button",4),o.cc("click",(function(e){return o.uc(s),o.gc().upgradeGuardSpeed()})),o.Bc(16),o.Tb(),o.Ub(17,"button",5),o.cc("click",(function(e){return o.uc(s),o.gc().helpMe(11)})),o.Bc(18,"?"),o.Tb(),o.Tb()}if(2&e){var r=o.gc();o.Cb(3),o.lc("disabled",r.playerResources.money<r.guardCost),o.Cb(1),o.Dc("Hire Guard: $",r.guardCost,""),o.Cb(3),o.lc("disabled",r.playerResources.money<r.guardWeaponCost||99===r.playerResources.guardWeaponLvl),o.Cb(1),o.Dc("Upgrade Weapon: $",r.guardWeaponCost,""),o.Cb(3),o.lc("disabled",r.playerResources.money<r.guardArmorCost||99===r.playerResources.guardArmorLvl),o.Cb(1),o.Dc("Upgrade Armor: $",r.guardArmorCost,""),o.Cb(3),o.lc("disabled",r.playerResources.money<r.guardSpeedCost||99===r.playerResources.guardSpeedLvl),o.Cb(1),o.Dc("Upgrade Speed: $",r.guardSpeedCost,"")}}function y(e,t){1&e&&(o.Ub(0,"p",17),o.Bc(1,"Your chisel determines how fast you can shape a rock into a brick."),o.Tb())}function m(e,t){1&e&&(o.Ub(0,"p",17),o.Bc(1,"Masons will help you shape rocks into bricks but will expect $2 a day as starting pay. Your Chiseling skill will give them the same bonus."),o.Tb())}function b(e,t){1&e&&(o.Ub(0,"p",17),o.Bc(1,"Training masons will increase their movement speed and will work longer and harder but they'll expect $2 more a day."),o.Tb())}function v(e,t){1&e&&(o.Ub(0,"p",17),o.Bc(1,"Traders will sell your bricks for you but will expect $2 a day as starting pay. Your Bartering skill will give them the same bonus."),o.Tb())}function g(e,t){1&e&&(o.Ub(0,"p",17),o.Bc(1,"Training traders will increase their movement speed and increase how much you can sell each brick for but they'll expect $2 more a day."),o.Tb())}function k(e,t){1&e&&(o.Ub(0,"p",17),o.Bc(1,"Upgrading your Bartering skill will increase the amount bricks you can sell and the profit you can make per brick."),o.Tb())}function T(e,t){1&e&&(o.Ub(0,"p",17),o.Bc(1,"Upgrading your Housing will increase the number of rooms availiable for your workers to live and sleep. The rooms availiable will increase by 8."),o.Tb())}function C(e,t){1&e&&(o.Ub(0,"p",17),o.Bc(1,"Upgrading your Stockpile will increase the number of bricks you can store at once. The space availiable in the stockpile will increase by 10."),o.Tb())}function f(e,t){1&e&&(o.Ub(0,"p",17),o.Bc(1,"Guards will protect your money from any bandit trying to take it. Guards will expect a fix rate of $20 a day regardless of skills."),o.Tb())}function R(e,t){1&e&&(o.Ub(0,"p",17),o.Bc(1,"Upgrading the weapon of the guards will increase the damage they can do."),o.Tb())}function w(e,t){1&e&&(o.Ub(0,"p",17),o.Bc(1,"Upgrading the armor of your guards will increase the number of hits they can take in battle."),o.Tb())}function W(e,t){1&e&&(o.Ub(0,"p",17),o.Bc(1,"Upgrading the guards speed will increase their attack rate."),o.Tb())}var q=function(e){return{"info-dm":e}};function S(e,t){if(1&e){var s=o.Vb();o.Ub(0,"div",11),o.cc("click",(function(e){return o.uc(s),o.gc().closeHelp()})),o.Ub(1,"div",12),o.Ub(2,"mat-toolbar",13),o.Ub(3,"div",14),o.Ub(4,"p",15),o.Bc(5,"Tap Anywhere To Continue"),o.Tb(),o.Tb(),o.Tb(),o.Ac(6,y,2,0,"p",16),o.Ac(7,m,2,0,"p",16),o.Ac(8,b,2,0,"p",16),o.Ac(9,v,2,0,"p",16),o.Ac(10,g,2,0,"p",16),o.Ac(11,k,2,0,"p",16),o.Ac(12,T,2,0,"p",16),o.Ac(13,C,2,0,"p",16),o.Ac(14,f,2,0,"p",16),o.Ac(15,R,2,0,"p",16),o.Ac(16,w,2,0,"p",16),o.Ac(17,W,2,0,"p",16),o.Tb(),o.Tb()}if(2&e){var r=o.gc();o.Cb(1),o.lc("ngClass",o.oc(13,q,!0===r.optionsSelected.darkMode)),o.Cb(5),o.lc("ngIf",0===r.helpValue),o.Cb(1),o.lc("ngIf",1===r.helpValue),o.Cb(1),o.lc("ngIf",2===r.helpValue),o.Cb(1),o.lc("ngIf",3===r.helpValue),o.Cb(1),o.lc("ngIf",4===r.helpValue),o.Cb(1),o.lc("ngIf",5===r.helpValue),o.Cb(1),o.lc("ngIf",6===r.helpValue),o.Cb(1),o.lc("ngIf",7===r.helpValue),o.Cb(1),o.lc("ngIf",8===r.helpValue),o.Cb(1),o.lc("ngIf",9===r.helpValue),o.Cb(1),o.lc("ngIf",10===r.helpValue),o.Cb(1),o.lc("ngIf",11===r.helpValue)}}function L(e,t){if(1&e){var s=o.Vb();o.Ub(0,"div",11),o.cc("click",(function(e){return o.uc(s),o.gc().closeHousingLimitModal()})),o.Ub(1,"div",12),o.Ub(2,"mat-toolbar",13),o.Ub(3,"div",14),o.Ub(4,"p",15),o.Bc(5,"Tap Anywhere To Continue"),o.Tb(),o.Tb(),o.Tb(),o.Ub(6,"p",17),o.Bc(7,"Not enough space for them to live."),o.Tb(),o.Tb(),o.Tb()}if(2&e){var r=o.gc();o.Cb(1),o.lc("ngClass",o.oc(1,q,!0===r.optionsSelected.darkMode))}}function M(e,t){if(1&e){var s=o.Vb();o.Ub(0,"div",18),o.Ub(1,"div",12),o.Ub(2,"mat-toolbar",13),o.Ub(3,"div",14),o.Ub(4,"p",15),o.Bc(5,"Are You Sure?"),o.Tb(),o.Tb(),o.Tb(),o.Ub(6,"span"),o.Ub(7,"p",17),o.Bc(8,"Once they are fired, the deal is final."),o.Tb(),o.Ub(9,"button",19),o.cc("click",(function(e){return o.uc(s),o.gc().deleteWorker()})),o.Bc(10,"Fire Them"),o.Tb(),o.Ub(11,"button",19),o.cc("click",(function(e){return o.uc(s),o.gc().cancelFireWorker()})),o.Bc(12,"Nevermind"),o.Tb(),o.Tb(),o.Tb(),o.Tb()}if(2&e){var r=o.gc();o.Cb(1),o.lc("ngClass",o.oc(1,q,!0===r.optionsSelected.darkMode))}}var x,U=((x=function(){function e(){_classCallCheck(this,e),this.playerResourcesTemp={chiselLvl:0,money:0,bricks:0,clicks:0,barterLvl:0,tradeWorkers:[],tradeWorkersCount:0,tradeWorkersLvl:0,stoneWorkers:[],stoneCuttersCount:0,stoneWorkerLvl:0,guards:[],guardCount:0,guardWeaponLvl:0,guardArmorLvl:0,guardSpeedLvl:0,dayCounter:0,daysPast:0,version:.5,totalBricks:0,totalMoney:0,newPlayer:!0,quests:{questLvl:0,questDesc:"",questReward:0,completed:!1,quest:{complete:!1,chiselLvl:0,barterLvl:0,masons:0,masonLvl:0,traders:0,traderLvl:0}},sky:{sun:{x:0,y:0},moon:{x:0,y:0}},housingLimit:0,housingLvl:0,totalWorkers:0,stockpile:0,stockpileLvl:0,screenWidth:0,screenChange:!1,gameLevel:1,currentChapter:"",newPlayerVault:!0,banditWave:0,bandits:[],banditWaveCounter:0,banditSpawnCount:0,isBanditWaveStarted:!1,moneyTaken:0,credit:3,banditsStopped:0,totalGuards:0,tutorialGuards:0},this.pageHeight=0,this.isHousingFull=!1,this.stoneWorkerReturn=new o.o,this.tradeWorkerReturn=new o.o,this.guardReturn=new o.o,this.playerResourcesReturn=new o.o,this.chiselLvlCost=10,this.barterLvlCost=10,this.stoneWorkerCost=30,this.tradeWorkerCost=30,this.guardCost=500,this.trainStoneWorkerCost=25,this.trainTradeWorkerCost=25,this.stockpileCost=50,this.housingCost=80,this.helpValue=-1,this.helpWindowOpen=!1,this.guardWeaponCost=1500,this.guardArmorCost=1500,this.guardSpeedCost=1500,this.displayFireWorker=!1,this.optionsSelected={darkMode:!0,soundsOn:!0}}return _createClass(e,[{key:"ngOnInit",value:function(){if(localStorage.length>0&&localStorage.getItem("mason_options")){var e=JSON.parse(localStorage.getItem("mason_options"));this.optionsSelected={darkMode:e.darkMode,soundsOn:e.soundsOn};var t=document.getElementsByTagName("body");this.optionsSelected.darkMode?t[0].classList.add("darkMode"):t[0].classList.remove("darkMode")}else{var s=JSON.stringify(this.optionsSelected);localStorage.setItem("mason_options",s)}this.calcHeightOfPage();for(var r=0;r<this.playerResourcesTemp.chiselLvl;r++){var a=Math.trunc(this.chiselLvlCost/4)+Math.trunc(this.chiselLvlCost/3);this.chiselLvlCost+=a}for(var o=0;o<this.playerResourcesTemp.barterLvl;o++){var i=Math.trunc(this.barterLvlCost/2)+Math.trunc(this.barterLvlCost/3);this.barterLvlCost+=i}for(var n=0;n<this.playerResourcesTemp.stoneWorkerLvl;n++){var c=Math.trunc(this.trainStoneWorkerCost/10);this.trainStoneWorkerCost+=c;var l=Math.trunc(this.stoneWorkerCost/7);this.stoneWorkerCost+=l}for(var u=0;u<this.playerResourcesTemp.tradeWorkersLvl;u++){var h=Math.trunc(this.trainTradeWorkerCost/10);this.trainTradeWorkerCost+=h;var d=Math.trunc(this.tradeWorkerCost/7);this.tradeWorkerCost+=d}for(var p=0;p<this.playerResourcesTemp.stoneWorkers.length;p++){var y=Math.trunc(this.trainStoneWorkerCost/10);this.trainStoneWorkerCost+=y}for(var m=0;m<this.playerResourcesTemp.tradeWorkers.length;m++){var b=Math.trunc(this.trainTradeWorkerCost/10);this.trainTradeWorkerCost+=b}for(var v=0;v<this.playerResourcesTemp.stockpileLvl;v++){var g=Math.trunc(this.stockpileCost/4);this.stockpileCost+=g}for(var k=0;k<this.playerResourcesTemp.housingLvl;k++){var T=Math.trunc(this.housingCost/4);this.housingCost+=T}for(var C=0;C<this.playerResourcesTemp.guardWeaponLvl;C++){this.guardCost+=50;var f=Math.trunc(this.guardWeaponCost/10);this.guardWeaponCost+=f}for(var R=0;R<this.playerResourcesTemp.guardArmorLvl;R++){this.guardCost+=50;var w=Math.trunc(this.guardArmorCost/10);this.guardArmorCost+=w}for(var W=0;W<this.playerResourcesTemp.guardSpeedLvl;W++){this.guardCost+=50;var q=Math.trunc(this.guardSpeedCost/10);this.guardSpeedCost+=q}}},{key:"helpMe",value:function(e){this.helpValue=e,this.helpWindowOpen=!0}},{key:"closeHelp",value:function(){this.helpWindowOpen=!1,this.helpValue=-1}},{key:"hireStoneWorker",value:function(){if(this.playerResourcesTemp.totalWorkers<this.playerResourcesTemp.housingLimit){this.playerResourcesTemp.money-=this.stoneWorkerCost,this.playerResourcesTemp.stoneCuttersCount++;var e=Math.trunc(this.trainStoneWorkerCost/10);this.trainStoneWorkerCost+=e,this.playerResourcesTemp.totalWorkers++,this.playerResourcesReturn.emit(this.playerResourcesTemp),this.stoneWorkerReturn.emit(!0)}else this.isHousingFull=!0}},{key:"hireTradeWorker",value:function(){if(this.playerResourcesTemp.totalWorkers<this.playerResourcesTemp.housingLimit){this.playerResourcesTemp.money-=this.tradeWorkerCost,this.playerResourcesTemp.tradeWorkersCount++;var e=Math.trunc(this.trainTradeWorkerCost/10);this.trainTradeWorkerCost+=e,this.playerResourcesTemp.totalWorkers++,this.playerResourcesReturn.emit(this.playerResourcesTemp),this.tradeWorkerReturn.emit(!0)}else this.isHousingFull=!0}},{key:"hireGuard",value:function(){this.playerResourcesTemp.totalWorkers<this.playerResourcesTemp.housingLimit?(this.playerResourcesTemp.money-=this.guardCost,this.playerResourcesReturn.emit(this.playerResourcesTemp),this.guardReturn.emit(!0)):this.isHousingFull=!0}},{key:"upgradeChisel",value:function(){this.playerResourcesTemp.money-=this.chiselLvlCost,this.playerResourcesTemp.chiselLvl++,this.playerResourcesReturn.emit(this.playerResourcesTemp);var e=Math.trunc(this.chiselLvlCost/4)+Math.trunc(this.chiselLvlCost/3);this.chiselLvlCost+=e}},{key:"trainMason",value:function(){this.playerResourcesTemp.money-=this.trainStoneWorkerCost,this.playerResourcesTemp.stoneWorkerLvl++,this.playerResourcesReturn.emit(this.playerResourcesTemp);var e=Math.trunc(this.trainStoneWorkerCost/10);this.trainStoneWorkerCost+=e;var t=Math.trunc(this.stoneWorkerCost/7);this.stoneWorkerCost+=t}},{key:"trainTrader",value:function(){this.playerResourcesTemp.money-=this.trainTradeWorkerCost,this.playerResourcesTemp.tradeWorkersLvl++,this.playerResourcesReturn.emit(this.playerResourcesTemp);var e=Math.trunc(this.trainTradeWorkerCost/10);this.trainTradeWorkerCost+=e;var t=Math.trunc(this.tradeWorkerCost/7);this.tradeWorkerCost+=t}},{key:"upgradeBarter",value:function(){this.playerResourcesTemp.money-=this.barterLvlCost,this.playerResourcesTemp.barterLvl++,this.playerResourcesReturn.emit(this.playerResourcesTemp);var e=Math.trunc(this.barterLvlCost/2)+Math.trunc(this.barterLvlCost/3);this.barterLvlCost+=e}},{key:"upgradeStockpile",value:function(){this.playerResourcesTemp.money-=this.stockpileCost,this.playerResourcesTemp.stockpile+=10,this.playerResourcesTemp.stockpileLvl++,this.playerResourcesReturn.emit(this.playerResourcesTemp);var e=Math.trunc(this.stockpileCost/4);this.stockpileCost+=e}},{key:"upgradeHousing",value:function(){this.playerResourcesTemp.money-=this.housingCost,this.playerResourcesTemp.housingLimit+=8,this.playerResourcesTemp.housingLvl++,this.playerResourcesReturn.emit(this.playerResourcesTemp);var e=Math.trunc(this.housingCost/4);this.housingCost+=e}},{key:"upgradeGuardWeapon",value:function(){this.playerResourcesTemp.money-=this.guardWeaponCost,this.playerResourcesTemp.guardWeaponLvl++,this.guardCost+=50;var e=Math.trunc(this.guardWeaponCost/10);this.guardWeaponCost+=e,this.playerResourcesReturn.emit(this.playerResourcesTemp)}},{key:"upgradeGuardArmor",value:function(){this.playerResourcesTemp.money-=this.guardArmorCost,this.playerResourcesTemp.guardArmorLvl++,this.guardCost+=50;var e=Math.trunc(this.guardArmorCost/10);this.guardArmorCost+=e,this.playerResourcesReturn.emit(this.playerResourcesTemp)}},{key:"upgradeGuardSpeed",value:function(){this.playerResourcesTemp.money-=this.guardSpeedCost,this.playerResourcesTemp.guardSpeedLvl++,this.guardCost+=50;var e=Math.trunc(this.guardSpeedCost/10);this.guardSpeedCost+=e,this.playerResourcesReturn.emit(this.playerResourcesTemp)}},{key:"calcHeightOfPage",value:function(){var e=window.innerHeight;this.pageHeight=e-.39*e}},{key:"onResize",value:function(e){this.calcHeightOfPage()}},{key:"closeHousingLimitModal",value:function(){this.isHousingFull=!1}},{key:"fireWorker",value:function(e){this.displayFireWorker=!0,this.workerFired=e}},{key:"deleteWorker",value:function(){"mason"===this.workerFired?(this.playerResourcesTemp.stoneWorkers.splice(this.playerResourcesTemp.stoneWorkers.length-1,1),this.playerResourcesTemp.stoneCuttersCount--,this.playerResourcesReturn.emit(this.playerResourcesTemp)):"trader"===this.workerFired&&(this.playerResourcesTemp.tradeWorkers.splice(this.playerResourcesTemp.tradeWorkers.length-1,1),this.playerResourcesTemp.tradeWorkersCount--,this.playerResourcesReturn.emit(this.playerResourcesTemp)),this.cancelFireWorker()}},{key:"cancelFireWorker",value:function(){this.displayFireWorker=!1}},{key:"playerResources",get:function(){return this.playerResourcesTemp},set:function(e){this.playerResourcesTemp=e}}]),e}()).\u0275fac=function(e){return new(e||x)},x.\u0275cmp=o.Ib({type:x,selectors:[["app-upgrade-menu"]],inputs:{playerResources:"playerResources"},outputs:{stoneWorkerReturn:"stoneWorkerReturn",tradeWorkerReturn:"tradeWorkerReturn",guardReturn:"guardReturn",playerResourcesReturn:"playerResourcesReturn"},decls:50,vars:27,consts:[[1,"upgrade-wrapper",3,"resize"],[1,"display-money"],["id","scrollbar",1,"upgrade-list"],[1,"upgrade-titles"],["mat-raised-button","","color","primary",1,"control-button","upgrade-btn",3,"disabled","click"],["mat-raised-button","","color","primary",1,"help",3,"click"],["mat-raised-button","","color","warn","class","control-button fire-btn",3,"disabled","click",4,"ngIf"],[4,"ngIf"],["class","modal",3,"click",4,"ngIf"],["class","modal",4,"ngIf"],["mat-raised-button","","color","warn",1,"control-button","fire-btn",3,"disabled","click"],[1,"modal",3,"click"],[1,"info-wrapper",3,"ngClass"],["color","primary"],["id","menu-width"],[1,"info-text"],["class","info-text info-text-area",4,"ngIf"],[1,"info-text","info-text-area"],[1,"modal"],["mat-raised-button","","color","primary",1,"control-button",3,"click"]],template:function(e,t){1&e&&(o.Ub(0,"div",0),o.cc("resize",(function(e){return t.onResize(e)}),!1,o.tc),o.Ub(1,"p",1),o.Bc(2),o.Tb(),o.Ub(3,"div",2),o.Ub(4,"h2",3),o.Bc(5,"Player's Skills"),o.Tb(),o.Ub(6,"button",4),o.cc("click",(function(e){return t.upgradeChisel()})),o.Bc(7),o.Tb(),o.Ub(8,"button",5),o.cc("click",(function(e){return t.helpMe(0)})),o.Bc(9,"?"),o.Tb(),o.Ub(10,"button",4),o.cc("click",(function(e){return t.upgradeBarter()})),o.Bc(11),o.Tb(),o.Ub(12,"button",5),o.cc("click",(function(e){return t.helpMe(5)})),o.Bc(13,"?"),o.Tb(),o.Ub(14,"button",4),o.cc("click",(function(e){return t.upgradeStockpile()})),o.Bc(15),o.Tb(),o.Ub(16,"button",5),o.cc("click",(function(e){return t.helpMe(7)})),o.Bc(17,"?"),o.Tb(),o.Ub(18,"button",4),o.cc("click",(function(e){return t.upgradeHousing()})),o.Bc(19),o.Tb(),o.Ub(20,"button",5),o.cc("click",(function(e){return t.helpMe(6)})),o.Bc(21,"?"),o.Tb(),o.Ub(22,"h2",3),o.Bc(23,"Hire Workers"),o.Tb(),o.Ub(24,"h3",3),o.Bc(25,"Masons"),o.Tb(),o.Ub(26,"button",4),o.cc("click",(function(e){return t.hireStoneWorker()})),o.Bc(27),o.Tb(),o.Ub(28,"button",5),o.cc("click",(function(e){return t.helpMe(1)})),o.Bc(29,"?"),o.Tb(),o.Ub(30,"button",4),o.cc("click",(function(e){return t.trainMason()})),o.Bc(31),o.Tb(),o.Ub(32,"button",5),o.cc("click",(function(e){return t.helpMe(2)})),o.Bc(33,"?"),o.Tb(),o.Ac(34,h,2,1,"button",6),o.Ub(35,"h3",3),o.Bc(36,"Traders"),o.Tb(),o.Ub(37,"button",4),o.cc("click",(function(e){return t.hireTradeWorker()})),o.Bc(38),o.Tb(),o.Ub(39,"button",5),o.cc("click",(function(e){return t.helpMe(3)})),o.Bc(40,"?"),o.Tb(),o.Ub(41,"button",4),o.cc("click",(function(e){return t.trainTrader()})),o.Bc(42),o.Tb(),o.Ub(43,"button",5),o.cc("click",(function(e){return t.helpMe(4)})),o.Bc(44,"?"),o.Tb(),o.Ac(45,d,2,1,"button",6),o.Ac(46,p,19,8,"span",7),o.Tb(),o.Ac(47,S,18,15,"div",8),o.Ac(48,L,8,3,"div",8),o.Ac(49,M,13,3,"div",9),o.Tb()),2&e&&(o.Cb(2),o.Fc("Money: $",t.playerResourcesTemp.money," | Housing: ",t.playerResourcesTemp.totalWorkers,"/",t.playerResourcesTemp.housingLimit,""),o.Cb(1),o.zc("height",t.pageHeight,"px"),o.Cb(3),o.lc("disabled",t.playerResources.money<t.chiselLvlCost),o.Cb(1),o.Dc("Upgrade Chisel: $",t.chiselLvlCost,""),o.Cb(3),o.lc("disabled",t.playerResources.money<t.barterLvlCost),o.Cb(1),o.Dc("Upgrade Bartering: $",t.barterLvlCost,""),o.Cb(3),o.lc("disabled",t.playerResources.money<t.stockpileCost),o.Cb(1),o.Dc("Upgrade Stockpile: $",t.stockpileCost,""),o.Cb(3),o.lc("disabled",t.playerResources.money<t.housingCost),o.Cb(1),o.Dc("Upgrade Housing: $",t.housingCost,""),o.Cb(7),o.lc("disabled",t.playerResources.money<t.stoneWorkerCost),o.Cb(1),o.Dc("Hire Mason: $",t.stoneWorkerCost,""),o.Cb(3),o.lc("disabled",0===t.playerResources.stoneWorkers.length||t.playerResources.money<t.trainStoneWorkerCost),o.Cb(1),o.Dc("Train Masons: $",t.trainStoneWorkerCost,""),o.Cb(3),o.lc("ngIf",t.playerResourcesTemp.gameLevel>=2),o.Cb(3),o.lc("disabled",t.playerResources.money<t.tradeWorkerCost),o.Cb(1),o.Dc("Hire Trader: $",t.tradeWorkerCost,""),o.Cb(3),o.lc("disabled",0===t.playerResources.tradeWorkers.length||t.playerResources.money<t.trainTradeWorkerCost),o.Cb(1),o.Dc("Train Trader: $",t.trainTradeWorkerCost,""),o.Cb(3),o.lc("ngIf",t.playerResourcesTemp.gameLevel>=2),o.Cb(1),o.lc("ngIf",t.playerResourcesTemp.gameLevel>=2),o.Cb(1),o.lc("ngIf",t.helpWindowOpen),o.Cb(1),o.lc("ngIf",t.isHousingFull),o.Cb(1),o.lc("ngIf",t.displayFireWorker))},directives:[c.a,r.k,r.i,u.a],styles:[".upgrade-list[_ngcontent-%COMP%]{width:100%;overflow:auto;height:24em}.upgrade-btn[_ngcontent-%COMP%]{width:75%!important;display:inline-block!important}.help[_ngcontent-%COMP%]{width:23%;margin-left:1.2%;display:inline-block}.display-money[_ngcontent-%COMP%]{font-weight:700;text-align:center}.info-dm[_ngcontent-%COMP%]{background-color:#606060}.upgrade-titles[_ngcontent-%COMP%]{text-align:center;padding:0;margin:.4em 0 0}.fire-btn[_ngcontent-%COMP%]{width:99.4%!important;display:inline-block!important}"]}),x),B=["canvas"];function P(e,t){if(1&e&&(o.Ub(0,"p",5),o.Bc(1),o.Tb()),2&e){var s=o.gc();o.Cb(1),o.Dc("Worker's Payday -$",s.workerPayday,"")}}function I(e,t){1&e&&(o.Ub(0,"p",6),o.Bc(1,"Your Credit Score Took A Hit..."),o.Tb())}var A,G,O=((A=function(){function e(t){_classCallCheck(this,e),this.ngZone=t,this.playerResourcesTemp={chiselLvl:0,money:0,bricks:0,clicks:0,barterLvl:0,tradeWorkers:[],tradeWorkersCount:0,tradeWorkersLvl:0,stoneWorkers:[],stoneCuttersCount:0,stoneWorkerLvl:0,guards:[],guardCount:0,guardWeaponLvl:0,guardArmorLvl:0,guardSpeedLvl:0,dayCounter:0,daysPast:0,version:.5,totalClicks:0,totalBricks:0,totalMoney:0,newPlayer:!0,quests:{questLvl:0,questDesc:"",questReward:0,completed:!1,quest:{complete:!1,chiselLvl:0,barterLvl:0,masons:0,masonLvl:0,traders:0,traderLvl:0}},sky:{sun:{x:0,y:0},moon:{x:0,y:0}},housingLimit:0,housingLvl:0,totalWorkers:0,stockpile:0,stockpileLvl:0,screenWidth:0,screenChange:!1,gameLevel:1,currentChapter:"",newPlayerVault:!0,banditWave:0,bandits:[],banditWaveCounter:0,banditSpawnCount:0,isBanditWaveStarted:!1,moneyTaken:0,credit:3,banditsStopped:0,totalGuards:0,tutorialGuards:0},this.playerResourcesReturn=new o.o,this.stone1=new Image,this.stone2=new Image,this.stone3=new Image,this.stone4=new Image,this.rockHit=new Image,this.stoneWorkerImg=new Image,this.tradeWorkerImg=new Image,this.sunImg=new Image,this.moonImg=new Image,this.stoneHP=Math.floor(10*Math.random())+10,this.addStoneSoundPath="assets/sounds/add_stone.wav",this.addStoneSound=new Audio,this.sellSoundPath="assets/sounds/sell.wav",this.sellSound=new Audio,this.currentStone={image:this.stone1,hitpoints:this.stoneHP},this.hits=0,this.stoneWorkerFreq=Math.floor(5*Math.random())+1,this.tradeWorkerFreq=Math.floor(5*Math.random())+1,this.workPayCounter=0,this.isWorking=!0,this.chiselDmg=0,this.bartering=0,this.stoneWorkerSpeed=0,this.tradeWorkerSpeed=0,this.chiselClicked=!1,this.workerPayday=0,this.displayPayday=!1,this.displayCreditHit=!1,this.optionsSelected={darkMode:!0,soundsOn:!0},this.stars=[],this.starLight=0}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this;if(this.addStoneSound.src=this.addStoneSoundPath,this.addStoneSound.load(),this.sellSound.src=this.sellSoundPath,this.sellSound.load(),localStorage.length>0&&localStorage.getItem("mason_options")){var t=JSON.parse(localStorage.getItem("mason_options"));this.optionsSelected={darkMode:t.darkMode,soundsOn:t.soundsOn};var s=document.getElementsByTagName("body");this.optionsSelected.darkMode?s[0].classList.add("darkMode"):s[0].classList.remove("darkMode")}else{document.getElementsByTagName("body")[0].classList.add("darkMode");var r=JSON.stringify(this.optionsSelected);localStorage.setItem("mason_options",r)}this.stone1.src="./assets/images/rock1.png",this.stone2.src="./assets/images/rock2.png",this.stone3.src="./assets/images/rock3.png",this.stone4.src="./assets/images/rock4.png",this.rockHit.src="./assets/images/rockChiseled.png",this.stoneWorkerImg.src="./assets/images/stoneWorker.png",this.tradeWorkerImg.src="./assets/images/tradeWorker.png",this.sunImg.src="./assets/images/SunImg.png",this.moonImg.src="./assets/images/MoonImg.png",this.ctx=this.canvas.nativeElement.getContext("2d"),this.ctx.canvas.width=.9*window.innerWidth,this.ctx.canvas.height=.5*window.innerHeight,this.objectSizeWidth=.01*this.ctx.canvas.width,this.objectSizeHeight=.01*this.ctx.canvas.height,this.objectSize=this.objectSizeWidth+this.objectSizeHeight,this.starCount=Math.abs(this.ctx.canvas.width/15),this.getStars(),this.stone1.onload=function(){e.getStoneWorkerWorkTime(),e.getTradeWorkerWorkTime(),e.getWorkerPayment(),e.resetStone(),0===e.playerResourcesTemp.sky.sun.x&&0===e.playerResourcesTemp.sky.sun.y&&(e.playerResourcesTemp.sky.sun.x=.5*e.ctx.canvas.width,e.playerResourcesTemp.sky.sun.y=.74*e.ctx.canvas.height),0===e.playerResourcesTemp.sky.moon.x&&0===e.playerResourcesTemp.sky.moon.y&&(e.playerResourcesTemp.sky.moon.x=.5*e.ctx.canvas.width,e.playerResourcesTemp.sky.moon.y=.74*e.ctx.canvas.height),(e.playerResourcesTemp.sky.sun.x>.5*e.ctx.canvas.width||e.playerResourcesTemp.sky.sun.x<.5*e.ctx.canvas.width)&&(e.playerResourcesTemp.sky.sun.x=.5*e.ctx.canvas.width),!1===e.playerResourcesTemp.screenChange&&(e.playerResources.screenWidth=window.innerWidth),e.playerResourcesTemp.sky.sun.y<.74*e.ctx.canvas.height&&e.playerResourcesTemp.screenChange?(e.playerResourcesTemp.sky.sun.y=e.playerResourcesTemp.sky.sun.y/.74,e.playerResourcesTemp.screenChange=!1):e.playerResourcesTemp.sky.sun.y>.74*e.ctx.canvas.height&&e.playerResourcesTemp.screenChange&&(e.playerResourcesTemp.sky.sun.y=.74*e.playerResourcesTemp.sky.sun.y,e.playerResourcesTemp.screenChange=!1),e.playerResourcesTemp.sky.moon.y<.74*e.ctx.canvas.height&&e.playerResourcesTemp.screenChange?(e.playerResourcesTemp.sky.moon.y=e.playerResourcesTemp.sky.moon.y/.74,e.playerResourcesTemp.screenChange=!1):e.playerResourcesTemp.sky.moon.y>.74*e.ctx.canvas.height&&e.playerResourcesTemp.screenChange&&(e.playerResourcesTemp.sky.moon.y=.74*e.playerResourcesTemp.sky.moon.y,e.playerResourcesTemp.screenChange=!1),e.playerResourcesReturn.emit(e.playerResourcesTemp),e.playerResourcesTemp.stoneWorkers.length>0&&e.playerResourcesTemp.stoneWorkers.forEach((function(t){t.startPos=Math.floor(2*Math.random()),t.workLoad=Math.floor(5*Math.random())+3+e.playerResourcesTemp.stoneWorkerLvl,t.image=e.stoneWorkerImg,0===t.startPos?(t.x=e.ctx.canvas.width/(-.7*e.objectSize),t.y=.76*e.ctx.canvas.height,t.direction=0):1===t.startPos&&(t.x=1.3*e.ctx.canvas.width,t.y=.76*e.ctx.canvas.height,t.direction=1)})),e.playerResourcesTemp.tradeWorkers.length>0&&e.playerResourcesTemp.tradeWorkers.forEach((function(t){t.startPos=Math.floor(2*Math.random()),t.image=e.tradeWorkerImg,0===t.startPos?(t.x=e.ctx.canvas.width/(-.7*e.objectSize),t.y=.5*e.ctx.canvas.height,t.direction=0):1===t.startPos&&(t.x=1.3*e.ctx.canvas.width,t.y=.5*e.ctx.canvas.height,t.direction=1)})),e.chiselClicked=!1,e.getAllWorkers(e.playerResourcesTemp.stoneWorkers,e.playerResourcesTemp.tradeWorkers);for(var t=0;t<e.playerResourcesTemp.chiselLvl;t++)e.chiselDmg+=.6;for(var s=0;s<e.playerResourcesTemp.stoneWorkerLvl;s++)e.stoneWorkerSpeed+=3e-4*e.ctx.canvas.width;for(var r=0;r<e.playerResourcesTemp.tradeWorkersLvl;r++)e.tradeWorkerSpeed+=3e-4*e.ctx.canvas.width;for(var a=0;a<e.playerResourcesTemp.barterLvl;a++)e.bartering+=1;e.workPayCounter=e.playerResourcesTemp.dayCounter}}},{key:"ngOnDestroy",value:function(){this.sellSound=new Audio,this.addStoneSound=new Audio,this.isWorking=!1,clearInterval(this.gameInterval),clearInterval(this.workPayInterval),clearInterval(this.tradeWorksWorkInterval),clearInterval(this.stoneCutterWorkInterval),cancelAnimationFrame(this.requestGameAnimatId)}},{key:"drawBackground",value:function(){this.playerResourcesTemp.dayCounter<=40?this.playerResourcesTemp.dayCounter<=33?this.ctx.fillStyle="#0000FF":this.playerResourcesTemp.dayCounter>=34&&this.playerResourcesTemp.dayCounter<=36?this.ctx.fillStyle="#0000F3":this.playerResourcesTemp.dayCounter>=37&&this.playerResourcesTemp.dayCounter<=39?this.ctx.fillStyle="#0000E6":this.playerResourcesTemp.dayCounter>=40&&(this.ctx.fillStyle="#0000DA"):this.playerResourcesTemp.dayCounter>=41&&this.playerResourcesTemp.dayCounter<79?this.playerResourcesTemp.dayCounter<=70?this.ctx.fillStyle="#0000CD":this.playerResourcesTemp.dayCounter>=71&&this.playerResourcesTemp.dayCounter<=73?this.ctx.fillStyle="#0000BD":this.playerResourcesTemp.dayCounter>=74&&this.playerResourcesTemp.dayCounter<=76?this.ctx.fillStyle="#0000AC":this.playerResourcesTemp.dayCounter>=77&&(this.ctx.fillStyle="#00009C"):this.playerResourcesTemp.dayCounter>=79&&(this.playerResourcesTemp.dayCounter<=115?this.ctx.fillStyle="#00008B":this.playerResourcesTemp.dayCounter>=116&&this.playerResourcesTemp.dayCounter<=117?this.ctx.fillStyle="#0000A8":this.playerResourcesTemp.dayCounter>=118&&this.playerResourcesTemp.dayCounter<=119?this.ctx.fillStyle="#0000C5":this.playerResourcesTemp.dayCounter>=120&&(this.ctx.fillStyle="#0000E2")),this.ctx.fillRect(0,this.ctx.canvas.height/2*-1,this.ctx.canvas.width,this.ctx.canvas.height),this.playerResourcesTemp.dayCounter>=79&&this.playerResourcesTemp.dayCounter<=117?this.drawStars(this.stars):this.getStars(),this.ctx.drawImage(this.sunImg,this.playerResourcesTemp.sky.sun.x+-.1*this.ctx.canvas.width,this.playerResourcesTemp.sky.sun.y+-.055*this.ctx.canvas.width,10*this.objectSize,10*this.objectSize),this.ctx.drawImage(this.moonImg,this.playerResourcesTemp.sky.moon.x+-.1*this.ctx.canvas.width,this.playerResourcesTemp.sky.moon.y+-.055*this.ctx.canvas.width,10*this.objectSize,10*this.objectSize),this.drawSky(),this.playerResourcesTemp.dayCounter<=40?this.playerResourcesTemp.dayCounter<=33?this.ctx.fillStyle="#228B22":this.playerResourcesTemp.dayCounter>=34&&this.playerResourcesTemp.dayCounter<=36?this.ctx.fillStyle="#1A881A":this.playerResourcesTemp.dayCounter>=37&&this.playerResourcesTemp.dayCounter<=39?this.ctx.fillStyle="#118611":this.playerResourcesTemp.dayCounter>=40&&(this.ctx.fillStyle="#098309"):this.playerResourcesTemp.dayCounter>=41&&this.playerResourcesTemp.dayCounter<79?this.playerResourcesTemp.dayCounter<=70?this.ctx.fillStyle="#008000":this.playerResourcesTemp.dayCounter>=71&&this.playerResourcesTemp.dayCounter<=73?this.ctx.fillStyle="#007900":this.playerResourcesTemp.dayCounter>=74&&this.playerResourcesTemp.dayCounter<=76?this.ctx.fillStyle="#007200":this.playerResourcesTemp.dayCounter>=77&&(this.ctx.fillStyle="#006B00"):this.playerResourcesTemp.dayCounter>=79&&(this.playerResourcesTemp.dayCounter<=115?this.ctx.fillStyle="#006400":this.playerResourcesTemp.dayCounter>=116&&this.playerResourcesTemp.dayCounter<=117?this.ctx.fillStyle="#096E09":this.playerResourcesTemp.dayCounter>=118&&this.playerResourcesTemp.dayCounter<=119?this.ctx.fillStyle="#117811":this.playerResourcesTemp.dayCounter>=120&&(this.ctx.fillStyle="#1A811A")),this.ctx.fillRect(0,this.ctx.canvas.height/2,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.drawImage(this.currentStone.image,.5*this.ctx.canvas.width+-.1*this.ctx.canvas.width,.74*this.ctx.canvas.height+-.055*this.ctx.canvas.width,10*this.objectSize,10*this.objectSize),this.chiselClicked&&this.playerChiseled()}},{key:"playerChiseled",value:function(){var e=.1*Math.floor(3*Math.random()+4),t=.1*Math.floor(3*Math.random()+6);this.ctx.drawImage(this.rockHit,this.ctx.canvas.width*e+-.1*this.ctx.canvas.width,this.ctx.canvas.height*t+-.055*this.ctx.canvas.width,10*this.objectSize,10*this.objectSize),this.ctx.restore()}},{key:"chiselStone",value:function(e){var t=this;if(e+=this.chiselDmg,this.playerResourcesTemp.bricks<this.playerResourcesTemp.stockpile){this.chiselClicked=!0,e>=Math.trunc(this.currentStone.hitpoints/4)&&0===this.hits&&this.ctx&&(this.currentStone.image=this.stone2,this.hits++,e>Math.trunc(this.currentStone.hitpoints/3)+Math.trunc(this.currentStone.hitpoints/3)&&this.hits++),e>Math.trunc(this.currentStone.hitpoints/3)&&1===this.hits&&this.ctx&&(this.currentStone.image=this.stone3,e>Math.trunc(this.currentStone.hitpoints/2)+Math.trunc(this.currentStone.hitpoints/4)&&this.hits++),e>Math.trunc(this.currentStone.hitpoints/2)&&2===this.hits&&this.ctx&&(this.currentStone.image=this.stone4,e>=Math.trunc(this.currentStone.hitpoints)&&this.hits++),e>=Math.trunc(this.currentStone.hitpoints)&&3===this.hits&&(this.playerResourcesTemp.bricks+=1,this.playerResourcesTemp.totalBricks+=1,this.optionsSelected.soundsOn&&!this.isGuardMoneyView&&this.addStoneSound.play(),this.resetStone());var s=setInterval((function(){t.chiselClicked=!1,clearInterval(s)}),100)}}},{key:"sellStone",value:function(){var e=Math.floor(Math.random()*(this.bartering+1))+1;if(e>=this.playerResourcesTemp.bricks&&(e=this.playerResourcesTemp.bricks),this.playerResourcesTemp.bricks>0){this.playerResourcesTemp.bricks<=e&&(this.playerResourcesTemp.bricks=e);var t=(Math.floor(Math.random()*(this.bartering+3+this.playerResources.tradeWorkersLvl))+(1+this.bartering+this.playerResources.tradeWorkersLvl))*e;this.playerResourcesTemp.money+=t,this.playerResourcesTemp.totalMoney+=t,this.playerResourcesTemp.bricks-=e,this.playerResourcesReturn.emit(this.playerResourcesTemp),this.optionsSelected.soundsOn&&!this.isGuardMoneyView&&this.sellSound.play()}else this.playerResourcesTemp.bricks<0&&(this.playerResourcesTemp.bricks=0,this.playerResourcesReturn.emit(this.playerResourcesTemp))}},{key:"resetStone",value:function(){this.playerResourcesTemp.clicks=0,this.playerResourcesReturn.emit(this.playerResourcesTemp),this.stoneHP=Math.floor(10*Math.random())+10,this.currentStone.image=this.stone1,this.currentStone.hitpoints=this.stoneHP,this.hits=0}},{key:"getStoneWorkerWorkTime",value:function(){var e=this;this.stoneCutterWorkInterval=setInterval((function(){!1===e.playerResourcesTemp.newPlayer&&(e.stoneWorkerFreq=Math.floor(5*Math.random())+1)}),2500)}},{key:"drawWorker",value:function(e){this.ctx.drawImage(e.image,e.x,e.y,5*this.objectSize,5*this.objectSize)}},{key:"getAllWorkers",value:function(e,t){var s=this;this.ngZone.runOutsideAngular((function(){return s.gameTicks(e,t)})),this.gameInterval=setInterval((function(){s.gameTicks(e,t)}),30)}},{key:"gameTicks",value:function(e,t){var s=this;this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.drawBackground(),t.forEach((function(e){(s.tradeWorkerFreq===e.frequency&&s.playerResourcesTemp.bricks>0||!0===e.startedWork)&&(0===e.startPos&&(0===e.direction&&e.x<.38*s.ctx.canvas.width?(e.x+=.005*s.ctx.canvas.width+s.tradeWorkerSpeed,e.startedWork=!0,e.x>.38*s.ctx.canvas.width&&(e.direction=1)):1===e.direction&&(e.x>=-9*s.objectSize?e.x-=.005*s.ctx.canvas.width+s.tradeWorkerSpeed:(e.startedWork=!1,e.startPos=0,e.direction=0,s.sellStone(),s.playerResourcesReturn.emit(s.playerResourcesTemp)))),1===e.startPos&&(1===e.direction&&e.x>=.5*s.ctx.canvas.width?(e.x-=.005*s.ctx.canvas.width+s.tradeWorkerSpeed,e.startedWork=!0,e.x<.5*s.ctx.canvas.width&&(e.direction=0)):0===e.direction&&(e.x<=s.ctx.canvas.width+s.objectSize?e.x+=.005*s.ctx.canvas.width+s.tradeWorkerSpeed:(e.startedWork=!1,e.startPos=1,e.direction=1,s.sellStone())))),s.drawWorker(e)})),e.forEach((function(e){if(s.stoneWorkerFreq===e.frequency||!0===e.startedWork){if(0===e.startPos)if(0===e.direction&&e.x<.38*s.ctx.canvas.width){if(e.x+=.005*s.ctx.canvas.width+s.stoneWorkerSpeed,e.startedWork=!0,e.x>.38*s.ctx.canvas.width){for(var t=0;t<s.playerResourcesTemp.chiselLvl;t++)s.playerResourcesTemp.clicks+=.6;var r=1e3-10*s.playerResourcesTemp.stoneWorkerLvl;r<=30&&(r=30);var a=setInterval((function(){s.isWorking&&!0===e.startedWork?(e.workLoad--,s.playerResourcesTemp.clicks+=1,s.chiselStone(s.playerResourcesTemp.clicks),e.workLoad<=0&&(e.direction=1,clearInterval(a)),s.playerResourcesReturn.emit(s.playerResourcesTemp)):clearInterval(a)}),r)}}else 1===e.direction&&(e.x>=-9*s.objectSize?e.x-=.005*s.ctx.canvas.width+s.stoneWorkerSpeed:(e.startedWork=!1,e.startPos=0,e.direction=0,e.workLoad=Math.floor(5*Math.random())+3+s.playerResourcesTemp.stoneWorkerLvl));if(1===e.startPos)if(1===e.direction&&e.x>=.5*s.ctx.canvas.width){if(e.x-=.005*s.ctx.canvas.width+s.stoneWorkerSpeed,e.startedWork=!0,e.x<.5*s.ctx.canvas.width){for(var o=0;o<s.playerResourcesTemp.chiselLvl;o++)s.playerResourcesTemp.clicks+=.6;var i=1e3-10*s.playerResourcesTemp.stoneWorkerLvl;i<=30&&(i=30);var n=setInterval((function(){s.isWorking&&!0===e.startedWork?(e.workLoad--,s.playerResourcesTemp.clicks+=1,s.chiselStone(s.playerResourcesTemp.clicks),e.workLoad<=0&&(e.direction=0,clearInterval(n)),s.playerResourcesReturn.emit(s.playerResourcesTemp)):clearInterval(n)}),i)}}else 0===e.direction&&(e.x<=s.ctx.canvas.width+s.objectSize?e.x+=.005*s.ctx.canvas.width+s.stoneWorkerSpeed:(e.startedWork=!1,e.startPos=1,e.direction=1,e.workLoad=Math.floor(5*Math.random())+3+s.playerResourcesTemp.stoneWorkerLvl))}s.drawWorker(e)})),this.requestGameAnimatId=requestAnimationFrame((function(){return s.gameTicks}))}},{key:"getTradeWorkerWorkTime",value:function(){var e=this;this.tradeWorksWorkInterval=setInterval((function(){!1===e.playerResourcesTemp.newPlayer&&(e.tradeWorkerFreq=Math.floor(5*Math.random())+1)}),2500)}},{key:"getWorkerPayment",value:function(){var e=this,t=!1;this.workPayInterval=setInterval((function(){if(!1===e.playerResourcesTemp.newPlayer&&(e.workPayCounter++,e.playerResourcesTemp.dayCounter=e.workPayCounter,e.playerResourcesReturn.emit(e.playerResourcesTemp),e.workPayCounter>=120)){var s=e.playerResourcesTemp.stoneWorkers.length*(2*e.playerResourcesTemp.stoneWorkerLvl+2),r=e.playerResourcesTemp.tradeWorkers.length*(2*e.playerResourcesTemp.tradeWorkersLvl+2),a=20*e.playerResourcesTemp.totalGuards;if(e.workerPayday=s+r+a,e.playerResourcesTemp.money-=s+r+a,e.playerResourcesTemp.daysPast++,e.workPayCounter=0,e.playerResourcesTemp.money<0&&(t=!0,e.playerResourcesTemp.credit--),e.playerResourcesReturn.emit(e.playerResourcesTemp),e.playerResourcesTemp.stoneWorkers.length>0||e.playerResourcesTemp.tradeWorkers.length>0){e.displayPayday=!0;var o=setInterval((function(){if(e.displayPayday=!1,t){e.displayCreditHit=!0;var s=setInterval((function(){e.displayCreditHit=!1,clearInterval(s)}),5e3)}clearInterval(o)}),5e3)}}}),1e3)}},{key:"drawSky",value:function(){this.playerResourcesTemp.dayCounter<=40&&this.playerResourcesTemp.dayCounter>0?(this.playerResourcesTemp.sky.sun.y+=-58e-5*this.ctx.canvas.height+-16e-5*this.ctx.canvas.height,this.playerResourcesTemp.sky.sun.x=.5*this.ctx.canvas.width,this.playerResourcesTemp.sky.moon.x=.5*this.ctx.canvas.width,this.playerResourcesTemp.sky.moon.y=.74*this.ctx.canvas.height):this.playerResourcesTemp.dayCounter>=41&&this.playerResourcesTemp.dayCounter<79?(this.playerResourcesTemp.sky.sun.x=.5*this.ctx.canvas.width,this.playerResourcesTemp.sky.sun.y=.74*this.ctx.canvas.height,this.playerResourcesTemp.sky.moon.x=.5*this.ctx.canvas.width,this.playerResourcesTemp.sky.moon.y=.74*this.ctx.canvas.height):this.playerResourcesTemp.dayCounter>=79&&(this.playerResourcesTemp.sky.moon.y+=-58e-5*this.ctx.canvas.height+-16e-5*this.ctx.canvas.height,this.playerResourcesTemp.sky.moon.x=.5*this.ctx.canvas.width,this.playerResourcesTemp.sky.sun.x=.5*this.ctx.canvas.width,this.playerResourcesTemp.sky.sun.y=.74*this.ctx.canvas.height)}},{key:"drawStars",value:function(e){for(var t=this,s=setInterval((function(){t.playerResourcesTemp.dayCounter>=78&&t.playerResourcesTemp.dayCounter<=79?(t.starLight+=.1,t.starLight>=1&&(t.starLight=1)):t.playerResourcesTemp.dayCounter<=115&&(t.starLight=1),t.playerResourcesTemp.dayCounter>=116&&t.playerResourcesTemp.dayCounter<=117&&(t.starLight-=.1,t.starLight<=0&&(t.starLight=0)),clearInterval(s)}),100),r=0;r<e.length;r++)this.ctx.beginPath(),this.ctx.arc(e[r].x,e[r].y,e[r].radius,0,2*Math.PI,!1),this.ctx.fillStyle="rgba(255, 255, 255, "+this.starLight+")",this.ctx.fill(),this.ctx.lineWidth=1,this.ctx.strokeStyle="rgba(255, 255, 255, "+this.starLight+")",this.ctx.stroke()}},{key:"getStars",value:function(){this.stars=[];for(var e=0;e<this.starCount;e++){var t={x:0,y:0,radius:0};t.x=Math.floor(Math.random()*this.ctx.canvas.width)+1,t.y=Math.floor(Math.random()*(this.ctx.canvas.height/2))+1,t.radius=.1*this.objectSize,this.stars.push(t)}}},{key:"onResize",value:function(e){var t=this;this.ctx.canvas.width=.9*window.innerWidth,this.ctx.canvas.height=.5*window.innerHeight,this.objectSizeWidth=.01*this.ctx.canvas.width,this.objectSizeHeight=.01*this.ctx.canvas.height,this.objectSize=this.objectSizeWidth+this.objectSizeHeight,this.starCount=Math.abs(this.ctx.canvas.width/15),this.getStars(),this.playerResourcesTemp.stoneWorkers.length>0&&this.playerResourcesTemp.stoneWorkers.forEach((function(e){0===e.startPos?(e.x=t.ctx.canvas.width/(-.7*t.objectSize),e.y=.76*t.ctx.canvas.height,e.direction=0,e.startedWork=!1,e.workLoad=0):1===e.startPos&&(e.x=1.3*t.ctx.canvas.width,e.y=.76*t.ctx.canvas.height,e.direction=1,e.startedWork=!1,e.workLoad=0)})),this.playerResourcesTemp.tradeWorkers.length>0&&this.playerResourcesTemp.tradeWorkers.forEach((function(e){0===e.startPos?(e.x=t.ctx.canvas.width/(-.7*t.objectSize),e.y=.5*t.ctx.canvas.height,e.direction=0,e.startedWork=!1):1===e.startPos&&(e.x=1.3*t.ctx.canvas.width,e.y=.5*t.ctx.canvas.height,e.direction=1,e.startedWork=!1)})),this.playerResourcesReturn.emit(this.playerResourcesTemp)}},{key:"playerResources",get:function(){return this.playerResourcesTemp},set:function(e){this.playerResourcesTemp=e,this.chiselStone(this.playerResourcesTemp.clicks)}}]),e}()).\u0275fac=function(e){return new(e||A)(o.Ob(o.A))},A.\u0275cmp=o.Ib({type:A,selectors:[["app-stone-cutter-view"]],viewQuery:function(e,t){var s;1&e&&o.yc(B,!0),2&e&&o.qc(s=o.dc())&&(t.canvas=s.first)},inputs:{playerResources:"playerResources",isGuardMoneyView:"isGuardMoneyView"},outputs:{playerResourcesReturn:"playerResourcesReturn"},decls:5,vars:2,consts:[[1,"stone-view-wrapper",3,"resize"],["class","workers-payday",4,"ngIf"],["class","credit-hit",4,"ngIf"],["id","canvas"],["canvas",""],[1,"workers-payday"],[1,"credit-hit"]],template:function(e,t){1&e&&(o.Ub(0,"div",0),o.cc("resize",(function(e){return t.onResize(e)}),!1,o.tc),o.Ac(1,P,2,1,"p",1),o.Ac(2,I,2,0,"p",2),o.Pb(3,"canvas",3,4),o.Tb()),2&e&&(o.Cb(1),o.lc("ngIf",t.displayPayday),o.Cb(1),o.lc("ngIf",t.displayCreditHit))},directives:[r.k],styles:["#canvas[_ngcontent-%COMP%]{display:block;margin:0 auto}.credit-hit[_ngcontent-%COMP%], .workers-payday[_ngcontent-%COMP%]{position:absolute;top:calc(20% + 1.4em);text-align:center;width:90%}.credit-hit[_ngcontent-%COMP%]{color:red;font-weight:bolder}"]}),A),V=["canvasGuardMoney"],D=((G=function(){function e(t){_classCallCheck(this,e),this.ngZone=t,this.playerResourcesTemp={chiselLvl:0,money:0,bricks:0,clicks:0,barterLvl:0,tradeWorkers:[],tradeWorkersCount:0,tradeWorkersLvl:0,stoneWorkers:[],stoneCuttersCount:0,stoneWorkerLvl:0,guards:[],guardCount:0,guardWeaponLvl:0,guardArmorLvl:0,guardSpeedLvl:0,dayCounter:0,daysPast:0,version:.5,totalClicks:0,totalBricks:0,totalMoney:0,newPlayer:!0,quests:{questLvl:0,questDesc:"",questReward:0,completed:!1,quest:{complete:!1,chiselLvl:0,barterLvl:0,masons:0,masonLvl:0,traders:0,traderLvl:0}},sky:{sun:{x:0,y:0},moon:{x:0,y:0}},housingLimit:0,housingLvl:0,totalWorkers:0,stockpile:0,stockpileLvl:0,screenWidth:0,screenChange:!1,gameLevel:1,currentChapter:"",newPlayerVault:!0,banditWave:0,bandits:[],banditWaveCounter:0,banditSpawnCount:0,isBanditWaveStarted:!1,moneyTaken:0,credit:3,banditsStopped:0,totalGuards:0,tutorialGuards:0},this.playerResourcesReturn=new o.o,this.stars=[],this.starLight=0,this.vaultImg=new Image,this.guardImg=new Image,this.banditImg=new Image,this.combatHit=new Image,this.combatSound1Path="assets/sounds/sword_clang1.wav",this.combatSound1=new Audio,this.combatSound2Path="assets/sounds/sword_clang2.wav",this.combatSound2=new Audio,this.optionsSelected={darkMode:!0,soundsOn:!0}}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this;if(localStorage.length>0&&localStorage.getItem("mason_options")){var t=JSON.parse(localStorage.getItem("mason_options"));this.optionsSelected={darkMode:t.darkMode,soundsOn:t.soundsOn};var s=document.getElementsByTagName("body");this.optionsSelected.darkMode?s[0].classList.add("darkMode"):s[0].classList.remove("darkMode")}else{document.getElementsByTagName("body")[0].classList.add("darkMode");var r=JSON.stringify(this.optionsSelected);localStorage.setItem("mason_options",r)}this.combatSound1.src=this.combatSound1Path,this.combatSound1.load(),this.combatSound2.src=this.combatSound2Path,this.combatSound2.load(),this.ctx=this.canvas.nativeElement.getContext("2d"),this.ctx.canvas.width=.9*window.innerWidth,this.ctx.canvas.height=.5*window.innerHeight,this.objectSizeWidth=.01*this.ctx.canvas.width,this.objectSizeHeight=.01*this.ctx.canvas.height,this.objectSize=this.objectSizeWidth+this.objectSizeHeight,this.starCount=Math.abs(this.ctx.canvas.width/15),this.getStars(),this.vaultImg.src="./assets/images/vault.png",this.guardImg.src="./assets/images/guard.png",this.banditImg.src="./assets/images/bandit.png",this.combatHit.src="./assets/images/rockChiseled.png",this.vaultImg.onload=function(){e.startBanditWaves(),e.playerResourcesTemp.isBanditWaveStarted&&e.spawnBandits(),e.playerResourcesTemp.guards.forEach((function(t){t.image=e.guardImg})),e.playerResourcesTemp.bandits.forEach((function(t){t.image=e.banditImg})),e.getAllCharacters(e.playerResourcesTemp.guards,e.playerResourcesTemp.bandits)}}},{key:"ngOnDestroy",value:function(){this.combatSound1=new Audio,this.combatSound2=new Audio,clearInterval(this.gameInterval),clearInterval(this.banditSpawnInterval),clearInterval(this.banditWaveInterval),cancelAnimationFrame(this.requestGameAnimatId)}},{key:"drawBackground",value:function(){this.playerResourcesTemp.dayCounter<=40?this.playerResourcesTemp.dayCounter<=33?this.ctx.fillStyle="#0000FF":this.playerResourcesTemp.dayCounter>=34&&this.playerResourcesTemp.dayCounter<=36?this.ctx.fillStyle="#0000F3":this.playerResourcesTemp.dayCounter>=37&&this.playerResourcesTemp.dayCounter<=39?this.ctx.fillStyle="#0000E6":this.playerResourcesTemp.dayCounter>=40&&(this.ctx.fillStyle="#0000DA"):this.playerResourcesTemp.dayCounter>=41&&this.playerResourcesTemp.dayCounter<79?this.playerResourcesTemp.dayCounter<=70?this.ctx.fillStyle="#0000CD":this.playerResourcesTemp.dayCounter>=71&&this.playerResourcesTemp.dayCounter<=73?this.ctx.fillStyle="#0000BD":this.playerResourcesTemp.dayCounter>=74&&this.playerResourcesTemp.dayCounter<=76?this.ctx.fillStyle="#0000AC":this.playerResourcesTemp.dayCounter>=77&&(this.ctx.fillStyle="#00009C"):this.playerResourcesTemp.dayCounter>=79&&(this.playerResourcesTemp.dayCounter<=115?this.ctx.fillStyle="#00008B":this.playerResourcesTemp.dayCounter>=116&&this.playerResourcesTemp.dayCounter<=117?this.ctx.fillStyle="#0000A8":this.playerResourcesTemp.dayCounter>=118&&this.playerResourcesTemp.dayCounter<=119?this.ctx.fillStyle="#0000C5":this.playerResourcesTemp.dayCounter>=120&&(this.ctx.fillStyle="#0000E2")),this.ctx.fillRect(0,this.ctx.canvas.height/6*-1,this.ctx.canvas.width,this.ctx.canvas.height),this.playerResourcesTemp.dayCounter>=79&&this.playerResourcesTemp.dayCounter<=117?this.drawStars(this.stars):this.getStars(),this.playerResourcesTemp.dayCounter<=40?this.playerResourcesTemp.dayCounter<=33?this.ctx.fillStyle="#228B22":this.playerResourcesTemp.dayCounter>=34&&this.playerResourcesTemp.dayCounter<=36?this.ctx.fillStyle="#1A881A":this.playerResourcesTemp.dayCounter>=37&&this.playerResourcesTemp.dayCounter<=39?this.ctx.fillStyle="#118611":this.playerResourcesTemp.dayCounter>=40&&(this.ctx.fillStyle="#098309"):this.playerResourcesTemp.dayCounter>=41&&this.playerResourcesTemp.dayCounter<79?this.playerResourcesTemp.dayCounter<=70?this.ctx.fillStyle="#008000":this.playerResourcesTemp.dayCounter>=71&&this.playerResourcesTemp.dayCounter<=73?this.ctx.fillStyle="#007900":this.playerResourcesTemp.dayCounter>=74&&this.playerResourcesTemp.dayCounter<=76?this.ctx.fillStyle="#007200":this.playerResourcesTemp.dayCounter>=77&&(this.ctx.fillStyle="#006B00"):this.playerResourcesTemp.dayCounter>=79&&(this.playerResourcesTemp.dayCounter<=115?this.ctx.fillStyle="#006400":this.playerResourcesTemp.dayCounter>=116&&this.playerResourcesTemp.dayCounter<=117?this.ctx.fillStyle="#096E09":this.playerResourcesTemp.dayCounter>=118&&this.playerResourcesTemp.dayCounter<=119?this.ctx.fillStyle="#117811":this.playerResourcesTemp.dayCounter>=120&&(this.ctx.fillStyle="#1A811A")),this.ctx.fillRect(0,this.ctx.canvas.height/6,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.drawImage(this.vaultImg,.5*this.ctx.canvas.width+-.1*this.ctx.canvas.width,.73*this.ctx.canvas.height+-.055*this.ctx.canvas.width,10*this.objectSize,10*this.objectSize)}},{key:"gameTicks",value:function(e,t){var s=this;this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.drawBackground(),t.forEach((function(e,t){!1===e.inCombat&&0===e.startPos&&0===e.animatePos&&e.x<.3*s.ctx.canvas.width&&(e.x+=.003*s.ctx.canvas.width),!1===e.inCombat&&0===e.startPos&&0===e.animatePos&&e.x>=.3*s.ctx.canvas.width&&e.animatePos++,!1===e.inCombat&&0===e.startPos&&1===e.animatePos&&(e.y<1*s.ctx.canvas.height&&(e.y+=.003*s.ctx.canvas.height),e.y>=1*s.ctx.canvas.height&&(e.finished=!0)),!1===e.inCombat&&1===e.startPos&&0===e.animatePos&&e.x<.3*s.ctx.canvas.width&&(e.x+=.003*s.ctx.canvas.width),!1===e.inCombat&&1===e.startPos&&0===e.animatePos&&e.x>=.14*s.ctx.canvas.width&&e.animatePos++,!1===e.inCombat&&1===e.startPos&&1===e.animatePos&&(e.y<1*s.ctx.canvas.height&&(e.y+=.003*s.ctx.canvas.height),e.y>=1*s.ctx.canvas.height&&(e.finished=!0)),!1===e.inCombat&&2===e.startPos&&0===e.animatePos&&e.x>.62*s.ctx.canvas.width&&(e.x-=.003*s.ctx.canvas.width),!1===e.inCombat&&2===e.startPos&&0===e.animatePos&&e.x<=.62*s.ctx.canvas.width&&e.animatePos++,!1===e.inCombat&&2===e.startPos&&1===e.animatePos&&(e.y<1*s.ctx.canvas.height&&(e.y+=.003*s.ctx.canvas.height),e.y>=1*s.ctx.canvas.height&&(e.finished=!0)),!1===e.inCombat&&3===e.startPos&&0===e.animatePos&&e.x>.78*s.ctx.canvas.width&&(e.x-=.003*s.ctx.canvas.width),!1===e.inCombat&&3===e.startPos&&0===e.animatePos&&e.x<=.78*s.ctx.canvas.width&&e.animatePos++,!1===e.inCombat&&3===e.startPos&&1===e.animatePos&&(e.y<1*s.ctx.canvas.height&&(e.y+=.003*s.ctx.canvas.height),e.y>=1*s.ctx.canvas.height&&(e.finished=!0)),s.drawCharacters(e)})),t.forEach((function(e,r){!0===e.finished&&(e.hp>0?(0===e.level?(s.playerResourcesTemp.money-=50,s.playerResourcesTemp.moneyTaken+=50):1===e.level?(s.playerResourcesTemp.money-=100,s.playerResourcesTemp.moneyTaken+=100):(s.playerResourcesTemp.money-=100*e.level,s.playerResourcesTemp.moneyTaken+=100*e.level),t.splice(r,1),s.playerResourcesReturn.emit(s.playerResourcesTemp)):e.hp<=0&&!0===e.finished&&t.splice(r,1))})),e.forEach((function(e,r){0===e.startPos&&0===e.animatePos&&(e.target||t.forEach((function(t){!1===t.inCombat&&!1===t.isTarget&&t.y+.3*s.ctx.canvas.height>=e.y&&t.x+.3*s.ctx.canvas.width>=e.x&&t.x-.3*s.ctx.canvas.width<=e.x&&(e.target=t)})),e.target&&(e.hasTarget=!0,e.target.isTarget=!0,e.target.y<e.y-.04*s.ctx.canvas.width&&(e.y-=.004*s.ctx.canvas.height),e.target.y>e.y+.04*s.ctx.canvas.width&&(e.y+=.004*s.ctx.canvas.height),e.target.x>e.x+.01*s.ctx.canvas.width?e.x+=.004*s.ctx.canvas.height:e.target.x<e.x-.01*s.ctx.canvas.width?e.x-=.004*s.ctx.canvas.height:e.target.inCombat=!0),e.target&&!0===e.target.inCombat&&(s.guardAttack(e),s.banditAttack(e))),0===e.startPos&&1===e.animatePos&&(e.y<1*s.ctx.canvas.height&&(e.y+=.005*s.ctx.canvas.height),e.y>=1*s.ctx.canvas.height&&(s.playerResourcesTemp.guardCount++,e.isAlive=!1,s.playerResourcesReturn.emit(s.playerResourcesTemp))),s.drawCharacters(e)})),e.forEach((function(t,r){!1===t.isAlive&&(e.splice(r,1),s.playerResourcesReturn.emit(s.playerResourcesTemp))})),this.requestGameAnimatId=requestAnimationFrame((function(){return s.gameTicks}))}},{key:"getAllCharacters",value:function(e,t){var s=this;this.ngZone.runOutsideAngular((function(){return s.gameTicks(e,t)})),this.gameInterval=setInterval((function(){s.gameTicks(e,t)}),30)}},{key:"getStars",value:function(){this.stars=[];for(var e=0;e<this.starCount;e++){var t={x:0,y:0,radius:0};t.x=Math.floor(Math.random()*this.ctx.canvas.width)+1,t.y=Math.floor(Math.random()*(this.ctx.canvas.height/2))+1,t.radius=.1*this.objectSize,this.stars.push(t)}}},{key:"drawStars",value:function(e){for(var t=this,s=setInterval((function(){t.playerResourcesTemp.dayCounter>=78&&t.playerResourcesTemp.dayCounter<=79?(t.starLight+=.1,t.starLight>=1&&(t.starLight=1)):t.playerResourcesTemp.dayCounter<=115&&(t.starLight=1),t.playerResourcesTemp.dayCounter>=116&&t.playerResourcesTemp.dayCounter<=117&&(t.starLight-=.1,t.starLight<=0&&(t.starLight=0)),clearInterval(s)}),100),r=0;r<e.length;r++)this.ctx.beginPath(),this.ctx.arc(e[r].x,e[r].y,e[r].radius,0,2*Math.PI,!1),this.ctx.fillStyle="rgba(255, 255, 255, "+this.starLight+")",this.ctx.fill(),this.ctx.lineWidth=1,this.ctx.strokeStyle="rgba(255, 255, 255, "+this.starLight+")",this.ctx.stroke()}},{key:"playerTap",value:function(e){if(e.clientY>=.44*this.ctx.canvas.height&&e.clientX>.087*this.ctx.canvas.width&&e.clientX<this.ctx.canvas.width+.025*this.ctx.canvas.width)if(e.clientX>.52*this.ctx.canvas.width+-.1*this.ctx.canvas.width&&e.clientX<.51*this.ctx.canvas.width+-.1*this.ctx.canvas.width+14*this.objectSize&&e.clientY>.89*this.ctx.canvas.height+-.055*this.ctx.canvas.width);else{var t={id:Math.floor(9999*Math.random())+"-"+Math.floor(9999*Math.random())+"-"+Math.floor(9999*Math.random()),image:this.guardImg,speed:this.playerResourcesTemp.guardSpeedLvl,hp:9+this.playerResourcesTemp.guardArmorLvl,x:e.clientX-.1*this.ctx.canvas.width,y:e.clientY-.28*this.ctx.canvas.height,startPos:0,animatePos:0,attack:this.playerResourcesTemp.guardWeaponLvl,defense:this.playerResourcesTemp.guardArmorLvl,hasTarget:!1,target:null,isAlive:!0,isTutorialGuard:!1};this.playerResourcesTemp.tutorialGuards>0&&(t.isTutorialGuard=!0),this.playerResourcesTemp.guardCount>0&&(this.playerResourcesTemp.guards.push(t),this.playerResourcesTemp.guardCount--,this.playerResourcesReturn.emit(this.playerResourcesTemp))}}},{key:"drawCharacters",value:function(e){this.ctx.drawImage(e.image,e.x,e.y,5*this.objectSize,5*this.objectSize)}},{key:"spawnBandits",value:function(){var e=this,t=0,s=0,r=0,a=0,o=0,i=0,n=0;this.banditSpawnInterval=setInterval((function(){e.playerResourcesTemp.banditWave<=2&&(t=Math.floor(4*Math.random()),s=0,r=10,a=2,o=0,i=0,n=0),e.playerResourcesTemp.banditWave>2&&e.playerResourcesTemp.banditWave<=5&&(t=Math.floor(4*Math.random()),s=Math.floor(2*Math.random())+1,r=10+Math.floor(2*Math.random())+1,a=5,o=Math.floor(2*Math.random())+1,i=o,n=o),e.playerResourcesTemp.banditWave>5&&e.playerResourcesTemp.banditWave<=8&&(t=Math.floor(4*Math.random()),s=Math.floor(3*Math.random())+2,r=10+Math.floor(3*Math.random())+2,a=11,o=Math.floor(3*Math.random())+2,i=o,n=o),e.playerResourcesTemp.banditWave>8&&e.playerResourcesTemp.banditWave<=11&&(t=Math.floor(4*Math.random()),s=Math.floor(5*Math.random())+4,r=10+Math.floor(5*Math.random())+4,a=23,o=Math.floor(5*Math.random())+4,i=o,n=o),e.playerResourcesTemp.banditWave>11&&e.playerResourcesTemp.banditWave<=14&&(t=Math.floor(4*Math.random()),s=Math.floor(9*Math.random())+8,r=10+Math.floor(9*Math.random())+8,a=47,o=Math.floor(16*Math.random())+15,i=o,n=o),e.playerResourcesTemp.banditWave>14&&e.playerResourcesTemp.banditWave<=17&&(t=Math.floor(4*Math.random()),s=Math.floor(15*Math.random())+16,r=10+Math.floor(15*Math.random())+16,a=50,o=Math.floor(11*Math.random())+30,i=o,n=o),e.playerResourcesTemp.banditWave>17&&e.playerResourcesTemp.banditWave<=20&&(t=Math.floor(4*Math.random()),s=Math.floor(21*Math.random())+30,r=10+Math.floor(11*Math.random())+30,a=60,o=Math.floor(11*Math.random())+40,i=o,n=o),e.playerResourcesTemp.banditWave>20&&e.playerResourcesTemp.banditWave<=23&&(t=Math.floor(4*Math.random()),s=Math.floor(11*Math.random())+50,r=10+Math.floor(11*Math.random())+40,a=70,o=Math.floor(11*Math.random())+50,i=o,n=o),e.playerResourcesTemp.banditWave>23&&e.playerResourcesTemp.banditWave<=26&&(t=Math.floor(4*Math.random()),s=Math.floor(11*Math.random())+60,r=10+Math.floor(11*Math.random())+50,a=80,o=Math.floor(11*Math.random())+60,i=o,n=o),e.playerResourcesTemp.banditWave>26&&e.playerResourcesTemp.banditWave<=29&&(t=Math.floor(4*Math.random()),s=Math.floor(11*Math.random())+70,r=10+Math.floor(11*Math.random())+60,a=90,o=Math.floor(11*Math.random())+70,i=o,n=o),e.playerResourcesTemp.banditWave>29&&(t=Math.floor(4*Math.random()),s=Math.floor(20*Math.random())+80,r=10+Math.floor(11*Math.random())+70,a=100,o=Math.floor(11*Math.random())+80,i=o,n=o),e.addBandit(t,s,r,o,i,n),e.playerResourcesTemp.banditSpawnCount++,e.playerResourcesTemp.banditSpawnCount>=a&&(e.playerResourcesTemp.banditWave++,e.playerResourcesTemp.isBanditWaveStarted=!1,e.playerResourcesTemp.banditSpawnCount=0,e.playerResourcesTemp.banditWaveCounter=0,clearInterval(e.banditSpawnInterval)),e.playerResourcesReturn.emit(e.playerResourcesTemp)}),1500)}},{key:"addBandit",value:function(e,t,s,r,a,o){var i=this,n=0,c=0;0===e?(n=-.1*this.ctx.canvas.width,c=.2*this.ctx.canvas.height):1===e?(n=-.1*this.ctx.canvas.width,c=.48*this.ctx.canvas.height):2===e?(n=1.01*this.ctx.canvas.width,c=.2*this.ctx.canvas.height):3===e&&(n=1.01*this.ctx.canvas.width,c=.48*this.ctx.canvas.height);var l={id:Math.floor(9999*Math.random())+"-"+Math.floor(9999*Math.random())+"-"+Math.floor(9999*Math.random()),image:this.banditImg,speed:t,hp:s,x:n,y:c,startPos:e,animatePos:0,finished:!1,level:r,attack:a,defense:o,inCombat:!1,isTarget:!1},u=setTimeout((function(){i.playerResourcesTemp.bandits.push(l),i.playerResourcesReturn.emit(i.playerResourcesTemp),u&&clearTimeout(u)}),1e3)}},{key:"combatEffects",value:function(e,t){var s=.22*Math.floor(3*Math.random()+4),r=.12*Math.floor(3*Math.random()+6);this.ctx.drawImage(this.combatHit,e+s+-.1*e,t+r+-.055*t,8*this.objectSize,8*this.objectSize),this.ctx.restore()}},{key:"guardAttack",value:function(e){if(e&&e.target){var t=this.playerResourcesTemp.guards.find((function(t){return t.id===e.id})),s=this.playerResourcesTemp.bandits.find((function(e){return e.id===t.target.id}));if(s){if(1===Math.floor(Math.random()*(100-t.speed)+1)){this.combatEffects(t.x,t.y),this.optionsSelected.soundsOn&&this.isGuardMoneyView&&this.combatSound1.play();var r=1+this.playerResourcesTemp.guardWeaponLvl-s.defense;r<=0&&(r=1),s.hp-=r,s.hp<=0&&(s.finished=!0,s.inCombat=!1,t.target=null,e.animatePos++,this.playerResourcesTemp.banditsStopped++),this.playerResourcesReturn.emit(this.playerResourcesTemp)}}else t.target={}}}},{key:"banditAttack",value:function(e){if(e&&e.target){var t=this.playerResourcesTemp.guards.find((function(t){return t.id===e.id})),s=this.playerResourcesTemp.bandits.find((function(e){return e.id===t.target.id}));if(1===Math.floor(Math.random()*(100-t.target.speed)+1)){this.combatEffects(s.x,s.y),this.optionsSelected.soundsOn&&this.isGuardMoneyView&&this.combatSound2.play();var r=1+s.attack-t.defense;r<=0&&(r=1),t.hp-=r,!t.isTutorialGuard&&t.hp<=0?(t.isAlive=!1,s.inCombat=!1,s.isTarget=!1,this.playerResourcesTemp.totalGuards--,this.playerResourcesTemp.totalWorkers--):t.isTutorialGuard&&t.hp<=0&&(t.isAlive=!1,s.inCombat=!1,s.isTarget=!1,this.playerResourcesTemp.tutorialGuards--),this.playerResourcesReturn.emit(this.playerResourcesTemp)}}}},{key:"startBanditWaves",value:function(){var e=this;this.banditWaveInterval=setInterval((function(){!1===e.playerResourcesTemp.newPlayerVault&&(e.playerResourcesTemp.banditWaveCounter++,e.playerResourcesTemp.banditWaveCounter>=260&&(e.playerResourcesTemp.isBanditWaveStarted=!0,260===e.playerResourcesTemp.banditWaveCounter&&e.spawnBandits()),e.playerResourcesReturn.emit(e.playerResourcesTemp))}),1e3)}},{key:"onResize",value:function(e){var t=this;this.ctx.canvas.width=.9*window.innerWidth,this.ctx.canvas.height=.5*window.innerHeight,this.objectSizeWidth=.01*this.ctx.canvas.width,this.objectSizeHeight=.01*this.ctx.canvas.height,this.objectSize=this.objectSizeWidth+this.objectSizeHeight,this.starCount=Math.abs(this.ctx.canvas.width/15),this.getStars(),this.playerResourcesTemp.guardCount=this.playerResourcesTemp.totalGuards,this.playerResourcesTemp.banditSpawnCount=0,this.playerResourcesTemp.bandits.forEach((function(e,s){t.playerResourcesTemp.bandits.splice(s,1)})),this.playerResourcesTemp.guards.forEach((function(e,s){t.playerResourcesTemp.guards.splice(s,1)})),this.playerResourcesReturn.emit(this.playerResourcesTemp)}},{key:"playerResources",set:function(e){this.playerResourcesTemp=e}}]),e}()).\u0275fac=function(e){return new(e||G)(o.Ob(o.A))},G.\u0275cmp=o.Ib({type:G,selectors:[["app-guard-money-view"]],viewQuery:function(e,t){var s;1&e&&o.yc(V,!0),2&e&&o.qc(s=o.dc())&&(t.canvas=s.first)},inputs:{playerResources:"playerResources",isGuardMoneyView:"isGuardMoneyView"},outputs:{playerResourcesReturn:"playerResourcesReturn"},decls:3,vars:0,consts:[[1,"stone-view-wrapper",3,"resize"],["id","canvasGuardMoney",3,"click"],["canvasGuardMoney",""]],template:function(e,t){1&e&&(o.Ub(0,"div",0),o.cc("resize",(function(e){return t.onResize(e)}),!1,o.tc),o.Ub(1,"canvas",1,2),o.cc("click",(function(e){return t.playerTap(e)})),o.Tb(),o.Tb())},styles:["#canvasGuardMoney[_ngcontent-%COMP%]{display:block;margin:0 auto}"]}),G);function _(e,t){if(1&e&&(o.Ub(0,"div",7),o.Ub(1,"h3",8),o.Bc(2,"Owe Guards"),o.Tb(),o.Ub(3,"p",4),o.Bc(4),o.Tb(),o.Tb()),2&e){var s=o.gc();o.Cb(4),o.Dc("-$",s.totalGuardCost," a day")}}var z=function(e){return{"title-dm":e}};function H(e,t){if(1&e&&(o.Ub(0,"span"),o.Ub(1,"h2",6),o.Bc(2,"Guards"),o.Tb(),o.Ub(3,"div",7),o.Ub(4,"h3",8),o.Bc(5,"Hired Guards"),o.Tb(),o.Ub(6,"p",4),o.Bc(7),o.Tb(),o.Tb(),o.Ub(8,"div",7),o.Ub(9,"h3",8),o.Bc(10,"Weapon Level"),o.Tb(),o.Ub(11,"p",4),o.Bc(12),o.Tb(),o.Tb(),o.Ub(13,"div",7),o.Ub(14,"h3",8),o.Bc(15,"Armor Level"),o.Tb(),o.Ub(16,"p",4),o.Bc(17),o.Tb(),o.Tb(),o.Ub(18,"div",7),o.Ub(19,"h3",8),o.Bc(20,"Speed Level"),o.Tb(),o.Ub(21,"p",4),o.Bc(22),o.Tb(),o.Tb(),o.Tb()),2&e){var s=o.gc();o.Cb(1),o.lc("ngClass",o.oc(5,z,!0===s.optionsSelected.darkMode)),o.Cb(6),o.Cc(s.playerResourcesTemp.totalGuards),o.Cb(5),o.Cc(s.playerResourcesTemp.guardWeaponLvl),o.Cb(5),o.Cc(s.playerResourcesTemp.guardArmorLvl),o.Cb(5),o.Cc(s.playerResourcesTemp.guardSpeedLvl)}}function F(e,t){if(1&e&&(o.Ub(0,"span"),o.Ub(1,"div",7),o.Ub(2,"h3",8),o.Bc(3,"Bandit Waves"),o.Tb(),o.Ub(4,"p",4),o.Bc(5),o.Tb(),o.Tb(),o.Ub(6,"div",7),o.Ub(7,"h3",8),o.Bc(8,"Money Stolen"),o.Tb(),o.Ub(9,"p",4),o.Bc(10),o.Tb(),o.Tb(),o.Ub(11,"div",7),o.Ub(12,"h3",8),o.Bc(13,"Bandits Slain"),o.Tb(),o.Ub(14,"p",4),o.Bc(15),o.Tb(),o.Tb(),o.Tb()),2&e){var s=o.gc();o.Cb(5),o.Cc(s.playerResourcesTemp.banditWave),o.Cb(5),o.Dc("$",s.playerResourcesTemp.moneyTaken,""),o.Cb(5),o.Cc(s.playerResourcesTemp.banditsStopped)}}var j,E=((j=function(){function e(){_classCallCheck(this,e),this.playerResourcesTemp={chiselLvl:0,money:0,bricks:0,clicks:0,barterLvl:0,tradeWorkers:[],tradeWorkersCount:0,tradeWorkersLvl:0,stoneWorkers:[],stoneCuttersCount:0,stoneWorkerLvl:0,guards:[],guardCount:0,guardWeaponLvl:0,guardArmorLvl:0,guardSpeedLvl:0,dayCounter:0,daysPast:0,version:.5,totalClicks:0,totalBricks:0,totalMoney:0,newPlayer:!0,quests:{questLvl:0,questDesc:"",questReward:0,completed:!1,quest:{complete:!1,chiselLvl:0,barterLvl:0,masons:0,masonLvl:0,traders:0,traderLvl:0}},sky:{sun:{x:0,y:0},moon:{x:0,y:0}},housingLimit:0,housingLvl:0,totalWorkers:0,stockpile:0,stockpileLvl:0,screenWidth:0,screenChange:!1,gameLevel:1,currentChapter:"",newPlayerVault:!0,banditWave:0,bandits:[],banditWaveCounter:0,banditSpawnCount:0,isBanditWaveStarted:!1,moneyTaken:0,credit:3,banditsStopped:0,totalGuards:0,tutorialGuards:0},this.workersProfits=0,this.workersPayCheck=0,this.pageHeight=0,this.timeOfDay="Morning",this.baseCostPerBrick=1,this.creditScore="Great",this.displayAfterPayday="",this.totalMasonCost=0,this.totalTraderCost=0,this.totalGuardCost=0,this.optionsSelected={darkMode:!0,soundsOn:!0}}return _createClass(e,[{key:"ngOnInit",value:function(){if(localStorage.length>0&&localStorage.getItem("mason_options")){var e=JSON.parse(localStorage.getItem("mason_options"));this.optionsSelected={darkMode:e.darkMode,soundsOn:e.soundsOn}}this.calcWorkerProfits(),this.calcHeightOfPage(),this.calcTimeOfDay(),this.calcCreditScore(),this.calcMoneyAfterPayday(),this.baseCostPerBrick+=this.playerResourcesTemp.barterLvl+this.playerResourcesTemp.tradeWorkersLvl}},{key:"calcWorkerProfits",value:function(){var e,t,s=4+this.playerResourcesTemp.stoneWorkerLvl;this.totalMasonCost=this.playerResourcesTemp.stoneWorkers.length*(2*this.playerResourcesTemp.stoneWorkerLvl+2),this.totalTraderCost=this.playerResourcesTemp.tradeWorkers.length*(2*this.playerResourcesTemp.tradeWorkersLvl+2),this.totalGuardCost=20*this.playerResourcesTemp.totalGuards,this.workersPayCheck=this.totalMasonCost+this.totalTraderCost+this.totalGuardCost;var r=Math.floor(Math.random()*(this.playerResourcesTemp.barterLvl+3+this.playerResourcesTemp.tradeWorkersLvl))+1+this.playerResourcesTemp.barterLvl+this.playerResourcesTemp.tradeWorkersLvl;e=9.6*(s+.6*this.playerResourcesTemp.stoneWorkerLvl*this.playerResourcesTemp.stoneWorkers.length)/14.5,t=Math.ceil(e*r)*this.playerResourcesTemp.tradeWorkers.length+this.playerResourcesTemp.tradeWorkersLvl,this.workersProfits=t-this.workersPayCheck}},{key:"calcHeightOfPage",value:function(){var e=window.innerHeight;this.pageHeight=e-.39*e}},{key:"onResize",value:function(e){this.calcHeightOfPage()}},{key:"calcTimeOfDay",value:function(){this.playerResourcesTemp.dayCounter<=40?this.timeOfDay="Morning":this.playerResourcesTemp.dayCounter>=41&&this.playerResourcesTemp.dayCounter<79?this.timeOfDay="Afternoon":this.playerResourcesTemp.dayCounter>=79&&(this.timeOfDay="Evening")}},{key:"calcCreditScore",value:function(){3===this.playerResourcesTemp.credit?this.creditScore="Great":2===this.playerResourcesTemp.credit?this.creditScore="Good":1===this.playerResourcesTemp.credit&&(this.creditScore="Terrible")}},{key:"calcMoneyAfterPayday",value:function(){var e=this.playerResourcesTemp.money-this.workersPayCheck;e>0?this.displayAfterPayday="$"+Math.abs(e):e<0&&(this.displayAfterPayday="-$"+Math.abs(e))}},{key:"playerResources",get:function(){return this.playerResourcesTemp},set:function(e){this.playerResourcesTemp=e}}]),e}()).\u0275fac=function(e){return new(e||j)},j.\u0275cmp=o.Ib({type:j,selectors:[["app-stats-view"]],inputs:{playerResources:"playerResources"},decls:127,vars:49,consts:[[1,"stats-wrapper",3,"resize"],[1,"display-money"],["id","scrollbar",1,"stat-lvls"],[1,"quest-wrapper"],[1,"lvl-amount"],[1,"row"],[1,"stat-titles",3,"ngClass"],[1,"column"],[1,"lvl-title"],["class","column",4,"ngIf"],[4,"ngIf"]],template:function(e,t){1&e&&(o.Ub(0,"div",0),o.cc("resize",(function(e){return t.onResize(e)}),!1,o.tc),o.Ub(1,"p",1),o.Bc(2),o.Tb(),o.Ub(3,"div",2),o.Ub(4,"div",3),o.Ub(5,"p",4),o.Bc(6,"Current Quest"),o.Tb(),o.Ub(7,"p",4),o.Bc(8),o.Tb(),o.Ub(9,"p",4),o.Bc(10),o.Tb(),o.Tb(),o.Ub(11,"div",5),o.Ub(12,"h2",6),o.Bc(13,"Player's Levels"),o.Tb(),o.Ub(14,"div",7),o.Ub(15,"h3",8),o.Bc(16,"Chisel Level"),o.Tb(),o.Ub(17,"p",4),o.Bc(18),o.Tb(),o.Tb(),o.Ub(19,"div",7),o.Ub(20,"h3",8),o.Bc(21,"Barter Level"),o.Tb(),o.Ub(22,"p",4),o.Bc(23),o.Tb(),o.Tb(),o.Ub(24,"div",7),o.Ub(25,"h3",8),o.Bc(26,"Housing Level"),o.Tb(),o.Ub(27,"p",4),o.Bc(28),o.Tb(),o.Tb(),o.Ub(29,"div",7),o.Ub(30,"h3",8),o.Bc(31,"Stockpile Level"),o.Tb(),o.Ub(32,"p",4),o.Bc(33),o.Tb(),o.Tb(),o.Ub(34,"div",7),o.Ub(35,"h3",8),o.Bc(36,"Credit Rating"),o.Tb(),o.Ub(37,"p",4),o.Bc(38),o.Tb(),o.Tb(),o.Ub(39,"h2",6),o.Bc(40,"Worker Payments"),o.Tb(),o.Ub(41,"div",7),o.Ub(42,"h3",8),o.Bc(43,"$ Per Brick"),o.Tb(),o.Ub(44,"p",4),o.Bc(45),o.Tb(),o.Tb(),o.Ub(46,"div",7),o.Ub(47,"h3",8),o.Bc(48,"Owe Masons"),o.Tb(),o.Ub(49,"p",4),o.Bc(50),o.Tb(),o.Tb(),o.Ub(51,"div",7),o.Ub(52,"h3",8),o.Bc(53,"Owe Traders"),o.Tb(),o.Ub(54,"p",4),o.Bc(55),o.Tb(),o.Tb(),o.Ac(56,_,5,1,"div",9),o.Ub(57,"div",7),o.Ub(58,"h3",8),o.Bc(59,"Owe Workers"),o.Tb(),o.Ub(60,"p",4),o.Bc(61),o.Tb(),o.Tb(),o.Ub(62,"div",7),o.Ub(63,"h3",8),o.Bc(64,"Est. Profits"),o.Tb(),o.Ub(65,"p",4),o.Bc(66),o.Tb(),o.Tb(),o.Ub(67,"h2",6),o.Bc(68,"Mason Workers"),o.Tb(),o.Ub(69,"div",7),o.Ub(70,"h3",8),o.Bc(71,"Hired Masons"),o.Tb(),o.Ub(72,"p",4),o.Bc(73),o.Tb(),o.Tb(),o.Ub(74,"div",7),o.Ub(75,"h3",8),o.Bc(76,"Masons Level"),o.Tb(),o.Ub(77,"p",4),o.Bc(78),o.Tb(),o.Tb(),o.Ub(79,"h2",6),o.Bc(80,"Trader Workers"),o.Tb(),o.Ub(81,"div",7),o.Ub(82,"h3",8),o.Bc(83,"Hired Traders"),o.Tb(),o.Ub(84,"p",4),o.Bc(85),o.Tb(),o.Tb(),o.Ub(86,"div",7),o.Ub(87,"h3",8),o.Bc(88,"Traders Level"),o.Tb(),o.Ub(89,"p",4),o.Bc(90),o.Tb(),o.Tb(),o.Ac(91,H,23,7,"span",10),o.Ub(92,"h2",6),o.Bc(93,"Game Time"),o.Tb(),o.Ub(94,"div",7),o.Ub(95,"h3",8),o.Bc(96,"Time Of Day"),o.Tb(),o.Ub(97,"p",4),o.Bc(98),o.Tb(),o.Tb(),o.Ub(99,"div",7),o.Ub(100,"h3",8),o.Bc(101,"Days Past"),o.Tb(),o.Ub(102,"p",4),o.Bc(103),o.Tb(),o.Tb(),o.Ub(104,"h2",6),o.Bc(105,"Good To Know"),o.Tb(),o.Ub(106,"div",7),o.Ub(107,"h3",8),o.Bc(108,"Total Clicks"),o.Tb(),o.Ub(109,"p",4),o.Bc(110),o.Tb(),o.Tb(),o.Ub(111,"div",7),o.Ub(112,"h3",8),o.Bc(113,"Total Bricks"),o.Tb(),o.Ub(114,"p",4),o.Bc(115),o.Tb(),o.Tb(),o.Ub(116,"div",7),o.Ub(117,"h3",8),o.Bc(118,"Total Workers"),o.Tb(),o.Ub(119,"p",4),o.Bc(120),o.Tb(),o.Tb(),o.Ub(121,"div",7),o.Ub(122,"h3",8),o.Bc(123,"Total Money"),o.Tb(),o.Ub(124,"p",4),o.Bc(125),o.Tb(),o.Tb(),o.Ac(126,F,16,3,"span",10),o.Tb(),o.Tb(),o.Tb()),2&e&&(o.Cb(2),o.Fc("Money: $",t.playerResourcesTemp.money," | Housing: ",t.playerResourcesTemp.totalWorkers,"/",t.playerResourcesTemp.housingLimit,""),o.Cb(1),o.zc("height",t.pageHeight,"px"),o.Cb(5),o.Cc(t.playerResourcesTemp.quests.questDesc),o.Cb(2),o.Dc("Reward: $",t.playerResourcesTemp.quests.questReward,""),o.Cb(2),o.lc("ngClass",o.oc(37,z,!0===t.optionsSelected.darkMode)),o.Cb(6),o.Cc(t.playerResourcesTemp.chiselLvl),o.Cb(5),o.Cc(t.playerResourcesTemp.barterLvl),o.Cb(5),o.Cc(t.playerResourcesTemp.housingLvl),o.Cb(5),o.Cc(t.playerResourcesTemp.stockpileLvl),o.Cb(5),o.Cc(t.creditScore),o.Cb(1),o.lc("ngClass",o.oc(39,z,!0===t.optionsSelected.darkMode)),o.Cb(6),o.Ec("$",t.baseCostPerBrick," - $",t.playerResourcesTemp.barterLvl+3+t.playerResourcesTemp.tradeWorkersLvl,""),o.Cb(5),o.Dc("-$",t.totalMasonCost," a day"),o.Cb(5),o.Dc("-$",t.totalTraderCost," a day"),o.Cb(1),o.lc("ngIf",t.playerResourcesTemp.gameLevel>=2),o.Cb(5),o.Dc("-$",t.workersPayCheck," a day"),o.Cb(5),o.Dc("+$",t.workersProfits,""),o.Cb(1),o.lc("ngClass",o.oc(41,z,!0===t.optionsSelected.darkMode)),o.Cb(6),o.Cc(t.playerResourcesTemp.stoneCuttersCount),o.Cb(5),o.Cc(t.playerResourcesTemp.stoneWorkerLvl),o.Cb(1),o.lc("ngClass",o.oc(43,z,!0===t.optionsSelected.darkMode)),o.Cb(6),o.Cc(t.playerResourcesTemp.tradeWorkersCount),o.Cb(5),o.Cc(t.playerResourcesTemp.tradeWorkersLvl),o.Cb(1),o.lc("ngIf",t.playerResourcesTemp.gameLevel>=2),o.Cb(1),o.lc("ngClass",o.oc(45,z,!0===t.optionsSelected.darkMode)),o.Cb(6),o.Cc(t.timeOfDay),o.Cb(5),o.Cc(t.playerResourcesTemp.daysPast),o.Cb(1),o.lc("ngClass",o.oc(47,z,!0===t.optionsSelected.darkMode)),o.Cb(6),o.Cc(t.playerResourcesTemp.totalClicks),o.Cb(5),o.Cc(t.playerResourcesTemp.totalBricks),o.Cb(5),o.Cc(t.playerResourcesTemp.totalWorkers),o.Cb(5),o.Dc("$",t.playerResourcesTemp.totalMoney,""),o.Cb(1),o.lc("ngIf",t.playerResourcesTemp.gameLevel>=2))},directives:[r.i,r.k],styles:['.column[_ngcontent-%COMP%]{width:45%;padding:7px;display:inline-block;margin-left:calc(4% - .7em)}.row[_ngcontent-%COMP%]:after{content:"";display:table;clear:both}.stats-wrapper[_ngcontent-%COMP%]{margin-top:2%}.stat-lvls[_ngcontent-%COMP%]{width:100%;overflow:auto;height:24em}.stat-titles[_ngcontent-%COMP%]{border-bottom:1px solid #000;padding:0;margin:0 calc(4% - .1em) calc(1% - .6em) 0}.lvl-amount[_ngcontent-%COMP%], .lvl-title[_ngcontent-%COMP%], .stat-titles[_ngcontent-%COMP%]{text-align:center}.lvl-title[_ngcontent-%COMP%]{padding:0;margin:calc(1% + .4em) 0 0}.display-money[_ngcontent-%COMP%]{font-weight:700;text-align:center}.title-dm[_ngcontent-%COMP%]{border-bottom:1px solid #fff}.quest-wrapper[_ngcontent-%COMP%]{border:1px solid;border-radius:5px;margin-bottom:3%}']}),j);function $(e,t){if(1&e){var s=o.Vb();o.Ub(0,"button",7),o.cc("click",(function(e){return o.uc(s),o.gc().ShowVault()})),o.Bc(1,"Vault"),o.Tb()}}function N(e,t){if(1&e&&(o.Ub(0,"p",21),o.Bc(1,"Quest Completed!"),o.Tb()),2&e){var s=o.gc(2);o.zc("width",.9*s.playerResources.screenWidth,"px")("right",.9*s.playerResources.screenWidth/18,"px")}}var Y=function(e){return{"title-dm":e}};function Q(e,t){if(1&e){var s=o.Vb();o.Ub(0,"span",15),o.Ub(1,"div",16),o.Ub(2,"p",17),o.Bc(3),o.Tb(),o.Ac(4,N,2,4,"p",18),o.Ub(5,"button",19),o.cc("click",(function(e){return o.uc(s),o.gc().displayUpgrades()})),o.Bc(6,"Close"),o.Tb(),o.Tb(),o.Ub(7,"app-upgrade-menu",20),o.cc("stoneWorkerReturn",(function(e){return o.uc(s),o.gc().stoneWorkerReturn(e)}))("tradeWorkerReturn",(function(e){return o.uc(s),o.gc().tradeWorkerReturn(e)}))("guardReturn",(function(e){return o.uc(s),o.gc().guardReturn(e)}))("playerResourcesReturn",(function(e){return o.uc(s),o.gc().playerResourcesReturn(e)})),o.Tb(),o.Tb()}if(2&e){var r=o.gc();o.Cb(1),o.lc("ngClass",o.oc(4,Y,!0===r.optionsSelected.darkMode)),o.Cb(2),o.Cc(r.playerResources.currentChapter),o.Cb(1),o.lc("ngIf",r.quests.completed),o.Cb(3),o.lc("playerResources",r.playerResources)}}function J(e,t){if(1&e&&(o.Ub(0,"p",21),o.Bc(1,"Quest Completed!"),o.Tb()),2&e){var s=o.gc(2);o.zc("width",.9*s.playerResources.screenWidth,"px")("right",.9*s.playerResources.screenWidth/18,"px")}}var X=function(e,t){return{display:e,hide:t}};function K(e,t){if(1&e&&(o.Ub(0,"p",36),o.Bc(1,"New Quest Availiable! Select The Stats Button \ud83d\udc4c"),o.Tb()),2&e){var s=o.gc(2);o.zc("width",.9*s.playerResources.screenWidth,"px")("right",.9*s.playerResources.screenWidth/18,"px"),o.lc("ngClass",o.pc(5,X,!s.isGuardMoneyView,s.isGuardMoneyView))}}function Z(e,t){if(1&e&&(o.Ub(0,"p",21),o.Bc(1,"Bandits Are Attacking Your Vault!"),o.Tb()),2&e){var s=o.gc(2);o.zc("width",.9*s.playerResources.screenWidth,"px")("right",.9*s.playerResources.screenWidth/18,"px")}}function ee(e,t){if(1&e){var s=o.Vb();o.Ub(0,"span"),o.Ub(1,"app-guard-money-view",31),o.cc("playerResourcesReturn",(function(e){return o.uc(s),o.gc(2).playerResourcesReturn(e)})),o.Tb(),o.Tb()}if(2&e){var r=o.gc(2);o.Cb(1),o.lc("ngClass",o.pc(3,X,r.isGuardMoneyView,!r.isGuardMoneyView))("playerResources",r.playerResources)("isGuardMoneyView",r.isGuardMoneyView)}}function te(e,t){if(1&e){var s=o.Vb();o.Ub(0,"button",35),o.cc("keydown",(function(e){return o.uc(s),o.gc(2).unfocusAllButtons(e)}))("click",(function(e){return o.uc(s),o.gc(2).chisleStone()})),o.Bc(1,"Chisel"),o.Tb()}}function se(e,t){if(1&e){var s=o.Vb();o.Ub(0,"button",35),o.cc("keydown",(function(e){return o.uc(s),o.gc(2).unfocusAllButtons(e)}))("click",(function(e){return o.uc(s),o.gc(2).sellStone()})),o.Bc(1,"Sell"),o.Tb()}}var re=function(e){return{color:e}};function ae(e,t){if(1&e){var s=o.Vb();o.Ub(0,"span",22),o.Ub(1,"p",23),o.Bc(2),o.Pb(3,"img",24),o.Tb(),o.Ub(4,"p",25),o.Bc(5),o.Pb(6,"img",26),o.Tb(),o.Ub(7,"p",27),o.Pb(8,"img",28),o.Tb(),o.Ub(9,"p",29),o.Bc(10),o.Tb(),o.Ac(11,J,2,4,"p",18),o.Ac(12,K,2,8,"p",30),o.Ac(13,Z,2,4,"p",18),o.Ub(14,"span"),o.Ub(15,"app-stone-cutter-view",31),o.cc("playerResourcesReturn",(function(e){return o.uc(s),o.gc().playerResourcesReturn(e)})),o.Tb(),o.Tb(),o.Ac(16,ee,2,6,"span",32),o.Ub(17,"div",33),o.Ac(18,te,2,0,"button",34),o.Ac(19,se,2,0,"button",34),o.Ub(20,"button",35),o.cc("keydown",(function(e){return o.uc(s),o.gc().unfocusAllButtons(e)}))("click",(function(e){return o.uc(s),o.gc().displayUpgrades()})),o.Bc(21,"Upgrade"),o.Tb(),o.Ub(22,"button",35),o.cc("keydown",(function(e){return o.uc(s),o.gc().unfocusAllButtons(e)}))("click",(function(e){return o.uc(s),o.gc().displayStats()})),o.Bc(23,"Stats"),o.Tb(),o.Tb(),o.Tb()}if(2&e){var r=o.gc();o.Cb(1),o.lc("ngClass",o.pc(20,X,!r.isGuardMoneyView,r.isGuardMoneyView)),o.Cb(1),o.Ec("",r.playerResources.bricks,"/",r.playerResources.stockpile," "),o.Cb(1),o.mc("src",r.stoneIconPath,o.vc),o.Cb(1),o.lc("ngClass",o.pc(23,X,r.isGuardMoneyView,!r.isGuardMoneyView)),o.Cb(1),o.Cc(r.playerResources.guardCount),o.Cb(1),o.mc("src",r.guardIconPath,o.vc),o.Cb(1),o.lc("ngClass",o.pc(26,X,r.playerResources.isBanditWaveStarted,!r.playerResources.isBanditWaveStarted)),o.Cb(1),o.mc("src",r.banditIconPath,o.vc),o.Cb(1),o.lc("ngStyle",o.oc(29,re,r.money<0?"red":"white")),o.Cb(1),o.Dc("$",r.money,""),o.Cb(1),o.lc("ngIf",r.quests.completed),o.Cb(1),o.lc("ngIf",r.isQuestAvailiable&&13!==r.quests.questLvl),o.Cb(1),o.lc("ngIf",r.playerResources.banditWaveCounter>255&&r.playerResources.banditWaveCounter<=260),o.Cb(2),o.lc("ngClass",o.pc(31,X,!r.isGuardMoneyView,r.isGuardMoneyView))("playerResources",r.playerResources)("isGuardMoneyView",r.isGuardMoneyView),o.Cb(1),o.lc("ngIf",r.playerResources.gameLevel>=2),o.Cb(2),o.lc("ngIf",!r.isGuardMoneyView),o.Cb(1),o.lc("ngIf",!r.isGuardMoneyView)}}function oe(e,t){if(1&e){var s=o.Vb();o.Ub(0,"span",37),o.Ub(1,"div",38),o.Ub(2,"p",17),o.Bc(3),o.Tb(),o.Ub(4,"button",39),o.cc("click",(function(e){return o.uc(s),o.gc().displayStats()})),o.Bc(5,"Close"),o.Tb(),o.Tb(),o.Pb(6,"app-stats-view",40),o.Tb()}if(2&e){var r=o.gc();o.Cb(1),o.lc("ngClass",o.oc(3,Y,!0===r.optionsSelected.darkMode)),o.Cb(2),o.Cc(r.playerResources.currentChapter),o.Cb(3),o.lc("playerResources",r.playerResources)}}var ie=function(e){return{"info-dm":e}};function ne(e,t){if(1&e){var s=o.Vb();o.Ub(0,"div",41),o.Ub(1,"div",42),o.Ub(2,"mat-toolbar",43),o.Ub(3,"div",44),o.Ub(4,"p",45),o.Bc(5,"New Stuff!"),o.Tb(),o.Tb(),o.Tb(),o.Ub(6,"span"),o.Ub(7,"p",46),o.Bc(8,"There is some new content here! Would you like to update now? It will only take a second \ud83d\udc4d"),o.Tb(),o.Ub(9,"p",46),o.Bc(10,"If you're in the middle of a game, no worries, you can update later if you want. Exit the game and restart the app and then you'll be up to date."),o.Tb(),o.Ub(11,"button",47),o.cc("click",(function(e){return o.uc(s),o.gc().getNewUpdatesFromServer()})),o.Bc(12,"It's Ok To Update Now"),o.Tb(),o.Ub(13,"button",47),o.cc("click",(function(e){return o.uc(s),o.gc().getUpdateLater()})),o.Bc(14,"I Need A Minute Here.."),o.Tb(),o.Tb(),o.Tb(),o.Tb()}if(2&e){var r=o.gc();o.Cb(1),o.lc("ngClass",o.oc(1,ie,!0===r.optionsSelected.darkMode))}}function ce(e,t){1&e&&(o.Ub(0,"p",45),o.Bc(1,"Tap Anywhere To Continue"),o.Tb())}function le(e,t){1&e&&(o.Ub(0,"p",45),o.Bc(1,"Welcome!"),o.Tb())}function ue(e,t){if(1&e){var s=o.Vb();o.Ub(0,"span"),o.Ub(1,"p",46),o.Bc(2,"Welcome To Mason!"),o.Tb(),o.Ub(3,"p",46),o.Bc(4,"The game where you make bricks and attempt to rule the world!"),o.Tb(),o.Ub(5,"p",46),o.Bc(6,"You appear to be new, would you like to learn how to play?"),o.Tb(),o.Ub(7,"button",47),o.cc("click",(function(e){return o.uc(s),o.gc(2).beginTutorial()})),o.Bc(8,"Yes Please!"),o.Tb(),o.Ub(9,"button",47),o.cc("click",(function(e){return o.uc(s),o.gc(2).tutorialDone()})),o.Bc(10,"I know what I'm doing"),o.Tb(),o.Tb()}}function he(e,t){1&e&&(o.Ub(0,"p",46),o.Bc(1,"First off I want to say thank you for playing! If you're here, then I know you're going to like this \ud83d\udc4d"),o.Tb())}function de(e,t){1&e&&(o.Ub(0,"p",46),o.Bc(1,"The first thing you want to do is to Chisel rocks into bricks. This will be your source of income. Select the 'Chisel' button to start to shape your bicks."),o.Tb())}function pe(e,t){1&e&&(o.Ub(0,"p",46),o.Bc(1,"When you have one or more bricks, you can sell them. Click the 'Sell' button to exchange your bricks for money."),o.Tb())}function ye(e,t){1&e&&(o.Ub(0,"p",46),o.Bc(1,"When you have some money on hand, you can upgrade your tools or hire some workers to help you make and sell bricks. To see the upgrades availiable, Select the 'Upgrade' button."),o.Tb())}function me(e,t){1&e&&(o.Ub(0,"p",46),o.Bc(1,"Keep in mind, workers will want to be paid based on their levels. A worker's pay check begins at $2 a day and will increase $2 per each level."),o.Tb())}function be(e,t){1&e&&(o.Ub(0,"p",46),o.Bc(1,"The bartering skill is useful to sell more bricks at a time for more money. Traders you hire will get better at bartering as you do."),o.Tb())}function ve(e,t){1&e&&(o.Ub(0,"p",46),o.Bc(1,"Complete quests for bonus cash. You can check your current quest by clicking the 'Stats' button."),o.Tb())}function ge(e,t){1&e&&(o.Ub(0,"p",46),o.Bc(1,"When new areas are unlocked, you can go to them by clicking on the 'Areas' button at the top right of the screen."),o.Tb())}function ke(e,t){1&e&&(o.Ub(0,"p",46),o.Bc(1,"That should get you started. As your riches grow, so will the challenges that lie ahead. Good luck!"),o.Tb())}function Te(e,t){if(1&e){var s=o.Vb();o.Ub(0,"div",48),o.cc("click",(function(e){return o.uc(s),o.gc().closeNewPlayerPrompt()})),o.Ub(1,"div",42),o.Ub(2,"mat-toolbar",43),o.Ub(3,"div",44),o.Ac(4,ce,2,0,"p",49),o.Ac(5,le,2,0,"p",49),o.Tb(),o.Tb(),o.Ac(6,ue,11,0,"span",32),o.Ac(7,he,2,0,"p",50),o.Ac(8,de,2,0,"p",50),o.Ac(9,pe,2,0,"p",50),o.Ac(10,ye,2,0,"p",50),o.Ac(11,me,2,0,"p",50),o.Ac(12,be,2,0,"p",50),o.Ac(13,ve,2,0,"p",50),o.Ac(14,ge,2,0,"p",50),o.Ac(15,ke,2,0,"p",50),o.Tb(),o.Tb()}if(2&e){var r=o.gc();o.Cb(1),o.lc("ngClass",o.oc(13,ie,!0===r.optionsSelected.darkMode)),o.Cb(3),o.lc("ngIf",r.tutorialStep<9),o.Cb(1),o.lc("ngIf",9===r.tutorialStep),o.Cb(1),o.lc("ngIf",10===r.tutorialStep),o.Cb(1),o.lc("ngIf",9===r.tutorialStep),o.Cb(1),o.lc("ngIf",8===r.tutorialStep),o.Cb(1),o.lc("ngIf",7===r.tutorialStep),o.Cb(1),o.lc("ngIf",6===r.tutorialStep),o.Cb(1),o.lc("ngIf",5===r.tutorialStep),o.Cb(1),o.lc("ngIf",4===r.tutorialStep),o.Cb(1),o.lc("ngIf",3===r.tutorialStep),o.Cb(1),o.lc("ngIf",2===r.tutorialStep),o.Cb(1),o.lc("ngIf",1===r.tutorialStep)}}function Ce(e,t){1&e&&(o.Ub(0,"p",45),o.Bc(1,"Tap Anywhere To Continue"),o.Tb())}function fe(e,t){1&e&&(o.Ub(0,"p",45),o.Bc(1,"Congratulations!"),o.Tb())}function Re(e,t){if(1&e){var s=o.Vb();o.Ub(0,"span"),o.Ub(1,"p",46),o.Bc(2,"You have proven that you can run a profitable business \ud83d\udc4d"),o.Tb(),o.Ub(3,"p",46),o.Bc(4,"With more money comes more problems unfortunately... Would you like to know what's coming next?"),o.Tb(),o.Ub(5,"button",51),o.cc("click",(function(e){return o.uc(s),o.gc(2).beginVaultTutorial()})),o.Bc(6,"Yes Please!"),o.Tb(),o.Ub(7,"button",51),o.cc("click",(function(e){return o.uc(s),o.gc(2).vaultTutorialDone()})),o.Bc(8,"I know what I'm doing"),o.Tb(),o.Tb()}if(2&e){var r=o.gc(2);o.Cb(5),o.lc("disabled",r.newLevelCounter<=2),o.Cb(2),o.lc("disabled",r.newLevelCounter<=2)}}function we(e,t){1&e&&(o.Ub(0,"p",46),o.Bc(1,"First off, I want you to know that There's no need to panic. But your vault is under ATTACK!"),o.Tb())}function We(e,t){1&e&&(o.Ub(0,"p",46),o.Bc(1,"Bandits have been spotted coming this way! It looks like your wealth has attracted their attention..."),o.Tb())}function qe(e,t){1&e&&(o.Ub(0,"p",46),o.Bc(1,"Don't be surprised if they keep coming back. You will have to hire some help to keep the bandits away."),o.Tb())}function Se(e,t){1&e&&(o.Ub(0,"p",46),o.Bc(1,"You can hire guards in your Upgrades now. You can also upgrade their weapons and armor as well."),o.Tb())}function Le(e,t){1&e&&(o.Ub(0,"p",46),o.Bc(1,"Luckily for you, you have three guards on hand! You'll just have to tell them where to guard. More on that later."),o.Tb())}function Me(e,t){1&e&&(o.Ub(0,"p",46),o.Bc(1,"Keep in mind, if the bandits take too much of your money and you can't pay for your workers, you may have to fire them. That's now an option in the Upgrades. Don't let your funds dip below $0."),o.Tb())}function xe(e,t){1&e&&(o.Ub(0,"p",46),o.Bc(1,"Now let's go to your vault. Tap on the Areas button at the top right of the screen and select the Vault."),o.Tb())}function Ue(e,t){if(1&e){var s=o.Vb();o.Ub(0,"div",48),o.cc("click",(function(e){return o.uc(s),o.gc().closeNewPlayerVaultPrompt()})),o.Ub(1,"div",42),o.Ub(2,"mat-toolbar",43),o.Ub(3,"div",44),o.Ac(4,Ce,2,0,"p",49),o.Ac(5,fe,2,0,"p",49),o.Tb(),o.Tb(),o.Ac(6,Re,9,2,"span",32),o.Ac(7,we,2,0,"p",50),o.Ac(8,We,2,0,"p",50),o.Ac(9,qe,2,0,"p",50),o.Ac(10,Se,2,0,"p",50),o.Ac(11,Le,2,0,"p",50),o.Ac(12,Me,2,0,"p",50),o.Ac(13,xe,2,0,"p",50),o.Tb(),o.Tb()}if(2&e){var r=o.gc();o.Cb(1),o.lc("ngClass",o.oc(11,ie,!0===r.optionsSelected.darkMode)),o.Cb(3),o.lc("ngIf",r.vaultTutorialStep<8),o.Cb(1),o.lc("ngIf",8===r.vaultTutorialStep),o.Cb(1),o.lc("ngIf",8===r.vaultTutorialStep),o.Cb(1),o.lc("ngIf",7===r.vaultTutorialStep),o.Cb(1),o.lc("ngIf",6===r.vaultTutorialStep),o.Cb(1),o.lc("ngIf",5===r.vaultTutorialStep),o.Cb(1),o.lc("ngIf",4===r.vaultTutorialStep),o.Cb(1),o.lc("ngIf",3===r.vaultTutorialStep),o.Cb(1),o.lc("ngIf",2===r.vaultTutorialStep),o.Cb(1),o.lc("ngIf",1===r.vaultTutorialStep)}}function Be(e,t){1&e&&(o.Ub(0,"p",45),o.Bc(1,"Tap Anywhere To Continue"),o.Tb())}function Pe(e,t){1&e&&(o.Ub(0,"span"),o.Ub(1,"p",46),o.Bc(2,"Good deal, you made it!"),o.Tb(),o.Ub(3,"p",46),o.Bc(4,"Here is your vault. This is where all your money is stored. Now let's put your guards to good use."),o.Tb(),o.Tb())}function Ie(e,t){1&e&&(o.Ub(0,"p",46),o.Bc(1,"To place a guard on the map, tap the screen in the place you'd like to put it."),o.Tb())}function Ae(e,t){1&e&&(o.Ub(0,"p",46),o.Bc(1,"You can't put a guard on top of the vault, obviously."),o.Tb())}function Ge(e,t){1&e&&(o.Ub(0,"p",46),o.Bc(1,"The Guards can see very well in front of them but it is possible for bandits to sneak around them. Place your guards in front of the bandits. Not behind them."),o.Tb())}function Oe(e,t){1&e&&(o.Ub(0,"p",46),o.Bc(1,"Admittedly, your guards don't look as equiped as the bandits coming this way.. Use them wisely!"),o.Tb())}function Ve(e,t){1&e&&(o.Ub(0,"p",46),o.Bc(1,"When this battle is over, I would recommend upgrading your guards and perhaps hire more of them."),o.Tb())}function De(e,t){1&e&&(o.Ub(0,"p",46),o.Bc(1,"The bandits will be here any second, get ready!"),o.Tb())}function _e(e,t){if(1&e){var s=o.Vb();o.Ub(0,"div",48),o.cc("click",(function(e){return o.uc(s),o.gc().closeNewPlayerVaultSecPrompt()})),o.Ub(1,"div",42),o.Ub(2,"mat-toolbar",43),o.Ub(3,"div",44),o.Ac(4,Be,2,0,"p",49),o.Tb(),o.Tb(),o.Ac(5,Pe,5,0,"span",32),o.Ac(6,Ie,2,0,"p",50),o.Ac(7,Ae,2,0,"p",50),o.Ac(8,Ge,2,0,"p",50),o.Ac(9,Oe,2,0,"p",50),o.Ac(10,Ve,2,0,"p",50),o.Ac(11,De,2,0,"p",50),o.Tb(),o.Tb()}if(2&e){var r=o.gc();o.Cb(1),o.lc("ngClass",o.oc(9,ie,!0===r.optionsSelected.darkMode)),o.Cb(3),o.lc("ngIf",r.vaultSecTutorialStep<=7),o.Cb(1),o.lc("ngIf",7===r.vaultSecTutorialStep),o.Cb(1),o.lc("ngIf",6===r.vaultSecTutorialStep),o.Cb(1),o.lc("ngIf",5===r.vaultSecTutorialStep),o.Cb(1),o.lc("ngIf",4===r.vaultSecTutorialStep),o.Cb(1),o.lc("ngIf",3===r.vaultSecTutorialStep),o.Cb(1),o.lc("ngIf",2===r.vaultSecTutorialStep),o.Cb(1),o.lc("ngIf",1===r.vaultSecTutorialStep)}}function ze(e,t){if(1&e){var s=o.Vb();o.Ub(0,"div",41),o.Ub(1,"div",42),o.Ub(2,"mat-toolbar",43),o.Ub(3,"div",44),o.Ub(4,"p",45),o.Bc(5,"It's All Over..."),o.Tb(),o.Tb(),o.Tb(),o.Ub(6,"span"),o.Ub(7,"p",46),o.Bc(8,"I'm sorry but you've gone out of business..."),o.Tb(),o.Ub(9,"p",46),o.Bc(10,"Would you like to start a new game?"),o.Tb(),o.Ub(11,"button",51),o.cc("click",(function(e){return o.uc(s),o.gc().restartGame()})),o.Bc(12,"Start Over"),o.Tb(),o.Tb(),o.Tb(),o.Tb()}if(2&e){var r=o.gc();o.Cb(1),o.lc("ngClass",o.oc(2,ie,!0===r.optionsSelected.darkMode)),o.Cb(10),o.lc("disabled",r.endGameCounter<=2)}}var He,Fe,je=[{path:"",component:(He=function(){function e(t,s){_classCallCheck(this,e),this.swUpdate=t,this.ref=s,this.tradeWorkerGroup=[],this.stoneWorkerGroup=[],this.guardGroup=[],this.banditGroup=[],this.clicks=0,this.bricks=0,this.money=0,this.chiselLvl=0,this.barterLvl=0,this.stoneWorkerLvl=0,this.tradeWorkerLvl=0,this.guardWeaponLvl=0,this.guardArmorLvl=0,this.guardSpeedLvl=0,this.dayCounter=0,this.daysPast=0,this.version=.5,this.totalClicks=0,this.totalBricks=0,this.totalMoney=0,this.newPlayer=!0,this.newPlayerVault=!0,this.tutorialStep=10,this.vaultTutorialStep=8,this.vaultSecTutorialStep=7,this.tutorialStart=!1,this.isQuestAvailiable=!1,this.gameLevel=1,this.banditWave=0,this.tradeWorkersCount=0,this.stoneCuttersCount=0,this.guardCount=0,this.totalGuards=0,this.tutorialGuards=0,this.endGameCounter=0,this.newLevelCounter=0,this.stoneIconPath="assets/images/rock4.png",this.guardIconPath="assets/images/guard.png",this.banditIconPath="assets/images/bandit.png",this.chiselSoundPath="assets/sounds/chisel.wav",this.sellSoundPath="assets/sounds/sell.wav",this.chiselSound=new Audio,this.sellSound=new Audio,this.isGuardMoneyView=!1,this.quests={questLvl:0,questDesc:"",questReward:0,completed:!1,quest:{complete:!1,chiselLvl:0,barterLvl:0,masons:0,masonLvl:0,traders:0,traderLvl:0}},this.sky={sun:{x:0,y:0},moon:{x:0,y:0}},this.housingLimit=8,this.housingLvl=0,this.totalWorkers=0,this.stockpileLvl=0,this.stockpile=10,this.screenWidth=0,this.screenChange=!1,this.currentChapter="Humble Beginnings",this.banditWaveCounter=0,this.banditSpawnCount=0,this.isBanditWaveStarted=!1,this.moneyTaken=0,this.credit=3,this.banditsStopped=0,this.playerResources={chiselLvl:this.chiselLvl,money:this.money,bricks:this.bricks,clicks:this.clicks,barterLvl:this.barterLvl,tradeWorkers:this.tradeWorkerGroup,tradeWorkersCount:this.tradeWorkersCount,tradeWorkersLvl:this.tradeWorkerLvl,stoneWorkers:this.stoneWorkerGroup,stoneCuttersCount:this.stoneCuttersCount,stoneWorkerLvl:this.stoneWorkerLvl,guards:this.guardGroup,guardCount:this.guardCount,guardWeaponLvl:this.guardWeaponLvl,guardArmorLvl:this.guardArmorLvl,guardSpeedLvl:this.guardSpeedLvl,dayCounter:this.dayCounter,daysPast:this.daysPast,version:this.version,totalClicks:this.totalClicks,totalBricks:this.totalBricks,totalMoney:this.totalMoney,newPlayer:this.newPlayer,quests:this.quests,sky:this.sky,housingLimit:this.housingLimit,housingLvl:this.housingLvl,totalWorkers:this.totalWorkers,stockpile:this.stockpile,stockpileLvl:this.stockpileLvl,screenWidth:this.screenWidth,screenChange:this.screenChange,gameLevel:this.gameLevel,currentChapter:this.currentChapter,newPlayerVault:this.newPlayerVault,banditWave:this.banditWave,bandits:this.banditGroup,banditWaveCounter:this.banditWaveCounter,banditSpawnCount:this.banditSpawnCount,isBanditWaveStarted:this.isBanditWaveStarted,moneyTaken:this.moneyTaken,credit:this.credit,banditsStopped:this.banditsStopped,totalGuards:this.totalGuards,tutorialGuards:this.tutorialGuards},this.gameUpdateWarning=!1,this.isUpgradeDisplayed=!1,this.isStatsDisplayed=!1,this.gameOver=!1,this.tradeWorkerObj={speed:0,frequency:Math.floor(5*Math.random())+1,x:0,y:0},this.optionsSelected={darkMode:!0,soundsOn:!0}}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this;if(this.swUpdate.isEnabled&&(this.updateWatch=this.swUpdate.available.subscribe((function(){e.gameUpdateWarning=!0}))),this.chiselSound.src=this.chiselSoundPath,this.chiselSound.load(),this.sellSound.src=this.sellSoundPath,this.chiselSound.load(),localStorage.length>0&&localStorage.getItem("mason_options")){var t=JSON.parse(localStorage.getItem("mason_options"));this.optionsSelected={darkMode:t.darkMode,soundsOn:t.soundsOn};var s=document.getElementsByTagName("body");this.optionsSelected.darkMode?s[0].classList.add("darkMode"):s[0].classList.remove("darkMode")}else{document.getElementsByTagName("body")[0].classList.add("darkMode");var r=JSON.stringify(this.optionsSelected);localStorage.setItem("mason_options",r)}if(localStorage.length>0&&localStorage.getItem("mason_data")){var a=JSON.parse(localStorage.getItem("mason_data"));this.playerResources={chiselLvl:a.chiselLvl?a.chiselLvl:0,money:a.money?a.money:0,bricks:a.bricks?a.bricks:0,clicks:a.clicks?a.clicks:0,barterLvl:a.barterLvl?a.barterLvl:0,tradeWorkers:a.tradeWorkers?a.tradeWorkers:[],tradeWorkersCount:a.tradeWorkersCount?a.tradeWorkersCount:0,tradeWorkersLvl:a.tradeWorkersLvl?a.tradeWorkersLvl:0,stoneWorkers:a.stoneWorkers?a.stoneWorkers:[],stoneCuttersCount:a.stoneCuttersCount?a.stoneCuttersCount:0,stoneWorkerLvl:a.stoneWorkerLvl?a.stoneWorkerLvl:0,guards:a.guards?a.guards:[],guardCount:a.guardCount?a.guardCount:0,guardWeaponLvl:a.guardWeaponLvl?a.guardWeaponLvl:0,guardArmorLvl:a.guardArmorLvl?a.guardArmorLvl:0,guardSpeedLvl:a.guardSpeedLvl?a.guardSpeedLvl:0,dayCounter:a.dayCounter?a.dayCounter:0,daysPast:a.daysPast?a.daysPast:0,version:a.version,totalClicks:a.totalClicks?a.totalClicks:0,totalBricks:a.totalBricks?a.totalBricks:0,totalMoney:a.totalMoney?a.totalMoney:0,newPlayer:void 0===a.newPlayer,quests:void 0===a.quests?this.quests:a.quests,sky:void 0===a.sky?this.sky:a.sky,housingLimit:void 0===a.housingLimit?this.housingLimit:a.housingLimit,housingLvl:void 0===a.housingLvl?this.housingLvl:a.housingLvl,totalWorkers:void 0===a.totalWorkers?this.totalWorkers:a.totalWorkers,stockpile:void 0===a.stockpile?this.stockpile:a.stockpile,stockpileLvl:void 0===a.stockpileLvl?this.stockpileLvl:a.stockpileLvl,screenWidth:void 0===a.screenWidth?this.screenWidth:a.screenWidth,screenChange:void 0===a.screenChange?this.screenChange:a.screenChange,gameLevel:void 0===a.gameLevel?this.gameLevel:a.gameLevel,currentChapter:void 0===a.currentChapter?this.currentChapter:a.currentChapter,newPlayerVault:void 0===a.newPlayerVault?this.newPlayerVault:a.newPlayerVault,banditWave:void 0===a.banditWave?this.banditWave:a.banditWave,bandits:a.bandits?a.bandits:[],banditWaveCounter:a.banditWaveCounter?a.banditWaveCounter:0,banditSpawnCount:a.banditSpawnCount?a.banditSpawnCount:0,isBanditWaveStarted:!!a.isBanditWaveStarted&&a.isBanditWaveStarted,moneyTaken:a.moneyTaken?a.moneyTaken:0,credit:a.credit?a.credit:3,banditsStopped:a.banditsStopped?a.banditsStopped:0,totalGuards:a.totalGuards?a.totalGuards:0,tutorialGuards:a.tutorialGuards?a.tutorialGuards:0},this.getScreenWidth(),this.chiselLvl=a.chiselLvl?a.chiselLvl:0,this.money=a.money?a.money:0,this.bricks=a.bricks?a.bricks:0,this.clicks=a.clicks?a.clicks:0,this.barterLvl=a.barterLvl?a.barterLvl:0,this.tradeWorkerGroup=a.tradeWorkers?a.tradeWorkers:[],this.tradeWorkersCount=a.tradeWorkersCount?a.tradeWorkersCount:0,this.tradeWorkerLvl=a.tradeWorkersLvl?a.tradeWorkersLvl:0,this.stoneWorkerGroup=a.stoneWorkers?a.stoneWorkers:[],this.stoneCuttersCount=a.stoneCuttersCount?a.stoneCuttersCount:0,this.stoneWorkerLvl=a.stoneWorkerLvl?a.stoneWorkerLvl:0,this.guardGroup=a.guards?a.guards:[],this.guardCount=a.guardCount?a.guardCount:0,this.guardWeaponLvl=a.guardWeaponLvl?a.guardWeaponLvl:0,this.guardArmorLvl=a.guardArmorLvl?a.guardArmorLvl:0,this.guardSpeedLvl=a.guardSpeedLvl?a.guardSpeedLvl:0,this.dayCounter=a.dayCounter?a.dayCounter:0,this.daysPast=a.daysPast?a.daysPast:0,this.version=a.version,this.totalClicks=a.totalClicks?a.totalClicks:0,this.totalBricks=a.totalBricks?a.totalBricks:0,this.totalMoney=a.totalMoney?a.totalMoney:0,this.newPlayer=void 0===a.newPlayer,this.quests=void 0===a.quests?this.quests:a.quests,this.sky=void 0===a.sky?this.sky:a.sky,this.housingLimit=void 0===a.housingLimit?this.housingLimit:a.housingLimit,this.housingLvl=void 0===a.housingLvl?this.housingLvl:a.housingLvl,this.totalWorkers=void 0===a.totalWorkers?this.totalWorkers:a.totalWorkers,this.stockpile=void 0===a.stockpile?this.stockpile:a.stockpile,this.stockpileLvl=void 0===a.stockpileLvl?this.stockpileLvl:a.stockpileLvl,this.screenWidth=void 0===a.screenWidth?this.screenWidth:a.screenWidth,this.screenChange=void 0===a.screenChange?this.screenChange:a.screenChange,this.gameLevel=void 0===a.gameLevel?this.gameLevel:a.gameLevel,this.currentChapter=void 0===a.currentChapter?this.currentChapter:a.currentChapter,this.newPlayerVault=void 0===a.newPlayerVault?this.newPlayerVault:a.newPlayerVault,this.banditWave=void 0===a.banditWave?this.banditWave:a.banditWave,this.banditGroup=a.bandits?a.bandits:[],this.banditWaveCounter=a.banditWaveCounter?a.banditWaveCounter:0,this.banditSpawnCount=a.banditSpawnCount?a.banditSpawnCount:0,this.isBanditWaveStarted=!!a.isBanditWaveStarted&&a.isBanditWaveStarted,this.moneyTaken=a.moneyTaken?a.moneyTaken:0,this.credit=a.credit?a.credit:0,this.banditsStopped=a.banditsStopped?a.banditsStopped:0,this.totalGuards=a.totalGuards?a.totalGuards:0,this.tutorialGuards=a.tutorialGuards?a.tutorialGuards:0}}},{key:"chisleStone",value:function(){this.playerResources.bricks<this.playerResources.stockpile&&(this.optionsSelected.soundsOn&&this.chiselSound.play(),this.isQuestAvailiable=!1,this.clicks+=1,this.totalClicks+=1,this.playerResources={chiselLvl:this.chiselLvl,money:this.money,bricks:this.bricks,clicks:this.clicks,barterLvl:this.barterLvl,tradeWorkers:this.tradeWorkerGroup,tradeWorkersCount:this.tradeWorkersCount,tradeWorkersLvl:this.tradeWorkerLvl,stoneWorkers:this.stoneWorkerGroup,stoneCuttersCount:this.stoneCuttersCount,stoneWorkerLvl:this.stoneWorkerLvl,guards:this.guardGroup,guardCount:this.guardCount,guardWeaponLvl:this.guardWeaponLvl,guardArmorLvl:this.guardArmorLvl,guardSpeedLvl:this.guardSpeedLvl,dayCounter:this.dayCounter,daysPast:this.daysPast,version:this.version,totalClicks:this.totalClicks,totalBricks:this.totalBricks,totalMoney:this.totalMoney,newPlayer:this.newPlayer,quests:this.quests,sky:this.sky,housingLimit:this.housingLimit,housingLvl:this.housingLvl,totalWorkers:this.totalWorkers,stockpile:this.stockpile,stockpileLvl:this.stockpileLvl,screenWidth:this.screenWidth,screenChange:this.screenChange,gameLevel:this.gameLevel,currentChapter:this.currentChapter,newPlayerVault:this.newPlayerVault,banditWave:this.banditWave,bandits:this.banditGroup,banditWaveCounter:this.banditWaveCounter,banditSpawnCount:this.banditSpawnCount,isBanditWaveStarted:this.isBanditWaveStarted,moneyTaken:this.moneyTaken,credit:this.credit,banditsStopped:this.banditsStopped,totalGuards:this.totalGuards,tutorialGuards:this.tutorialGuards},this.ref.markForCheck())}},{key:"sellStone",value:function(){var e=Math.floor(Math.random()*(this.barterLvl+1))+1;if(e>=this.bricks&&(e=this.bricks),this.bricks>0){var t=(Math.floor(Math.random()*(this.barterLvl+3+this.playerResources.tradeWorkersLvl))+(1+this.barterLvl+this.playerResources.tradeWorkersLvl))*e;this.money+=t,this.totalMoney+=t,this.bricks-=e,this.totalClicks+=1,this.optionsSelected.soundsOn&&this.sellSound.play()}else this.bricks<=0&&(this.bricks=0);this.playerResources.totalClicks=this.totalClicks,this.playerResources.totalMoney=this.totalMoney,this.playerResources.money=this.money,this.playerResources.bricks=this.bricks,this.ref.markForCheck()}},{key:"playerResourcesReturn",value:function(e){var t=this;if(this.playerResources=e,this.clicks=e.clicks,this.money=e.money,this.totalMoney=e.totalMoney,this.bricks=e.bricks,this.chiselLvl=e.chiselLvl,this.tradeWorkerLvl=e.tradeWorkersLvl,this.tradeWorkersCount=e.tradeWorkersCount,this.stoneWorkerLvl=e.stoneWorkerLvl,this.stoneCuttersCount=e.stoneCuttersCount,this.barterLvl=e.barterLvl,this.dayCounter=e.dayCounter,this.daysPast=e.daysPast,this.totalBricks=e.totalBricks,this.newPlayer=e.newPlayer,this.sky=e.sky,this.housingLimit=e.housingLimit,this.housingLvl=e.housingLvl,this.totalWorkers=e.totalWorkers,this.stockpile=e.stockpile,this.stockpileLvl=e.stockpileLvl,this.screenWidth=e.screenWidth,this.screenChange=e.screenChange,this.gameLevel=e.gameLevel,this.currentChapter=e.currentChapter,this.newPlayerVault=e.newPlayerVault,this.banditWave=e.banditWave,this.guardWeaponLvl=e.guardWeaponLvl,this.guardArmorLvl=e.guardArmorLvl,this.guardSpeedLvl=e.guardSpeedLvl,this.guardCount=e.guardCount,this.banditWaveCounter=e.banditWaveCounter,this.banditSpawnCount=e.banditSpawnCount,this.isBanditWaveStarted=e.isBanditWaveStarted,this.moneyTaken=e.moneyTaken,this.credit=e.credit,this.banditsStopped=e.banditsStopped,this.totalGuards=e.totalGuards,this.tutorialGuards=e.tutorialGuards,this.setQuests(),0===this.playerResources.credit){this.gameOver=!0;var s=setInterval((function(){t.endGameCounter++,t.endGameCounter>=2&&(t.endGameCounter=0,clearInterval(s))}),1e3)}this.ref.markForCheck()}},{key:"stoneWorkerReturn",value:function(e){if(e){var t={image:new Image,speed:0,frequency:Math.floor(5*Math.random())+1,workLoad:Math.floor(5*Math.random())+3,x:0,y:0,startPos:0,direction:0,startedWork:!1};this.stoneWorkerGroup.push(t),this.playerResources.stoneWorkers=this.stoneWorkerGroup,this.ref.markForCheck()}}},{key:"tradeWorkerReturn",value:function(e){if(e){var t={image:new Image,speed:0,frequency:Math.floor(5*Math.random())+1,x:0,y:0,startPos:0,direction:0,startedWork:!1};this.tradeWorkerGroup.push(t),this.playerResources.tradeWorkers=this.tradeWorkerGroup,this.ref.markForCheck()}}},{key:"guardReturn",value:function(e){e&&(this.guardCount++,this.totalGuards++,this.totalWorkers++,this.playerResources.guardCount=this.guardCount,this.playerResources.totalGuards=this.totalGuards,this.playerResources.totalWorkers=this.totalWorkers,this.ref.markForCheck())}},{key:"displayUpgrades",value:function(){this.isUpgradeDisplayed?this.isUpgradeDisplayed=!1:(this.saveGame(),this.isUpgradeDisplayed=!0,this.playerResources.clicks=0,this.clicks=0)}},{key:"displayStats",value:function(){this.isStatsDisplayed?this.isStatsDisplayed=!1:(this.saveGame(),this.isStatsDisplayed=!0,this.playerResources.clicks=0,this.clicks=0)}},{key:"getNewUpdatesFromServer",value:function(){this.gameUpdateWarning=!1,window.location.reload()}},{key:"getUpdateLater",value:function(){this.updateWatch&&(this.updateWatch.unsubscribe(),this.gameUpdateWarning=!1)}},{key:"saveGame",value:function(){var e=JSON.stringify(this.playerResources);localStorage.setItem("mason_data",e)}},{key:"saveGameAndQuit",value:function(){var e=JSON.stringify(this.playerResources);localStorage.setItem("mason_data",e),history.back()}},{key:"closeNewPlayerPrompt",value:function(){this.tutorialStep--,0===this.tutorialStep&&(this.tutorialDone(),this.saveGame())}},{key:"closeNewPlayerVaultPrompt",value:function(){this.vaultTutorialStep<8&&this.vaultTutorialStep--}},{key:"closeNewPlayerVaultSecPrompt",value:function(){this.vaultSecTutorialStep--,0===this.vaultSecTutorialStep&&this.vaultTutorialDone()}},{key:"beginTutorial",value:function(){this.tutorialStep=10}},{key:"tutorialDone",value:function(){this.newPlayer=!1,this.tutorialStep=10,this.playerResources.newPlayer=!1,this.tutorialStart=!1,this.isQuestAvailiable=!0,this.ref.markForCheck(),this.newQuestMessage(),this.saveGame()}},{key:"vaultTutorialDone",value:function(){this.newPlayerVault=!1,this.playerResources.newPlayerVault=!1,this.playerResources.banditWaveCounter=257,this.newLevelCounter=0,this.ref.markForCheck(),this.saveGame()}},{key:"beginVaultTutorial",value:function(){this.vaultTutorialStep--}},{key:"getScreenWidth",value:function(){0===this.playerResources.screenWidth&&(this.playerResources.screenWidth=window.innerWidth),this.playerResources.screenWidth===window.innerWidth?this.playerResources.screenChange=!1:this.playerResources.screenWidth!==window.innerWidth&&(this.playerResources.screenChange=!0,this.playerResources.screenWidth=window.innerWidth)}},{key:"onResize",value:function(e){this.getScreenWidth()}},{key:"unfocusAllButtons",value:function(e){e.preventDefault(),e.stopPropagation()}},{key:"ShowQuarry",value:function(){this.isGuardMoneyView=!1}},{key:"ShowVault",value:function(){this.isGuardMoneyView=!0}},{key:"restartGame",value:function(){localStorage.removeItem("mason_data"),window.location.reload()}},{key:"newQuestMessage",value:function(){var e=this,t=setInterval((function(){e.isQuestAvailiable=!1,t&&clearInterval(t)}),4500)}},{key:"questCompleted",value:function(){var e=this;this.quests.completed=!0,this.quests.quest.complete=!0;var t=setInterval((function(){e.quests.completed=!1,e.isQuestAvailiable=!0,e.ref.markForCheck(),e.newQuestMessage(),t&&clearInterval(t)}),3500)}},{key:"setQuests",value:function(){var e=this;if(0!==this.quests.questLvl||this.quests.completed)if(1!==this.quests.questLvl||this.quests.completed)if(2!==this.quests.questLvl||this.quests.completed)if(3!==this.quests.questLvl||this.quests.completed)if(4!==this.quests.questLvl||this.quests.completed)if(5!==this.quests.questLvl||this.quests.completed)if(6!==this.quests.questLvl||this.quests.completed)if(7!==this.quests.questLvl||this.quests.completed)if(8!==this.quests.questLvl||this.quests.completed)if(9!==this.quests.questLvl||this.quests.completed)if(10!==this.quests.questLvl||this.quests.completed)if(11!==this.quests.questLvl||this.quests.completed)if(12!==this.quests.questLvl||this.quests.completed)if(13!==this.quests.questLvl||this.quests.completed)14!==this.quests.questLvl||this.quests.completed?15!==this.quests.questLvl||this.quests.completed?16!==this.quests.questLvl||this.quests.completed?17!==this.quests.questLvl||this.quests.completed?18!==this.quests.questLvl||this.quests.completed?19!==this.quests.questLvl||this.quests.completed?20!==this.quests.questLvl||this.quests.completed?21!==this.quests.questLvl||this.quests.completed?22!==this.quests.questLvl||this.quests.completed||(this.quests.questDesc="That is all there is for now. Get ready for the next challenge \ud83d\ude47\u200d\u2642\ufe0f",this.currentChapter="Rise To Power",this.playerResources.currentChapter=this.currentChapter,this.playerResources.gameLevel=3,this.quests.quest.complete=!1,this.quests.questReward=1e5):(this.quests.questDesc="Beat 30 waves of bandits",this.quests.quest.complete=!1,this.quests.questReward=2500,this.playerResources.banditWave>30&&!this.quests.quest.complete&&(this.playerResources.totalMoney+=this.quests.questReward,this.playerResources.money+=this.quests.questReward,this.quests.questLvl++,this.questCompleted())):(this.quests.questDesc="Beat 27 waves of bandits",this.quests.quest.complete=!1,this.quests.questReward=2500,this.playerResources.banditWave>27&&!this.quests.quest.complete&&(this.playerResources.totalMoney+=this.quests.questReward,this.playerResources.money+=this.quests.questReward,this.quests.questLvl++,this.questCompleted())):(this.quests.questDesc="Beat 24 waves of bandits",this.quests.quest.complete=!1,this.quests.questReward=2500,this.playerResources.banditWave>24&&!this.quests.quest.complete&&(this.playerResources.totalMoney+=this.quests.questReward,this.playerResources.money+=this.quests.questReward,this.quests.questLvl++,this.questCompleted())):(this.quests.questDesc="Beat 21 waves of bandits",this.quests.quest.complete=!1,this.quests.questReward=2500,this.playerResources.banditWave>21&&!this.quests.quest.complete&&(this.playerResources.totalMoney+=this.quests.questReward,this.playerResources.money+=this.quests.questReward,this.quests.questLvl++,this.questCompleted())):(this.quests.questDesc="Beat 18 waves of bandits",this.quests.quest.complete=!1,this.quests.questReward=2e3,this.playerResources.banditWave>18&&!this.quests.quest.complete&&(this.playerResources.totalMoney+=this.quests.questReward,this.playerResources.money+=this.quests.questReward,this.quests.questLvl++,this.questCompleted())):(this.quests.questDesc="Beat 15 waves of bandits",this.quests.quest.complete=!1,this.quests.questReward=2e3,this.playerResources.banditWave>15&&!this.quests.quest.complete&&(this.playerResources.totalMoney+=this.quests.questReward,this.playerResources.money+=this.quests.questReward,this.quests.questLvl++,this.questCompleted())):(this.quests.questDesc="Beat 12 waves of bandits",this.quests.quest.complete=!1,this.quests.questReward=2e3,this.playerResources.banditWave>12&&!this.quests.quest.complete&&(this.playerResources.totalMoney+=this.quests.questReward,this.playerResources.money+=this.quests.questReward,this.quests.questLvl++,this.questCompleted())):(this.quests.questDesc="Beat 5 waves of bandits",this.quests.quest.complete=!1,this.quests.questReward=1500,this.playerResources.banditWave>5&&!this.quests.quest.complete&&(this.playerResources.totalMoney+=this.quests.questReward,this.playerResources.money+=this.quests.questReward,this.quests.questLvl++,this.questCompleted()));else{if(this.quests.questDesc="Beat 2 waves of bandits",this.currentChapter="Rise To Fame",this.playerResources.currentChapter=this.currentChapter,this.playerResources.gameLevel=2,this.quests.quest.complete=!1,this.quests.questReward=1500,this.playerResources.newPlayerVault&&this.newPlayerVault){this.tutorialGuards=3,this.guardCount=3,this.totalGuards=3,this.playerResources.tutorialGuards=this.tutorialGuards,this.playerResources.guardCount=this.guardCount,this.playerResources.totalGuards=this.totalGuards;var t=setInterval((function(){e.newLevelCounter++,e.newLevelCounter>=2&&clearInterval(t)}),1e3)}this.playerResources.banditWave>2&&!this.quests.quest.complete&&(this.playerResources.totalMoney+=this.quests.questReward,this.playerResources.money+=this.quests.questReward,this.quests.questLvl++,this.questCompleted())}else this.quests.questDesc="Get over $10,000 Total Money",this.quests.quest.complete=!1,this.quests.questReward=1e3,this.playerResources.totalMoney>=1e4&&!this.quests.quest.complete&&(this.playerResources.totalMoney+=this.quests.questReward,this.playerResources.money+=this.quests.questReward,this.quests.questLvl++,this.questCompleted());else this.quests.questDesc="Get over $5,000 Total Money",this.quests.quest.complete=!1,this.quests.questReward=500,this.playerResources.totalMoney>=5e3&&!this.quests.quest.complete&&(this.playerResources.totalMoney+=this.quests.questReward,this.playerResources.money+=this.quests.questReward,this.quests.questLvl++,this.questCompleted());else this.quests.questDesc="Get over $2,000 Total Money",this.quests.quest.complete=!1,this.quests.questReward=40,this.playerResources.totalMoney>=2e3&&!this.quests.quest.complete&&(this.playerResources.totalMoney+=this.quests.questReward,this.playerResources.money+=this.quests.questReward,this.quests.questLvl++,this.questCompleted());else this.quests.questDesc="Hire A Total Of 5 Masons",this.quests.quest.masons=5,this.quests.questReward=35,this.quests.quest.complete=!1,this.playerResources.stoneCuttersCount>=this.quests.quest.masons&&!this.quests.quest.complete&&(this.playerResources.totalMoney+=this.quests.questReward,this.playerResources.money+=this.quests.questReward,this.quests.questLvl++,this.questCompleted());else this.quests.questDesc="Hire A Total of 3 Traders",this.quests.quest.traders=3,this.quests.questReward=30,this.quests.quest.complete=!1,this.playerResources.tradeWorkersCount>=this.quests.quest.traders&&!this.quests.quest.complete&&(this.playerResources.totalMoney+=this.quests.questReward,this.playerResources.money+=this.quests.questReward,this.quests.questLvl++,this.questCompleted());else this.quests.questDesc="Get Your Barter Skill Up To Level 5",this.quests.quest.barterLvl=5,this.quests.questReward=35,this.quests.quest.complete=!1,this.playerResources.barterLvl>=this.quests.quest.barterLvl&&!this.quests.quest.complete&&(this.playerResources.totalMoney+=this.quests.questReward,this.playerResources.money+=this.quests.questReward,this.quests.questLvl++,this.questCompleted());else this.quests.questDesc="Get Your Chisel Skill Up To Level 7",this.quests.quest.chiselLvl=7,this.quests.questReward=25,this.quests.quest.complete=!1,this.playerResources.chiselLvl>=this.quests.quest.chiselLvl&&!this.quests.quest.complete&&(this.playerResources.totalMoney+=this.quests.questReward,this.playerResources.money+=this.quests.questReward,this.quests.questLvl++,this.questCompleted());else this.quests.questDesc="Upgrade The Stockpile to Level 1",this.quests.quest.complete=!1,this.quests.questReward=15,this.playerResources.stockpileLvl>=1&&!this.quests.quest.complete&&(this.playerResources.totalMoney+=this.quests.questReward,this.playerResources.money+=this.quests.questReward,this.quests.questLvl++,this.questCompleted());else this.quests.questDesc="Upgrade The Housing to Level 1",this.quests.quest.complete=!1,this.quests.questReward=20,this.playerResources.housingLvl>=1&&!this.quests.quest.complete&&(this.playerResources.totalMoney+=this.quests.questReward,this.playerResources.money+=this.quests.questReward,this.quests.questLvl++,this.questCompleted());else this.quests.questDesc="Hire A Mason",this.quests.quest.masons=1,this.quests.questReward=10,this.quests.quest.complete=!1,this.playerResources.stoneCuttersCount>=this.quests.quest.masons&&!this.quests.quest.complete&&(this.playerResources.totalMoney+=this.quests.questReward,this.playerResources.money+=this.quests.questReward,this.quests.questLvl++,this.questCompleted());else this.quests.questDesc="Hire A Trader",this.quests.quest.traders=1,this.quests.questReward=10,this.quests.quest.complete=!1,this.playerResources.tradeWorkersCount>=this.quests.quest.traders&&!this.quests.quest.complete&&(this.playerResources.totalMoney+=this.quests.questReward,this.playerResources.money+=this.quests.questReward,this.quests.questLvl++,this.questCompleted());else this.quests.questDesc="Get Your Barter Skill Up To Level 3",this.quests.quest.barterLvl=3,this.quests.questReward=20,this.quests.quest.complete=!1,this.playerResources.barterLvl>=this.quests.quest.barterLvl&&!this.quests.quest.complete&&(this.playerResources.totalMoney+=this.quests.questReward,this.playerResources.money+=this.quests.questReward,this.quests.questLvl++,this.questCompleted());else this.quests.questDesc="Get Your Chisel Skill Up To Level 3",this.quests.quest.chiselLvl=3,this.quests.questReward=10,this.playerResources.chiselLvl>=this.quests.quest.chiselLvl&&!this.quests.quest.complete&&(this.playerResources.totalMoney+=this.quests.questReward,this.playerResources.money+=this.quests.questReward,this.quests.questLvl++,this.questCompleted());this.playerResources.quests=this.quests}}]),e}(),He.\u0275fac=function(e){return new(e||He)(o.Ob(i.b),o.Ob(o.h))},He.\u0275cmp=o.Ib({type:He,selectors:[["app-mason-game"]],decls:23,vars:10,consts:[[1,"game-content",3,"resize"],[1,"logo-container"],[1,"noSelect",3,"click"],[1,"logo"],[1,"save-text"],["mat-button","",1,"area-btn",3,"matMenuTriggerFor"],["menu","matMenu"],["mat-menu-item","",3,"click"],["mat-menu-item","",3,"click",4,"ngIf"],[1,"game-wrapper"],["class","upgrade-space",4,"ngIf"],["class","game-space",4,"ngIf"],["class","stat-space",4,"ngIf"],["class","modal",4,"ngIf"],["class","modal",3,"click",4,"ngIf"],[1,"upgrade-space"],[1,"options-title-contents",3,"ngClass"],[1,"chapter-text"],["class","quest-completed",3,"width","right",4,"ngIf"],["mat-raised-button","","color","primary",1,"close-upgrades",3,"click"],[3,"playerResources","stoneWorkerReturn","tradeWorkerReturn","guardReturn","playerResourcesReturn"],[1,"quest-completed"],[1,"game-space"],[1,"brick-count",3,"ngClass"],["alt","bricks",1,"brick-icon",3,"src"],[1,"guard-count",3,"ngClass"],["alt","guard",1,"guard-icon",3,"src"],[1,"bandit-count",3,"ngClass"],["alt","bandit",1,"guard-icon",3,"src"],[1,"money-count",3,"ngStyle"],["class","quest-completed",3,"ngClass","width","right",4,"ngIf"],[3,"ngClass","playerResources","isGuardMoneyView","playerResourcesReturn"],[4,"ngIf"],[1,"controls-wrapper"],["mat-raised-button","","color","primary","class","control-button",3,"keydown","click",4,"ngIf"],["mat-raised-button","","color","primary",1,"control-button",3,"keydown","click"],[1,"quest-completed",3,"ngClass"],[1,"stat-space"],[1,"stats-title-contents",3,"ngClass"],["mat-raised-button","","color","primary",1,"close-stats",3,"click"],[3,"playerResources"],[1,"modal"],[1,"info-wrapper",3,"ngClass"],["color","primary"],["id","menu-width"],[1,"info-text"],[1,"info-text","info-text-area"],["mat-raised-button","","color","primary",1,"control-button",3,"click"],[1,"modal",3,"click"],["class","info-text",4,"ngIf"],["class","info-text info-text-area",4,"ngIf"],["mat-raised-button","","color","primary",1,"control-button",3,"disabled","click"]],template:function(e,t){if(1&e&&(o.Ub(0,"div",0),o.cc("resize",(function(e){return t.onResize(e)}),!1,o.tc),o.Ub(1,"span",1),o.Ub(2,"span",2),o.cc("click",(function(e){return t.saveGameAndQuit()})),o.Ub(3,"mat-icon",3),o.Bc(4,"exit_to_app"),o.Tb(),o.Ub(5,"span",4),o.Bc(6,"Exit"),o.Tb(),o.Tb(),o.Tb(),o.Ub(7,"button",5),o.Bc(8,"Areas"),o.Tb(),o.Ub(9,"mat-menu",null,6),o.Ub(11,"button",7),o.cc("click",(function(e){return t.ShowQuarry()})),o.Bc(12,"Quarry"),o.Tb(),o.Ac(13,$,2,0,"button",8),o.Tb(),o.Ub(14,"div",9),o.Ac(15,Q,8,6,"span",10),o.Ac(16,ae,24,34,"span",11),o.Ac(17,oe,7,5,"span",12),o.Ac(18,ne,15,3,"div",13),o.Ac(19,Te,16,15,"div",14),o.Ac(20,Ue,14,13,"div",14),o.Ac(21,_e,12,11,"div",14),o.Ac(22,ze,13,4,"div",13),o.Tb(),o.Tb()),2&e){var s=o.rc(10);o.Cb(7),o.lc("matMenuTriggerFor",s),o.Cb(6),o.lc("ngIf",t.playerResources.gameLevel>=2),o.Cb(2),o.lc("ngIf",t.isUpgradeDisplayed),o.Cb(1),o.lc("ngIf",!t.isUpgradeDisplayed&&!t.isStatsDisplayed),o.Cb(1),o.lc("ngIf",t.isStatsDisplayed),o.Cb(1),o.lc("ngIf",t.gameUpdateWarning),o.Cb(1),o.lc("ngIf",t.newPlayer&&!t.tutorialStart&&t.tutorialStep>0),o.Cb(1),o.lc("ngIf",t.playerResources.newPlayerVault&&13===t.quests.questLvl&&t.vaultTutorialStep>0),o.Cb(1),o.lc("ngIf",t.playerResources.newPlayerVault&&t.isGuardMoneyView),o.Cb(1),o.lc("ngIf",t.gameOver)}},directives:[n.a,c.a,l.c,l.d,l.a,r.k,r.i,U,r.l,O,D,E,u.a],styles:[".brick-icon[_ngcontent-%COMP%]{width:calc(1em - 7%)}.bandit-count[_ngcontent-%COMP%], .brick-count[_ngcontent-%COMP%], .guard-count[_ngcontent-%COMP%]{position:absolute;left:calc(93% - 6.4rem);color:#fff;font-size:calc(2em - 50%)}.guard-count[_ngcontent-%COMP%]{left:calc(93% - 4.5rem)}.bandit-count[_ngcontent-%COMP%]{left:46%;top:3.49rem;opacity:.77}.guard-icon[_ngcontent-%COMP%]{width:calc(1em - 1%)}.money-count[_ngcontent-%COMP%]{position:absolute;left:13%;color:#fff;font-size:calc(2em - 50%)}.close-upgrades[_ngcontent-%COMP%]{display:inline-block;margin-bottom:calc(1% + .4em);position:relative;left:calc(100% - 15em)}.chapter-text[_ngcontent-%COMP%]{display:inline-block;font-weight:700;width:9em}.close-stats[_ngcontent-%COMP%]{display:inline-block;margin-bottom:calc(1% + .4em);position:relative;left:calc(100% - 15em)}.logo-container[_ngcontent-%COMP%]{cursor:pointer;position:absolute;top:calc(1% + .5em);color:#fff;font-weight:700}.save-text[_ngcontent-%COMP%]{position:absolute;top:14%;left:112%}.info-wrapper[_ngcontent-%COMP%]{height:calc(46% + .1em);top:calc(21% - .1em)}.options-title-contents[_ngcontent-%COMP%], .stats-title-contents[_ngcontent-%COMP%]{border-bottom:1px solid #000}.title-dm[_ngcontent-%COMP%]{border-bottom:1px solid #fff}.info-dm[_ngcontent-%COMP%]{background-color:#606060}.quest-completed[_ngcontent-%COMP%]{position:absolute;top:calc(16% + 1.4em);right:calc(2em + 2.4%);text-align:center;width:90%;background-color:#673ab7;border-radius:5px;z-index:10;padding-top:.5em;padding-bottom:.5em}.noSelect[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-align:center;align-items:center;-webkit-box-pack:center;justify-content:center}.display[_ngcontent-%COMP%]{display:inline}.hide[_ngcontent-%COMP%]{display:none}.area-btn[_ngcontent-%COMP%]{font-weight:700;cursor:pointer;position:absolute;top:calc(1% + .5em);color:#fff;left:calc(100% - 6em)}"],changeDetection:0}),He)}],Ee=((Fe=function e(){_classCallCheck(this,e)}).\u0275mod=o.Mb({type:Fe}),Fe.\u0275inj=o.Lb({factory:function(e){return new(e||Fe)},imports:[[a.d.forChild(je)],a.d]}),Fe);s.d(t,"MasonGameModule",(function(){return Ne}));var $e,Ne=(($e=function e(){_classCallCheck(this,e)}).\u0275mod=o.Mb({type:$e}),$e.\u0275inj=o.Lb({factory:function(e){return new(e||$e)},imports:[[Ee,r.c,c.b,u.b,n.b,l.b]]}),$e)}}]);